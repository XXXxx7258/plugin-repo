var cv=Object.defineProperty;var uv=(e,t,n)=>t in e?cv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Cn=(e,t,n)=>uv(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();/**
* @vue/shared v3.5.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Hc(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const Ot={},mr=[],sn=()=>{},Rp=()=>!1,ya=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),zc=e=>e.startsWith("onUpdate:"),ie=Object.assign,Kc=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},hv=Object.prototype.hasOwnProperty,Vt=(e,t)=>hv.call(e,t),ut=Array.isArray,gr=e=>_a(e)==="[object Map]",Cp=e=>_a(e)==="[object Set]",ft=e=>typeof e=="function",Gt=e=>typeof e=="string",vs=e=>typeof e=="symbol",Ut=e=>e!==null&&typeof e=="object",Pp=e=>(Ut(e)||ft(e))&&ft(e.then)&&ft(e.catch),Vp=Object.prototype.toString,_a=e=>Vp.call(e),fv=e=>_a(e).slice(8,-1),xp=e=>_a(e)==="[object Object]",Gc=e=>Gt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,ii=Hc(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),va=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},dv=/-(\w)/g,Ye=va(e=>e.replace(dv,(t,n)=>n?n.toUpperCase():"")),pv=/\B([A-Z])/g,ws=va(e=>e.replace(pv,"-$1").toLowerCase()),wa=va(e=>e.charAt(0).toUpperCase()+e.slice(1)),_l=va(e=>e?`on${wa(e)}`:""),is=(e,t)=>!Object.is(e,t),ko=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},kp=(e,t,n,s=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:s,value:n})},Ql=e=>{const t=parseFloat(e);return isNaN(t)?e:t},mv=e=>{const t=Gt(e)?Number(e):NaN;return isNaN(t)?e:t};let Gh;const Ea=()=>Gh||(Gh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Hi(e){if(ut(e)){const t={};for(let n=0;n<e.length;n++){const s=e[n],r=Gt(s)?vv(s):Hi(s);if(r)for(const i in r)t[i]=r[i]}return t}else if(Gt(e)||Ut(e))return e}const gv=/;(?![^(]*\))/g,yv=/:([^]+)/,_v=/\/\*[^]*?\*\//g;function vv(e){const t={};return e.replace(_v,"").split(gv).forEach(n=>{if(n){const s=n.split(yv);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function rn(e){let t="";if(Gt(e))t=e;else if(ut(e))for(let n=0;n<e.length;n++){const s=rn(e[n]);s&&(t+=s+" ")}else if(Ut(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const wv="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Ev=Hc(wv);function Dp(e){return!!e||e===""}const Op=e=>!!(e&&e.__v_isRef===!0),yt=e=>Gt(e)?e:e==null?"":ut(e)||Ut(e)&&(e.toString===Vp||!ft(e.toString))?Op(e)?yt(e.value):JSON.stringify(e,Np,2):String(e),Np=(e,t)=>Op(t)?Np(e,t.value):gr(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[s,r],i)=>(n[vl(s,i)+" =>"]=r,n),{})}:Cp(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>vl(n))}:vs(t)?vl(t):Ut(t)&&!ut(t)&&!xp(t)?String(t):t,vl=(e,t="")=>{var n;return vs(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};function Tv(e){return e==null?"initial":typeof e=="string"?e===""?" ":e:String(e)}/**
* @vue/reactivity v3.5.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let De;class Av{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=De,!t&&De&&(this.index=(De.scopes||(De.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=De;try{return De=this,t()}finally{De=n}}}on(){++this._on===1&&(this.prevScope=De,De=this)}off(){this._on>0&&--this._on===0&&(De=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function bv(){return De}let Nt;const wl=new WeakSet;class Mp{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,De&&De.active&&De.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,wl.has(this)&&(wl.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Fp(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Wh(this),Up(this);const t=Nt,n=on;Nt=this,on=!0;try{return this.fn()}finally{Bp(this),Nt=t,on=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Jc(t);this.deps=this.depsTail=void 0,Wh(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?wl.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Jl(this)&&this.run()}get dirty(){return Jl(this)}}let Lp=0,oi,ai;function Fp(e,t=!1){if(e.flags|=8,t){e.next=ai,ai=e;return}e.next=oi,oi=e}function Wc(){Lp++}function Qc(){if(--Lp>0)return;if(ai){let t=ai;for(ai=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;oi;){let t=oi;for(oi=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(s){e||(e=s)}t=n}}if(e)throw e}function Up(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Bp(e){let t,n=e.depsTail,s=n;for(;s;){const r=s.prevDep;s.version===-1?(s===n&&(n=r),Jc(s),Iv(s)):t=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=r}e.deps=t,e.depsTail=n}function Jl(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&($p(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function $p(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Ai)||(e.globalVersion=Ai,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Jl(e))))return;e.flags|=2;const t=e.dep,n=Nt,s=on;Nt=e,on=!0;try{Up(e);const r=e.fn(e._value);(t.version===0||is(r,e._value))&&(e.flags|=128,e._value=r,t.version++)}catch(r){throw t.version++,r}finally{Nt=n,on=s,Bp(e),e.flags&=-3}}function Jc(e,t=!1){const{dep:n,prevSub:s,nextSub:r}=e;if(s&&(s.nextSub=r,e.prevSub=void 0),r&&(r.prevSub=s,e.nextSub=void 0),n.subs===e&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)Jc(i,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function Iv(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let on=!0;const jp=[];function Fn(){jp.push(on),on=!1}function Un(){const e=jp.pop();on=e===void 0?!0:e}function Wh(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=Nt;Nt=void 0;try{t()}finally{Nt=n}}}let Ai=0;class Sv{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Xc{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Nt||!on||Nt===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Nt)n=this.activeLink=new Sv(Nt,this),Nt.deps?(n.prevDep=Nt.depsTail,Nt.depsTail.nextDep=n,Nt.depsTail=n):Nt.deps=Nt.depsTail=n,qp(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=Nt.depsTail,n.nextDep=void 0,Nt.depsTail.nextDep=n,Nt.depsTail=n,Nt.deps===n&&(Nt.deps=s)}return n}trigger(t){this.version++,Ai++,this.notify(t)}notify(t){Wc();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Qc()}}}function qp(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let s=t.deps;s;s=s.nextDep)qp(s)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Xl=new WeakMap,js=Symbol(""),Yl=Symbol(""),bi=Symbol("");function we(e,t,n){if(on&&Nt){let s=Xl.get(e);s||Xl.set(e,s=new Map);let r=s.get(n);r||(s.set(n,r=new Xc),r.map=s,r.key=n),r.track()}}function Nn(e,t,n,s,r,i){const o=Xl.get(e);if(!o){Ai++;return}const l=c=>{c&&c.trigger()};if(Wc(),t==="clear")o.forEach(l);else{const c=ut(e),u=c&&Gc(n);if(c&&n==="length"){const h=Number(s);o.forEach((d,m)=>{(m==="length"||m===bi||!vs(m)&&m>=h)&&l(d)})}else switch((n!==void 0||o.has(void 0))&&l(o.get(n)),u&&l(o.get(bi)),t){case"add":c?u&&l(o.get("length")):(l(o.get(js)),gr(e)&&l(o.get(Yl)));break;case"delete":c||(l(o.get(js)),gr(e)&&l(o.get(Yl)));break;case"set":gr(e)&&l(o.get(js));break}}Qc()}function or(e){const t=Ct(e);return t===e?t:(we(t,"iterate",bi),Xe(e)?t:t.map(he))}function Ta(e){return we(e=Ct(e),"iterate",bi),e}const Rv={__proto__:null,[Symbol.iterator](){return El(this,Symbol.iterator,he)},concat(...e){return or(this).concat(...e.map(t=>ut(t)?or(t):t))},entries(){return El(this,"entries",e=>(e[1]=he(e[1]),e))},every(e,t){return Pn(this,"every",e,t,void 0,arguments)},filter(e,t){return Pn(this,"filter",e,t,n=>n.map(he),arguments)},find(e,t){return Pn(this,"find",e,t,he,arguments)},findIndex(e,t){return Pn(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Pn(this,"findLast",e,t,he,arguments)},findLastIndex(e,t){return Pn(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Pn(this,"forEach",e,t,void 0,arguments)},includes(...e){return Tl(this,"includes",e)},indexOf(...e){return Tl(this,"indexOf",e)},join(e){return or(this).join(e)},lastIndexOf(...e){return Tl(this,"lastIndexOf",e)},map(e,t){return Pn(this,"map",e,t,void 0,arguments)},pop(){return Qr(this,"pop")},push(...e){return Qr(this,"push",e)},reduce(e,...t){return Qh(this,"reduce",e,t)},reduceRight(e,...t){return Qh(this,"reduceRight",e,t)},shift(){return Qr(this,"shift")},some(e,t){return Pn(this,"some",e,t,void 0,arguments)},splice(...e){return Qr(this,"splice",e)},toReversed(){return or(this).toReversed()},toSorted(e){return or(this).toSorted(e)},toSpliced(...e){return or(this).toSpliced(...e)},unshift(...e){return Qr(this,"unshift",e)},values(){return El(this,"values",he)}};function El(e,t,n){const s=Ta(e),r=s[t]();return s!==e&&!Xe(e)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.value&&(i.value=n(i.value)),i}),r}const Cv=Array.prototype;function Pn(e,t,n,s,r,i){const o=Ta(e),l=o!==e&&!Xe(e),c=o[t];if(c!==Cv[t]){const d=c.apply(e,i);return l?he(d):d}let u=n;o!==e&&(l?u=function(d,m){return n.call(this,he(d),m,e)}:n.length>2&&(u=function(d,m){return n.call(this,d,m,e)}));const h=c.call(o,u,s);return l&&r?r(h):h}function Qh(e,t,n,s){const r=Ta(e);let i=n;return r!==e&&(Xe(e)?n.length>3&&(i=function(o,l,c){return n.call(this,o,l,c,e)}):i=function(o,l,c){return n.call(this,o,he(l),c,e)}),r[t](i,...s)}function Tl(e,t,n){const s=Ct(e);we(s,"iterate",bi);const r=s[t](...n);return(r===-1||r===!1)&&tu(n[0])?(n[0]=Ct(n[0]),s[t](...n)):r}function Qr(e,t,n=[]){Fn(),Wc();const s=Ct(e)[t].apply(e,n);return Qc(),Un(),s}const Pv=Hc("__proto__,__v_isRef,__isVue"),Hp=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(vs));function Vv(e){vs(e)||(e=String(e));const t=Ct(this);return we(t,"has",e),t.hasOwnProperty(e)}class zp{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,s){if(n==="__v_skip")return t.__v_skip;const r=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return i;if(n==="__v_raw")return s===(r?i?Bv:Qp:i?Wp:Gp).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const o=ut(t);if(!r){let c;if(o&&(c=Rv[n]))return c;if(n==="hasOwnProperty")return Vv}const l=Reflect.get(t,n,be(t)?t:s);return(vs(n)?Hp.has(n):Pv(n))||(r||we(t,"get",n),i)?l:be(l)?o&&Gc(n)?l:l.value:Ut(l)?r?Xp(l):Aa(l):l}}class Kp extends zp{constructor(t=!1){super(!1,t)}set(t,n,s,r){let i=t[n];if(!this._isShallow){const c=us(i);if(!Xe(s)&&!us(s)&&(i=Ct(i),s=Ct(s)),!ut(t)&&be(i)&&!be(s))return c||(i.value=s),!0}const o=ut(t)&&Gc(n)?Number(n)<t.length:Vt(t,n),l=Reflect.set(t,n,s,be(t)?t:r);return t===Ct(r)&&(o?is(s,i)&&Nn(t,"set",n,s):Nn(t,"add",n,s)),l}deleteProperty(t,n){const s=Vt(t,n);t[n];const r=Reflect.deleteProperty(t,n);return r&&s&&Nn(t,"delete",n,void 0),r}has(t,n){const s=Reflect.has(t,n);return(!vs(n)||!Hp.has(n))&&we(t,"has",n),s}ownKeys(t){return we(t,"iterate",ut(t)?"length":js),Reflect.ownKeys(t)}}class xv extends zp{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const kv=new Kp,Dv=new xv,Ov=new Kp(!0);const Zl=e=>e,To=e=>Reflect.getPrototypeOf(e);function Nv(e,t,n){return function(...s){const r=this.__v_raw,i=Ct(r),o=gr(i),l=e==="entries"||e===Symbol.iterator&&o,c=e==="keys"&&o,u=r[e](...s),h=n?Zl:t?Ko:he;return!t&&we(i,"iterate",c?Yl:js),{next(){const{value:d,done:m}=u.next();return m?{value:d,done:m}:{value:l?[h(d[0]),h(d[1])]:h(d),done:m}},[Symbol.iterator](){return this}}}}function Ao(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Mv(e,t){const n={get(r){const i=this.__v_raw,o=Ct(i),l=Ct(r);e||(is(r,l)&&we(o,"get",r),we(o,"get",l));const{has:c}=To(o),u=t?Zl:e?Ko:he;if(c.call(o,r))return u(i.get(r));if(c.call(o,l))return u(i.get(l));i!==o&&i.get(r)},get size(){const r=this.__v_raw;return!e&&we(Ct(r),"iterate",js),Reflect.get(r,"size",r)},has(r){const i=this.__v_raw,o=Ct(i),l=Ct(r);return e||(is(r,l)&&we(o,"has",r),we(o,"has",l)),r===l?i.has(r):i.has(r)||i.has(l)},forEach(r,i){const o=this,l=o.__v_raw,c=Ct(l),u=t?Zl:e?Ko:he;return!e&&we(c,"iterate",js),l.forEach((h,d)=>r.call(i,u(h),u(d),o))}};return ie(n,e?{add:Ao("add"),set:Ao("set"),delete:Ao("delete"),clear:Ao("clear")}:{add(r){!t&&!Xe(r)&&!us(r)&&(r=Ct(r));const i=Ct(this);return To(i).has.call(i,r)||(i.add(r),Nn(i,"add",r,r)),this},set(r,i){!t&&!Xe(i)&&!us(i)&&(i=Ct(i));const o=Ct(this),{has:l,get:c}=To(o);let u=l.call(o,r);u||(r=Ct(r),u=l.call(o,r));const h=c.call(o,r);return o.set(r,i),u?is(i,h)&&Nn(o,"set",r,i):Nn(o,"add",r,i),this},delete(r){const i=Ct(this),{has:o,get:l}=To(i);let c=o.call(i,r);c||(r=Ct(r),c=o.call(i,r)),l&&l.call(i,r);const u=i.delete(r);return c&&Nn(i,"delete",r,void 0),u},clear(){const r=Ct(this),i=r.size!==0,o=r.clear();return i&&Nn(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=Nv(r,e,t)}),n}function Yc(e,t){const n=Mv(e,t);return(s,r,i)=>r==="__v_isReactive"?!e:r==="__v_isReadonly"?e:r==="__v_raw"?s:Reflect.get(Vt(n,r)&&r in s?n:s,r,i)}const Lv={get:Yc(!1,!1)},Fv={get:Yc(!1,!0)},Uv={get:Yc(!0,!1)};const Gp=new WeakMap,Wp=new WeakMap,Qp=new WeakMap,Bv=new WeakMap;function $v(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function jv(e){return e.__v_skip||!Object.isExtensible(e)?0:$v(fv(e))}function Aa(e){return us(e)?e:Zc(e,!1,kv,Lv,Gp)}function Jp(e){return Zc(e,!1,Ov,Fv,Wp)}function Xp(e){return Zc(e,!0,Dv,Uv,Qp)}function Zc(e,t,n,s,r){if(!Ut(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=jv(e);if(i===0)return e;const o=r.get(e);if(o)return o;const l=new Proxy(e,i===2?s:n);return r.set(e,l),l}function yr(e){return us(e)?yr(e.__v_raw):!!(e&&e.__v_isReactive)}function us(e){return!!(e&&e.__v_isReadonly)}function Xe(e){return!!(e&&e.__v_isShallow)}function tu(e){return e?!!e.__v_raw:!1}function Ct(e){const t=e&&e.__v_raw;return t?Ct(t):e}function qv(e){return!Vt(e,"__v_skip")&&Object.isExtensible(e)&&kp(e,"__v_skip",!0),e}const he=e=>Ut(e)?Aa(e):e,Ko=e=>Ut(e)?Xp(e):e;function be(e){return e?e.__v_isRef===!0:!1}function re(e){return Yp(e,!1)}function Hv(e){return Yp(e,!0)}function Yp(e,t){return be(e)?e:new zv(e,t)}class zv{constructor(t,n){this.dep=new Xc,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:Ct(t),this._value=n?t:he(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,s=this.__v_isShallow||Xe(t)||us(t);t=s?t:Ct(t),is(t,n)&&(this._rawValue=t,this._value=s?t:he(t),this.dep.trigger())}}function qs(e){return be(e)?e.value:e}const Kv={get:(e,t,n)=>t==="__v_raw"?e:qs(Reflect.get(e,t,n)),set:(e,t,n,s)=>{const r=e[t];return be(r)&&!be(n)?(r.value=n,!0):Reflect.set(e,t,n,s)}};function Zp(e){return yr(e)?e:new Proxy(e,Kv)}class Gv{constructor(t,n,s){this.fn=t,this.setter=n,this._value=void 0,this.dep=new Xc(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ai-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&Nt!==this)return Fp(this,!0),!0}get value(){const t=this.dep.track();return $p(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Wv(e,t,n=!1){let s,r;return ft(e)?s=e:(s=e.get,r=e.set),new Gv(s,r,n)}const bo={},Go=new WeakMap;let ks;function Qv(e,t=!1,n=ks){if(n){let s=Go.get(n);s||Go.set(n,s=[]),s.push(e)}}function Jv(e,t,n=Ot){const{immediate:s,deep:r,once:i,scheduler:o,augmentJob:l,call:c}=n,u=H=>r?H:Xe(H)||r===!1||r===0?Mn(H,1):Mn(H);let h,d,m,y,T=!1,C=!1;if(be(e)?(d=()=>e.value,T=Xe(e)):yr(e)?(d=()=>u(e),T=!0):ut(e)?(C=!0,T=e.some(H=>yr(H)||Xe(H)),d=()=>e.map(H=>{if(be(H))return H.value;if(yr(H))return u(H);if(ft(H))return c?c(H,2):H()})):ft(e)?t?d=c?()=>c(e,2):e:d=()=>{if(m){Fn();try{m()}finally{Un()}}const H=ks;ks=h;try{return c?c(e,3,[y]):e(y)}finally{ks=H}}:d=sn,t&&r){const H=d,G=r===!0?1/0:r;d=()=>Mn(H(),G)}const P=bv(),U=()=>{h.stop(),P&&P.active&&Kc(P.effects,h)};if(i&&t){const H=t;t=(...G)=>{H(...G),U()}}let N=C?new Array(e.length).fill(bo):bo;const B=H=>{if(!(!(h.flags&1)||!h.dirty&&!H))if(t){const G=h.run();if(r||T||(C?G.some((K,S)=>is(K,N[S])):is(G,N))){m&&m();const K=ks;ks=h;try{const S=[G,N===bo?void 0:C&&N[0]===bo?[]:N,y];N=G,c?c(t,3,S):t(...S)}finally{ks=K}}}else h.run()};return l&&l(B),h=new Mp(d),h.scheduler=o?()=>o(B,!1):B,y=H=>Qv(H,!1,h),m=h.onStop=()=>{const H=Go.get(h);if(H){if(c)c(H,4);else for(const G of H)G();Go.delete(h)}},t?s?B(!0):N=h.run():o?o(B.bind(null,!0),!0):h.run(),U.pause=h.pause.bind(h),U.resume=h.resume.bind(h),U.stop=U,U}function Mn(e,t=1/0,n){if(t<=0||!Ut(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,be(e))Mn(e.value,t,n);else if(ut(e))for(let s=0;s<e.length;s++)Mn(e[s],t,n);else if(Cp(e)||gr(e))e.forEach(s=>{Mn(s,t,n)});else if(xp(e)){for(const s in e)Mn(e[s],t,n);for(const s of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,s)&&Mn(e[s],t,n)}return e}/**
* @vue/runtime-core v3.5.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function zi(e,t,n,s){try{return s?e(...s):e()}catch(r){ba(r,t,n)}}function an(e,t,n,s){if(ft(e)){const r=zi(e,t,n,s);return r&&Pp(r)&&r.catch(i=>{ba(i,t,n)}),r}if(ut(e)){const r=[];for(let i=0;i<e.length;i++)r.push(an(e[i],t,n,s));return r}}function ba(e,t,n,s=!0){const r=t?t.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||Ot;if(t){let l=t.parent;const c=t.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const h=l.ec;if(h){for(let d=0;d<h.length;d++)if(h[d](e,c,u)===!1)return}l=l.parent}if(i){Fn(),zi(i,null,10,[e,c,u]),Un();return}}Xv(e,n,r,s,o)}function Xv(e,t,n,s=!0,r=!1){if(r)throw e;console.error(e)}const Pe=[];let mn=-1;const _r=[];let ts=null,ar=0;const tm=Promise.resolve();let Wo=null;function em(e){const t=Wo||tm;return e?t.then(this?e.bind(this):e):t}function Yv(e){let t=mn+1,n=Pe.length;for(;t<n;){const s=t+n>>>1,r=Pe[s],i=Ii(r);i<e||i===e&&r.flags&2?t=s+1:n=s}return t}function eu(e){if(!(e.flags&1)){const t=Ii(e),n=Pe[Pe.length-1];!n||!(e.flags&2)&&t>=Ii(n)?Pe.push(e):Pe.splice(Yv(t),0,e),e.flags|=1,nm()}}function nm(){Wo||(Wo=tm.then(im))}function sm(e){ut(e)?_r.push(...e):ts&&e.id===-1?ts.splice(ar+1,0,e):e.flags&1||(_r.push(e),e.flags|=1),nm()}function Jh(e,t,n=mn+1){for(;n<Pe.length;n++){const s=Pe[n];if(s&&s.flags&2){if(e&&s.id!==e.uid)continue;Pe.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function rm(e){if(_r.length){const t=[...new Set(_r)].sort((n,s)=>Ii(n)-Ii(s));if(_r.length=0,ts){ts.push(...t);return}for(ts=t,ar=0;ar<ts.length;ar++){const n=ts[ar];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}ts=null,ar=0}}const Ii=e=>e.id==null?e.flags&2?-1:1/0:e.id;function im(e){try{for(mn=0;mn<Pe.length;mn++){const t=Pe[mn];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),zi(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;mn<Pe.length;mn++){const t=Pe[mn];t&&(t.flags&=-2)}mn=-1,Pe.length=0,rm(),Wo=null,(Pe.length||_r.length)&&im()}}let je=null,om=null;function Qo(e){const t=je;return je=e,om=e&&e.type.__scopeId||null,t}function nu(e,t=je,n){if(!t||e._n)return e;const s=(...r)=>{s._d&&hf(-1);const i=Qo(t);let o;try{o=e(...r)}finally{Qo(i),s._d&&hf(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function am(e,t){if(je===null)return e;const n=xa(je),s=e.dirs||(e.dirs=[]);for(let r=0;r<t.length;r++){let[i,o,l,c=Ot]=t[r];i&&(ft(i)&&(i={mounted:i,updated:i}),i.deep&&Mn(o),s.push({dir:i,instance:n,value:o,oldValue:void 0,arg:l,modifiers:c}))}return e}function Cs(e,t,n,s){const r=e.dirs,i=t&&t.dirs;for(let o=0;o<r.length;o++){const l=r[o];i&&(l.oldValue=i[o].value);let c=l.dir[s];c&&(Fn(),an(c,n,8,[e.el,l,e,t]),Un())}}const lm=Symbol("_vte"),cm=e=>e.__isTeleport,li=e=>e&&(e.disabled||e.disabled===""),Xh=e=>e&&(e.defer||e.defer===""),Yh=e=>typeof SVGElement<"u"&&e instanceof SVGElement,Zh=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,tc=(e,t)=>{const n=e&&e.to;return Gt(n)?t?t(n):null:n},um={name:"Teleport",__isTeleport:!0,process(e,t,n,s,r,i,o,l,c,u){const{mc:h,pc:d,pbc:m,o:{insert:y,querySelector:T,createText:C,createComment:P}}=u,U=li(t.props);let{shapeFlag:N,children:B,dynamicChildren:H}=t;if(e==null){const G=t.el=C(""),K=t.anchor=C("");y(G,n,s),y(K,n,s);const S=(_,A)=>{N&16&&(r&&r.isCE&&(r.ce._teleportTarget=_),h(B,_,A,r,i,o,l,c))},v=()=>{const _=t.target=tc(t.props,T),A=hm(_,t,C,y);_&&(o!=="svg"&&Yh(_)?o="svg":o!=="mathml"&&Zh(_)&&(o="mathml"),U||(S(_,A),Do(t,!1)))};U&&(S(n,K),Do(t,!0)),Xh(t.props)?(t.el.__isMounted=!1,Re(()=>{v(),delete t.el.__isMounted},i)):v()}else{if(Xh(t.props)&&e.el.__isMounted===!1){Re(()=>{um.process(e,t,n,s,r,i,o,l,c,u)},i);return}t.el=e.el,t.targetStart=e.targetStart;const G=t.anchor=e.anchor,K=t.target=e.target,S=t.targetAnchor=e.targetAnchor,v=li(e.props),_=v?n:K,A=v?G:S;if(o==="svg"||Yh(K)?o="svg":(o==="mathml"||Zh(K))&&(o="mathml"),H?(m(e.dynamicChildren,H,_,r,i,o,l),iu(e,t,!0)):c||d(e,t,_,A,r,i,o,l,!1),U)v?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):Io(t,n,G,u,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const R=t.target=tc(t.props,T);R&&Io(t,R,null,u,0)}else v&&Io(t,K,S,u,1);Do(t,U)}},remove(e,t,n,{um:s,o:{remove:r}},i){const{shapeFlag:o,children:l,anchor:c,targetStart:u,targetAnchor:h,target:d,props:m}=e;if(d&&(r(u),r(h)),i&&r(c),o&16){const y=i||!li(m);for(let T=0;T<l.length;T++){const C=l[T];s(C,t,n,y,!!C.dynamicChildren)}}},move:Io,hydrate:Zv};function Io(e,t,n,{o:{insert:s},m:r},i=2){i===0&&s(e.targetAnchor,t,n);const{el:o,anchor:l,shapeFlag:c,children:u,props:h}=e,d=i===2;if(d&&s(o,t,n),(!d||li(h))&&c&16)for(let m=0;m<u.length;m++)r(u[m],t,n,2);d&&s(l,t,n)}function Zv(e,t,n,s,r,i,{o:{nextSibling:o,parentNode:l,querySelector:c,insert:u,createText:h}},d){const m=t.target=tc(t.props,c);if(m){const y=li(t.props),T=m._lpa||m.firstChild;if(t.shapeFlag&16)if(y)t.anchor=d(o(e),t,l(e),n,s,r,i),t.targetStart=T,t.targetAnchor=T&&o(T);else{t.anchor=o(e);let C=T;for(;C;){if(C&&C.nodeType===8){if(C.data==="teleport start anchor")t.targetStart=C;else if(C.data==="teleport anchor"){t.targetAnchor=C,m._lpa=t.targetAnchor&&o(t.targetAnchor);break}}C=o(C)}t.targetAnchor||hm(m,t,h,u),d(T&&o(T),t,m,n,s,r,i)}Do(t,y)}return t.anchor&&o(t.anchor)}const tw=um;function Do(e,t){const n=e.ctx;if(n&&n.ut){let s,r;for(t?(s=e.el,r=e.anchor):(s=e.targetStart,r=e.targetAnchor);s&&s!==r;)s.nodeType===1&&s.setAttribute("data-v-owner",n.uid),s=s.nextSibling;n.ut()}}function hm(e,t,n,s){const r=t.targetStart=n(""),i=t.targetAnchor=n("");return r[lm]=i,e&&(s(r,e),s(i,e)),i}const On=Symbol("_leaveCb"),So=Symbol("_enterCb");function ew(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Kn(()=>{e.isMounted=!0}),wm(()=>{e.isUnmounting=!0}),e}const Qe=[Function,Array],fm={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Qe,onEnter:Qe,onAfterEnter:Qe,onEnterCancelled:Qe,onBeforeLeave:Qe,onLeave:Qe,onAfterLeave:Qe,onLeaveCancelled:Qe,onBeforeAppear:Qe,onAppear:Qe,onAfterAppear:Qe,onAppearCancelled:Qe},dm=e=>{const t=e.subTree;return t.component?dm(t.component):t},nw={name:"BaseTransition",props:fm,setup(e,{slots:t}){const n=au(),s=ew();return()=>{const r=t.default&&gm(t.default(),!0);if(!r||!r.length)return;const i=pm(r),o=Ct(e),{mode:l}=o;if(s.isLeaving)return Al(i);const c=tf(i);if(!c)return Al(i);let u=ec(c,o,s,n,d=>u=d);c.type!==xe&&Si(c,u);let h=n.subTree&&tf(n.subTree);if(h&&h.type!==xe&&!Os(c,h)&&dm(n).type!==xe){let d=ec(h,o,s,n);if(Si(h,d),l==="out-in"&&c.type!==xe)return s.isLeaving=!0,d.afterLeave=()=>{s.isLeaving=!1,n.job.flags&8||n.update(),delete d.afterLeave,h=void 0},Al(i);l==="in-out"&&c.type!==xe?d.delayLeave=(m,y,T)=>{const C=mm(s,h);C[String(h.key)]=h,m[On]=()=>{y(),m[On]=void 0,delete u.delayedLeave,h=void 0},u.delayedLeave=()=>{T(),delete u.delayedLeave,h=void 0}}:h=void 0}else h&&(h=void 0);return i}}};function pm(e){let t=e[0];if(e.length>1){for(const n of e)if(n.type!==xe){t=n;break}}return t}const sw=nw;function mm(e,t){const{leavingVNodes:n}=e;let s=n.get(t.type);return s||(s=Object.create(null),n.set(t.type,s)),s}function ec(e,t,n,s,r){const{appear:i,mode:o,persisted:l=!1,onBeforeEnter:c,onEnter:u,onAfterEnter:h,onEnterCancelled:d,onBeforeLeave:m,onLeave:y,onAfterLeave:T,onLeaveCancelled:C,onBeforeAppear:P,onAppear:U,onAfterAppear:N,onAppearCancelled:B}=t,H=String(e.key),G=mm(n,e),K=(_,A)=>{_&&an(_,s,9,A)},S=(_,A)=>{const R=A[1];K(_,A),ut(_)?_.every(I=>I.length<=1)&&R():_.length<=1&&R()},v={mode:o,persisted:l,beforeEnter(_){let A=c;if(!n.isMounted)if(i)A=P||c;else return;_[On]&&_[On](!0);const R=G[H];R&&Os(e,R)&&R.el[On]&&R.el[On](),K(A,[_])},enter(_){let A=u,R=h,I=d;if(!n.isMounted)if(i)A=U||u,R=N||h,I=B||d;else return;let w=!1;const kt=_[So]=Yt=>{w||(w=!0,Yt?K(I,[_]):K(R,[_]),v.delayedLeave&&v.delayedLeave(),_[So]=void 0)};A?S(A,[_,kt]):kt()},leave(_,A){const R=String(e.key);if(_[So]&&_[So](!0),n.isUnmounting)return A();K(m,[_]);let I=!1;const w=_[On]=kt=>{I||(I=!0,A(),kt?K(C,[_]):K(T,[_]),_[On]=void 0,G[R]===e&&delete G[R])};G[R]=e,y?S(y,[_,w]):w()},clone(_){const A=ec(_,t,n,s,r);return r&&r(A),A}};return v}function Al(e){if(Ia(e))return e=hs(e),e.children=null,e}function tf(e){if(!Ia(e))return cm(e.type)&&e.children?pm(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:n}=e;if(n){if(t&16)return n[0];if(t&32&&ft(n.default))return n.default()}}function Si(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Si(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function gm(e,t=!1,n){let s=[],r=0;for(let i=0;i<e.length;i++){let o=e[i];const l=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===Ve?(o.patchFlag&128&&r++,s=s.concat(gm(o.children,t,l))):(t||o.type!==xe)&&s.push(l!=null?hs(o,{key:l}):o)}if(r>1)for(let i=0;i<s.length;i++)s[i].patchFlag=-2;return s}/*! #__NO_SIDE_EFFECTS__ */function cn(e,t){return ft(e)?ie({name:e.name},t,{setup:e}):e}function ym(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function ci(e,t,n,s,r=!1){if(ut(e)){e.forEach((T,C)=>ci(T,t&&(ut(t)?t[C]:t),n,s,r));return}if(ui(s)&&!r){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&ci(e,t,n,s.component.subTree);return}const i=s.shapeFlag&4?xa(s.component):s.el,o=r?null:i,{i:l,r:c}=e,u=t&&t.r,h=l.refs===Ot?l.refs={}:l.refs,d=l.setupState,m=Ct(d),y=d===Ot?Rp:T=>Vt(m,T);if(u!=null&&u!==c){if(Gt(u))h[u]=null,y(u)&&(d[u]=null);else if(be(u)){u.value=null;const T=t;T.k&&(h[T.k]=null)}}if(ft(c))zi(c,l,12,[o,h]);else{const T=Gt(c),C=be(c);if(T||C){const P=()=>{if(e.f){const U=T?y(c)?d[c]:h[c]:c.value;if(r)ut(U)&&Kc(U,i);else if(ut(U))U.includes(i)||U.push(i);else if(T)h[c]=[i],y(c)&&(d[c]=h[c]);else{const N=[i];c.value=N,e.k&&(h[e.k]=N)}}else T?(h[c]=o,y(c)&&(d[c]=o)):C&&(c.value=o,e.k&&(h[e.k]=o))};o?(P.id=-1,Re(P,n)):P()}}}Ea().requestIdleCallback;Ea().cancelIdleCallback;const ui=e=>!!e.type.__asyncLoader,Ia=e=>e.type.__isKeepAlive;function rw(e,t){_m(e,"a",t)}function iw(e,t){_m(e,"da",t)}function _m(e,t,n=Te){const s=e.__wdc||(e.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return e()});if(Sa(t,s,n),n){let r=n.parent;for(;r&&r.parent;)Ia(r.parent.vnode)&&ow(s,t,n,r),r=r.parent}}function ow(e,t,n,s){const r=Sa(t,e,s,!0);Ki(()=>{Kc(s[t],r)},n)}function Sa(e,t,n=Te,s=!1){if(n){const r=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...o)=>{Fn();const l=Gi(n),c=an(t,n,e,o);return l(),Un(),c});return s?r.unshift(i):r.push(i),i}}const zn=e=>(t,n=Te)=>{(!Ci||e==="sp")&&Sa(e,(...s)=>t(...s),n)},aw=zn("bm"),Kn=zn("m"),vm=zn("bu"),lw=zn("u"),wm=zn("bum"),Ki=zn("um"),cw=zn("sp"),uw=zn("rtg"),hw=zn("rtc");function fw(e,t=Te){Sa("ec",e,t)}const dw="components";function pw(e,t){return gw(dw,e,!0,t)||e}const mw=Symbol.for("v-ndc");function gw(e,t,n=!0,s=!1){const r=je||Te;if(r){const i=r.type;{const l=nE(i,!1);if(l&&(l===t||l===Ye(t)||l===wa(Ye(t))))return i}const o=ef(r[e]||i[e],t)||ef(r.appContext[e],t);return!o&&s?i:o}}function ef(e,t){return e&&(e[t]||e[Ye(t)]||e[wa(Ye(t))])}function Ra(e,t,n,s){let r;const i=n,o=ut(e);if(o||Gt(e)){const l=o&&yr(e);let c=!1,u=!1;l&&(c=!Xe(e),u=us(e),e=Ta(e)),r=new Array(e.length);for(let h=0,d=e.length;h<d;h++)r[h]=t(c?u?Ko(he(e[h])):he(e[h]):e[h],h,void 0,i)}else if(typeof e=="number"){r=new Array(e);for(let l=0;l<e;l++)r[l]=t(l+1,l,void 0,i)}else if(Ut(e))if(e[Symbol.iterator])r=Array.from(e,(l,c)=>t(l,c,void 0,i));else{const l=Object.keys(e);r=new Array(l.length);for(let c=0,u=l.length;c<u;c++){const h=l[c];r[c]=t(e[h],h,c,i)}}else r=[];return r}const nc=e=>e?Um(e)?xa(e):nc(e.parent):null,hi=ie(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>nc(e.parent),$root:e=>nc(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Tm(e),$forceUpdate:e=>e.f||(e.f=()=>{eu(e.update)}),$nextTick:e=>e.n||(e.n=em.bind(e.proxy)),$watch:e=>Lw.bind(e)}),bl=(e,t)=>e!==Ot&&!e.__isScriptSetup&&Vt(e,t),yw={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:s,data:r,props:i,accessCache:o,type:l,appContext:c}=e;let u;if(t[0]!=="$"){const y=o[t];if(y!==void 0)switch(y){case 1:return s[t];case 2:return r[t];case 4:return n[t];case 3:return i[t]}else{if(bl(s,t))return o[t]=1,s[t];if(r!==Ot&&Vt(r,t))return o[t]=2,r[t];if((u=e.propsOptions[0])&&Vt(u,t))return o[t]=3,i[t];if(n!==Ot&&Vt(n,t))return o[t]=4,n[t];sc&&(o[t]=0)}}const h=hi[t];let d,m;if(h)return t==="$attrs"&&we(e.attrs,"get",""),h(e);if((d=l.__cssModules)&&(d=d[t]))return d;if(n!==Ot&&Vt(n,t))return o[t]=4,n[t];if(m=c.config.globalProperties,Vt(m,t))return m[t]},set({_:e},t,n){const{data:s,setupState:r,ctx:i}=e;return bl(r,t)?(r[t]=n,!0):s!==Ot&&Vt(s,t)?(s[t]=n,!0):Vt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:s,appContext:r,propsOptions:i,type:o}},l){let c,u;return!!(n[l]||e!==Ot&&l[0]!=="$"&&Vt(e,l)||bl(t,l)||(c=i[0])&&Vt(c,l)||Vt(s,l)||Vt(hi,l)||Vt(r.config.globalProperties,l)||(u=o.__cssModules)&&u[l])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Vt(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function nf(e){return ut(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let sc=!0;function _w(e){const t=Tm(e),n=e.proxy,s=e.ctx;sc=!1,t.beforeCreate&&sf(t.beforeCreate,e,"bc");const{data:r,computed:i,methods:o,watch:l,provide:c,inject:u,created:h,beforeMount:d,mounted:m,beforeUpdate:y,updated:T,activated:C,deactivated:P,beforeDestroy:U,beforeUnmount:N,destroyed:B,unmounted:H,render:G,renderTracked:K,renderTriggered:S,errorCaptured:v,serverPrefetch:_,expose:A,inheritAttrs:R,components:I,directives:w,filters:kt}=t;if(u&&vw(u,s,null),o)for(const Tt in o){const vt=o[Tt];ft(vt)&&(s[Tt]=vt.bind(n))}if(r){const Tt=r.call(n,n);Ut(Tt)&&(e.data=Aa(Tt))}if(sc=!0,i)for(const Tt in i){const vt=i[Tt],Ue=ft(vt)?vt.bind(n,n):ft(vt.get)?vt.get.bind(n,n):sn,Ze=!ft(vt)&&ft(vt.set)?vt.set.bind(n):sn,Ke=Zt({get:Ue,set:Ze});Object.defineProperty(s,Tt,{enumerable:!0,configurable:!0,get:()=>Ke.value,set:$t=>Ke.value=$t})}if(l)for(const Tt in l)Em(l[Tt],s,n,Tt);if(c){const Tt=ft(c)?c.call(n):c;Reflect.ownKeys(Tt).forEach(vt=>{Oo(vt,Tt[vt])})}h&&sf(h,e,"c");function Bt(Tt,vt){ut(vt)?vt.forEach(Ue=>Tt(Ue.bind(n))):vt&&Tt(vt.bind(n))}if(Bt(aw,d),Bt(Kn,m),Bt(vm,y),Bt(lw,T),Bt(rw,C),Bt(iw,P),Bt(fw,v),Bt(hw,K),Bt(uw,S),Bt(wm,N),Bt(Ki,H),Bt(cw,_),ut(A))if(A.length){const Tt=e.exposed||(e.exposed={});A.forEach(vt=>{Object.defineProperty(Tt,vt,{get:()=>n[vt],set:Ue=>n[vt]=Ue,enumerable:!0})})}else e.exposed||(e.exposed={});G&&e.render===sn&&(e.render=G),R!=null&&(e.inheritAttrs=R),I&&(e.components=I),w&&(e.directives=w),_&&ym(e)}function vw(e,t,n=sn){ut(e)&&(e=rc(e));for(const s in e){const r=e[s];let i;Ut(r)?"default"in r?i=Ln(r.from||s,r.default,!0):i=Ln(r.from||s):i=Ln(r),be(i)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):t[s]=i}}function sf(e,t,n){an(ut(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,n)}function Em(e,t,n,s){let r=s.includes(".")?Om(n,s):()=>n[s];if(Gt(e)){const i=t[e];ft(i)&&Hs(r,i)}else if(ft(e))Hs(r,e.bind(n));else if(Ut(e))if(ut(e))e.forEach(i=>Em(i,t,n,s));else{const i=ft(e.handler)?e.handler.bind(n):t[e.handler];ft(i)&&Hs(r,i,e)}}function Tm(e){const t=e.type,{mixins:n,extends:s}=t,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=e.appContext,l=i.get(t);let c;return l?c=l:!r.length&&!n&&!s?c=t:(c={},r.length&&r.forEach(u=>Jo(c,u,o,!0)),Jo(c,t,o)),Ut(t)&&i.set(t,c),c}function Jo(e,t,n,s=!1){const{mixins:r,extends:i}=t;i&&Jo(e,i,n,!0),r&&r.forEach(o=>Jo(e,o,n,!0));for(const o in t)if(!(s&&o==="expose")){const l=ww[o]||n&&n[o];e[o]=l?l(e[o],t[o]):t[o]}return e}const ww={data:rf,props:of,emits:of,methods:ti,computed:ti,beforeCreate:Se,created:Se,beforeMount:Se,mounted:Se,beforeUpdate:Se,updated:Se,beforeDestroy:Se,beforeUnmount:Se,destroyed:Se,unmounted:Se,activated:Se,deactivated:Se,errorCaptured:Se,serverPrefetch:Se,components:ti,directives:ti,watch:Tw,provide:rf,inject:Ew};function rf(e,t){return t?e?function(){return ie(ft(e)?e.call(this,this):e,ft(t)?t.call(this,this):t)}:t:e}function Ew(e,t){return ti(rc(e),rc(t))}function rc(e){if(ut(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Se(e,t){return e?[...new Set([].concat(e,t))]:t}function ti(e,t){return e?ie(Object.create(null),e,t):t}function of(e,t){return e?ut(e)&&ut(t)?[...new Set([...e,...t])]:ie(Object.create(null),nf(e),nf(t??{})):t}function Tw(e,t){if(!e)return t;if(!t)return e;const n=ie(Object.create(null),e);for(const s in t)n[s]=Se(e[s],t[s]);return n}function Am(){return{app:null,config:{isNativeTag:Rp,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Aw=0;function bw(e,t){return function(s,r=null){ft(s)||(s=ie({},s)),r!=null&&!Ut(r)&&(r=null);const i=Am(),o=new WeakSet,l=[];let c=!1;const u=i.app={_uid:Aw++,_component:s,_props:r,_container:null,_context:i,_instance:null,version:rE,get config(){return i.config},set config(h){},use(h,...d){return o.has(h)||(h&&ft(h.install)?(o.add(h),h.install(u,...d)):ft(h)&&(o.add(h),h(u,...d))),u},mixin(h){return i.mixins.includes(h)||i.mixins.push(h),u},component(h,d){return d?(i.components[h]=d,u):i.components[h]},directive(h,d){return d?(i.directives[h]=d,u):i.directives[h]},mount(h,d,m){if(!c){const y=u._ceVNode||Kt(s,r);return y.appContext=i,m===!0?m="svg":m===!1&&(m=void 0),e(y,h,m),c=!0,u._container=h,h.__vue_app__=u,xa(y.component)}},onUnmount(h){l.push(h)},unmount(){c&&(an(l,u._instance,16),e(null,u._container),delete u._container.__vue_app__)},provide(h,d){return i.provides[h]=d,u},runWithContext(h){const d=vr;vr=u;try{return h()}finally{vr=d}}};return u}}let vr=null;function Oo(e,t){if(Te){let n=Te.provides;const s=Te.parent&&Te.parent.provides;s===n&&(n=Te.provides=Object.create(s)),n[e]=t}}function Ln(e,t,n=!1){const s=au();if(s||vr){let r=vr?vr._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&e in r)return r[e];if(arguments.length>1)return n&&ft(t)?t.call(s&&s.proxy):t}}const bm={},Im=()=>Object.create(bm),Sm=e=>Object.getPrototypeOf(e)===bm;function Iw(e,t,n,s=!1){const r={},i=Im();e.propsDefaults=Object.create(null),Rm(e,t,r,i);for(const o in e.propsOptions[0])o in r||(r[o]=void 0);n?e.props=s?r:Jp(r):e.type.props?e.props=r:e.props=i,e.attrs=i}function Sw(e,t,n,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=e,l=Ct(r),[c]=e.propsOptions;let u=!1;if((s||o>0)&&!(o&16)){if(o&8){const h=e.vnode.dynamicProps;for(let d=0;d<h.length;d++){let m=h[d];if(Ca(e.emitsOptions,m))continue;const y=t[m];if(c)if(Vt(i,m))y!==i[m]&&(i[m]=y,u=!0);else{const T=Ye(m);r[T]=ic(c,l,T,y,e,!1)}else y!==i[m]&&(i[m]=y,u=!0)}}}else{Rm(e,t,r,i)&&(u=!0);let h;for(const d in l)(!t||!Vt(t,d)&&((h=ws(d))===d||!Vt(t,h)))&&(c?n&&(n[d]!==void 0||n[h]!==void 0)&&(r[d]=ic(c,l,d,void 0,e,!0)):delete r[d]);if(i!==l)for(const d in i)(!t||!Vt(t,d))&&(delete i[d],u=!0)}u&&Nn(e.attrs,"set","")}function Rm(e,t,n,s){const[r,i]=e.propsOptions;let o=!1,l;if(t)for(let c in t){if(ii(c))continue;const u=t[c];let h;r&&Vt(r,h=Ye(c))?!i||!i.includes(h)?n[h]=u:(l||(l={}))[h]=u:Ca(e.emitsOptions,c)||(!(c in s)||u!==s[c])&&(s[c]=u,o=!0)}if(i){const c=Ct(n),u=l||Ot;for(let h=0;h<i.length;h++){const d=i[h];n[d]=ic(r,c,d,u[d],e,!Vt(u,d))}}return o}function ic(e,t,n,s,r,i){const o=e[n];if(o!=null){const l=Vt(o,"default");if(l&&s===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&ft(c)){const{propsDefaults:u}=r;if(n in u)s=u[n];else{const h=Gi(r);s=u[n]=c.call(null,t),h()}}else s=c;r.ce&&r.ce._setProp(n,s)}o[0]&&(i&&!l?s=!1:o[1]&&(s===""||s===ws(n))&&(s=!0))}return s}const Rw=new WeakMap;function Cm(e,t,n=!1){const s=n?Rw:t.propsCache,r=s.get(e);if(r)return r;const i=e.props,o={},l=[];let c=!1;if(!ft(e)){const h=d=>{c=!0;const[m,y]=Cm(d,t,!0);ie(o,m),y&&l.push(...y)};!n&&t.mixins.length&&t.mixins.forEach(h),e.extends&&h(e.extends),e.mixins&&e.mixins.forEach(h)}if(!i&&!c)return Ut(e)&&s.set(e,mr),mr;if(ut(i))for(let h=0;h<i.length;h++){const d=Ye(i[h]);af(d)&&(o[d]=Ot)}else if(i)for(const h in i){const d=Ye(h);if(af(d)){const m=i[h],y=o[d]=ut(m)||ft(m)?{type:m}:ie({},m),T=y.type;let C=!1,P=!0;if(ut(T))for(let U=0;U<T.length;++U){const N=T[U],B=ft(N)&&N.name;if(B==="Boolean"){C=!0;break}else B==="String"&&(P=!1)}else C=ft(T)&&T.name==="Boolean";y[0]=C,y[1]=P,(C||Vt(y,"default"))&&l.push(d)}}const u=[o,l];return Ut(e)&&s.set(e,u),u}function af(e){return e[0]!=="$"&&!ii(e)}const su=e=>e==="_"||e==="_ctx"||e==="$stable",ru=e=>ut(e)?e.map(yn):[yn(e)],Cw=(e,t,n)=>{if(t._n)return t;const s=nu((...r)=>ru(t(...r)),n);return s._c=!1,s},Pm=(e,t,n)=>{const s=e._ctx;for(const r in e){if(su(r))continue;const i=e[r];if(ft(i))t[r]=Cw(r,i,s);else if(i!=null){const o=ru(i);t[r]=()=>o}}},Vm=(e,t)=>{const n=ru(t);e.slots.default=()=>n},xm=(e,t,n)=>{for(const s in t)(n||!su(s))&&(e[s]=t[s])},Pw=(e,t,n)=>{const s=e.slots=Im();if(e.vnode.shapeFlag&32){const r=t._;r?(xm(s,t,n),n&&kp(s,"_",r,!0)):Pm(t,s)}else t&&Vm(e,t)},Vw=(e,t,n)=>{const{vnode:s,slots:r}=e;let i=!0,o=Ot;if(s.shapeFlag&32){const l=t._;l?n&&l===1?i=!1:xm(r,t,n):(i=!t.$stable,Pm(t,r)),o=t}else t&&(Vm(e,t),o={default:1});if(i)for(const l in r)!su(l)&&o[l]==null&&delete r[l]},Re=Hw;function xw(e){return kw(e)}function kw(e,t){const n=Ea();n.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:l,createComment:c,setText:u,setElementText:h,parentNode:d,nextSibling:m,setScopeId:y=sn,insertStaticContent:T}=e,C=(E,b,V,L=null,j=null,F=null,X=void 0,Q=null,W=!!b.dynamicChildren)=>{if(E===b)return;E&&!Os(E,b)&&(L=M(E),$t(E,j,F,!0),E=null),b.patchFlag===-2&&(W=!1,b.dynamicChildren=null);const{type:z,ref:it,shapeFlag:Z}=b;switch(z){case Pa:P(E,b,V,L);break;case xe:U(E,b,V,L);break;case fi:E==null&&N(b,V,L,X);break;case Ve:I(E,b,V,L,j,F,X,Q,W);break;default:Z&1?G(E,b,V,L,j,F,X,Q,W):Z&6?w(E,b,V,L,j,F,X,Q,W):(Z&64||Z&128)&&z.process(E,b,V,L,j,F,X,Q,W,nt)}it!=null&&j?ci(it,E&&E.ref,F,b||E,!b):it==null&&E&&E.ref!=null&&ci(E.ref,null,F,E,!0)},P=(E,b,V,L)=>{if(E==null)s(b.el=l(b.children),V,L);else{const j=b.el=E.el;b.children!==E.children&&u(j,b.children)}},U=(E,b,V,L)=>{E==null?s(b.el=c(b.children||""),V,L):b.el=E.el},N=(E,b,V,L)=>{[E.el,E.anchor]=T(E.children,b,V,L,E.el,E.anchor)},B=({el:E,anchor:b},V,L)=>{let j;for(;E&&E!==b;)j=m(E),s(E,V,L),E=j;s(b,V,L)},H=({el:E,anchor:b})=>{let V;for(;E&&E!==b;)V=m(E),r(E),E=V;r(b)},G=(E,b,V,L,j,F,X,Q,W)=>{b.type==="svg"?X="svg":b.type==="math"&&(X="mathml"),E==null?K(b,V,L,j,F,X,Q,W):_(E,b,j,F,X,Q,W)},K=(E,b,V,L,j,F,X,Q)=>{let W,z;const{props:it,shapeFlag:Z,transition:rt,dirs:ct}=E;if(W=E.el=o(E.type,F,it&&it.is,it),Z&8?h(W,E.children):Z&16&&v(E.children,W,null,L,j,Il(E,F),X,Q),ct&&Cs(E,null,L,"created"),S(W,E,E.scopeId,X,L),it){for(const pt in it)pt!=="value"&&!ii(pt)&&i(W,pt,null,it[pt],F,L);"value"in it&&i(W,"value",null,it.value,F),(z=it.onVnodeBeforeMount)&&fn(z,L,E)}ct&&Cs(E,null,L,"beforeMount");const at=Dw(j,rt);at&&rt.beforeEnter(W),s(W,b,V),((z=it&&it.onVnodeMounted)||at||ct)&&Re(()=>{z&&fn(z,L,E),at&&rt.enter(W),ct&&Cs(E,null,L,"mounted")},j)},S=(E,b,V,L,j)=>{if(V&&y(E,V),L)for(let F=0;F<L.length;F++)y(E,L[F]);if(j){let F=j.subTree;if(b===F||Mm(F.type)&&(F.ssContent===b||F.ssFallback===b)){const X=j.vnode;S(E,X,X.scopeId,X.slotScopeIds,j.parent)}}},v=(E,b,V,L,j,F,X,Q,W=0)=>{for(let z=W;z<E.length;z++){const it=E[z]=Q?es(E[z]):yn(E[z]);C(null,it,b,V,L,j,F,X,Q)}},_=(E,b,V,L,j,F,X)=>{const Q=b.el=E.el;let{patchFlag:W,dynamicChildren:z,dirs:it}=b;W|=E.patchFlag&16;const Z=E.props||Ot,rt=b.props||Ot;let ct;if(V&&Ps(V,!1),(ct=rt.onVnodeBeforeUpdate)&&fn(ct,V,b,E),it&&Cs(b,E,V,"beforeUpdate"),V&&Ps(V,!0),(Z.innerHTML&&rt.innerHTML==null||Z.textContent&&rt.textContent==null)&&h(Q,""),z?A(E.dynamicChildren,z,Q,V,L,Il(b,j),F):X||vt(E,b,Q,null,V,L,Il(b,j),F,!1),W>0){if(W&16)R(Q,Z,rt,V,j);else if(W&2&&Z.class!==rt.class&&i(Q,"class",null,rt.class,j),W&4&&i(Q,"style",Z.style,rt.style,j),W&8){const at=b.dynamicProps;for(let pt=0;pt<at.length;pt++){const At=at[pt],oe=Z[At],ae=rt[At];(ae!==oe||At==="value")&&i(Q,At,oe,ae,j,V)}}W&1&&E.children!==b.children&&h(Q,b.children)}else!X&&z==null&&R(Q,Z,rt,V,j);((ct=rt.onVnodeUpdated)||it)&&Re(()=>{ct&&fn(ct,V,b,E),it&&Cs(b,E,V,"updated")},L)},A=(E,b,V,L,j,F,X)=>{for(let Q=0;Q<b.length;Q++){const W=E[Q],z=b[Q],it=W.el&&(W.type===Ve||!Os(W,z)||W.shapeFlag&198)?d(W.el):V;C(W,z,it,null,L,j,F,X,!0)}},R=(E,b,V,L,j)=>{if(b!==V){if(b!==Ot)for(const F in b)!ii(F)&&!(F in V)&&i(E,F,b[F],null,j,L);for(const F in V){if(ii(F))continue;const X=V[F],Q=b[F];X!==Q&&F!=="value"&&i(E,F,Q,X,j,L)}"value"in V&&i(E,"value",b.value,V.value,j)}},I=(E,b,V,L,j,F,X,Q,W)=>{const z=b.el=E?E.el:l(""),it=b.anchor=E?E.anchor:l("");let{patchFlag:Z,dynamicChildren:rt,slotScopeIds:ct}=b;ct&&(Q=Q?Q.concat(ct):ct),E==null?(s(z,V,L),s(it,V,L),v(b.children||[],V,it,j,F,X,Q,W)):Z>0&&Z&64&&rt&&E.dynamicChildren?(A(E.dynamicChildren,rt,V,j,F,X,Q),(b.key!=null||j&&b===j.subTree)&&iu(E,b,!0)):vt(E,b,V,it,j,F,X,Q,W)},w=(E,b,V,L,j,F,X,Q,W)=>{b.slotScopeIds=Q,E==null?b.shapeFlag&512?j.ctx.activate(b,V,L,X,W):kt(b,V,L,j,F,X,W):Yt(E,b,W)},kt=(E,b,V,L,j,F,X)=>{const Q=E.component=Xw(E,L,j);if(Ia(E)&&(Q.ctx.renderer=nt),Yw(Q,!1,X),Q.asyncDep){if(j&&j.registerDep(Q,Bt,X),!E.el){const W=Q.subTree=Kt(xe);U(null,W,b,V),E.placeholder=W.el}}else Bt(Q,E,b,V,j,F,X)},Yt=(E,b,V)=>{const L=b.component=E.component;if(jw(E,b,V))if(L.asyncDep&&!L.asyncResolved){Tt(L,b,V);return}else L.next=b,L.update();else b.el=E.el,L.vnode=b},Bt=(E,b,V,L,j,F,X)=>{const Q=()=>{if(E.isMounted){let{next:Z,bu:rt,u:ct,parent:at,vnode:pt}=E;{const pe=km(E);if(pe){Z&&(Z.el=pt.el,Tt(E,Z,X)),pe.asyncDep.then(()=>{E.isUnmounted||Q()});return}}let At=Z,oe;Ps(E,!1),Z?(Z.el=pt.el,Tt(E,Z,X)):Z=pt,rt&&ko(rt),(oe=Z.props&&Z.props.onVnodeBeforeUpdate)&&fn(oe,at,Z,pt),Ps(E,!0);const ae=cf(E),Ge=E.subTree;E.subTree=ae,C(Ge,ae,d(Ge.el),M(Ge),E,j,F),Z.el=ae.el,At===null&&qw(E,ae.el),ct&&Re(ct,j),(oe=Z.props&&Z.props.onVnodeUpdated)&&Re(()=>fn(oe,at,Z,pt),j)}else{let Z;const{el:rt,props:ct}=b,{bm:at,m:pt,parent:At,root:oe,type:ae}=E,Ge=ui(b);Ps(E,!1),at&&ko(at),!Ge&&(Z=ct&&ct.onVnodeBeforeMount)&&fn(Z,At,b),Ps(E,!0);{oe.ce&&oe.ce._def.shadowRoot!==!1&&oe.ce._injectChildStyle(ae);const pe=E.subTree=cf(E);C(null,pe,V,L,E,j,F),b.el=pe.el}if(pt&&Re(pt,j),!Ge&&(Z=ct&&ct.onVnodeMounted)){const pe=b;Re(()=>fn(Z,At,pe),j)}(b.shapeFlag&256||At&&ui(At.vnode)&&At.vnode.shapeFlag&256)&&E.a&&Re(E.a,j),E.isMounted=!0,b=V=L=null}};E.scope.on();const W=E.effect=new Mp(Q);E.scope.off();const z=E.update=W.run.bind(W),it=E.job=W.runIfDirty.bind(W);it.i=E,it.id=E.uid,W.scheduler=()=>eu(it),Ps(E,!0),z()},Tt=(E,b,V)=>{b.component=E;const L=E.vnode.props;E.vnode=b,E.next=null,Sw(E,b.props,L,V),Vw(E,b.children,V),Fn(),Jh(E),Un()},vt=(E,b,V,L,j,F,X,Q,W=!1)=>{const z=E&&E.children,it=E?E.shapeFlag:0,Z=b.children,{patchFlag:rt,shapeFlag:ct}=b;if(rt>0){if(rt&128){Ze(z,Z,V,L,j,F,X,Q,W);return}else if(rt&256){Ue(z,Z,V,L,j,F,X,Q,W);return}}ct&8?(it&16&&ke(z,j,F),Z!==z&&h(V,Z)):it&16?ct&16?Ze(z,Z,V,L,j,F,X,Q,W):ke(z,j,F,!0):(it&8&&h(V,""),ct&16&&v(Z,V,L,j,F,X,Q,W))},Ue=(E,b,V,L,j,F,X,Q,W)=>{E=E||mr,b=b||mr;const z=E.length,it=b.length,Z=Math.min(z,it);let rt;for(rt=0;rt<Z;rt++){const ct=b[rt]=W?es(b[rt]):yn(b[rt]);C(E[rt],ct,V,null,j,F,X,Q,W)}z>it?ke(E,j,F,!0,!1,Z):v(b,V,L,j,F,X,Q,W,Z)},Ze=(E,b,V,L,j,F,X,Q,W)=>{let z=0;const it=b.length;let Z=E.length-1,rt=it-1;for(;z<=Z&&z<=rt;){const ct=E[z],at=b[z]=W?es(b[z]):yn(b[z]);if(Os(ct,at))C(ct,at,V,null,j,F,X,Q,W);else break;z++}for(;z<=Z&&z<=rt;){const ct=E[Z],at=b[rt]=W?es(b[rt]):yn(b[rt]);if(Os(ct,at))C(ct,at,V,null,j,F,X,Q,W);else break;Z--,rt--}if(z>Z){if(z<=rt){const ct=rt+1,at=ct<it?b[ct].el:L;for(;z<=rt;)C(null,b[z]=W?es(b[z]):yn(b[z]),V,at,j,F,X,Q,W),z++}}else if(z>rt)for(;z<=Z;)$t(E[z],j,F,!0),z++;else{const ct=z,at=z,pt=new Map;for(z=at;z<=rt;z++){const le=b[z]=W?es(b[z]):yn(b[z]);le.key!=null&&pt.set(le.key,z)}let At,oe=0;const ae=rt-at+1;let Ge=!1,pe=0;const Wn=new Array(ae);for(z=0;z<ae;z++)Wn[z]=0;for(z=ct;z<=Z;z++){const le=E[z];if(oe>=ae){$t(le,j,F,!0);continue}let We;if(le.key!=null)We=pt.get(le.key);else for(At=at;At<=rt;At++)if(Wn[At-at]===0&&Os(le,b[At])){We=At;break}We===void 0?$t(le,j,F,!0):(Wn[We-at]=z+1,We>=pe?pe=We:Ge=!0,C(le,b[We],V,null,j,F,X,Q,W),oe++)}const Mr=Ge?Ow(Wn):mr;for(At=Mr.length-1,z=ae-1;z>=0;z--){const le=at+z,We=b[le],io=b[le+1],er=le+1<it?io.el||io.placeholder:L;Wn[z]===0?C(null,We,V,er,j,F,X,Q,W):Ge&&(At<0||z!==Mr[At]?Ke(We,V,er,2):At--)}}},Ke=(E,b,V,L,j=null)=>{const{el:F,type:X,transition:Q,children:W,shapeFlag:z}=E;if(z&6){Ke(E.component.subTree,b,V,L);return}if(z&128){E.suspense.move(b,V,L);return}if(z&64){X.move(E,b,V,nt);return}if(X===Ve){s(F,b,V);for(let Z=0;Z<W.length;Z++)Ke(W[Z],b,V,L);s(E.anchor,b,V);return}if(X===fi){B(E,b,V);return}if(L!==2&&z&1&&Q)if(L===0)Q.beforeEnter(F),s(F,b,V),Re(()=>Q.enter(F),j);else{const{leave:Z,delayLeave:rt,afterLeave:ct}=Q,at=()=>{E.ctx.isUnmounted?r(F):s(F,b,V)},pt=()=>{F._isLeaving&&F[On](!0),Z(F,()=>{at(),ct&&ct()})};rt?rt(F,at,pt):pt()}else s(F,b,V)},$t=(E,b,V,L=!1,j=!1)=>{const{type:F,props:X,ref:Q,children:W,dynamicChildren:z,shapeFlag:it,patchFlag:Z,dirs:rt,cacheIndex:ct}=E;if(Z===-2&&(j=!1),Q!=null&&(Fn(),ci(Q,null,V,E,!0),Un()),ct!=null&&(b.renderCache[ct]=void 0),it&256){b.ctx.deactivate(E);return}const at=it&1&&rt,pt=!ui(E);let At;if(pt&&(At=X&&X.onVnodeBeforeUnmount)&&fn(At,b,E),it&6)hn(E.component,V,L);else{if(it&128){E.suspense.unmount(V,L);return}at&&Cs(E,null,b,"beforeUnmount"),it&64?E.type.remove(E,b,V,nt,L):z&&!z.hasOnce&&(F!==Ve||Z>0&&Z&64)?ke(z,b,V,!1,!0):(F===Ve&&Z&384||!j&&it&16)&&ke(W,b,V),L&&jt(E)}(pt&&(At=X&&X.onVnodeUnmounted)||at)&&Re(()=>{At&&fn(At,b,E),at&&Cs(E,null,b,"unmounted")},V)},jt=E=>{const{type:b,el:V,anchor:L,transition:j}=E;if(b===Ve){Gn(V,L);return}if(b===fi){H(E);return}const F=()=>{r(V),j&&!j.persisted&&j.afterLeave&&j.afterLeave()};if(E.shapeFlag&1&&j&&!j.persisted){const{leave:X,delayLeave:Q}=j,W=()=>X(V,F);Q?Q(E.el,F,W):W()}else F()},Gn=(E,b)=>{let V;for(;E!==b;)V=m(E),r(E),E=V;r(b)},hn=(E,b,V)=>{const{bum:L,scope:j,job:F,subTree:X,um:Q,m:W,a:z}=E;lf(W),lf(z),L&&ko(L),j.stop(),F&&(F.flags|=8,$t(X,E,b,V)),Q&&Re(Q,b),Re(()=>{E.isUnmounted=!0},b)},ke=(E,b,V,L=!1,j=!1,F=0)=>{for(let X=F;X<E.length;X++)$t(E[X],b,V,L,j)},M=E=>{if(E.shapeFlag&6)return M(E.component.subTree);if(E.shapeFlag&128)return E.suspense.next();const b=m(E.anchor||E.el),V=b&&b[lm];return V?m(V):b};let tt=!1;const Y=(E,b,V)=>{E==null?b._vnode&&$t(b._vnode,null,null,!0):C(b._vnode||null,E,b,null,null,null,V),b._vnode=E,tt||(tt=!0,Jh(),rm(),tt=!1)},nt={p:C,um:$t,m:Ke,r:jt,mt:kt,mc:v,pc:vt,pbc:A,n:M,o:e};return{render:Y,hydrate:void 0,createApp:bw(Y)}}function Il({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Ps({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Dw(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function iu(e,t,n=!1){const s=e.children,r=t.children;if(ut(s)&&ut(r))for(let i=0;i<s.length;i++){const o=s[i];let l=r[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=r[i]=es(r[i]),l.el=o.el),!n&&l.patchFlag!==-2&&iu(o,l)),l.type===Pa&&l.patchFlag!==-1&&(l.el=o.el),l.type===xe&&!l.el&&(l.el=o.el)}}function Ow(e){const t=e.slice(),n=[0];let s,r,i,o,l;const c=e.length;for(s=0;s<c;s++){const u=e[s];if(u!==0){if(r=n[n.length-1],e[r]<u){t[s]=r,n.push(s);continue}for(i=0,o=n.length-1;i<o;)l=i+o>>1,e[n[l]]<u?i=l+1:o=l;u<e[n[i]]&&(i>0&&(t[s]=n[i-1]),n[i]=s)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=t[o];return n}function km(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:km(t)}function lf(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Nw=Symbol.for("v-scx"),Mw=()=>Ln(Nw);function Hs(e,t,n){return Dm(e,t,n)}function Dm(e,t,n=Ot){const{immediate:s,deep:r,flush:i,once:o}=n,l=ie({},n),c=t&&s||!t&&i!=="post";let u;if(Ci){if(i==="sync"){const y=Mw();u=y.__watcherHandles||(y.__watcherHandles=[])}else if(!c){const y=()=>{};return y.stop=sn,y.resume=sn,y.pause=sn,y}}const h=Te;l.call=(y,T,C)=>an(y,h,T,C);let d=!1;i==="post"?l.scheduler=y=>{Re(y,h&&h.suspense)}:i!=="sync"&&(d=!0,l.scheduler=(y,T)=>{T?y():eu(y)}),l.augmentJob=y=>{t&&(y.flags|=4),d&&(y.flags|=2,h&&(y.id=h.uid,y.i=h))};const m=Jv(e,t,l);return Ci&&(u?u.push(m):c&&m()),m}function Lw(e,t,n){const s=this.proxy,r=Gt(e)?e.includes(".")?Om(s,e):()=>s[e]:e.bind(s,s);let i;ft(t)?i=t:(i=t.handler,n=t);const o=Gi(this),l=Dm(r,i.bind(s),n);return o(),l}function Om(e,t){const n=t.split(".");return()=>{let s=e;for(let r=0;r<n.length&&s;r++)s=s[n[r]];return s}}const Fw=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Ye(t)}Modifiers`]||e[`${ws(t)}Modifiers`];function Uw(e,t,...n){if(e.isUnmounted)return;const s=e.vnode.props||Ot;let r=n;const i=t.startsWith("update:"),o=i&&Fw(s,t.slice(7));o&&(o.trim&&(r=n.map(h=>Gt(h)?h.trim():h)),o.number&&(r=n.map(Ql)));let l,c=s[l=_l(t)]||s[l=_l(Ye(t))];!c&&i&&(c=s[l=_l(ws(t))]),c&&an(c,e,6,r);const u=s[l+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,an(u,e,6,r)}}function Nm(e,t,n=!1){const s=t.emitsCache,r=s.get(e);if(r!==void 0)return r;const i=e.emits;let o={},l=!1;if(!ft(e)){const c=u=>{const h=Nm(u,t,!0);h&&(l=!0,ie(o,h))};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!i&&!l?(Ut(e)&&s.set(e,null),null):(ut(i)?i.forEach(c=>o[c]=null):ie(o,i),Ut(e)&&s.set(e,o),o)}function Ca(e,t){return!e||!ya(t)?!1:(t=t.slice(2).replace(/Once$/,""),Vt(e,t[0].toLowerCase()+t.slice(1))||Vt(e,ws(t))||Vt(e,t))}function cf(e){const{type:t,vnode:n,proxy:s,withProxy:r,propsOptions:[i],slots:o,attrs:l,emit:c,render:u,renderCache:h,props:d,data:m,setupState:y,ctx:T,inheritAttrs:C}=e,P=Qo(e);let U,N;try{if(n.shapeFlag&4){const H=r||s,G=H;U=yn(u.call(G,H,h,d,y,m,T)),N=l}else{const H=t;U=yn(H.length>1?H(d,{attrs:l,slots:o,emit:c}):H(d,null)),N=t.props?l:Bw(l)}}catch(H){di.length=0,ba(H,e,1),U=Kt(xe)}let B=U;if(N&&C!==!1){const H=Object.keys(N),{shapeFlag:G}=B;H.length&&G&7&&(i&&H.some(zc)&&(N=$w(N,i)),B=hs(B,N,!1,!0))}return n.dirs&&(B=hs(B,null,!1,!0),B.dirs=B.dirs?B.dirs.concat(n.dirs):n.dirs),n.transition&&Si(B,n.transition),U=B,Qo(P),U}const Bw=e=>{let t;for(const n in e)(n==="class"||n==="style"||ya(n))&&((t||(t={}))[n]=e[n]);return t},$w=(e,t)=>{const n={};for(const s in e)(!zc(s)||!(s.slice(9)in t))&&(n[s]=e[s]);return n};function jw(e,t,n){const{props:s,children:r,component:i}=e,{props:o,children:l,patchFlag:c}=t,u=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return s?uf(s,o,u):!!o;if(c&8){const h=t.dynamicProps;for(let d=0;d<h.length;d++){const m=h[d];if(o[m]!==s[m]&&!Ca(u,m))return!0}}}else return(r||l)&&(!l||!l.$stable)?!0:s===o?!1:s?o?uf(s,o,u):!0:!!o;return!1}function uf(e,t,n){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(t[i]!==e[i]&&!Ca(n,i))return!0}return!1}function qw({vnode:e,parent:t},n){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===e&&(s.el=e.el),s===e)(e=t.vnode).el=n,t=t.parent;else break}}const Mm=e=>e.__isSuspense;function Hw(e,t){t&&t.pendingBranch?ut(e)?t.effects.push(...e):t.effects.push(e):sm(e)}const Ve=Symbol.for("v-fgt"),Pa=Symbol.for("v-txt"),xe=Symbol.for("v-cmt"),fi=Symbol.for("v-stc"),di=[];let qe=null;function gt(e=!1){di.push(qe=e?null:[])}function zw(){di.pop(),qe=di[di.length-1]||null}let Ri=1;function hf(e,t=!1){Ri+=e,e<0&&qe&&t&&(qe.hasOnce=!0)}function Lm(e){return e.dynamicChildren=Ri>0?qe||mr:null,zw(),Ri>0&&qe&&qe.push(e),e}function _t(e,t,n,s,r,i){return Lm(k(e,t,n,s,r,i,!0))}function Va(e,t,n,s,r){return Lm(Kt(e,t,n,s,r,!0))}function Xo(e){return e?e.__v_isVNode===!0:!1}function Os(e,t){return e.type===t.type&&e.key===t.key}const Fm=({key:e})=>e??null,No=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Gt(e)||be(e)||ft(e)?{i:je,r:e,k:t,f:!!n}:e:null);function k(e,t=null,n=null,s=0,r=null,i=e===Ve?0:1,o=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Fm(t),ref:t&&No(t),scopeId:om,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:je};return l?(ou(c,n),i&128&&e.normalize(c)):n&&(c.shapeFlag|=Gt(n)?8:16),Ri>0&&!o&&qe&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&qe.push(c),c}const Kt=Kw;function Kw(e,t=null,n=null,s=0,r=null,i=!1){if((!e||e===mw)&&(e=xe),Xo(e)){const l=hs(e,t,!0);return n&&ou(l,n),Ri>0&&!i&&qe&&(l.shapeFlag&6?qe[qe.indexOf(e)]=l:qe.push(l)),l.patchFlag=-2,l}if(sE(e)&&(e=e.__vccOpts),t){t=Gw(t);let{class:l,style:c}=t;l&&!Gt(l)&&(t.class=rn(l)),Ut(c)&&(tu(c)&&!ut(c)&&(c=ie({},c)),t.style=Hi(c))}const o=Gt(e)?1:Mm(e)?128:cm(e)?64:Ut(e)?4:ft(e)?2:0;return k(e,t,n,s,r,o,i,!0)}function Gw(e){return e?tu(e)||Sm(e)?ie({},e):e:null}function hs(e,t,n=!1,s=!1){const{props:r,ref:i,patchFlag:o,children:l,transition:c}=e,u=t?Ww(r||{},t):r,h={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&Fm(u),ref:t&&t.ref?n&&i?ut(i)?i.concat(No(t)):[i,No(t)]:No(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Ve?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:c,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&hs(e.ssContent),ssFallback:e.ssFallback&&hs(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c&&s&&Si(h,c.clone(h)),h}function Fs(e=" ",t=0){return Kt(Pa,null,e,t)}function ff(e,t){const n=Kt(fi,null,e);return n.staticCount=t,n}function Ce(e="",t=!1){return t?(gt(),Va(xe,null,e)):Kt(xe,null,e)}function yn(e){return e==null||typeof e=="boolean"?Kt(xe):ut(e)?Kt(Ve,null,e.slice()):Xo(e)?es(e):Kt(Pa,null,String(e))}function es(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:hs(e)}function ou(e,t){let n=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(ut(t))n=16;else if(typeof t=="object")if(s&65){const r=t.default;r&&(r._c&&(r._d=!1),ou(e,r()),r._c&&(r._d=!0));return}else{n=32;const r=t._;!r&&!Sm(t)?t._ctx=je:r===3&&je&&(je.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ft(t)?(t={default:t,_ctx:je},n=32):(t=String(t),s&64?(n=16,t=[Fs(t)]):n=8);e.children=t,e.shapeFlag|=n}function Ww(...e){const t={};for(let n=0;n<e.length;n++){const s=e[n];for(const r in s)if(r==="class")t.class!==s.class&&(t.class=rn([t.class,s.class]));else if(r==="style")t.style=Hi([t.style,s.style]);else if(ya(r)){const i=t[r],o=s[r];o&&i!==o&&!(ut(i)&&i.includes(o))&&(t[r]=i?[].concat(i,o):o)}else r!==""&&(t[r]=s[r])}return t}function fn(e,t,n,s=null){an(e,t,7,[n,s])}const Qw=Am();let Jw=0;function Xw(e,t,n){const s=e.type,r=(t?t.appContext:e.appContext)||Qw,i={uid:Jw++,vnode:e,type:s,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Av(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Cm(s,r),emitsOptions:Nm(s,r),emit:null,emitted:null,propsDefaults:Ot,inheritAttrs:s.inheritAttrs,ctx:Ot,data:Ot,props:Ot,attrs:Ot,slots:Ot,refs:Ot,setupState:Ot,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=Uw.bind(null,i),e.ce&&e.ce(i),i}let Te=null;const au=()=>Te||je;let Yo,oc;{const e=Ea(),t=(n,s)=>{let r;return(r=e[n])||(r=e[n]=[]),r.push(s),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};Yo=t("__VUE_INSTANCE_SETTERS__",n=>Te=n),oc=t("__VUE_SSR_SETTERS__",n=>Ci=n)}const Gi=e=>{const t=Te;return Yo(e),e.scope.on(),()=>{e.scope.off(),Yo(t)}},df=()=>{Te&&Te.scope.off(),Yo(null)};function Um(e){return e.vnode.shapeFlag&4}let Ci=!1;function Yw(e,t=!1,n=!1){t&&oc(t);const{props:s,children:r}=e.vnode,i=Um(e);Iw(e,s,i,t),Pw(e,r,n||t);const o=i?Zw(e,t):void 0;return t&&oc(!1),o}function Zw(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,yw);const{setup:s}=n;if(s){Fn();const r=e.setupContext=s.length>1?eE(e):null,i=Gi(e),o=zi(s,e,0,[e.props,r]),l=Pp(o);if(Un(),i(),(l||e.sp)&&!ui(e)&&ym(e),l){if(o.then(df,df),t)return o.then(c=>{pf(e,c)}).catch(c=>{ba(c,e,0)});e.asyncDep=o}else pf(e,o)}else Bm(e)}function pf(e,t,n){ft(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Ut(t)&&(e.setupState=Zp(t)),Bm(e)}function Bm(e,t,n){const s=e.type;e.render||(e.render=s.render||sn);{const r=Gi(e);Fn();try{_w(e)}finally{Un(),r()}}}const tE={get(e,t){return we(e,"get",""),e[t]}};function eE(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,tE),slots:e.slots,emit:e.emit,expose:t}}function xa(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Zp(qv(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in hi)return hi[n](e)},has(t,n){return n in t||n in hi}})):e.proxy}function nE(e,t=!0){return ft(e)?e.displayName||e.name:e.name||t&&e.__name}function sE(e){return ft(e)&&"__vccOpts"in e}const Zt=(e,t)=>Wv(e,t,Ci);function lu(e,t,n){const s=arguments.length;return s===2?Ut(t)&&!ut(t)?Xo(t)?Kt(e,null,[t]):Kt(e,t):Kt(e,null,t):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&Xo(n)&&(n=[n]),Kt(e,t,n))}const rE="3.5.19";/**
* @vue/runtime-dom v3.5.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ac;const mf=typeof window<"u"&&window.trustedTypes;if(mf)try{ac=mf.createPolicy("vue",{createHTML:e=>e})}catch{}const $m=ac?e=>ac.createHTML(e):e=>e,iE="http://www.w3.org/2000/svg",oE="http://www.w3.org/1998/Math/MathML",Dn=typeof document<"u"?document:null,gf=Dn&&Dn.createElement("template"),aE={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,s)=>{const r=t==="svg"?Dn.createElementNS(iE,e):t==="mathml"?Dn.createElementNS(oE,e):n?Dn.createElement(e,{is:n}):Dn.createElement(e);return e==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:e=>Dn.createTextNode(e),createComment:e=>Dn.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Dn.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,s,r,i){const o=n?n.previousSibling:t.lastChild;if(r&&(r===i||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),n),!(r===i||!(r=r.nextSibling)););else{gf.innerHTML=$m(s==="svg"?`<svg>${e}</svg>`:s==="mathml"?`<math>${e}</math>`:e);const l=gf.content;if(s==="svg"||s==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}t.insertBefore(l,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},Yn="transition",Jr="animation",Pi=Symbol("_vtc"),jm={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},lE=ie({},fm,jm),cE=e=>(e.displayName="Transition",e.props=lE,e),uE=cE((e,{slots:t})=>lu(sw,hE(e),t)),Vs=(e,t=[])=>{ut(e)?e.forEach(n=>n(...t)):e&&e(...t)},yf=e=>e?ut(e)?e.some(t=>t.length>1):e.length>1:!1;function hE(e){const t={};for(const I in e)I in jm||(t[I]=e[I]);if(e.css===!1)return t;const{name:n="v",type:s,duration:r,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:l=`${n}-enter-to`,appearFromClass:c=i,appearActiveClass:u=o,appearToClass:h=l,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:m=`${n}-leave-active`,leaveToClass:y=`${n}-leave-to`}=e,T=fE(r),C=T&&T[0],P=T&&T[1],{onBeforeEnter:U,onEnter:N,onEnterCancelled:B,onLeave:H,onLeaveCancelled:G,onBeforeAppear:K=U,onAppear:S=N,onAppearCancelled:v=B}=t,_=(I,w,kt,Yt)=>{I._enterCancelled=Yt,xs(I,w?h:l),xs(I,w?u:o),kt&&kt()},A=(I,w)=>{I._isLeaving=!1,xs(I,d),xs(I,y),xs(I,m),w&&w()},R=I=>(w,kt)=>{const Yt=I?S:N,Bt=()=>_(w,I,kt);Vs(Yt,[w,Bt]),_f(()=>{xs(w,I?c:i),Vn(w,I?h:l),yf(Yt)||vf(w,s,C,Bt)})};return ie(t,{onBeforeEnter(I){Vs(U,[I]),Vn(I,i),Vn(I,o)},onBeforeAppear(I){Vs(K,[I]),Vn(I,c),Vn(I,u)},onEnter:R(!1),onAppear:R(!0),onLeave(I,w){I._isLeaving=!0;const kt=()=>A(I,w);Vn(I,d),I._enterCancelled?(Vn(I,m),Tf()):(Tf(),Vn(I,m)),_f(()=>{I._isLeaving&&(xs(I,d),Vn(I,y),yf(H)||vf(I,s,P,kt))}),Vs(H,[I,kt])},onEnterCancelled(I){_(I,!1,void 0,!0),Vs(B,[I])},onAppearCancelled(I){_(I,!0,void 0,!0),Vs(v,[I])},onLeaveCancelled(I){A(I),Vs(G,[I])}})}function fE(e){if(e==null)return null;if(Ut(e))return[Sl(e.enter),Sl(e.leave)];{const t=Sl(e);return[t,t]}}function Sl(e){return mv(e)}function Vn(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[Pi]||(e[Pi]=new Set)).add(t)}function xs(e,t){t.split(/\s+/).forEach(s=>s&&e.classList.remove(s));const n=e[Pi];n&&(n.delete(t),n.size||(e[Pi]=void 0))}function _f(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let dE=0;function vf(e,t,n,s){const r=e._endId=++dE,i=()=>{r===e._endId&&s()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:l,propCount:c}=pE(e,t);if(!o)return s();const u=o+"end";let h=0;const d=()=>{e.removeEventListener(u,m),i()},m=y=>{y.target===e&&++h>=c&&d()};setTimeout(()=>{h<c&&d()},l+1),e.addEventListener(u,m)}function pE(e,t){const n=window.getComputedStyle(e),s=T=>(n[T]||"").split(", "),r=s(`${Yn}Delay`),i=s(`${Yn}Duration`),o=wf(r,i),l=s(`${Jr}Delay`),c=s(`${Jr}Duration`),u=wf(l,c);let h=null,d=0,m=0;t===Yn?o>0&&(h=Yn,d=o,m=i.length):t===Jr?u>0&&(h=Jr,d=u,m=c.length):(d=Math.max(o,u),h=d>0?o>u?Yn:Jr:null,m=h?h===Yn?i.length:c.length:0);const y=h===Yn&&/\b(transform|all)(,|$)/.test(s(`${Yn}Property`).toString());return{type:h,timeout:d,propCount:m,hasTransform:y}}function wf(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,s)=>Ef(n)+Ef(e[s])))}function Ef(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function Tf(){return document.body.offsetHeight}function mE(e,t,n){const s=e[Pi];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Zo=Symbol("_vod"),qm=Symbol("_vsh"),gE={beforeMount(e,{value:t},{transition:n}){e[Zo]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):Xr(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:s}){!t!=!n&&(s?t?(s.beforeEnter(e),Xr(e,!0),s.enter(e)):s.leave(e,()=>{Xr(e,!1)}):Xr(e,t))},beforeUnmount(e,{value:t}){Xr(e,t)}};function Xr(e,t){e.style.display=t?e[Zo]:"none",e[qm]=!t}const Hm=Symbol("");function yE(e){const t=au();if(!t)return;const n=t.ut=(r=e(t.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${t.uid}"]`)).forEach(i=>ta(i,r))},s=()=>{const r=e(t.proxy);t.ce?ta(t.ce,r):lc(t.subTree,r),n(r)};vm(()=>{sm(s)}),Kn(()=>{Hs(s,sn,{flush:"post"});const r=new MutationObserver(s);r.observe(t.subTree.el.parentNode,{childList:!0}),Ki(()=>r.disconnect())})}function lc(e,t){if(e.shapeFlag&128){const n=e.suspense;e=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{lc(n.activeBranch,t)})}for(;e.component;)e=e.component.subTree;if(e.shapeFlag&1&&e.el)ta(e.el,t);else if(e.type===Ve)e.children.forEach(n=>lc(n,t));else if(e.type===fi){let{el:n,anchor:s}=e;for(;n&&(ta(n,t),n!==s);)n=n.nextSibling}}function ta(e,t){if(e.nodeType===1){const n=e.style;let s="";for(const r in t){const i=Tv(t[r]);n.setProperty(`--${r}`,i),s+=`--${r}: ${i};`}n[Hm]=s}}const _E=/(^|;)\s*display\s*:/;function vE(e,t,n){const s=e.style,r=Gt(n);let i=!1;if(n&&!r){if(t)if(Gt(t))for(const o of t.split(";")){const l=o.slice(0,o.indexOf(":")).trim();n[l]==null&&Mo(s,l,"")}else for(const o in t)n[o]==null&&Mo(s,o,"");for(const o in n)o==="display"&&(i=!0),Mo(s,o,n[o])}else if(r){if(t!==n){const o=s[Hm];o&&(n+=";"+o),s.cssText=n,i=_E.test(n)}}else t&&e.removeAttribute("style");Zo in e&&(e[Zo]=i?s.display:"",e[qm]&&(s.display="none"))}const Af=/\s*!important$/;function Mo(e,t,n){if(ut(n))n.forEach(s=>Mo(e,t,s));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const s=wE(e,t);Af.test(n)?e.setProperty(ws(s),n.replace(Af,""),"important"):e[s]=n}}const bf=["Webkit","Moz","ms"],Rl={};function wE(e,t){const n=Rl[t];if(n)return n;let s=Ye(t);if(s!=="filter"&&s in e)return Rl[t]=s;s=wa(s);for(let r=0;r<bf.length;r++){const i=bf[r]+s;if(i in e)return Rl[t]=i}return t}const If="http://www.w3.org/1999/xlink";function Sf(e,t,n,s,r,i=Ev(t)){s&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(If,t.slice(6,t.length)):e.setAttributeNS(If,t,n):n==null||i&&!Dp(n)?e.removeAttribute(t):e.setAttribute(t,i?"":vs(n)?String(n):n)}function Rf(e,t,n,s,r){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?$m(n):n);return}const i=e.tagName;if(t==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?e.getAttribute("value")||"":e.value,c=n==null?e.type==="checkbox"?"on":"":String(n);(l!==c||!("_value"in e))&&(e.value=c),n==null&&e.removeAttribute(t),e._value=n;return}let o=!1;if(n===""||n==null){const l=typeof e[t];l==="boolean"?n=Dp(n):n==null&&l==="string"?(n="",o=!0):l==="number"&&(n=0,o=!0)}try{e[t]=n}catch{}o&&e.removeAttribute(r||t)}function lr(e,t,n,s){e.addEventListener(t,n,s)}function EE(e,t,n,s){e.removeEventListener(t,n,s)}const Cf=Symbol("_vei");function TE(e,t,n,s,r=null){const i=e[Cf]||(e[Cf]={}),o=i[t];if(s&&o)o.value=s;else{const[l,c]=AE(t);if(s){const u=i[t]=SE(s,r);lr(e,l,u,c)}else o&&(EE(e,l,o,c),i[t]=void 0)}}const Pf=/(?:Once|Passive|Capture)$/;function AE(e){let t;if(Pf.test(e)){t={};let s;for(;s=e.match(Pf);)e=e.slice(0,e.length-s[0].length),t[s[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):ws(e.slice(2)),t]}let Cl=0;const bE=Promise.resolve(),IE=()=>Cl||(bE.then(()=>Cl=0),Cl=Date.now());function SE(e,t){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;an(RE(s,n.value),t,5,[s])};return n.value=e,n.attached=IE(),n}function RE(e,t){if(ut(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(s=>r=>!r._stopped&&s&&s(r))}else return t}const Vf=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,CE=(e,t,n,s,r,i)=>{const o=r==="svg";t==="class"?mE(e,s,o):t==="style"?vE(e,n,s):ya(t)?zc(t)||TE(e,t,n,s,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):PE(e,t,s,o))?(Rf(e,t,s),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Sf(e,t,s,o,i,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Gt(s))?Rf(e,Ye(t),s,i,t):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),Sf(e,t,s,o))};function PE(e,t,n,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in e&&Vf(t)&&ft(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const r=e.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return Vf(t)&&Gt(n)?!1:t in e}const xf=e=>{const t=e.props["onUpdate:modelValue"]||!1;return ut(t)?n=>ko(t,n):t};function VE(e){e.target.composing=!0}function kf(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Pl=Symbol("_assign"),xE={created(e,{modifiers:{lazy:t,trim:n,number:s}},r){e[Pl]=xf(r);const i=s||r.props&&r.props.type==="number";lr(e,t?"change":"input",o=>{if(o.target.composing)return;let l=e.value;n&&(l=l.trim()),i&&(l=Ql(l)),e[Pl](l)}),n&&lr(e,"change",()=>{e.value=e.value.trim()}),t||(lr(e,"compositionstart",VE),lr(e,"compositionend",kf),lr(e,"change",kf))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:s,trim:r,number:i}},o){if(e[Pl]=xf(o),e.composing)return;const l=(i||e.type==="number")&&!/^0\d/.test(e.value)?Ql(e.value):e.value,c=t??"";l!==c&&(document.activeElement===e&&e.type!=="range"&&(s&&t===n||r&&e.value.trim()===c)||(e.value=c))}},kE=["ctrl","shift","alt","meta"],DE={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>kE.some(n=>e[`${n}Key`]&&!t.includes(n))},pr=(e,t)=>{const n=e._withMods||(e._withMods={}),s=t.join(".");return n[s]||(n[s]=(r,...i)=>{for(let o=0;o<t.length;o++){const l=DE[t[o]];if(l&&l(r,t))return}return e(r,...i)})},OE={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},NE=(e,t)=>{const n=e._withKeys||(e._withKeys={}),s=t.join(".");return n[s]||(n[s]=r=>{if(!("key"in r))return;const i=ws(r.key);if(t.some(o=>o===i||OE[o]===i))return e(r)})},ME=ie({patchProp:CE},aE);let Df;function LE(){return Df||(Df=xw(ME))}const FE=(...e)=>{const t=LE().createApp(...e),{mount:n}=t;return t.mount=s=>{const r=BE(s);if(!r)return;const i=t._component;!ft(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=n(r,!1,UE(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},t};function UE(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function BE(e){return Gt(e)?document.querySelector(e):e}/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const cr=typeof document<"u";function zm(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function $E(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&zm(e.default)}const Pt=Object.assign;function Vl(e,t){const n={};for(const s in t){const r=t[s];n[s]=ln(r)?r.map(e):e(r)}return n}const pi=()=>{},ln=Array.isArray,Km=/#/g,jE=/&/g,qE=/\//g,HE=/=/g,zE=/\?/g,Gm=/\+/g,KE=/%5B/g,GE=/%5D/g,Wm=/%5E/g,WE=/%60/g,Qm=/%7B/g,QE=/%7C/g,Jm=/%7D/g,JE=/%20/g;function cu(e){return encodeURI(""+e).replace(QE,"|").replace(KE,"[").replace(GE,"]")}function XE(e){return cu(e).replace(Qm,"{").replace(Jm,"}").replace(Wm,"^")}function cc(e){return cu(e).replace(Gm,"%2B").replace(JE,"+").replace(Km,"%23").replace(jE,"%26").replace(WE,"`").replace(Qm,"{").replace(Jm,"}").replace(Wm,"^")}function YE(e){return cc(e).replace(HE,"%3D")}function ZE(e){return cu(e).replace(Km,"%23").replace(zE,"%3F")}function t0(e){return e==null?"":ZE(e).replace(qE,"%2F")}function Vi(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const e0=/\/$/,n0=e=>e.replace(e0,"");function xl(e,t,n="/"){let s,r={},i="",o="";const l=t.indexOf("#");let c=t.indexOf("?");return l<c&&l>=0&&(c=-1),c>-1&&(s=t.slice(0,c),i=t.slice(c+1,l>-1?l:t.length),r=e(i)),l>-1&&(s=s||t.slice(0,l),o=t.slice(l,t.length)),s=o0(s??t,n),{fullPath:s+(i&&"?")+i+o,path:s,query:r,hash:Vi(o)}}function s0(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function Of(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function r0(e,t,n){const s=t.matched.length-1,r=n.matched.length-1;return s>-1&&s===r&&Er(t.matched[s],n.matched[r])&&Xm(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function Er(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Xm(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!i0(e[n],t[n]))return!1;return!0}function i0(e,t){return ln(e)?Nf(e,t):ln(t)?Nf(t,e):e===t}function Nf(e,t){return ln(t)?e.length===t.length&&e.every((n,s)=>n===t[s]):e.length===1&&e[0]===t}function o0(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),s=e.split("/"),r=s[s.length-1];(r===".."||r===".")&&s.push("");let i=n.length-1,o,l;for(o=0;o<s.length;o++)if(l=s[o],l!==".")if(l==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+s.slice(o).join("/")}const Zn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var xi;(function(e){e.pop="pop",e.push="push"})(xi||(xi={}));var mi;(function(e){e.back="back",e.forward="forward",e.unknown=""})(mi||(mi={}));function a0(e){if(!e)if(cr){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),n0(e)}const l0=/^[^#]+#/;function c0(e,t){return e.replace(l0,"#")+t}function u0(e,t){const n=document.documentElement.getBoundingClientRect(),s=e.getBoundingClientRect();return{behavior:t.behavior,left:s.left-n.left-(t.left||0),top:s.top-n.top-(t.top||0)}}const ka=()=>({left:window.scrollX,top:window.scrollY});function h0(e){let t;if("el"in e){const n=e.el,s=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;t=u0(r,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function Mf(e,t){return(history.state?history.state.position-t:-1)+e}const uc=new Map;function f0(e,t){uc.set(e,t)}function d0(e){const t=uc.get(e);return uc.delete(e),t}let p0=()=>location.protocol+"//"+location.host;function Ym(e,t){const{pathname:n,search:s,hash:r}=t,i=e.indexOf("#");if(i>-1){let l=r.includes(e.slice(i))?e.slice(i).length:1,c=r.slice(l);return c[0]!=="/"&&(c="/"+c),Of(c,"")}return Of(n,e)+s+r}function m0(e,t,n,s){let r=[],i=[],o=null;const l=({state:m})=>{const y=Ym(e,location),T=n.value,C=t.value;let P=0;if(m){if(n.value=y,t.value=m,o&&o===T){o=null;return}P=C?m.position-C.position:0}else s(y);r.forEach(U=>{U(n.value,T,{delta:P,type:xi.pop,direction:P?P>0?mi.forward:mi.back:mi.unknown})})};function c(){o=n.value}function u(m){r.push(m);const y=()=>{const T=r.indexOf(m);T>-1&&r.splice(T,1)};return i.push(y),y}function h(){const{history:m}=window;m.state&&m.replaceState(Pt({},m.state,{scroll:ka()}),"")}function d(){for(const m of i)m();i=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",h,{passive:!0}),{pauseListeners:c,listen:u,destroy:d}}function Lf(e,t,n,s=!1,r=!1){return{back:e,current:t,forward:n,replaced:s,position:window.history.length,scroll:r?ka():null}}function g0(e){const{history:t,location:n}=window,s={value:Ym(e,n)},r={value:t.state};r.value||i(s.value,{back:null,current:s.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function i(c,u,h){const d=e.indexOf("#"),m=d>-1?(n.host&&document.querySelector("base")?e:e.slice(d))+c:p0()+e+c;try{t[h?"replaceState":"pushState"](u,"",m),r.value=u}catch(y){console.error(y),n[h?"replace":"assign"](m)}}function o(c,u){const h=Pt({},t.state,Lf(r.value.back,c,r.value.forward,!0),u,{position:r.value.position});i(c,h,!0),s.value=c}function l(c,u){const h=Pt({},r.value,t.state,{forward:c,scroll:ka()});i(h.current,h,!0);const d=Pt({},Lf(s.value,c,null),{position:h.position+1},u);i(c,d,!1),s.value=c}return{location:s,state:r,push:l,replace:o}}function y0(e){e=a0(e);const t=g0(e),n=m0(e,t.state,t.location,t.replace);function s(i,o=!0){o||n.pauseListeners(),history.go(i)}const r=Pt({location:"",base:e,go:s,createHref:c0.bind(null,e)},t,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>t.state.value}),r}function _0(e){return typeof e=="string"||e&&typeof e=="object"}function Zm(e){return typeof e=="string"||typeof e=="symbol"}const tg=Symbol("");var Ff;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(Ff||(Ff={}));function Tr(e,t){return Pt(new Error,{type:e,[tg]:!0},t)}function xn(e,t){return e instanceof Error&&tg in e&&(t==null||!!(e.type&t))}const Uf="[^/]+?",v0={sensitive:!1,strict:!1,start:!0,end:!0},w0=/[.+*?^${}()[\]/\\]/g;function E0(e,t){const n=Pt({},v0,t),s=[];let r=n.start?"^":"";const i=[];for(const u of e){const h=u.length?[]:[90];n.strict&&!u.length&&(r+="/");for(let d=0;d<u.length;d++){const m=u[d];let y=40+(n.sensitive?.25:0);if(m.type===0)d||(r+="/"),r+=m.value.replace(w0,"\\$&"),y+=40;else if(m.type===1){const{value:T,repeatable:C,optional:P,regexp:U}=m;i.push({name:T,repeatable:C,optional:P});const N=U||Uf;if(N!==Uf){y+=10;try{new RegExp(`(${N})`)}catch(H){throw new Error(`Invalid custom RegExp for param "${T}" (${N}): `+H.message)}}let B=C?`((?:${N})(?:/(?:${N}))*)`:`(${N})`;d||(B=P&&u.length<2?`(?:/${B})`:"/"+B),P&&(B+="?"),r+=B,y+=20,P&&(y+=-8),C&&(y+=-20),N===".*"&&(y+=-50)}h.push(y)}s.push(h)}if(n.strict&&n.end){const u=s.length-1;s[u][s[u].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function l(u){const h=u.match(o),d={};if(!h)return null;for(let m=1;m<h.length;m++){const y=h[m]||"",T=i[m-1];d[T.name]=y&&T.repeatable?y.split("/"):y}return d}function c(u){let h="",d=!1;for(const m of e){(!d||!h.endsWith("/"))&&(h+="/"),d=!1;for(const y of m)if(y.type===0)h+=y.value;else if(y.type===1){const{value:T,repeatable:C,optional:P}=y,U=T in u?u[T]:"";if(ln(U)&&!C)throw new Error(`Provided param "${T}" is an array but it is not repeatable (* or + modifiers)`);const N=ln(U)?U.join("/"):U;if(!N)if(P)m.length<2&&(h.endsWith("/")?h=h.slice(0,-1):d=!0);else throw new Error(`Missing required param "${T}"`);h+=N}}return h||"/"}return{re:o,score:s,keys:i,parse:l,stringify:c}}function T0(e,t){let n=0;for(;n<e.length&&n<t.length;){const s=t[n]-e[n];if(s)return s;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function eg(e,t){let n=0;const s=e.score,r=t.score;for(;n<s.length&&n<r.length;){const i=T0(s[n],r[n]);if(i)return i;n++}if(Math.abs(r.length-s.length)===1){if(Bf(s))return 1;if(Bf(r))return-1}return r.length-s.length}function Bf(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const A0={type:0,value:""},b0=/[a-zA-Z0-9_]/;function I0(e){if(!e)return[[]];if(e==="/")return[[A0]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(y){throw new Error(`ERR (${n})/"${u}": ${y}`)}let n=0,s=n;const r=[];let i;function o(){i&&r.push(i),i=[]}let l=0,c,u="",h="";function d(){u&&(n===0?i.push({type:0,value:u}):n===1||n===2||n===3?(i.length>1&&(c==="*"||c==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:u,regexp:h,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):t("Invalid state to consume buffer"),u="")}function m(){u+=c}for(;l<e.length;){if(c=e[l++],c==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:c==="/"?(u&&d(),o()):c===":"?(d(),n=1):m();break;case 4:m(),n=s;break;case 1:c==="("?n=2:b0.test(c)?m():(d(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&l--);break;case 2:c===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+c:n=3:h+=c;break;case 3:d(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&l--,h="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${u}"`),d(),o(),r}function S0(e,t,n){const s=E0(I0(e.path),n),r=Pt(s,{record:e,parent:t,children:[],alias:[]});return t&&!r.record.aliasOf==!t.record.aliasOf&&t.children.push(r),r}function R0(e,t){const n=[],s=new Map;t=Hf({strict:!1,end:!0,sensitive:!1},t);function r(d){return s.get(d)}function i(d,m,y){const T=!y,C=jf(d);C.aliasOf=y&&y.record;const P=Hf(t,d),U=[C];if("alias"in d){const H=typeof d.alias=="string"?[d.alias]:d.alias;for(const G of H)U.push(jf(Pt({},C,{components:y?y.record.components:C.components,path:G,aliasOf:y?y.record:C})))}let N,B;for(const H of U){const{path:G}=H;if(m&&G[0]!=="/"){const K=m.record.path,S=K[K.length-1]==="/"?"":"/";H.path=m.record.path+(G&&S+G)}if(N=S0(H,m,P),y?y.alias.push(N):(B=B||N,B!==N&&B.alias.push(N),T&&d.name&&!qf(N)&&o(d.name)),ng(N)&&c(N),C.children){const K=C.children;for(let S=0;S<K.length;S++)i(K[S],N,y&&y.children[S])}y=y||N}return B?()=>{o(B)}:pi}function o(d){if(Zm(d)){const m=s.get(d);m&&(s.delete(d),n.splice(n.indexOf(m),1),m.children.forEach(o),m.alias.forEach(o))}else{const m=n.indexOf(d);m>-1&&(n.splice(m,1),d.record.name&&s.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function l(){return n}function c(d){const m=V0(d,n);n.splice(m,0,d),d.record.name&&!qf(d)&&s.set(d.record.name,d)}function u(d,m){let y,T={},C,P;if("name"in d&&d.name){if(y=s.get(d.name),!y)throw Tr(1,{location:d});P=y.record.name,T=Pt($f(m.params,y.keys.filter(B=>!B.optional).concat(y.parent?y.parent.keys.filter(B=>B.optional):[]).map(B=>B.name)),d.params&&$f(d.params,y.keys.map(B=>B.name))),C=y.stringify(T)}else if(d.path!=null)C=d.path,y=n.find(B=>B.re.test(C)),y&&(T=y.parse(C),P=y.record.name);else{if(y=m.name?s.get(m.name):n.find(B=>B.re.test(m.path)),!y)throw Tr(1,{location:d,currentLocation:m});P=y.record.name,T=Pt({},m.params,d.params),C=y.stringify(T)}const U=[];let N=y;for(;N;)U.unshift(N.record),N=N.parent;return{name:P,path:C,params:T,matched:U,meta:P0(U)}}e.forEach(d=>i(d));function h(){n.length=0,s.clear()}return{addRoute:i,resolve:u,removeRoute:o,clearRoutes:h,getRoutes:l,getRecordMatcher:r}}function $f(e,t){const n={};for(const s of t)s in e&&(n[s]=e[s]);return n}function jf(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:C0(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function C0(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const s in e.components)t[s]=typeof n=="object"?n[s]:n;return t}function qf(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function P0(e){return e.reduce((t,n)=>Pt(t,n.meta),{})}function Hf(e,t){const n={};for(const s in e)n[s]=s in t?t[s]:e[s];return n}function V0(e,t){let n=0,s=t.length;for(;n!==s;){const i=n+s>>1;eg(e,t[i])<0?s=i:n=i+1}const r=x0(e);return r&&(s=t.lastIndexOf(r,s-1)),s}function x0(e){let t=e;for(;t=t.parent;)if(ng(t)&&eg(e,t)===0)return t}function ng({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function k0(e){const t={};if(e===""||e==="?")return t;const s=(e[0]==="?"?e.slice(1):e).split("&");for(let r=0;r<s.length;++r){const i=s[r].replace(Gm," "),o=i.indexOf("="),l=Vi(o<0?i:i.slice(0,o)),c=o<0?null:Vi(i.slice(o+1));if(l in t){let u=t[l];ln(u)||(u=t[l]=[u]),u.push(c)}else t[l]=c}return t}function zf(e){let t="";for(let n in e){const s=e[n];if(n=YE(n),s==null){s!==void 0&&(t+=(t.length?"&":"")+n);continue}(ln(s)?s.map(i=>i&&cc(i)):[s&&cc(s)]).forEach(i=>{i!==void 0&&(t+=(t.length?"&":"")+n,i!=null&&(t+="="+i))})}return t}function D0(e){const t={};for(const n in e){const s=e[n];s!==void 0&&(t[n]=ln(s)?s.map(r=>r==null?null:""+r):s==null?s:""+s)}return t}const O0=Symbol(""),Kf=Symbol(""),uu=Symbol(""),sg=Symbol(""),hc=Symbol("");function Yr(){let e=[];function t(s){return e.push(s),()=>{const r=e.indexOf(s);r>-1&&e.splice(r,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function ns(e,t,n,s,r,i=o=>o()){const o=s&&(s.enterCallbacks[r]=s.enterCallbacks[r]||[]);return()=>new Promise((l,c)=>{const u=m=>{m===!1?c(Tr(4,{from:n,to:t})):m instanceof Error?c(m):_0(m)?c(Tr(2,{from:t,to:m})):(o&&s.enterCallbacks[r]===o&&typeof m=="function"&&o.push(m),l())},h=i(()=>e.call(s&&s.instances[r],t,n,u));let d=Promise.resolve(h);e.length<3&&(d=d.then(u)),d.catch(m=>c(m))})}function kl(e,t,n,s,r=i=>i()){const i=[];for(const o of e)for(const l in o.components){let c=o.components[l];if(!(t!=="beforeRouteEnter"&&!o.instances[l]))if(zm(c)){const h=(c.__vccOpts||c)[t];h&&i.push(ns(h,n,s,o,l,r))}else{let u=c();i.push(()=>u.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${l}" at "${o.path}"`);const d=$E(h)?h.default:h;o.mods[l]=h,o.components[l]=d;const y=(d.__vccOpts||d)[t];return y&&ns(y,n,s,o,l,r)()}))}}return i}function Gf(e){const t=Ln(uu),n=Ln(sg),s=Zt(()=>{const c=qs(e.to);return t.resolve(c)}),r=Zt(()=>{const{matched:c}=s.value,{length:u}=c,h=c[u-1],d=n.matched;if(!h||!d.length)return-1;const m=d.findIndex(Er.bind(null,h));if(m>-1)return m;const y=Wf(c[u-2]);return u>1&&Wf(h)===y&&d[d.length-1].path!==y?d.findIndex(Er.bind(null,c[u-2])):m}),i=Zt(()=>r.value>-1&&U0(n.params,s.value.params)),o=Zt(()=>r.value>-1&&r.value===n.matched.length-1&&Xm(n.params,s.value.params));function l(c={}){if(F0(c)){const u=t[qs(e.replace)?"replace":"push"](qs(e.to)).catch(pi);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:s,href:Zt(()=>s.value.href),isActive:i,isExactActive:o,navigate:l}}function N0(e){return e.length===1?e[0]:e}const M0=cn({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Gf,setup(e,{slots:t}){const n=Aa(Gf(e)),{options:s}=Ln(uu),r=Zt(()=>({[Qf(e.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[Qf(e.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=t.default&&N0(t.default(n));return e.custom?i:lu("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},i)}}}),L0=M0;function F0(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function U0(e,t){for(const n in t){const s=t[n],r=e[n];if(typeof s=="string"){if(s!==r)return!1}else if(!ln(r)||r.length!==s.length||s.some((i,o)=>i!==r[o]))return!1}return!0}function Wf(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Qf=(e,t,n)=>e??t??n,B0=cn({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const s=Ln(hc),r=Zt(()=>e.route||s.value),i=Ln(Kf,0),o=Zt(()=>{let u=qs(i);const{matched:h}=r.value;let d;for(;(d=h[u])&&!d.components;)u++;return u}),l=Zt(()=>r.value.matched[o.value]);Oo(Kf,Zt(()=>o.value+1)),Oo(O0,l),Oo(hc,r);const c=re();return Hs(()=>[c.value,l.value,e.name],([u,h,d],[m,y,T])=>{h&&(h.instances[d]=u,y&&y!==h&&u&&u===m&&(h.leaveGuards.size||(h.leaveGuards=y.leaveGuards),h.updateGuards.size||(h.updateGuards=y.updateGuards))),u&&h&&(!y||!Er(h,y)||!m)&&(h.enterCallbacks[d]||[]).forEach(C=>C(u))},{flush:"post"}),()=>{const u=r.value,h=e.name,d=l.value,m=d&&d.components[h];if(!m)return Jf(n.default,{Component:m,route:u});const y=d.props[h],T=y?y===!0?u.params:typeof y=="function"?y(u):y:null,P=lu(m,Pt({},T,t,{onVnodeUnmounted:U=>{U.component.isUnmounted&&(d.instances[h]=null)},ref:c}));return Jf(n.default,{Component:P,route:u})||P}}});function Jf(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const rg=B0;function $0(e){const t=R0(e.routes,e),n=e.parseQuery||k0,s=e.stringifyQuery||zf,r=e.history,i=Yr(),o=Yr(),l=Yr(),c=Hv(Zn);let u=Zn;cr&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=Vl.bind(null,M=>""+M),d=Vl.bind(null,t0),m=Vl.bind(null,Vi);function y(M,tt){let Y,nt;return Zm(M)?(Y=t.getRecordMatcher(M),nt=tt):nt=M,t.addRoute(nt,Y)}function T(M){const tt=t.getRecordMatcher(M);tt&&t.removeRoute(tt)}function C(){return t.getRoutes().map(M=>M.record)}function P(M){return!!t.getRecordMatcher(M)}function U(M,tt){if(tt=Pt({},tt||c.value),typeof M=="string"){const V=xl(n,M,tt.path),L=t.resolve({path:V.path},tt),j=r.createHref(V.fullPath);return Pt(V,L,{params:m(L.params),hash:Vi(V.hash),redirectedFrom:void 0,href:j})}let Y;if(M.path!=null)Y=Pt({},M,{path:xl(n,M.path,tt.path).path});else{const V=Pt({},M.params);for(const L in V)V[L]==null&&delete V[L];Y=Pt({},M,{params:d(V)}),tt.params=d(tt.params)}const nt=t.resolve(Y,tt),St=M.hash||"";nt.params=h(m(nt.params));const E=s0(s,Pt({},M,{hash:XE(St),path:nt.path})),b=r.createHref(E);return Pt({fullPath:E,hash:St,query:s===zf?D0(M.query):M.query||{}},nt,{redirectedFrom:void 0,href:b})}function N(M){return typeof M=="string"?xl(n,M,c.value.path):Pt({},M)}function B(M,tt){if(u!==M)return Tr(8,{from:tt,to:M})}function H(M){return S(M)}function G(M){return H(Pt(N(M),{replace:!0}))}function K(M){const tt=M.matched[M.matched.length-1];if(tt&&tt.redirect){const{redirect:Y}=tt;let nt=typeof Y=="function"?Y(M):Y;return typeof nt=="string"&&(nt=nt.includes("?")||nt.includes("#")?nt=N(nt):{path:nt},nt.params={}),Pt({query:M.query,hash:M.hash,params:nt.path!=null?{}:M.params},nt)}}function S(M,tt){const Y=u=U(M),nt=c.value,St=M.state,E=M.force,b=M.replace===!0,V=K(Y);if(V)return S(Pt(N(V),{state:typeof V=="object"?Pt({},St,V.state):St,force:E,replace:b}),tt||Y);const L=Y;L.redirectedFrom=tt;let j;return!E&&r0(s,nt,Y)&&(j=Tr(16,{to:L,from:nt}),Ke(nt,nt,!0,!1)),(j?Promise.resolve(j):A(L,nt)).catch(F=>xn(F)?xn(F,2)?F:Ze(F):vt(F,L,nt)).then(F=>{if(F){if(xn(F,2))return S(Pt({replace:b},N(F.to),{state:typeof F.to=="object"?Pt({},St,F.to.state):St,force:E}),tt||L)}else F=I(L,nt,!0,b,St);return R(L,nt,F),F})}function v(M,tt){const Y=B(M,tt);return Y?Promise.reject(Y):Promise.resolve()}function _(M){const tt=Gn.values().next().value;return tt&&typeof tt.runWithContext=="function"?tt.runWithContext(M):M()}function A(M,tt){let Y;const[nt,St,E]=j0(M,tt);Y=kl(nt.reverse(),"beforeRouteLeave",M,tt);for(const V of nt)V.leaveGuards.forEach(L=>{Y.push(ns(L,M,tt))});const b=v.bind(null,M,tt);return Y.push(b),ke(Y).then(()=>{Y=[];for(const V of i.list())Y.push(ns(V,M,tt));return Y.push(b),ke(Y)}).then(()=>{Y=kl(St,"beforeRouteUpdate",M,tt);for(const V of St)V.updateGuards.forEach(L=>{Y.push(ns(L,M,tt))});return Y.push(b),ke(Y)}).then(()=>{Y=[];for(const V of E)if(V.beforeEnter)if(ln(V.beforeEnter))for(const L of V.beforeEnter)Y.push(ns(L,M,tt));else Y.push(ns(V.beforeEnter,M,tt));return Y.push(b),ke(Y)}).then(()=>(M.matched.forEach(V=>V.enterCallbacks={}),Y=kl(E,"beforeRouteEnter",M,tt,_),Y.push(b),ke(Y))).then(()=>{Y=[];for(const V of o.list())Y.push(ns(V,M,tt));return Y.push(b),ke(Y)}).catch(V=>xn(V,8)?V:Promise.reject(V))}function R(M,tt,Y){l.list().forEach(nt=>_(()=>nt(M,tt,Y)))}function I(M,tt,Y,nt,St){const E=B(M,tt);if(E)return E;const b=tt===Zn,V=cr?history.state:{};Y&&(nt||b?r.replace(M.fullPath,Pt({scroll:b&&V&&V.scroll},St)):r.push(M.fullPath,St)),c.value=M,Ke(M,tt,Y,b),Ze()}let w;function kt(){w||(w=r.listen((M,tt,Y)=>{if(!hn.listening)return;const nt=U(M),St=K(nt);if(St){S(Pt(St,{replace:!0,force:!0}),nt).catch(pi);return}u=nt;const E=c.value;cr&&f0(Mf(E.fullPath,Y.delta),ka()),A(nt,E).catch(b=>xn(b,12)?b:xn(b,2)?(S(Pt(N(b.to),{force:!0}),nt).then(V=>{xn(V,20)&&!Y.delta&&Y.type===xi.pop&&r.go(-1,!1)}).catch(pi),Promise.reject()):(Y.delta&&r.go(-Y.delta,!1),vt(b,nt,E))).then(b=>{b=b||I(nt,E,!1),b&&(Y.delta&&!xn(b,8)?r.go(-Y.delta,!1):Y.type===xi.pop&&xn(b,20)&&r.go(-1,!1)),R(nt,E,b)}).catch(pi)}))}let Yt=Yr(),Bt=Yr(),Tt;function vt(M,tt,Y){Ze(M);const nt=Bt.list();return nt.length?nt.forEach(St=>St(M,tt,Y)):console.error(M),Promise.reject(M)}function Ue(){return Tt&&c.value!==Zn?Promise.resolve():new Promise((M,tt)=>{Yt.add([M,tt])})}function Ze(M){return Tt||(Tt=!M,kt(),Yt.list().forEach(([tt,Y])=>M?Y(M):tt()),Yt.reset()),M}function Ke(M,tt,Y,nt){const{scrollBehavior:St}=e;if(!cr||!St)return Promise.resolve();const E=!Y&&d0(Mf(M.fullPath,0))||(nt||!Y)&&history.state&&history.state.scroll||null;return em().then(()=>St(M,tt,E)).then(b=>b&&h0(b)).catch(b=>vt(b,M,tt))}const $t=M=>r.go(M);let jt;const Gn=new Set,hn={currentRoute:c,listening:!0,addRoute:y,removeRoute:T,clearRoutes:t.clearRoutes,hasRoute:P,getRoutes:C,resolve:U,options:e,push:H,replace:G,go:$t,back:()=>$t(-1),forward:()=>$t(1),beforeEach:i.add,beforeResolve:o.add,afterEach:l.add,onError:Bt.add,isReady:Ue,install(M){const tt=this;M.component("RouterLink",L0),M.component("RouterView",rg),M.config.globalProperties.$router=tt,Object.defineProperty(M.config.globalProperties,"$route",{enumerable:!0,get:()=>qs(c)}),cr&&!jt&&c.value===Zn&&(jt=!0,H(r.location).catch(St=>{}));const Y={};for(const St in Zn)Object.defineProperty(Y,St,{get:()=>c.value[St],enumerable:!0});M.provide(uu,tt),M.provide(sg,Jp(Y)),M.provide(hc,c);const nt=M.unmount;Gn.add(M),M.unmount=function(){Gn.delete(M),Gn.size<1&&(u=Zn,w&&w(),w=null,c.value=Zn,jt=!1,Tt=!1),nt()}}};function ke(M){return M.reduce((tt,Y)=>tt.then(()=>_(Y)),Promise.resolve())}return hn}function j0(e,t){const n=[],s=[],r=[],i=Math.max(t.matched.length,e.matched.length);for(let o=0;o<i;o++){const l=t.matched[o];l&&(e.matched.find(u=>Er(u,l))?s.push(l):n.push(l));const c=e.matched[o];c&&(t.matched.find(u=>Er(u,c))||r.push(c))}return[n,s,r]}const q0={class:"loading-content"},H0={class:"loading-text"},z0={class:"loading-message"},K0={class:"progress-bar"},G0=cn({__name:"InitialLoading",emits:["loading-complete"],setup(e,{emit:t}){const n=t,s=re(!1),r=re(0),i=re("正在初始化..."),o=["正在初始化...","连接插件仓库...","加载插件数据...","准备界面...","即将完成..."];let l=0;const c=()=>{const h=(l+1)*20,d=setInterval(()=>{r.value<h?r.value+=Math.random()*3+1:(clearInterval(d),l<o.length-1?(l++,i.value=o[l],setTimeout(()=>c(),300)):setTimeout(()=>{s.value=!0,setTimeout(()=>{n("loading-complete")},1e3)},500))},50)},u=()=>{setTimeout(()=>{c()},500)};return Kn(()=>{u()}),(h,d)=>(gt(),_t("div",{id:"initial-loading",class:rn(["initial-loading",{"loading-out":s.value}])},[k("div",q0,[d[0]||(d[0]=ff('<div class="logo-container" data-v-62f79310><div class="logo-icon" data-v-62f79310><svg viewBox="0 0 100 100" class="mai-logo" data-v-62f79310><circle cx="50" cy="40" r="25" fill="none" stroke="currentColor" stroke-width="3" data-v-62f79310></circle><circle cx="42" cy="35" r="3" fill="currentColor" data-v-62f79310></circle><circle cx="58" cy="35" r="3" fill="currentColor" data-v-62f79310></circle><path d="M 35 50 Q 50 60 65 50" stroke="currentColor" stroke-width="2" fill="none" data-v-62f79310></path><rect x="30" y="65" width="40" height="20" rx="10" fill="none" stroke="currentColor" stroke-width="2" data-v-62f79310></rect><circle cx="40" cy="75" r="2" fill="currentColor" data-v-62f79310></circle><circle cx="60" cy="75" r="2" fill="currentColor" data-v-62f79310></circle></svg></div><h1 class="loading-title" data-v-62f79310>麦麦插件商店</h1><p class="loading-subtitle" data-v-62f79310>MaiMai Plugin Market</p></div><div class="loading-animation" data-v-62f79310><svg viewBox="0 0 50 50" class="loading-circle" data-v-62f79310><circle r="20" cx="25" cy="25" data-v-62f79310></circle></svg><div class="loading-dots" data-v-62f79310><span data-v-62f79310></span><span data-v-62f79310></span><span data-v-62f79310></span></div></div>',2)),k("div",H0,[k("p",z0,yt(i.value),1),k("div",K0,[k("div",{class:"progress-fill",style:Hi({width:r.value+"%"})},null,4)])])]),d[1]||(d[1]=ff('<div class="bg-decoration" data-v-62f79310><div class="floating-shapes" data-v-62f79310><div class="shape shape-1" data-v-62f79310></div><div class="shape shape-2" data-v-62f79310></div><div class="shape shape-3" data-v-62f79310></div><div class="shape shape-4" data-v-62f79310></div><div class="shape shape-5" data-v-62f79310></div></div></div>',1))],2))}}),Pr=(e,t)=>{const n=e.__vccOpts||e;for(const[s,r]of t)n[s]=r;return n},W0=Pr(G0,[["__scopeId","data-v-62f79310"]]),Q0={id:"app"},J0=cn({__name:"App",setup(e){const t=re(!0),n=re(!1),s=()=>{t.value=!1,setTimeout(()=>{n.value=!0},100)};return Kn(()=>{localStorage.getItem("mai-plugin-store-visited")?setTimeout(()=>{s()},100):localStorage.setItem("mai-plugin-store-visited","true")}),(r,i)=>(gt(),_t("div",Q0,[t.value?(gt(),Va(W0,{key:0,onLoadingComplete:s})):Ce("",!0),am(k("div",{class:rn(["main-content",{"content-visible":n.value}])},[Kt(qs(rg))],2),[[gE,!t.value]])]))}});function ig(e,t){return function(){return e.apply(t,arguments)}}const{toString:X0}=Object.prototype,{getPrototypeOf:hu}=Object,{iterator:Da,toStringTag:og}=Symbol,Oa=(e=>t=>{const n=X0.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),un=e=>(e=e.toLowerCase(),t=>Oa(t)===e),Na=e=>t=>typeof t===e,{isArray:Vr}=Array,ki=Na("undefined");function Wi(e){return e!==null&&!ki(e)&&e.constructor!==null&&!ki(e.constructor)&&Me(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const ag=un("ArrayBuffer");function Y0(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&ag(e.buffer),t}const Z0=Na("string"),Me=Na("function"),lg=Na("number"),Qi=e=>e!==null&&typeof e=="object",t1=e=>e===!0||e===!1,Lo=e=>{if(Oa(e)!=="object")return!1;const t=hu(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(og in e)&&!(Da in e)},e1=e=>{if(!Qi(e)||Wi(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},n1=un("Date"),s1=un("File"),r1=un("Blob"),i1=un("FileList"),o1=e=>Qi(e)&&Me(e.pipe),a1=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Me(e.append)&&((t=Oa(e))==="formdata"||t==="object"&&Me(e.toString)&&e.toString()==="[object FormData]"))},l1=un("URLSearchParams"),[c1,u1,h1,f1]=["ReadableStream","Request","Response","Headers"].map(un),d1=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ji(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let s,r;if(typeof e!="object"&&(e=[e]),Vr(e))for(s=0,r=e.length;s<r;s++)t.call(null,e[s],s,e);else{if(Wi(e))return;const i=n?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let l;for(s=0;s<o;s++)l=i[s],t.call(null,e[l],l,e)}}function cg(e,t){if(Wi(e))return null;t=t.toLowerCase();const n=Object.keys(e);let s=n.length,r;for(;s-- >0;)if(r=n[s],t===r.toLowerCase())return r;return null}const Us=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ug=e=>!ki(e)&&e!==Us;function fc(){const{caseless:e}=ug(this)&&this||{},t={},n=(s,r)=>{const i=e&&cg(t,r)||r;Lo(t[i])&&Lo(s)?t[i]=fc(t[i],s):Lo(s)?t[i]=fc({},s):Vr(s)?t[i]=s.slice():t[i]=s};for(let s=0,r=arguments.length;s<r;s++)arguments[s]&&Ji(arguments[s],n);return t}const p1=(e,t,n,{allOwnKeys:s}={})=>(Ji(t,(r,i)=>{n&&Me(r)?e[i]=ig(r,n):e[i]=r},{allOwnKeys:s}),e),m1=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),g1=(e,t,n,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},y1=(e,t,n,s)=>{let r,i,o;const l={};if(t=t||{},e==null)return t;do{for(r=Object.getOwnPropertyNames(e),i=r.length;i-- >0;)o=r[i],(!s||s(o,e,t))&&!l[o]&&(t[o]=e[o],l[o]=!0);e=n!==!1&&hu(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},_1=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const s=e.indexOf(t,n);return s!==-1&&s===n},v1=e=>{if(!e)return null;if(Vr(e))return e;let t=e.length;if(!lg(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},w1=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&hu(Uint8Array)),E1=(e,t)=>{const s=(e&&e[Da]).call(e);let r;for(;(r=s.next())&&!r.done;){const i=r.value;t.call(e,i[0],i[1])}},T1=(e,t)=>{let n;const s=[];for(;(n=e.exec(t))!==null;)s.push(n);return s},A1=un("HTMLFormElement"),b1=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,s,r){return s.toUpperCase()+r}),Xf=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),I1=un("RegExp"),hg=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),s={};Ji(n,(r,i)=>{let o;(o=t(r,i,e))!==!1&&(s[i]=o||r)}),Object.defineProperties(e,s)},S1=e=>{hg(e,(t,n)=>{if(Me(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const s=e[n];if(Me(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},R1=(e,t)=>{const n={},s=r=>{r.forEach(i=>{n[i]=!0})};return Vr(e)?s(e):s(String(e).split(t)),n},C1=()=>{},P1=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function V1(e){return!!(e&&Me(e.append)&&e[og]==="FormData"&&e[Da])}const x1=e=>{const t=new Array(10),n=(s,r)=>{if(Qi(s)){if(t.indexOf(s)>=0)return;if(Wi(s))return s;if(!("toJSON"in s)){t[r]=s;const i=Vr(s)?[]:{};return Ji(s,(o,l)=>{const c=n(o,r+1);!ki(c)&&(i[l]=c)}),t[r]=void 0,i}}return s};return n(e,0)},k1=un("AsyncFunction"),D1=e=>e&&(Qi(e)||Me(e))&&Me(e.then)&&Me(e.catch),fg=((e,t)=>e?setImmediate:t?((n,s)=>(Us.addEventListener("message",({source:r,data:i})=>{r===Us&&i===n&&s.length&&s.shift()()},!1),r=>{s.push(r),Us.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Me(Us.postMessage)),O1=typeof queueMicrotask<"u"?queueMicrotask.bind(Us):typeof process<"u"&&process.nextTick||fg,N1=e=>e!=null&&Me(e[Da]),D={isArray:Vr,isArrayBuffer:ag,isBuffer:Wi,isFormData:a1,isArrayBufferView:Y0,isString:Z0,isNumber:lg,isBoolean:t1,isObject:Qi,isPlainObject:Lo,isEmptyObject:e1,isReadableStream:c1,isRequest:u1,isResponse:h1,isHeaders:f1,isUndefined:ki,isDate:n1,isFile:s1,isBlob:r1,isRegExp:I1,isFunction:Me,isStream:o1,isURLSearchParams:l1,isTypedArray:w1,isFileList:i1,forEach:Ji,merge:fc,extend:p1,trim:d1,stripBOM:m1,inherits:g1,toFlatObject:y1,kindOf:Oa,kindOfTest:un,endsWith:_1,toArray:v1,forEachEntry:E1,matchAll:T1,isHTMLForm:A1,hasOwnProperty:Xf,hasOwnProp:Xf,reduceDescriptors:hg,freezeMethods:S1,toObjectSet:R1,toCamelCase:b1,noop:C1,toFiniteNumber:P1,findKey:cg,global:Us,isContextDefined:ug,isSpecCompliantForm:V1,toJSONObject:x1,isAsyncFn:k1,isThenable:D1,setImmediate:fg,asap:O1,isIterable:N1};function mt(e,t,n,s,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),s&&(this.request=s),r&&(this.response=r,this.status=r.status?r.status:null)}D.inherits(mt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:D.toJSONObject(this.config),code:this.code,status:this.status}}});const dg=mt.prototype,pg={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{pg[e]={value:e}});Object.defineProperties(mt,pg);Object.defineProperty(dg,"isAxiosError",{value:!0});mt.from=(e,t,n,s,r,i)=>{const o=Object.create(dg);return D.toFlatObject(e,o,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),mt.call(o,e.message,t,n,s,r),o.cause=e,o.name=e.name,i&&Object.assign(o,i),o};const M1=null;function dc(e){return D.isPlainObject(e)||D.isArray(e)}function mg(e){return D.endsWith(e,"[]")?e.slice(0,-2):e}function Yf(e,t,n){return e?e.concat(t).map(function(r,i){return r=mg(r),!n&&i?"["+r+"]":r}).join(n?".":""):t}function L1(e){return D.isArray(e)&&!e.some(dc)}const F1=D.toFlatObject(D,{},null,function(t){return/^is[A-Z]/.test(t)});function Ma(e,t,n){if(!D.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=D.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(C,P){return!D.isUndefined(P[C])});const s=n.metaTokens,r=n.visitor||h,i=n.dots,o=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&D.isSpecCompliantForm(t);if(!D.isFunction(r))throw new TypeError("visitor must be a function");function u(T){if(T===null)return"";if(D.isDate(T))return T.toISOString();if(D.isBoolean(T))return T.toString();if(!c&&D.isBlob(T))throw new mt("Blob is not supported. Use a Buffer instead.");return D.isArrayBuffer(T)||D.isTypedArray(T)?c&&typeof Blob=="function"?new Blob([T]):Buffer.from(T):T}function h(T,C,P){let U=T;if(T&&!P&&typeof T=="object"){if(D.endsWith(C,"{}"))C=s?C:C.slice(0,-2),T=JSON.stringify(T);else if(D.isArray(T)&&L1(T)||(D.isFileList(T)||D.endsWith(C,"[]"))&&(U=D.toArray(T)))return C=mg(C),U.forEach(function(B,H){!(D.isUndefined(B)||B===null)&&t.append(o===!0?Yf([C],H,i):o===null?C:C+"[]",u(B))}),!1}return dc(T)?!0:(t.append(Yf(P,C,i),u(T)),!1)}const d=[],m=Object.assign(F1,{defaultVisitor:h,convertValue:u,isVisitable:dc});function y(T,C){if(!D.isUndefined(T)){if(d.indexOf(T)!==-1)throw Error("Circular reference detected in "+C.join("."));d.push(T),D.forEach(T,function(U,N){(!(D.isUndefined(U)||U===null)&&r.call(t,U,D.isString(N)?N.trim():N,C,m))===!0&&y(U,C?C.concat(N):[N])}),d.pop()}}if(!D.isObject(e))throw new TypeError("data must be an object");return y(e),t}function Zf(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function fu(e,t){this._pairs=[],e&&Ma(e,this,t)}const gg=fu.prototype;gg.append=function(t,n){this._pairs.push([t,n])};gg.toString=function(t){const n=t?function(s){return t.call(this,s,Zf)}:Zf;return this._pairs.map(function(r){return n(r[0])+"="+n(r[1])},"").join("&")};function U1(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function yg(e,t,n){if(!t)return e;const s=n&&n.encode||U1;D.isFunction(n)&&(n={serialize:n});const r=n&&n.serialize;let i;if(r?i=r(t,n):i=D.isURLSearchParams(t)?t.toString():new fu(t,n).toString(s),i){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class td{constructor(){this.handlers=[]}use(t,n,s){return this.handlers.push({fulfilled:t,rejected:n,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){D.forEach(this.handlers,function(s){s!==null&&t(s)})}}const _g={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},B1=typeof URLSearchParams<"u"?URLSearchParams:fu,$1=typeof FormData<"u"?FormData:null,j1=typeof Blob<"u"?Blob:null,q1={isBrowser:!0,classes:{URLSearchParams:B1,FormData:$1,Blob:j1},protocols:["http","https","file","blob","url","data"]},du=typeof window<"u"&&typeof document<"u",pc=typeof navigator=="object"&&navigator||void 0,H1=du&&(!pc||["ReactNative","NativeScript","NS"].indexOf(pc.product)<0),z1=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",K1=du&&window.location.href||"http://localhost",G1=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:du,hasStandardBrowserEnv:H1,hasStandardBrowserWebWorkerEnv:z1,navigator:pc,origin:K1},Symbol.toStringTag,{value:"Module"})),Ae={...G1,...q1};function W1(e,t){return Ma(e,new Ae.classes.URLSearchParams,{visitor:function(n,s,r,i){return Ae.isNode&&D.isBuffer(n)?(this.append(s,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function Q1(e){return D.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function J1(e){const t={},n=Object.keys(e);let s;const r=n.length;let i;for(s=0;s<r;s++)i=n[s],t[i]=e[i];return t}function vg(e){function t(n,s,r,i){let o=n[i++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=i>=n.length;return o=!o&&D.isArray(r)?r.length:o,c?(D.hasOwnProp(r,o)?r[o]=[r[o],s]:r[o]=s,!l):((!r[o]||!D.isObject(r[o]))&&(r[o]=[]),t(n,s,r[o],i)&&D.isArray(r[o])&&(r[o]=J1(r[o])),!l)}if(D.isFormData(e)&&D.isFunction(e.entries)){const n={};return D.forEachEntry(e,(s,r)=>{t(Q1(s),r,n,0)}),n}return null}function X1(e,t,n){if(D.isString(e))try{return(t||JSON.parse)(e),D.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(n||JSON.stringify)(e)}const Xi={transitional:_g,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const s=n.getContentType()||"",r=s.indexOf("application/json")>-1,i=D.isObject(t);if(i&&D.isHTMLForm(t)&&(t=new FormData(t)),D.isFormData(t))return r?JSON.stringify(vg(t)):t;if(D.isArrayBuffer(t)||D.isBuffer(t)||D.isStream(t)||D.isFile(t)||D.isBlob(t)||D.isReadableStream(t))return t;if(D.isArrayBufferView(t))return t.buffer;if(D.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(i){if(s.indexOf("application/x-www-form-urlencoded")>-1)return W1(t,this.formSerializer).toString();if((l=D.isFileList(t))||s.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Ma(l?{"files[]":t}:t,c&&new c,this.formSerializer)}}return i||r?(n.setContentType("application/json",!1),X1(t)):t}],transformResponse:[function(t){const n=this.transitional||Xi.transitional,s=n&&n.forcedJSONParsing,r=this.responseType==="json";if(D.isResponse(t)||D.isReadableStream(t))return t;if(t&&D.isString(t)&&(s&&!this.responseType||r)){const o=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(t)}catch(l){if(o)throw l.name==="SyntaxError"?mt.from(l,mt.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ae.classes.FormData,Blob:Ae.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};D.forEach(["delete","get","head","post","put","patch"],e=>{Xi.headers[e]={}});const Y1=D.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Z1=e=>{const t={};let n,s,r;return e&&e.split(`
`).forEach(function(o){r=o.indexOf(":"),n=o.substring(0,r).trim().toLowerCase(),s=o.substring(r+1).trim(),!(!n||t[n]&&Y1[n])&&(n==="set-cookie"?t[n]?t[n].push(s):t[n]=[s]:t[n]=t[n]?t[n]+", "+s:s)}),t},ed=Symbol("internals");function Zr(e){return e&&String(e).trim().toLowerCase()}function Fo(e){return e===!1||e==null?e:D.isArray(e)?e.map(Fo):String(e)}function tT(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=n.exec(e);)t[s[1]]=s[2];return t}const eT=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Dl(e,t,n,s,r){if(D.isFunction(s))return s.call(this,t,n);if(r&&(t=n),!!D.isString(t)){if(D.isString(s))return t.indexOf(s)!==-1;if(D.isRegExp(s))return s.test(t)}}function nT(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,s)=>n.toUpperCase()+s)}function sT(e,t){const n=D.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+n,{value:function(r,i,o){return this[s].call(this,t,r,i,o)},configurable:!0})})}let Le=class{constructor(t){t&&this.set(t)}set(t,n,s){const r=this;function i(l,c,u){const h=Zr(c);if(!h)throw new Error("header name must be a non-empty string");const d=D.findKey(r,h);(!d||r[d]===void 0||u===!0||u===void 0&&r[d]!==!1)&&(r[d||c]=Fo(l))}const o=(l,c)=>D.forEach(l,(u,h)=>i(u,h,c));if(D.isPlainObject(t)||t instanceof this.constructor)o(t,n);else if(D.isString(t)&&(t=t.trim())&&!eT(t))o(Z1(t),n);else if(D.isObject(t)&&D.isIterable(t)){let l={},c,u;for(const h of t){if(!D.isArray(h))throw TypeError("Object iterator must return a key-value pair");l[u=h[0]]=(c=l[u])?D.isArray(c)?[...c,h[1]]:[c,h[1]]:h[1]}o(l,n)}else t!=null&&i(n,t,s);return this}get(t,n){if(t=Zr(t),t){const s=D.findKey(this,t);if(s){const r=this[s];if(!n)return r;if(n===!0)return tT(r);if(D.isFunction(n))return n.call(this,r,s);if(D.isRegExp(n))return n.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Zr(t),t){const s=D.findKey(this,t);return!!(s&&this[s]!==void 0&&(!n||Dl(this,this[s],s,n)))}return!1}delete(t,n){const s=this;let r=!1;function i(o){if(o=Zr(o),o){const l=D.findKey(s,o);l&&(!n||Dl(s,s[l],l,n))&&(delete s[l],r=!0)}}return D.isArray(t)?t.forEach(i):i(t),r}clear(t){const n=Object.keys(this);let s=n.length,r=!1;for(;s--;){const i=n[s];(!t||Dl(this,this[i],i,t,!0))&&(delete this[i],r=!0)}return r}normalize(t){const n=this,s={};return D.forEach(this,(r,i)=>{const o=D.findKey(s,i);if(o){n[o]=Fo(r),delete n[i];return}const l=t?nT(i):String(i).trim();l!==i&&delete n[i],n[l]=Fo(r),s[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return D.forEach(this,(s,r)=>{s!=null&&s!==!1&&(n[r]=t&&D.isArray(s)?s.join(", "):s)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const s=new this(t);return n.forEach(r=>s.set(r)),s}static accessor(t){const s=(this[ed]=this[ed]={accessors:{}}).accessors,r=this.prototype;function i(o){const l=Zr(o);s[l]||(sT(r,o),s[l]=!0)}return D.isArray(t)?t.forEach(i):i(t),this}};Le.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);D.reduceDescriptors(Le.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(s){this[n]=s}}});D.freezeMethods(Le);function Ol(e,t){const n=this||Xi,s=t||n,r=Le.from(s.headers);let i=s.data;return D.forEach(e,function(l){i=l.call(n,i,r.normalize(),t?t.status:void 0)}),r.normalize(),i}function wg(e){return!!(e&&e.__CANCEL__)}function xr(e,t,n){mt.call(this,e??"canceled",mt.ERR_CANCELED,t,n),this.name="CanceledError"}D.inherits(xr,mt,{__CANCEL__:!0});function Eg(e,t,n){const s=n.config.validateStatus;!n.status||!s||s(n.status)?e(n):t(new mt("Request failed with status code "+n.status,[mt.ERR_BAD_REQUEST,mt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function rT(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function iT(e,t){e=e||10;const n=new Array(e),s=new Array(e);let r=0,i=0,o;return t=t!==void 0?t:1e3,function(c){const u=Date.now(),h=s[i];o||(o=u),n[r]=c,s[r]=u;let d=i,m=0;for(;d!==r;)m+=n[d++],d=d%e;if(r=(r+1)%e,r===i&&(i=(i+1)%e),u-o<t)return;const y=h&&u-h;return y?Math.round(m*1e3/y):void 0}}function oT(e,t){let n=0,s=1e3/t,r,i;const o=(u,h=Date.now())=>{n=h,r=null,i&&(clearTimeout(i),i=null),e(...u)};return[(...u)=>{const h=Date.now(),d=h-n;d>=s?o(u,h):(r=u,i||(i=setTimeout(()=>{i=null,o(r)},s-d)))},()=>r&&o(r)]}const ea=(e,t,n=3)=>{let s=0;const r=iT(50,250);return oT(i=>{const o=i.loaded,l=i.lengthComputable?i.total:void 0,c=o-s,u=r(c),h=o<=l;s=o;const d={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:u||void 0,estimated:u&&l&&h?(l-o)/u:void 0,event:i,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(d)},n)},nd=(e,t)=>{const n=e!=null;return[s=>t[0]({lengthComputable:n,total:e,loaded:s}),t[1]]},sd=e=>(...t)=>D.asap(()=>e(...t)),aT=Ae.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Ae.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Ae.origin),Ae.navigator&&/(msie|trident)/i.test(Ae.navigator.userAgent)):()=>!0,lT=Ae.hasStandardBrowserEnv?{write(e,t,n,s,r,i){const o=[e+"="+encodeURIComponent(t)];D.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),D.isString(s)&&o.push("path="+s),D.isString(r)&&o.push("domain="+r),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function cT(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function uT(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Tg(e,t,n){let s=!cT(t);return e&&(s||n==!1)?uT(e,t):t}const rd=e=>e instanceof Le?{...e}:e;function Gs(e,t){t=t||{};const n={};function s(u,h,d,m){return D.isPlainObject(u)&&D.isPlainObject(h)?D.merge.call({caseless:m},u,h):D.isPlainObject(h)?D.merge({},h):D.isArray(h)?h.slice():h}function r(u,h,d,m){if(D.isUndefined(h)){if(!D.isUndefined(u))return s(void 0,u,d,m)}else return s(u,h,d,m)}function i(u,h){if(!D.isUndefined(h))return s(void 0,h)}function o(u,h){if(D.isUndefined(h)){if(!D.isUndefined(u))return s(void 0,u)}else return s(void 0,h)}function l(u,h,d){if(d in t)return s(u,h);if(d in e)return s(void 0,u)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(u,h,d)=>r(rd(u),rd(h),d,!0)};return D.forEach(Object.keys({...e,...t}),function(h){const d=c[h]||r,m=d(e[h],t[h],h);D.isUndefined(m)&&d!==l||(n[h]=m)}),n}const Ag=e=>{const t=Gs({},e);let{data:n,withXSRFToken:s,xsrfHeaderName:r,xsrfCookieName:i,headers:o,auth:l}=t;t.headers=o=Le.from(o),t.url=yg(Tg(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let c;if(D.isFormData(n)){if(Ae.hasStandardBrowserEnv||Ae.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((c=o.getContentType())!==!1){const[u,...h]=c?c.split(";").map(d=>d.trim()).filter(Boolean):[];o.setContentType([u||"multipart/form-data",...h].join("; "))}}if(Ae.hasStandardBrowserEnv&&(s&&D.isFunction(s)&&(s=s(t)),s||s!==!1&&aT(t.url))){const u=r&&i&&lT.read(i);u&&o.set(r,u)}return t},hT=typeof XMLHttpRequest<"u",fT=hT&&function(e){return new Promise(function(n,s){const r=Ag(e);let i=r.data;const o=Le.from(r.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:u}=r,h,d,m,y,T;function C(){y&&y(),T&&T(),r.cancelToken&&r.cancelToken.unsubscribe(h),r.signal&&r.signal.removeEventListener("abort",h)}let P=new XMLHttpRequest;P.open(r.method.toUpperCase(),r.url,!0),P.timeout=r.timeout;function U(){if(!P)return;const B=Le.from("getAllResponseHeaders"in P&&P.getAllResponseHeaders()),G={data:!l||l==="text"||l==="json"?P.responseText:P.response,status:P.status,statusText:P.statusText,headers:B,config:e,request:P};Eg(function(S){n(S),C()},function(S){s(S),C()},G),P=null}"onloadend"in P?P.onloadend=U:P.onreadystatechange=function(){!P||P.readyState!==4||P.status===0&&!(P.responseURL&&P.responseURL.indexOf("file:")===0)||setTimeout(U)},P.onabort=function(){P&&(s(new mt("Request aborted",mt.ECONNABORTED,e,P)),P=null)},P.onerror=function(){s(new mt("Network Error",mt.ERR_NETWORK,e,P)),P=null},P.ontimeout=function(){let H=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const G=r.transitional||_g;r.timeoutErrorMessage&&(H=r.timeoutErrorMessage),s(new mt(H,G.clarifyTimeoutError?mt.ETIMEDOUT:mt.ECONNABORTED,e,P)),P=null},i===void 0&&o.setContentType(null),"setRequestHeader"in P&&D.forEach(o.toJSON(),function(H,G){P.setRequestHeader(G,H)}),D.isUndefined(r.withCredentials)||(P.withCredentials=!!r.withCredentials),l&&l!=="json"&&(P.responseType=r.responseType),u&&([m,T]=ea(u,!0),P.addEventListener("progress",m)),c&&P.upload&&([d,y]=ea(c),P.upload.addEventListener("progress",d),P.upload.addEventListener("loadend",y)),(r.cancelToken||r.signal)&&(h=B=>{P&&(s(!B||B.type?new xr(null,e,P):B),P.abort(),P=null)},r.cancelToken&&r.cancelToken.subscribe(h),r.signal&&(r.signal.aborted?h():r.signal.addEventListener("abort",h)));const N=rT(r.url);if(N&&Ae.protocols.indexOf(N)===-1){s(new mt("Unsupported protocol "+N+":",mt.ERR_BAD_REQUEST,e));return}P.send(i||null)})},dT=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let s=new AbortController,r;const i=function(u){if(!r){r=!0,l();const h=u instanceof Error?u:this.reason;s.abort(h instanceof mt?h:new xr(h instanceof Error?h.message:h))}};let o=t&&setTimeout(()=>{o=null,i(new mt(`timeout ${t} of ms exceeded`,mt.ETIMEDOUT))},t);const l=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(i):u.removeEventListener("abort",i)}),e=null)};e.forEach(u=>u.addEventListener("abort",i));const{signal:c}=s;return c.unsubscribe=()=>D.asap(l),c}},pT=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let s=0,r;for(;s<n;)r=s+t,yield e.slice(s,r),s=r},mT=async function*(e,t){for await(const n of gT(e))yield*pT(n,t)},gT=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:s}=await t.read();if(n)break;yield s}}finally{await t.cancel()}},id=(e,t,n,s)=>{const r=mT(e,t);let i=0,o,l=c=>{o||(o=!0,s&&s(c))};return new ReadableStream({async pull(c){try{const{done:u,value:h}=await r.next();if(u){l(),c.close();return}let d=h.byteLength;if(n){let m=i+=d;n(m)}c.enqueue(new Uint8Array(h))}catch(u){throw l(u),u}},cancel(c){return l(c),r.return()}},{highWaterMark:2})},La=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",bg=La&&typeof ReadableStream=="function",yT=La&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),Ig=(e,...t)=>{try{return!!e(...t)}catch{return!1}},_T=bg&&Ig(()=>{let e=!1;const t=new Request(Ae.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),od=64*1024,mc=bg&&Ig(()=>D.isReadableStream(new Response("").body)),na={stream:mc&&(e=>e.body)};La&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!na[t]&&(na[t]=D.isFunction(e[t])?n=>n[t]():(n,s)=>{throw new mt(`Response type '${t}' is not supported`,mt.ERR_NOT_SUPPORT,s)})})})(new Response);const vT=async e=>{if(e==null)return 0;if(D.isBlob(e))return e.size;if(D.isSpecCompliantForm(e))return(await new Request(Ae.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(D.isArrayBufferView(e)||D.isArrayBuffer(e))return e.byteLength;if(D.isURLSearchParams(e)&&(e=e+""),D.isString(e))return(await yT(e)).byteLength},wT=async(e,t)=>{const n=D.toFiniteNumber(e.getContentLength());return n??vT(t)},ET=La&&(async e=>{let{url:t,method:n,data:s,signal:r,cancelToken:i,timeout:o,onDownloadProgress:l,onUploadProgress:c,responseType:u,headers:h,withCredentials:d="same-origin",fetchOptions:m}=Ag(e);u=u?(u+"").toLowerCase():"text";let y=dT([r,i&&i.toAbortSignal()],o),T;const C=y&&y.unsubscribe&&(()=>{y.unsubscribe()});let P;try{if(c&&_T&&n!=="get"&&n!=="head"&&(P=await wT(h,s))!==0){let G=new Request(t,{method:"POST",body:s,duplex:"half"}),K;if(D.isFormData(s)&&(K=G.headers.get("content-type"))&&h.setContentType(K),G.body){const[S,v]=nd(P,ea(sd(c)));s=id(G.body,od,S,v)}}D.isString(d)||(d=d?"include":"omit");const U="credentials"in Request.prototype;T=new Request(t,{...m,signal:y,method:n.toUpperCase(),headers:h.normalize().toJSON(),body:s,duplex:"half",credentials:U?d:void 0});let N=await fetch(T,m);const B=mc&&(u==="stream"||u==="response");if(mc&&(l||B&&C)){const G={};["status","statusText","headers"].forEach(_=>{G[_]=N[_]});const K=D.toFiniteNumber(N.headers.get("content-length")),[S,v]=l&&nd(K,ea(sd(l),!0))||[];N=new Response(id(N.body,od,S,()=>{v&&v(),C&&C()}),G)}u=u||"text";let H=await na[D.findKey(na,u)||"text"](N,e);return!B&&C&&C(),await new Promise((G,K)=>{Eg(G,K,{data:H,headers:Le.from(N.headers),status:N.status,statusText:N.statusText,config:e,request:T})})}catch(U){throw C&&C(),U&&U.name==="TypeError"&&/Load failed|fetch/i.test(U.message)?Object.assign(new mt("Network Error",mt.ERR_NETWORK,e,T),{cause:U.cause||U}):mt.from(U,U&&U.code,e,T)}}),gc={http:M1,xhr:fT,fetch:ET};D.forEach(gc,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const ad=e=>`- ${e}`,TT=e=>D.isFunction(e)||e===null||e===!1,Sg={getAdapter:e=>{e=D.isArray(e)?e:[e];const{length:t}=e;let n,s;const r={};for(let i=0;i<t;i++){n=e[i];let o;if(s=n,!TT(n)&&(s=gc[(o=String(n)).toLowerCase()],s===void 0))throw new mt(`Unknown adapter '${o}'`);if(s)break;r[o||"#"+i]=s}if(!s){const i=Object.entries(r).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=t?i.length>1?`since :
`+i.map(ad).join(`
`):" "+ad(i[0]):"as no adapter specified";throw new mt("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return s},adapters:gc};function Nl(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new xr(null,e)}function ld(e){return Nl(e),e.headers=Le.from(e.headers),e.data=Ol.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Sg.getAdapter(e.adapter||Xi.adapter)(e).then(function(s){return Nl(e),s.data=Ol.call(e,e.transformResponse,s),s.headers=Le.from(s.headers),s},function(s){return wg(s)||(Nl(e),s&&s.response&&(s.response.data=Ol.call(e,e.transformResponse,s.response),s.response.headers=Le.from(s.response.headers))),Promise.reject(s)})}const Rg="1.11.0",Fa={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Fa[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const cd={};Fa.transitional=function(t,n,s){function r(i,o){return"[Axios v"+Rg+"] Transitional option '"+i+"'"+o+(s?". "+s:"")}return(i,o,l)=>{if(t===!1)throw new mt(r(o," has been removed"+(n?" in "+n:"")),mt.ERR_DEPRECATED);return n&&!cd[o]&&(cd[o]=!0,console.warn(r(o," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(i,o,l):!0}};Fa.spelling=function(t){return(n,s)=>(console.warn(`${s} is likely a misspelling of ${t}`),!0)};function AT(e,t,n){if(typeof e!="object")throw new mt("options must be an object",mt.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let r=s.length;for(;r-- >0;){const i=s[r],o=t[i];if(o){const l=e[i],c=l===void 0||o(l,i,e);if(c!==!0)throw new mt("option "+i+" must be "+c,mt.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new mt("Unknown option "+i,mt.ERR_BAD_OPTION)}}const Uo={assertOptions:AT,validators:Fa},dn=Uo.validators;let zs=class{constructor(t){this.defaults=t||{},this.interceptors={request:new td,response:new td}}async request(t,n){try{return await this._request(t,n)}catch(s){if(s instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const i=r.stack?r.stack.replace(/^.+\n/,""):"";try{s.stack?i&&!String(s.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+i):s.stack=i}catch{}}throw s}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Gs(this.defaults,n);const{transitional:s,paramsSerializer:r,headers:i}=n;s!==void 0&&Uo.assertOptions(s,{silentJSONParsing:dn.transitional(dn.boolean),forcedJSONParsing:dn.transitional(dn.boolean),clarifyTimeoutError:dn.transitional(dn.boolean)},!1),r!=null&&(D.isFunction(r)?n.paramsSerializer={serialize:r}:Uo.assertOptions(r,{encode:dn.function,serialize:dn.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Uo.assertOptions(n,{baseUrl:dn.spelling("baseURL"),withXsrfToken:dn.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=i&&D.merge(i.common,i[n.method]);i&&D.forEach(["delete","get","head","post","put","patch","common"],T=>{delete i[T]}),n.headers=Le.concat(o,i);const l=[];let c=!0;this.interceptors.request.forEach(function(C){typeof C.runWhen=="function"&&C.runWhen(n)===!1||(c=c&&C.synchronous,l.unshift(C.fulfilled,C.rejected))});const u=[];this.interceptors.response.forEach(function(C){u.push(C.fulfilled,C.rejected)});let h,d=0,m;if(!c){const T=[ld.bind(this),void 0];for(T.unshift(...l),T.push(...u),m=T.length,h=Promise.resolve(n);d<m;)h=h.then(T[d++],T[d++]);return h}m=l.length;let y=n;for(d=0;d<m;){const T=l[d++],C=l[d++];try{y=T(y)}catch(P){C.call(this,P);break}}try{h=ld.call(this,y)}catch(T){return Promise.reject(T)}for(d=0,m=u.length;d<m;)h=h.then(u[d++],u[d++]);return h}getUri(t){t=Gs(this.defaults,t);const n=Tg(t.baseURL,t.url,t.allowAbsoluteUrls);return yg(n,t.params,t.paramsSerializer)}};D.forEach(["delete","get","head","options"],function(t){zs.prototype[t]=function(n,s){return this.request(Gs(s||{},{method:t,url:n,data:(s||{}).data}))}});D.forEach(["post","put","patch"],function(t){function n(s){return function(i,o,l){return this.request(Gs(l||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}zs.prototype[t]=n(),zs.prototype[t+"Form"]=n(!0)});let bT=class Cg{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const s=this;this.promise.then(r=>{if(!s._listeners)return;let i=s._listeners.length;for(;i-- >0;)s._listeners[i](r);s._listeners=null}),this.promise.then=r=>{let i;const o=new Promise(l=>{s.subscribe(l),i=l}).then(r);return o.cancel=function(){s.unsubscribe(i)},o},t(function(i,o,l){s.reason||(s.reason=new xr(i,o,l),n(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=s=>{t.abort(s)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new Cg(function(r){t=r}),cancel:t}}};function IT(e){return function(n){return e.apply(null,n)}}function ST(e){return D.isObject(e)&&e.isAxiosError===!0}const yc={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(yc).forEach(([e,t])=>{yc[t]=e});function Pg(e){const t=new zs(e),n=ig(zs.prototype.request,t);return D.extend(n,zs.prototype,t,{allOwnKeys:!0}),D.extend(n,t,null,{allOwnKeys:!0}),n.create=function(r){return Pg(Gs(e,r))},n}const Qt=Pg(Xi);Qt.Axios=zs;Qt.CanceledError=xr;Qt.CancelToken=bT;Qt.isCancel=wg;Qt.VERSION=Rg;Qt.toFormData=Ma;Qt.AxiosError=mt;Qt.Cancel=Qt.CanceledError;Qt.all=function(t){return Promise.all(t)};Qt.spread=IT;Qt.isAxiosError=ST;Qt.mergeConfig=Gs;Qt.AxiosHeaders=Le;Qt.formToJSON=e=>vg(D.isHTMLForm(e)?new FormData(e):e);Qt.getAdapter=Sg.getAdapter;Qt.HttpStatusCode=yc;Qt.default=Qt;const{Axios:QP,AxiosError:JP,CanceledError:XP,isCancel:YP,CancelToken:ZP,VERSION:tV,all:eV,Cancel:nV,isAxiosError:sV,spread:rV,toFormData:iV,AxiosHeaders:oV,HttpStatusCode:aV,formToJSON:lV,getAdapter:cV,mergeConfig:uV}=Qt,RT="https://raw.githubusercontent.com/DrSmoothl/plugin-repo/refs/heads/main",ud={群组管理:"Group Management",娱乐互动:"Entertainment & Interaction",实用工具:"Utility Tools",内容生成:"Content Generation",多媒体:"Multimedia",外部集成:"External Integration",数据分析与洞察:"Data Analysis & Insights",其他:"Other"},Ml={"Group Management":"群组管理","Entertainment & Interaction":"娱乐互动","Utility Tools":"实用工具","Content Generation":"内容生成",Multimedia:"多媒体","External Integration":"外部集成","Data Analysis & Insights":"数据分析与洞察",Other:"其他"},Ns=class Ns{constructor(){Cn(this,"plugins",[]);Cn(this,"loading",!1)}static getInstance(){return Ns.instance||(Ns.instance=new Ns),Ns.instance}async fetchPlugins(){if(this.loading)return this.plugins;try{this.loading=!0;const t=await Qt.get(`${RT}/plugin_details.json`);return this.plugins=t.data.map(n=>({...n,categoryDisplay:this.getCategoryDisplay(n)})),this.plugins}catch(t){throw console.error("获取插件列表失败:",t),new Error("获取插件列表失败，请稍后重试")}finally{this.loading=!1}}getCategoryDisplay(t){const n=t.manifest.categories||[];for(const s of n)if(Ml[s])return Ml[s];for(const s of n)if(ud[s])return Ml[ud[s]];return"其他"}getPluginsByCategory(t){return!t||t==="全部"?this.plugins:this.plugins.filter(n=>n.categoryDisplay===t)}searchPlugins(t){if(!t.trim())return this.plugins;const n=t.toLowerCase();return this.plugins.filter(s=>s.manifest.name.toLowerCase().includes(n)||s.manifest.description.toLowerCase().includes(n)||s.manifest.author.name.toLowerCase().includes(n)||(s.manifest.keywords||[]).some(r=>r.toLowerCase().includes(n)))}getAllCategories(){if(this.plugins.length===0)return["全部","群组管理","娱乐互动","实用工具","内容生成","多媒体","外部集成","数据分析与洞察","其他"];const t=new Set;return this.plugins.forEach(n=>{t.add(n.categoryDisplay)}),["全部",...Array.from(t).sort()]}getPluginCount(){return this.plugins.length}isLoading(){return this.loading}};Cn(Ns,"instance");let _c=Ns;/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT=()=>{};var hd={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vg=function(e){const t=[];let n=0;for(let s=0;s<e.length;s++){let r=e.charCodeAt(s);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=r&63|128):(r&64512)===55296&&s+1<e.length&&(e.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(e.charCodeAt(++s)&1023),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=r&63|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=r&63|128)}return t},PT=function(e){const t=[];let n=0,s=0;for(;n<e.length;){const r=e[n++];if(r<128)t[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=e[n++];t[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=e[n++],o=e[n++],l=e[n++],c=((r&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;t[s++]=String.fromCharCode(55296+(c>>10)),t[s++]=String.fromCharCode(56320+(c&1023))}else{const i=e[n++],o=e[n++];t[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return t.join("")},xg={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<e.length;r+=3){const i=e[r],o=r+1<e.length,l=o?e[r+1]:0,c=r+2<e.length,u=c?e[r+2]:0,h=i>>2,d=(i&3)<<4|l>>4;let m=(l&15)<<2|u>>6,y=u&63;c||(y=64,o||(m=64)),s.push(n[h],n[d],n[m],n[y])}return s.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Vg(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):PT(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<e.length;){const i=n[e.charAt(r++)],l=r<e.length?n[e.charAt(r)]:0;++r;const u=r<e.length?n[e.charAt(r)]:64;++r;const d=r<e.length?n[e.charAt(r)]:64;if(++r,i==null||l==null||u==null||d==null)throw new VT;const m=i<<2|l>>4;if(s.push(m),u!==64){const y=l<<4&240|u>>2;if(s.push(y),d!==64){const T=u<<6&192|d;s.push(T)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class VT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xT=function(e){const t=Vg(e);return xg.encodeByteArray(t,!0)},sa=function(e){return xT(e).replace(/\./g,"")},kT=function(e){try{return xg.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OT=()=>DT().__FIREBASE_DEFAULTS__,NT=()=>{if(typeof process>"u"||typeof hd>"u")return;const e=hd.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},MT=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&kT(e[1]);return t&&JSON.parse(t)},pu=()=>{try{return CT()||OT()||NT()||MT()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},LT=e=>{var t,n;return(n=(t=pu())==null?void 0:t.emulatorHosts)==null?void 0:n[e]},FT=e=>{const t=LT(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),s]:[t.substring(0,n),s]},kg=()=>{var e;return(e=pu())==null?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mu(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function BT(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $T(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...e};return[sa(JSON.stringify(n)),sa(JSON.stringify(o)),""].join(".")}const gi={};function jT(){const e={prod:[],emulator:[]};for(const t of Object.keys(gi))gi[t]?e.emulator.push(t):e.prod.push(t);return e}function qT(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let fd=!1;function HT(e,t){if(typeof window>"u"||typeof document>"u"||!mu(window.location.host)||gi[e]===t||gi[e]||fd)return;gi[e]=t;function n(m){return`__firebase__banner__${m}`}const s="__firebase__banner",i=jT().prod.length>0;function o(){const m=document.getElementById(s);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{fd=!0,o()},m}function h(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function d(){const m=qT(s),y=n("text"),T=document.getElementById(y)||document.createElement("span"),C=n("learnmore"),P=document.getElementById(C)||document.createElement("a"),U=n("preprendIcon"),N=document.getElementById(U)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const B=m.element;l(B),h(P,C);const H=u();c(N,U),B.append(N,T,P,H),document.body.appendChild(B)}i?(T.innerText="Preview backend disconnected.",N.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(N.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function KT(){var t;const e=(t=pu())==null?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function GT(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function WT(){return!KT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Dg(){try{return typeof indexedDB=="object"}catch{return!1}}function Og(){return new Promise((e,t)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var i;t(((i=r.error)==null?void 0:i.message)||"")}}catch(n){t(n)}})}function QT(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JT="FirebaseError";class Es extends Error{constructor(t,n,s){super(n),this.code=t,this.customData=s,this.name=JT,Object.setPrototypeOf(this,Es.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ua.prototype.create)}}class Ua{constructor(t,n,s){this.service=t,this.serviceName=n,this.errors=s}create(t,...n){const s=n[0]||{},r=`${this.service}/${t}`,i=this.errors[t],o=i?XT(i,s):"Error",l=`${this.serviceName}: ${o} (${r}).`;return new Es(r,l,s)}}function XT(e,t){return e.replace(YT,(n,s)=>{const r=t[s];return r!=null?String(r):`<${s}?>`})}const YT=/\{\$([^}]+)}/g;function Di(e,t){if(e===t)return!0;const n=Object.keys(e),s=Object.keys(t);for(const r of n){if(!s.includes(r))return!1;const i=e[r],o=t[r];if(dd(i)&&dd(o)){if(!Di(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function dd(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZT=1e3,tA=2,eA=4*60*60*1e3,nA=.5;function pd(e,t=ZT,n=tA){const s=t*Math.pow(n,e),r=Math.round(nA*s*(Math.random()-.5)*2);return Math.min(eA,s+r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bn(e){return e&&e._delegate?e._delegate:e}class $n{constructor(t,n,s){this.name=t,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const s=new UT;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),s=(t==null?void 0:t.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(iA(t))try{this.getOrInitializeService({instanceIdentifier:Ds})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(t=Ds){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Ds){return this.instances.has(t)}getOptions(t=Ds){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);s===l&&o.resolve(r)}return r}onInit(t,n){const s=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(s)??new Set;r.add(t),this.onInitCallbacks.set(s,r);const i=this.instances.get(s);return i&&t(i,s),()=>{r.delete(t)}}invokeOnInitCallbacks(t,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:rA(t),options:n}),this.instances.set(t,s),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=Ds){return this.component?this.component.multipleInstances?t:Ds:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function rA(e){return e===Ds?void 0:e}function iA(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new sA(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var It;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(It||(It={}));const aA={debug:It.DEBUG,verbose:It.VERBOSE,info:It.INFO,warn:It.WARN,error:It.ERROR,silent:It.SILENT},lA=It.INFO,cA={[It.DEBUG]:"log",[It.VERBOSE]:"log",[It.INFO]:"info",[It.WARN]:"warn",[It.ERROR]:"error"},uA=(e,t,...n)=>{if(t<e.logLevel)return;const s=new Date().toISOString(),r=cA[t];if(r)console[r](`[${s}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class gu{constructor(t){this.name=t,this._logLevel=lA,this._logHandler=uA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in It))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?aA[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,It.DEBUG,...t),this._logHandler(this,It.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,It.VERBOSE,...t),this._logHandler(this,It.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,It.INFO,...t),this._logHandler(this,It.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,It.WARN,...t),this._logHandler(this,It.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,It.ERROR,...t),this._logHandler(this,It.ERROR,...t)}}const hA=(e,t)=>t.some(n=>e instanceof n);let md,gd;function fA(){return md||(md=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dA(){return gd||(gd=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ng=new WeakMap,vc=new WeakMap,Mg=new WeakMap,Ll=new WeakMap,yu=new WeakMap;function pA(e){const t=new Promise((n,s)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{n(os(e.result)),r()},o=()=>{s(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&Ng.set(n,e)}).catch(()=>{}),yu.set(t,e),t}function mA(e){if(vc.has(e))return;const t=new Promise((n,s)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{n(),r()},o=()=>{s(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)});vc.set(e,t)}let wc={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return vc.get(e);if(t==="objectStoreNames")return e.objectStoreNames||Mg.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return os(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function gA(e){wc=e(wc)}function yA(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const s=e.call(Fl(this),t,...n);return Mg.set(s,t.sort?t.sort():[t]),os(s)}:dA().includes(e)?function(...t){return e.apply(Fl(this),t),os(Ng.get(this))}:function(...t){return os(e.apply(Fl(this),t))}}function _A(e){return typeof e=="function"?yA(e):(e instanceof IDBTransaction&&mA(e),hA(e,fA())?new Proxy(e,wc):e)}function os(e){if(e instanceof IDBRequest)return pA(e);if(Ll.has(e))return Ll.get(e);const t=_A(e);return t!==e&&(Ll.set(e,t),yu.set(t,e)),t}const Fl=e=>yu.get(e);function Lg(e,t,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(e,t),l=os(o);return s&&o.addEventListener("upgradeneeded",c=>{s(os(o.result),c.oldVersion,c.newVersion,os(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),r&&c.addEventListener("versionchange",u=>r(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const vA=["get","getKey","getAll","getAllKeys","count"],wA=["put","add","delete","clear"],Ul=new Map;function yd(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Ul.get(t))return Ul.get(t);const n=t.replace(/FromIndex$/,""),s=t!==n,r=wA.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||vA.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,r?"readwrite":"readonly");let u=c.store;return s&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),r&&c.done]))[0]};return Ul.set(t,i),i}gA(e=>({...e,get:(t,n,s)=>yd(t,n)||e.get(t,n,s),has:(t,n)=>!!yd(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(TA(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function TA(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Ec="@firebase/app",_d="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jn=new gu("@firebase/app"),AA="@firebase/app-compat",bA="@firebase/analytics-compat",IA="@firebase/analytics",SA="@firebase/app-check-compat",RA="@firebase/app-check",CA="@firebase/auth",PA="@firebase/auth-compat",VA="@firebase/database",xA="@firebase/data-connect",kA="@firebase/database-compat",DA="@firebase/functions",OA="@firebase/functions-compat",NA="@firebase/installations",MA="@firebase/installations-compat",LA="@firebase/messaging",FA="@firebase/messaging-compat",UA="@firebase/performance",BA="@firebase/performance-compat",$A="@firebase/remote-config",jA="@firebase/remote-config-compat",qA="@firebase/storage",HA="@firebase/storage-compat",zA="@firebase/firestore",KA="@firebase/ai",GA="@firebase/firestore-compat",WA="firebase",QA="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tc="[DEFAULT]",JA={[Ec]:"fire-core",[AA]:"fire-core-compat",[IA]:"fire-analytics",[bA]:"fire-analytics-compat",[RA]:"fire-app-check",[SA]:"fire-app-check-compat",[CA]:"fire-auth",[PA]:"fire-auth-compat",[VA]:"fire-rtdb",[xA]:"fire-data-connect",[kA]:"fire-rtdb-compat",[DA]:"fire-fn",[OA]:"fire-fn-compat",[NA]:"fire-iid",[MA]:"fire-iid-compat",[LA]:"fire-fcm",[FA]:"fire-fcm-compat",[UA]:"fire-perf",[BA]:"fire-perf-compat",[$A]:"fire-rc",[jA]:"fire-rc-compat",[qA]:"fire-gcs",[HA]:"fire-gcs-compat",[zA]:"fire-fst",[GA]:"fire-fst-compat",[KA]:"fire-vertex","fire-js":"fire-js",[WA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ra=new Map,XA=new Map,Ac=new Map;function vd(e,t){try{e.container.addComponent(t)}catch(n){jn.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function fs(e){const t=e.name;if(Ac.has(t))return jn.debug(`There were multiple attempts to register component ${t}.`),!1;Ac.set(t,e);for(const n of ra.values())vd(n,e);for(const n of XA.values())vd(n,e);return!0}function Yi(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function YA(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},as=new Ua("app","Firebase",ZA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(t,n,s){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new $n("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw as.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb=QA;function Fg(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const s={name:Tc,automaticDataCollectionEnabled:!0,...t},r=s.name;if(typeof r!="string"||!r)throw as.create("bad-app-name",{appName:String(r)});if(n||(n=kg()),!n)throw as.create("no-options");const i=ra.get(r);if(i){if(Di(n,i.options)&&Di(s,i.config))return i;throw as.create("duplicate-app",{appName:r})}const o=new oA(r);for(const c of Ac.values())o.addComponent(c);const l=new tb(n,s,o);return ra.set(r,l),l}function Ug(e=Tc){const t=ra.get(e);if(!t&&e===Tc&&kg())return Fg();if(!t)throw as.create("no-app",{appName:e});return t}function _n(e,t,n){let s=JA[e]??e;n&&(s+=`-${n}`);const r=s.match(/\s|\//),i=t.match(/\s|\//);if(r||i){const o=[`Unable to register library "${s}" with version "${t}":`];r&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&i&&o.push("and"),i&&o.push(`version name "${t}" contains illegal characters (whitespace or "/")`),jn.warn(o.join(" "));return}fs(new $n(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nb="firebase-heartbeat-database",sb=1,Oi="firebase-heartbeat-store";let Bl=null;function Bg(){return Bl||(Bl=Lg(nb,sb,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Oi)}catch(n){console.warn(n)}}}}).catch(e=>{throw as.create("idb-open",{originalErrorMessage:e.message})})),Bl}async function rb(e){try{const n=(await Bg()).transaction(Oi),s=await n.objectStore(Oi).get($g(e));return await n.done,s}catch(t){if(t instanceof Es)jn.warn(t.message);else{const n=as.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});jn.warn(n.message)}}}async function wd(e,t){try{const s=(await Bg()).transaction(Oi,"readwrite");await s.objectStore(Oi).put(t,$g(e)),await s.done}catch(n){if(n instanceof Es)jn.warn(n.message);else{const s=as.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});jn.warn(s.message)}}}function $g(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ib=1024,ob=30;class ab{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new cb(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var t,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Ed();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:r}),this._heartbeatsCache.heartbeats.length>ob){const o=ub(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){jn.warn(s)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Ed(),{heartbeatsToSend:s,unsentEntries:r}=lb(this._heartbeatsCache.heartbeats),i=sa(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return jn.warn(n),""}}}function Ed(){return new Date().toISOString().substring(0,10)}function lb(e,t=ib){const n=[];let s=e.slice();for(const r of e){const i=n.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),Td(n)>t){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Td(n)>t){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class cb{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Dg()?Og().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await rb(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return wd(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return wd(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function Td(e){return sa(JSON.stringify({version:2,heartbeats:e})).length}function ub(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let s=1;s<e.length;s++)e[s].date<n&&(n=e[s].date,t=s);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hb(e){fs(new $n("platform-logger",t=>new EA(t),"PRIVATE")),fs(new $n("heartbeat",t=>new ab(t),"PRIVATE")),_n(Ec,_d,e),_n(Ec,_d,"esm2020"),_n("fire-js","")}hb("");var Ad=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ls,jg;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(S,v){function _(){}_.prototype=v.prototype,S.D=v.prototype,S.prototype=new _,S.prototype.constructor=S,S.C=function(A,R,I){for(var w=Array(arguments.length-2),kt=2;kt<arguments.length;kt++)w[kt-2]=arguments[kt];return v.prototype[R].apply(A,w)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(S,v,_){_||(_=0);var A=Array(16);if(typeof v=="string")for(var R=0;16>R;++R)A[R]=v.charCodeAt(_++)|v.charCodeAt(_++)<<8|v.charCodeAt(_++)<<16|v.charCodeAt(_++)<<24;else for(R=0;16>R;++R)A[R]=v[_++]|v[_++]<<8|v[_++]<<16|v[_++]<<24;v=S.g[0],_=S.g[1],R=S.g[2];var I=S.g[3],w=v+(I^_&(R^I))+A[0]+3614090360&4294967295;v=_+(w<<7&4294967295|w>>>25),w=I+(R^v&(_^R))+A[1]+3905402710&4294967295,I=v+(w<<12&4294967295|w>>>20),w=R+(_^I&(v^_))+A[2]+606105819&4294967295,R=I+(w<<17&4294967295|w>>>15),w=_+(v^R&(I^v))+A[3]+3250441966&4294967295,_=R+(w<<22&4294967295|w>>>10),w=v+(I^_&(R^I))+A[4]+4118548399&4294967295,v=_+(w<<7&4294967295|w>>>25),w=I+(R^v&(_^R))+A[5]+1200080426&4294967295,I=v+(w<<12&4294967295|w>>>20),w=R+(_^I&(v^_))+A[6]+2821735955&4294967295,R=I+(w<<17&4294967295|w>>>15),w=_+(v^R&(I^v))+A[7]+4249261313&4294967295,_=R+(w<<22&4294967295|w>>>10),w=v+(I^_&(R^I))+A[8]+1770035416&4294967295,v=_+(w<<7&4294967295|w>>>25),w=I+(R^v&(_^R))+A[9]+2336552879&4294967295,I=v+(w<<12&4294967295|w>>>20),w=R+(_^I&(v^_))+A[10]+4294925233&4294967295,R=I+(w<<17&4294967295|w>>>15),w=_+(v^R&(I^v))+A[11]+2304563134&4294967295,_=R+(w<<22&4294967295|w>>>10),w=v+(I^_&(R^I))+A[12]+1804603682&4294967295,v=_+(w<<7&4294967295|w>>>25),w=I+(R^v&(_^R))+A[13]+4254626195&4294967295,I=v+(w<<12&4294967295|w>>>20),w=R+(_^I&(v^_))+A[14]+2792965006&4294967295,R=I+(w<<17&4294967295|w>>>15),w=_+(v^R&(I^v))+A[15]+1236535329&4294967295,_=R+(w<<22&4294967295|w>>>10),w=v+(R^I&(_^R))+A[1]+4129170786&4294967295,v=_+(w<<5&4294967295|w>>>27),w=I+(_^R&(v^_))+A[6]+3225465664&4294967295,I=v+(w<<9&4294967295|w>>>23),w=R+(v^_&(I^v))+A[11]+643717713&4294967295,R=I+(w<<14&4294967295|w>>>18),w=_+(I^v&(R^I))+A[0]+3921069994&4294967295,_=R+(w<<20&4294967295|w>>>12),w=v+(R^I&(_^R))+A[5]+3593408605&4294967295,v=_+(w<<5&4294967295|w>>>27),w=I+(_^R&(v^_))+A[10]+38016083&4294967295,I=v+(w<<9&4294967295|w>>>23),w=R+(v^_&(I^v))+A[15]+3634488961&4294967295,R=I+(w<<14&4294967295|w>>>18),w=_+(I^v&(R^I))+A[4]+3889429448&4294967295,_=R+(w<<20&4294967295|w>>>12),w=v+(R^I&(_^R))+A[9]+568446438&4294967295,v=_+(w<<5&4294967295|w>>>27),w=I+(_^R&(v^_))+A[14]+3275163606&4294967295,I=v+(w<<9&4294967295|w>>>23),w=R+(v^_&(I^v))+A[3]+4107603335&4294967295,R=I+(w<<14&4294967295|w>>>18),w=_+(I^v&(R^I))+A[8]+1163531501&4294967295,_=R+(w<<20&4294967295|w>>>12),w=v+(R^I&(_^R))+A[13]+2850285829&4294967295,v=_+(w<<5&4294967295|w>>>27),w=I+(_^R&(v^_))+A[2]+4243563512&4294967295,I=v+(w<<9&4294967295|w>>>23),w=R+(v^_&(I^v))+A[7]+1735328473&4294967295,R=I+(w<<14&4294967295|w>>>18),w=_+(I^v&(R^I))+A[12]+2368359562&4294967295,_=R+(w<<20&4294967295|w>>>12),w=v+(_^R^I)+A[5]+4294588738&4294967295,v=_+(w<<4&4294967295|w>>>28),w=I+(v^_^R)+A[8]+2272392833&4294967295,I=v+(w<<11&4294967295|w>>>21),w=R+(I^v^_)+A[11]+1839030562&4294967295,R=I+(w<<16&4294967295|w>>>16),w=_+(R^I^v)+A[14]+4259657740&4294967295,_=R+(w<<23&4294967295|w>>>9),w=v+(_^R^I)+A[1]+2763975236&4294967295,v=_+(w<<4&4294967295|w>>>28),w=I+(v^_^R)+A[4]+1272893353&4294967295,I=v+(w<<11&4294967295|w>>>21),w=R+(I^v^_)+A[7]+4139469664&4294967295,R=I+(w<<16&4294967295|w>>>16),w=_+(R^I^v)+A[10]+3200236656&4294967295,_=R+(w<<23&4294967295|w>>>9),w=v+(_^R^I)+A[13]+681279174&4294967295,v=_+(w<<4&4294967295|w>>>28),w=I+(v^_^R)+A[0]+3936430074&4294967295,I=v+(w<<11&4294967295|w>>>21),w=R+(I^v^_)+A[3]+3572445317&4294967295,R=I+(w<<16&4294967295|w>>>16),w=_+(R^I^v)+A[6]+76029189&4294967295,_=R+(w<<23&4294967295|w>>>9),w=v+(_^R^I)+A[9]+3654602809&4294967295,v=_+(w<<4&4294967295|w>>>28),w=I+(v^_^R)+A[12]+3873151461&4294967295,I=v+(w<<11&4294967295|w>>>21),w=R+(I^v^_)+A[15]+530742520&4294967295,R=I+(w<<16&4294967295|w>>>16),w=_+(R^I^v)+A[2]+3299628645&4294967295,_=R+(w<<23&4294967295|w>>>9),w=v+(R^(_|~I))+A[0]+4096336452&4294967295,v=_+(w<<6&4294967295|w>>>26),w=I+(_^(v|~R))+A[7]+1126891415&4294967295,I=v+(w<<10&4294967295|w>>>22),w=R+(v^(I|~_))+A[14]+2878612391&4294967295,R=I+(w<<15&4294967295|w>>>17),w=_+(I^(R|~v))+A[5]+4237533241&4294967295,_=R+(w<<21&4294967295|w>>>11),w=v+(R^(_|~I))+A[12]+1700485571&4294967295,v=_+(w<<6&4294967295|w>>>26),w=I+(_^(v|~R))+A[3]+2399980690&4294967295,I=v+(w<<10&4294967295|w>>>22),w=R+(v^(I|~_))+A[10]+4293915773&4294967295,R=I+(w<<15&4294967295|w>>>17),w=_+(I^(R|~v))+A[1]+2240044497&4294967295,_=R+(w<<21&4294967295|w>>>11),w=v+(R^(_|~I))+A[8]+1873313359&4294967295,v=_+(w<<6&4294967295|w>>>26),w=I+(_^(v|~R))+A[15]+4264355552&4294967295,I=v+(w<<10&4294967295|w>>>22),w=R+(v^(I|~_))+A[6]+2734768916&4294967295,R=I+(w<<15&4294967295|w>>>17),w=_+(I^(R|~v))+A[13]+1309151649&4294967295,_=R+(w<<21&4294967295|w>>>11),w=v+(R^(_|~I))+A[4]+4149444226&4294967295,v=_+(w<<6&4294967295|w>>>26),w=I+(_^(v|~R))+A[11]+3174756917&4294967295,I=v+(w<<10&4294967295|w>>>22),w=R+(v^(I|~_))+A[2]+718787259&4294967295,R=I+(w<<15&4294967295|w>>>17),w=_+(I^(R|~v))+A[9]+3951481745&4294967295,S.g[0]=S.g[0]+v&4294967295,S.g[1]=S.g[1]+(R+(w<<21&4294967295|w>>>11))&4294967295,S.g[2]=S.g[2]+R&4294967295,S.g[3]=S.g[3]+I&4294967295}s.prototype.u=function(S,v){v===void 0&&(v=S.length);for(var _=v-this.blockSize,A=this.B,R=this.h,I=0;I<v;){if(R==0)for(;I<=_;)r(this,S,I),I+=this.blockSize;if(typeof S=="string"){for(;I<v;)if(A[R++]=S.charCodeAt(I++),R==this.blockSize){r(this,A),R=0;break}}else for(;I<v;)if(A[R++]=S[I++],R==this.blockSize){r(this,A),R=0;break}}this.h=R,this.o+=v},s.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var v=1;v<S.length-8;++v)S[v]=0;var _=8*this.o;for(v=S.length-8;v<S.length;++v)S[v]=_&255,_/=256;for(this.u(S),S=Array(16),v=_=0;4>v;++v)for(var A=0;32>A;A+=8)S[_++]=this.g[v]>>>A&255;return S};function i(S,v){var _=l;return Object.prototype.hasOwnProperty.call(_,S)?_[S]:_[S]=v(S)}function o(S,v){this.h=v;for(var _=[],A=!0,R=S.length-1;0<=R;R--){var I=S[R]|0;A&&I==v||(_[R]=I,A=!1)}this.g=_}var l={};function c(S){return-128<=S&&128>S?i(S,function(v){return new o([v|0],0>v?-1:0)}):new o([S|0],0>S?-1:0)}function u(S){if(isNaN(S)||!isFinite(S))return d;if(0>S)return P(u(-S));for(var v=[],_=1,A=0;S>=_;A++)v[A]=S/_|0,_*=4294967296;return new o(v,0)}function h(S,v){if(S.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(S.charAt(0)=="-")return P(h(S.substring(1),v));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=u(Math.pow(v,8)),A=d,R=0;R<S.length;R+=8){var I=Math.min(8,S.length-R),w=parseInt(S.substring(R,R+I),v);8>I?(I=u(Math.pow(v,I)),A=A.j(I).add(u(w))):(A=A.j(_),A=A.add(u(w)))}return A}var d=c(0),m=c(1),y=c(16777216);e=o.prototype,e.m=function(){if(C(this))return-P(this).m();for(var S=0,v=1,_=0;_<this.g.length;_++){var A=this.i(_);S+=(0<=A?A:4294967296+A)*v,v*=4294967296}return S},e.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(T(this))return"0";if(C(this))return"-"+P(this).toString(S);for(var v=u(Math.pow(S,6)),_=this,A="";;){var R=H(_,v).g;_=U(_,R.j(v));var I=((0<_.g.length?_.g[0]:_.h)>>>0).toString(S);if(_=R,T(_))return I+A;for(;6>I.length;)I="0"+I;A=I+A}},e.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function T(S){if(S.h!=0)return!1;for(var v=0;v<S.g.length;v++)if(S.g[v]!=0)return!1;return!0}function C(S){return S.h==-1}e.l=function(S){return S=U(this,S),C(S)?-1:T(S)?0:1};function P(S){for(var v=S.g.length,_=[],A=0;A<v;A++)_[A]=~S.g[A];return new o(_,~S.h).add(m)}e.abs=function(){return C(this)?P(this):this},e.add=function(S){for(var v=Math.max(this.g.length,S.g.length),_=[],A=0,R=0;R<=v;R++){var I=A+(this.i(R)&65535)+(S.i(R)&65535),w=(I>>>16)+(this.i(R)>>>16)+(S.i(R)>>>16);A=w>>>16,I&=65535,w&=65535,_[R]=w<<16|I}return new o(_,_[_.length-1]&-2147483648?-1:0)};function U(S,v){return S.add(P(v))}e.j=function(S){if(T(this)||T(S))return d;if(C(this))return C(S)?P(this).j(P(S)):P(P(this).j(S));if(C(S))return P(this.j(P(S)));if(0>this.l(y)&&0>S.l(y))return u(this.m()*S.m());for(var v=this.g.length+S.g.length,_=[],A=0;A<2*v;A++)_[A]=0;for(A=0;A<this.g.length;A++)for(var R=0;R<S.g.length;R++){var I=this.i(A)>>>16,w=this.i(A)&65535,kt=S.i(R)>>>16,Yt=S.i(R)&65535;_[2*A+2*R]+=w*Yt,N(_,2*A+2*R),_[2*A+2*R+1]+=I*Yt,N(_,2*A+2*R+1),_[2*A+2*R+1]+=w*kt,N(_,2*A+2*R+1),_[2*A+2*R+2]+=I*kt,N(_,2*A+2*R+2)}for(A=0;A<v;A++)_[A]=_[2*A+1]<<16|_[2*A];for(A=v;A<2*v;A++)_[A]=0;return new o(_,0)};function N(S,v){for(;(S[v]&65535)!=S[v];)S[v+1]+=S[v]>>>16,S[v]&=65535,v++}function B(S,v){this.g=S,this.h=v}function H(S,v){if(T(v))throw Error("division by zero");if(T(S))return new B(d,d);if(C(S))return v=H(P(S),v),new B(P(v.g),P(v.h));if(C(v))return v=H(S,P(v)),new B(P(v.g),v.h);if(30<S.g.length){if(C(S)||C(v))throw Error("slowDivide_ only works with positive integers.");for(var _=m,A=v;0>=A.l(S);)_=G(_),A=G(A);var R=K(_,1),I=K(A,1);for(A=K(A,2),_=K(_,2);!T(A);){var w=I.add(A);0>=w.l(S)&&(R=R.add(_),I=w),A=K(A,1),_=K(_,1)}return v=U(S,R.j(v)),new B(R,v)}for(R=d;0<=S.l(v);){for(_=Math.max(1,Math.floor(S.m()/v.m())),A=Math.ceil(Math.log(_)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),I=u(_),w=I.j(v);C(w)||0<w.l(S);)_-=A,I=u(_),w=I.j(v);T(I)&&(I=m),R=R.add(I),S=U(S,w)}return new B(R,S)}e.A=function(S){return H(this,S).h},e.and=function(S){for(var v=Math.max(this.g.length,S.g.length),_=[],A=0;A<v;A++)_[A]=this.i(A)&S.i(A);return new o(_,this.h&S.h)},e.or=function(S){for(var v=Math.max(this.g.length,S.g.length),_=[],A=0;A<v;A++)_[A]=this.i(A)|S.i(A);return new o(_,this.h|S.h)},e.xor=function(S){for(var v=Math.max(this.g.length,S.g.length),_=[],A=0;A<v;A++)_[A]=this.i(A)^S.i(A);return new o(_,this.h^S.h)};function G(S){for(var v=S.g.length+1,_=[],A=0;A<v;A++)_[A]=S.i(A)<<1|S.i(A-1)>>>31;return new o(_,S.h)}function K(S,v){var _=v>>5;v%=32;for(var A=S.g.length-_,R=[],I=0;I<A;I++)R[I]=0<v?S.i(I+_)>>>v|S.i(I+_+1)<<32-v:S.i(I+_);return new o(R,S.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,jg=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,ls=o}).apply(typeof Ad<"u"?Ad:typeof self<"u"?self:typeof window<"u"?window:{});var Ro=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qg,ei,Hg,Bo,bc,zg,Kg,Gg;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,f,p){return a==Array.prototype||a==Object.prototype||(a[f]=p.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ro=="object"&&Ro];for(var f=0;f<a.length;++f){var p=a[f];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var s=n(this);function r(a,f){if(f)t:{var p=s;a=a.split(".");for(var g=0;g<a.length-1;g++){var x=a[g];if(!(x in p))break t;p=p[x]}a=a[a.length-1],g=p[a],f=f(g),f!=g&&f!=null&&t(p,a,{configurable:!0,writable:!0,value:f})}}function i(a,f){a instanceof String&&(a+="");var p=0,g=!1,x={next:function(){if(!g&&p<a.length){var O=p++;return{value:f(O,a[O]),done:!1}}return g=!0,{done:!0,value:void 0}}};return x[Symbol.iterator]=function(){return x},x}r("Array.prototype.values",function(a){return a||function(){return i(this,function(f,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(a){var f=typeof a;return f=f!="object"?f:a?Array.isArray(a)?"array":f:"null",f=="array"||f=="object"&&typeof a.length=="number"}function u(a){var f=typeof a;return f=="object"&&a!=null||f=="function"}function h(a,f,p){return a.call.apply(a.bind,arguments)}function d(a,f,p){if(!a)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var x=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(x,g),a.apply(f,x)}}return function(){return a.apply(f,arguments)}}function m(a,f,p){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,m.apply(null,arguments)}function y(a,f){var p=Array.prototype.slice.call(arguments,1);return function(){var g=p.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function T(a,f){function p(){}p.prototype=f.prototype,a.aa=f.prototype,a.prototype=new p,a.prototype.constructor=a,a.Qb=function(g,x,O){for(var J=Array(arguments.length-2),Dt=2;Dt<arguments.length;Dt++)J[Dt-2]=arguments[Dt];return f.prototype[x].apply(g,J)}}function C(a){const f=a.length;if(0<f){const p=Array(f);for(let g=0;g<f;g++)p[g]=a[g];return p}return[]}function P(a,f){for(let p=1;p<arguments.length;p++){const g=arguments[p];if(c(g)){const x=a.length||0,O=g.length||0;a.length=x+O;for(let J=0;J<O;J++)a[x+J]=g[J]}else a.push(g)}}class U{constructor(f,p){this.i=f,this.j=p,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function N(a){return/^[\s\xa0]*$/.test(a)}function B(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function H(a){return H[" "](a),a}H[" "]=function(){};var G=B().indexOf("Gecko")!=-1&&!(B().toLowerCase().indexOf("webkit")!=-1&&B().indexOf("Edge")==-1)&&!(B().indexOf("Trident")!=-1||B().indexOf("MSIE")!=-1)&&B().indexOf("Edge")==-1;function K(a,f,p){for(const g in a)f.call(p,a[g],g,a)}function S(a,f){for(const p in a)f.call(void 0,a[p],p,a)}function v(a){const f={};for(const p in a)f[p]=a[p];return f}const _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(a,f){let p,g;for(let x=1;x<arguments.length;x++){g=arguments[x];for(p in g)a[p]=g[p];for(let O=0;O<_.length;O++)p=_[O],Object.prototype.hasOwnProperty.call(g,p)&&(a[p]=g[p])}}function R(a){var f=1;a=a.split(":");const p=[];for(;0<f&&a.length;)p.push(a.shift()),f--;return a.length&&p.push(a.join(":")),p}function I(a){l.setTimeout(()=>{throw a},0)}function w(){var a=Ue;let f=null;return a.g&&(f=a.g,a.g=a.g.next,a.g||(a.h=null),f.next=null),f}class kt{constructor(){this.h=this.g=null}add(f,p){const g=Yt.get();g.set(f,p),this.h?this.h.next=g:this.g=g,this.h=g}}var Yt=new U(()=>new Bt,a=>a.reset());class Bt{constructor(){this.next=this.g=this.h=null}set(f,p){this.h=f,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Tt,vt=!1,Ue=new kt,Ze=()=>{const a=l.Promise.resolve(void 0);Tt=()=>{a.then(Ke)}};var Ke=()=>{for(var a;a=w();){try{a.h.call(a.g)}catch(p){I(p)}var f=Yt;f.j(a),100>f.h&&(f.h++,a.next=f.g,f.g=a)}vt=!1};function $t(){this.s=this.s,this.C=this.C}$t.prototype.s=!1,$t.prototype.ma=function(){this.s||(this.s=!0,this.N())},$t.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function jt(a,f){this.type=a,this.g=this.target=f,this.defaultPrevented=!1}jt.prototype.h=function(){this.defaultPrevented=!0};var Gn=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,f=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const p=()=>{};l.addEventListener("test",p,f),l.removeEventListener("test",p,f)}catch{}return a}();function hn(a,f){if(jt.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var p=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=f,f=a.relatedTarget){if(G){t:{try{H(f.nodeName);var x=!0;break t}catch{}x=!1}x||(f=null)}}else p=="mouseover"?f=a.fromElement:p=="mouseout"&&(f=a.toElement);this.relatedTarget=f,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:ke[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&hn.aa.h.call(this)}}T(hn,jt);var ke={2:"touch",3:"pen",4:"mouse"};hn.prototype.h=function(){hn.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var M="closure_listenable_"+(1e6*Math.random()|0),tt=0;function Y(a,f,p,g,x){this.listener=a,this.proxy=null,this.src=f,this.type=p,this.capture=!!g,this.ha=x,this.key=++tt,this.da=this.fa=!1}function nt(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function St(a){this.src=a,this.g={},this.h=0}St.prototype.add=function(a,f,p,g,x){var O=a.toString();a=this.g[O],a||(a=this.g[O]=[],this.h++);var J=b(a,f,g,x);return-1<J?(f=a[J],p||(f.fa=!1)):(f=new Y(f,this.src,O,!!g,x),f.fa=p,a.push(f)),f};function E(a,f){var p=f.type;if(p in a.g){var g=a.g[p],x=Array.prototype.indexOf.call(g,f,void 0),O;(O=0<=x)&&Array.prototype.splice.call(g,x,1),O&&(nt(f),a.g[p].length==0&&(delete a.g[p],a.h--))}}function b(a,f,p,g){for(var x=0;x<a.length;++x){var O=a[x];if(!O.da&&O.listener==f&&O.capture==!!p&&O.ha==g)return x}return-1}var V="closure_lm_"+(1e6*Math.random()|0),L={};function j(a,f,p,g,x){if(Array.isArray(f)){for(var O=0;O<f.length;O++)j(a,f[O],p,g,x);return null}return p=ct(p),a&&a[M]?a.K(f,p,u(g)?!!g.capture:!1,x):F(a,f,p,!1,g,x)}function F(a,f,p,g,x,O){if(!f)throw Error("Invalid event type");var J=u(x)?!!x.capture:!!x,Dt=Z(a);if(Dt||(a[V]=Dt=new St(a)),p=Dt.add(f,p,g,J,O),p.proxy)return p;if(g=X(),p.proxy=g,g.src=a,g.listener=p,a.addEventListener)Gn||(x=J),x===void 0&&(x=!1),a.addEventListener(f.toString(),g,x);else if(a.attachEvent)a.attachEvent(z(f.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return p}function X(){function a(p){return f.call(a.src,a.listener,p)}const f=it;return a}function Q(a,f,p,g,x){if(Array.isArray(f))for(var O=0;O<f.length;O++)Q(a,f[O],p,g,x);else g=u(g)?!!g.capture:!!g,p=ct(p),a&&a[M]?(a=a.i,f=String(f).toString(),f in a.g&&(O=a.g[f],p=b(O,p,g,x),-1<p&&(nt(O[p]),Array.prototype.splice.call(O,p,1),O.length==0&&(delete a.g[f],a.h--)))):a&&(a=Z(a))&&(f=a.g[f.toString()],a=-1,f&&(a=b(f,p,g,x)),(p=-1<a?f[a]:null)&&W(p))}function W(a){if(typeof a!="number"&&a&&!a.da){var f=a.src;if(f&&f[M])E(f.i,a);else{var p=a.type,g=a.proxy;f.removeEventListener?f.removeEventListener(p,g,a.capture):f.detachEvent?f.detachEvent(z(p),g):f.addListener&&f.removeListener&&f.removeListener(g),(p=Z(f))?(E(p,a),p.h==0&&(p.src=null,f[V]=null)):nt(a)}}}function z(a){return a in L?L[a]:L[a]="on"+a}function it(a,f){if(a.da)a=!0;else{f=new hn(f,this);var p=a.listener,g=a.ha||a.src;a.fa&&W(a),a=p.call(g,f)}return a}function Z(a){return a=a[V],a instanceof St?a:null}var rt="__closure_events_fn_"+(1e9*Math.random()>>>0);function ct(a){return typeof a=="function"?a:(a[rt]||(a[rt]=function(f){return a.handleEvent(f)}),a[rt])}function at(){$t.call(this),this.i=new St(this),this.M=this,this.F=null}T(at,$t),at.prototype[M]=!0,at.prototype.removeEventListener=function(a,f,p,g){Q(this,a,f,p,g)};function pt(a,f){var p,g=a.F;if(g)for(p=[];g;g=g.F)p.push(g);if(a=a.M,g=f.type||f,typeof f=="string")f=new jt(f,a);else if(f instanceof jt)f.target=f.target||a;else{var x=f;f=new jt(g,a),A(f,x)}if(x=!0,p)for(var O=p.length-1;0<=O;O--){var J=f.g=p[O];x=At(J,g,!0,f)&&x}if(J=f.g=a,x=At(J,g,!0,f)&&x,x=At(J,g,!1,f)&&x,p)for(O=0;O<p.length;O++)J=f.g=p[O],x=At(J,g,!1,f)&&x}at.prototype.N=function(){if(at.aa.N.call(this),this.i){var a=this.i,f;for(f in a.g){for(var p=a.g[f],g=0;g<p.length;g++)nt(p[g]);delete a.g[f],a.h--}}this.F=null},at.prototype.K=function(a,f,p,g){return this.i.add(String(a),f,!1,p,g)},at.prototype.L=function(a,f,p,g){return this.i.add(String(a),f,!0,p,g)};function At(a,f,p,g){if(f=a.i.g[String(f)],!f)return!0;f=f.concat();for(var x=!0,O=0;O<f.length;++O){var J=f[O];if(J&&!J.da&&J.capture==p){var Dt=J.listener,ce=J.ha||J.src;J.fa&&E(a.i,J),x=Dt.call(ce,g)!==!1&&x}}return x&&!g.defaultPrevented}function oe(a,f,p){if(typeof a=="function")p&&(a=m(a,p));else if(a&&typeof a.handleEvent=="function")a=m(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:l.setTimeout(a,f||0)}function ae(a){a.g=oe(()=>{a.g=null,a.i&&(a.i=!1,ae(a))},a.l);const f=a.h;a.h=null,a.m.apply(null,f)}class Ge extends $t{constructor(f,p){super(),this.m=f,this.l=p,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:ae(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pe(a){$t.call(this),this.h=a,this.g={}}T(pe,$t);var Wn=[];function Mr(a){K(a.g,function(f,p){this.g.hasOwnProperty(p)&&W(f)},a),a.g={}}pe.prototype.N=function(){pe.aa.N.call(this),Mr(this)},pe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var le=l.JSON.stringify,We=l.JSON.parse,io=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function er(){}er.prototype.h=null;function nh(a){return a.h||(a.h=a.i())}function sh(){}var Lr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function rl(){jt.call(this,"d")}T(rl,jt);function il(){jt.call(this,"c")}T(il,jt);var bs={},rh=null;function oo(){return rh=rh||new at}bs.La="serverreachability";function ih(a){jt.call(this,bs.La,a)}T(ih,jt);function Fr(a){const f=oo();pt(f,new ih(f))}bs.STAT_EVENT="statevent";function oh(a,f){jt.call(this,bs.STAT_EVENT,a),this.stat=f}T(oh,jt);function Ie(a){const f=oo();pt(f,new oh(f,a))}bs.Ma="timingevent";function ah(a,f){jt.call(this,bs.Ma,a),this.size=f}T(ah,jt);function Ur(a,f){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},f)}function Br(){this.g=!0}Br.prototype.xa=function(){this.g=!1};function B_(a,f,p,g,x,O){a.info(function(){if(a.g)if(O)for(var J="",Dt=O.split("&"),ce=0;ce<Dt.length;ce++){var Rt=Dt[ce].split("=");if(1<Rt.length){var me=Rt[0];Rt=Rt[1];var ge=me.split("_");J=2<=ge.length&&ge[1]=="type"?J+(me+"="+Rt+"&"):J+(me+"=redacted&")}}else J=null;else J=O;return"XMLHTTP REQ ("+g+") [attempt "+x+"]: "+f+`
`+p+`
`+J})}function $_(a,f,p,g,x,O,J){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+x+"]: "+f+`
`+p+`
`+O+" "+J})}function nr(a,f,p,g){a.info(function(){return"XMLHTTP TEXT ("+f+"): "+q_(a,p)+(g?" "+g:"")})}function j_(a,f){a.info(function(){return"TIMEOUT: "+f})}Br.prototype.info=function(){};function q_(a,f){if(!a.g)return f;if(!f)return null;try{var p=JSON.parse(f);if(p){for(a=0;a<p.length;a++)if(Array.isArray(p[a])){var g=p[a];if(!(2>g.length)){var x=g[1];if(Array.isArray(x)&&!(1>x.length)){var O=x[0];if(O!="noop"&&O!="stop"&&O!="close")for(var J=1;J<x.length;J++)x[J]=""}}}}return le(p)}catch{return f}}var ao={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},lh={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ol;function lo(){}T(lo,er),lo.prototype.g=function(){return new XMLHttpRequest},lo.prototype.i=function(){return{}},ol=new lo;function Qn(a,f,p,g){this.j=a,this.i=f,this.l=p,this.R=g||1,this.U=new pe(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ch}function ch(){this.i=null,this.g="",this.h=!1}var uh={},al={};function ll(a,f,p){a.L=1,a.v=fo(Sn(f)),a.m=p,a.P=!0,hh(a,null)}function hh(a,f){a.F=Date.now(),co(a),a.A=Sn(a.v);var p=a.A,g=a.R;Array.isArray(g)||(g=[String(g)]),Ih(p.i,"t",g),a.C=0,p=a.j.J,a.h=new ch,a.g=qh(a.j,p?f:null,!a.m),0<a.O&&(a.M=new Ge(m(a.Y,a,a.g),a.O)),f=a.U,p=a.g,g=a.ca;var x="readystatechange";Array.isArray(x)||(x&&(Wn[0]=x.toString()),x=Wn);for(var O=0;O<x.length;O++){var J=j(p,x[O],g||f.handleEvent,!1,f.h||f);if(!J)break;f.g[J.key]=J}f=a.H?v(a.H):{},a.m?(a.u||(a.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,f)):(a.u="GET",a.g.ea(a.A,a.u,null,f)),Fr(),B_(a.i,a.u,a.A,a.l,a.R,a.m)}Qn.prototype.ca=function(a){a=a.target;const f=this.M;f&&Rn(a)==3?f.j():this.Y(a)},Qn.prototype.Y=function(a){try{if(a==this.g)t:{const ge=Rn(this.g);var f=this.g.Ba();const ir=this.g.Z();if(!(3>ge)&&(ge!=3||this.g&&(this.h.h||this.g.oa()||kh(this.g)))){this.J||ge!=4||f==7||(f==8||0>=ir?Fr(3):Fr(2)),cl(this);var p=this.g.Z();this.X=p;e:if(fh(this)){var g=kh(this.g);a="";var x=g.length,O=Rn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Is(this),$r(this);var J="";break e}this.h.i=new l.TextDecoder}for(f=0;f<x;f++)this.h.h=!0,a+=this.h.i.decode(g[f],{stream:!(O&&f==x-1)});g.length=0,this.h.g+=a,this.C=0,J=this.h.g}else J=this.g.oa();if(this.o=p==200,$_(this.i,this.u,this.A,this.l,this.R,ge,p),this.o){if(this.T&&!this.K){e:{if(this.g){var Dt,ce=this.g;if((Dt=ce.g?ce.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(Dt)){var Rt=Dt;break e}}Rt=null}if(p=Rt)nr(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ul(this,p);else{this.o=!1,this.s=3,Ie(12),Is(this),$r(this);break t}}if(this.P){p=!0;let tn;for(;!this.J&&this.C<J.length;)if(tn=H_(this,J),tn==al){ge==4&&(this.s=4,Ie(14),p=!1),nr(this.i,this.l,null,"[Incomplete Response]");break}else if(tn==uh){this.s=4,Ie(15),nr(this.i,this.l,J,"[Invalid Chunk]"),p=!1;break}else nr(this.i,this.l,tn,null),ul(this,tn);if(fh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ge!=4||J.length!=0||this.h.h||(this.s=1,Ie(16),p=!1),this.o=this.o&&p,!p)nr(this.i,this.l,J,"[Invalid Chunked Response]"),Is(this),$r(this);else if(0<J.length&&!this.W){this.W=!0;var me=this.j;me.g==this&&me.ba&&!me.M&&(me.j.info("Great, no buffering proxy detected. Bytes received: "+J.length),gl(me),me.M=!0,Ie(11))}}else nr(this.i,this.l,J,null),ul(this,J);ge==4&&Is(this),this.o&&!this.J&&(ge==4?Uh(this.j,this):(this.o=!1,co(this)))}else av(this.g),p==400&&0<J.indexOf("Unknown SID")?(this.s=3,Ie(12)):(this.s=0,Ie(13)),Is(this),$r(this)}}}catch{}finally{}};function fh(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function H_(a,f){var p=a.C,g=f.indexOf(`
`,p);return g==-1?al:(p=Number(f.substring(p,g)),isNaN(p)?uh:(g+=1,g+p>f.length?al:(f=f.slice(g,g+p),a.C=g+p,f)))}Qn.prototype.cancel=function(){this.J=!0,Is(this)};function co(a){a.S=Date.now()+a.I,dh(a,a.I)}function dh(a,f){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Ur(m(a.ba,a),f)}function cl(a){a.B&&(l.clearTimeout(a.B),a.B=null)}Qn.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(j_(this.i,this.A),this.L!=2&&(Fr(),Ie(17)),Is(this),this.s=2,$r(this)):dh(this,this.S-a)};function $r(a){a.j.G==0||a.J||Uh(a.j,a)}function Is(a){cl(a);var f=a.M;f&&typeof f.ma=="function"&&f.ma(),a.M=null,Mr(a.U),a.g&&(f=a.g,a.g=null,f.abort(),f.ma())}function ul(a,f){try{var p=a.j;if(p.G!=0&&(p.g==a||hl(p.h,a))){if(!a.K&&hl(p.h,a)&&p.G==3){try{var g=p.Da.g.parse(f)}catch{g=null}if(Array.isArray(g)&&g.length==3){var x=g;if(x[0]==0){t:if(!p.u){if(p.g)if(p.g.F+3e3<a.F)vo(p),yo(p);else break t;ml(p),Ie(18)}}else p.za=x[1],0<p.za-p.T&&37500>x[2]&&p.F&&p.v==0&&!p.C&&(p.C=Ur(m(p.Za,p),6e3));if(1>=gh(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Rs(p,11)}else if((a.K||p.g==a)&&vo(p),!N(f))for(x=p.Da.g.parse(f),f=0;f<x.length;f++){let Rt=x[f];if(p.T=Rt[0],Rt=Rt[1],p.G==2)if(Rt[0]=="c"){p.K=Rt[1],p.ia=Rt[2];const me=Rt[3];me!=null&&(p.la=me,p.j.info("VER="+p.la));const ge=Rt[4];ge!=null&&(p.Aa=ge,p.j.info("SVER="+p.Aa));const ir=Rt[5];ir!=null&&typeof ir=="number"&&0<ir&&(g=1.5*ir,p.L=g,p.j.info("backChannelRequestTimeoutMs_="+g)),g=p;const tn=a.g;if(tn){const Eo=tn.g?tn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Eo){var O=g.h;O.g||Eo.indexOf("spdy")==-1&&Eo.indexOf("quic")==-1&&Eo.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(fl(O,O.h),O.h=null))}if(g.D){const yl=tn.g?tn.g.getResponseHeader("X-HTTP-Session-Id"):null;yl&&(g.ya=yl,Mt(g.I,g.D,yl))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-a.F,p.j.info("Handshake RTT: "+p.R+"ms")),g=p;var J=a;if(g.qa=jh(g,g.J?g.ia:null,g.W),J.K){yh(g.h,J);var Dt=J,ce=g.L;ce&&(Dt.I=ce),Dt.B&&(cl(Dt),co(Dt)),g.g=J}else Lh(g);0<p.i.length&&_o(p)}else Rt[0]!="stop"&&Rt[0]!="close"||Rs(p,7);else p.G==3&&(Rt[0]=="stop"||Rt[0]=="close"?Rt[0]=="stop"?Rs(p,7):pl(p):Rt[0]!="noop"&&p.l&&p.l.ta(Rt),p.v=0)}}Fr(4)}catch{}}var z_=class{constructor(a,f){this.g=a,this.map=f}};function ph(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function mh(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function gh(a){return a.h?1:a.g?a.g.size:0}function hl(a,f){return a.h?a.h==f:a.g?a.g.has(f):!1}function fl(a,f){a.g?a.g.add(f):a.h=f}function yh(a,f){a.h&&a.h==f?a.h=null:a.g&&a.g.has(f)&&a.g.delete(f)}ph.prototype.cancel=function(){if(this.i=_h(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function _h(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let f=a.i;for(const p of a.g.values())f=f.concat(p.D);return f}return C(a.i)}function K_(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(c(a)){for(var f=[],p=a.length,g=0;g<p;g++)f.push(a[g]);return f}f=[],p=0;for(g in a)f[p++]=a[g];return f}function G_(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(c(a)||typeof a=="string"){var f=[];a=a.length;for(var p=0;p<a;p++)f.push(p);return f}f=[],p=0;for(const g in a)f[p++]=g;return f}}}function vh(a,f){if(a.forEach&&typeof a.forEach=="function")a.forEach(f,void 0);else if(c(a)||typeof a=="string")Array.prototype.forEach.call(a,f,void 0);else for(var p=G_(a),g=K_(a),x=g.length,O=0;O<x;O++)f.call(void 0,g[O],p&&p[O],a)}var wh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function W_(a,f){if(a){a=a.split("&");for(var p=0;p<a.length;p++){var g=a[p].indexOf("="),x=null;if(0<=g){var O=a[p].substring(0,g);x=a[p].substring(g+1)}else O=a[p];f(O,x?decodeURIComponent(x.replace(/\+/g," ")):"")}}}function Ss(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Ss){this.h=a.h,uo(this,a.j),this.o=a.o,this.g=a.g,ho(this,a.s),this.l=a.l;var f=a.i,p=new Hr;p.i=f.i,f.g&&(p.g=new Map(f.g),p.h=f.h),Eh(this,p),this.m=a.m}else a&&(f=String(a).match(wh))?(this.h=!1,uo(this,f[1]||"",!0),this.o=jr(f[2]||""),this.g=jr(f[3]||"",!0),ho(this,f[4]),this.l=jr(f[5]||"",!0),Eh(this,f[6]||"",!0),this.m=jr(f[7]||"")):(this.h=!1,this.i=new Hr(null,this.h))}Ss.prototype.toString=function(){var a=[],f=this.j;f&&a.push(qr(f,Th,!0),":");var p=this.g;return(p||f=="file")&&(a.push("//"),(f=this.o)&&a.push(qr(f,Th,!0),"@"),a.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&a.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&a.push("/"),a.push(qr(p,p.charAt(0)=="/"?X_:J_,!0))),(p=this.i.toString())&&a.push("?",p),(p=this.m)&&a.push("#",qr(p,Z_)),a.join("")};function Sn(a){return new Ss(a)}function uo(a,f,p){a.j=p?jr(f,!0):f,a.j&&(a.j=a.j.replace(/:$/,""))}function ho(a,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);a.s=f}else a.s=null}function Eh(a,f,p){f instanceof Hr?(a.i=f,tv(a.i,a.h)):(p||(f=qr(f,Y_)),a.i=new Hr(f,a.h))}function Mt(a,f,p){a.i.set(f,p)}function fo(a){return Mt(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function jr(a,f){return a?f?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function qr(a,f,p){return typeof a=="string"?(a=encodeURI(a).replace(f,Q_),p&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Q_(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Th=/[#\/\?@]/g,J_=/[#\?:]/g,X_=/[#\?]/g,Y_=/[#\?@]/g,Z_=/#/g;function Hr(a,f){this.h=this.g=null,this.i=a||null,this.j=!!f}function Jn(a){a.g||(a.g=new Map,a.h=0,a.i&&W_(a.i,function(f,p){a.add(decodeURIComponent(f.replace(/\+/g," ")),p)}))}e=Hr.prototype,e.add=function(a,f){Jn(this),this.i=null,a=sr(this,a);var p=this.g.get(a);return p||this.g.set(a,p=[]),p.push(f),this.h+=1,this};function Ah(a,f){Jn(a),f=sr(a,f),a.g.has(f)&&(a.i=null,a.h-=a.g.get(f).length,a.g.delete(f))}function bh(a,f){return Jn(a),f=sr(a,f),a.g.has(f)}e.forEach=function(a,f){Jn(this),this.g.forEach(function(p,g){p.forEach(function(x){a.call(f,x,g,this)},this)},this)},e.na=function(){Jn(this);const a=Array.from(this.g.values()),f=Array.from(this.g.keys()),p=[];for(let g=0;g<f.length;g++){const x=a[g];for(let O=0;O<x.length;O++)p.push(f[g])}return p},e.V=function(a){Jn(this);let f=[];if(typeof a=="string")bh(this,a)&&(f=f.concat(this.g.get(sr(this,a))));else{a=Array.from(this.g.values());for(let p=0;p<a.length;p++)f=f.concat(a[p])}return f},e.set=function(a,f){return Jn(this),this.i=null,a=sr(this,a),bh(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[f]),this.h+=1,this},e.get=function(a,f){return a?(a=this.V(a),0<a.length?String(a[0]):f):f};function Ih(a,f,p){Ah(a,f),0<p.length&&(a.i=null,a.g.set(sr(a,f),C(p)),a.h+=p.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],f=Array.from(this.g.keys());for(var p=0;p<f.length;p++){var g=f[p];const O=encodeURIComponent(String(g)),J=this.V(g);for(g=0;g<J.length;g++){var x=O;J[g]!==""&&(x+="="+encodeURIComponent(String(J[g]))),a.push(x)}}return this.i=a.join("&")};function sr(a,f){return f=String(f),a.j&&(f=f.toLowerCase()),f}function tv(a,f){f&&!a.j&&(Jn(a),a.i=null,a.g.forEach(function(p,g){var x=g.toLowerCase();g!=x&&(Ah(this,g),Ih(this,x,p))},a)),a.j=f}function ev(a,f){const p=new Br;if(l.Image){const g=new Image;g.onload=y(Xn,p,"TestLoadImage: loaded",!0,f,g),g.onerror=y(Xn,p,"TestLoadImage: error",!1,f,g),g.onabort=y(Xn,p,"TestLoadImage: abort",!1,f,g),g.ontimeout=y(Xn,p,"TestLoadImage: timeout",!1,f,g),l.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else f(!1)}function nv(a,f){const p=new Br,g=new AbortController,x=setTimeout(()=>{g.abort(),Xn(p,"TestPingServer: timeout",!1,f)},1e4);fetch(a,{signal:g.signal}).then(O=>{clearTimeout(x),O.ok?Xn(p,"TestPingServer: ok",!0,f):Xn(p,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(x),Xn(p,"TestPingServer: error",!1,f)})}function Xn(a,f,p,g,x){try{x&&(x.onload=null,x.onerror=null,x.onabort=null,x.ontimeout=null),g(p)}catch{}}function sv(){this.g=new io}function rv(a,f,p){const g=p||"";try{vh(a,function(x,O){let J=x;u(x)&&(J=le(x)),f.push(g+O+"="+encodeURIComponent(J))})}catch(x){throw f.push(g+"type="+encodeURIComponent("_badmap")),x}}function po(a){this.l=a.Ub||null,this.j=a.eb||!1}T(po,er),po.prototype.g=function(){return new mo(this.l,this.j)},po.prototype.i=function(a){return function(){return a}}({});function mo(a,f){at.call(this),this.D=a,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(mo,at),e=mo.prototype,e.open=function(a,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=f,this.readyState=1,Kr(this)},e.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(f.body=a),(this.D||l).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,zr(this)),this.readyState=0},e.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Kr(this)),this.g&&(this.readyState=3,Kr(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Sh(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Sh(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}e.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var f=a.value?a.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!a.done}))&&(this.response=this.responseText+=f)}a.done?zr(this):Kr(this),this.readyState==3&&Sh(this)}},e.Ra=function(a){this.g&&(this.response=this.responseText=a,zr(this))},e.Qa=function(a){this.g&&(this.response=a,zr(this))},e.ga=function(){this.g&&zr(this)};function zr(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Kr(a)}e.setRequestHeader=function(a,f){this.u.append(a,f)},e.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],f=this.h.entries();for(var p=f.next();!p.done;)p=p.value,a.push(p[0]+": "+p[1]),p=f.next();return a.join(`\r
`)};function Kr(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(mo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Rh(a){let f="";return K(a,function(p,g){f+=g,f+=":",f+=p,f+=`\r
`}),f}function dl(a,f,p){t:{for(g in p){var g=!1;break t}g=!0}g||(p=Rh(p),typeof a=="string"?p!=null&&encodeURIComponent(String(p)):Mt(a,f,p))}function zt(a){at.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(zt,at);var iv=/^https?$/i,ov=["POST","PUT"];e=zt.prototype,e.Ha=function(a){this.J=a},e.ea=function(a,f,p,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);f=f?f.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ol.g(),this.v=this.o?nh(this.o):nh(ol),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(f,String(a),!0),this.B=!1}catch(O){Ch(this,O);return}if(a=p||"",p=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var x in g)p.set(x,g[x]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(const O of g.keys())p.set(O,g.get(O));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(p.keys()).find(O=>O.toLowerCase()=="content-type"),x=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(ov,f,void 0))||g||x||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,J]of p)this.g.setRequestHeader(O,J);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{xh(this),this.u=!0,this.g.send(a),this.u=!1}catch(O){Ch(this,O)}};function Ch(a,f){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=f,a.m=5,Ph(a),go(a)}function Ph(a){a.A||(a.A=!0,pt(a,"complete"),pt(a,"error"))}e.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,pt(this,"complete"),pt(this,"abort"),go(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),go(this,!0)),zt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Vh(this):this.bb())},e.bb=function(){Vh(this)};function Vh(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Rn(a)!=4||a.Z()!=2)){if(a.u&&Rn(a)==4)oe(a.Ea,0,a);else if(pt(a,"readystatechange"),Rn(a)==4){a.h=!1;try{const J=a.Z();t:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break t;default:f=!1}var p;if(!(p=f)){var g;if(g=J===0){var x=String(a.D).match(wh)[1]||null;!x&&l.self&&l.self.location&&(x=l.self.location.protocol.slice(0,-1)),g=!iv.test(x?x.toLowerCase():"")}p=g}if(p)pt(a,"complete"),pt(a,"success");else{a.m=6;try{var O=2<Rn(a)?a.g.statusText:""}catch{O=""}a.l=O+" ["+a.Z()+"]",Ph(a)}}finally{go(a)}}}}function go(a,f){if(a.g){xh(a);const p=a.g,g=a.v[0]?()=>{}:null;a.g=null,a.v=null,f||pt(a,"ready");try{p.onreadystatechange=g}catch{}}}function xh(a){a.I&&(l.clearTimeout(a.I),a.I=null)}e.isActive=function(){return!!this.g};function Rn(a){return a.g?a.g.readyState:0}e.Z=function(){try{return 2<Rn(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(a){if(this.g){var f=this.g.responseText;return a&&f.indexOf(a)==0&&(f=f.substring(a.length)),We(f)}};function kh(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function av(a){const f={};a=(a.g&&2<=Rn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(N(a[g]))continue;var p=R(a[g]);const x=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const O=f[x]||[];f[x]=O,O.push(p)}S(f,function(g){return g.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Gr(a,f,p){return p&&p.internalChannelParams&&p.internalChannelParams[a]||f}function Dh(a){this.Aa=0,this.i=[],this.j=new Br,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Gr("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Gr("baseRetryDelayMs",5e3,a),this.cb=Gr("retryDelaySeedMs",1e4,a),this.Wa=Gr("forwardChannelMaxRetries",2,a),this.wa=Gr("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new ph(a&&a.concurrentRequestLimit),this.Da=new sv,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=Dh.prototype,e.la=8,e.G=1,e.connect=function(a,f,p,g){Ie(0),this.W=a,this.H=f||{},p&&g!==void 0&&(this.H.OSID=p,this.H.OAID=g),this.F=this.X,this.I=jh(this,null,this.W),_o(this)};function pl(a){if(Oh(a),a.G==3){var f=a.U++,p=Sn(a.I);if(Mt(p,"SID",a.K),Mt(p,"RID",f),Mt(p,"TYPE","terminate"),Wr(a,p),f=new Qn(a,a.j,f),f.L=2,f.v=fo(Sn(p)),p=!1,l.navigator&&l.navigator.sendBeacon)try{p=l.navigator.sendBeacon(f.v.toString(),"")}catch{}!p&&l.Image&&(new Image().src=f.v,p=!0),p||(f.g=qh(f.j,null),f.g.ea(f.v)),f.F=Date.now(),co(f)}$h(a)}function yo(a){a.g&&(gl(a),a.g.cancel(),a.g=null)}function Oh(a){yo(a),a.u&&(l.clearTimeout(a.u),a.u=null),vo(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function _o(a){if(!mh(a.h)&&!a.s){a.s=!0;var f=a.Ga;Tt||Ze(),vt||(Tt(),vt=!0),Ue.add(f,a),a.B=0}}function lv(a,f){return gh(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=f.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Ur(m(a.Ga,a,f),Bh(a,a.B)),a.B++,!0)}e.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const x=new Qn(this,this.j,a);let O=this.o;if(this.S&&(O?(O=v(O),A(O,this.S)):O=this.S),this.m!==null||this.O||(x.H=O,O=null),this.P)t:{for(var f=0,p=0;p<this.i.length;p++){e:{var g=this.i[p];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break e}g=void 0}if(g===void 0)break;if(f+=g,4096<f){f=p;break t}if(f===4096||p===this.i.length-1){f=p+1;break t}}f=1e3}else f=1e3;f=Mh(this,x,f),p=Sn(this.I),Mt(p,"RID",a),Mt(p,"CVER",22),this.D&&Mt(p,"X-HTTP-Session-Id",this.D),Wr(this,p),O&&(this.O?f="headers="+encodeURIComponent(String(Rh(O)))+"&"+f:this.m&&dl(p,this.m,O)),fl(this.h,x),this.Ua&&Mt(p,"TYPE","init"),this.P?(Mt(p,"$req",f),Mt(p,"SID","null"),x.T=!0,ll(x,p,null)):ll(x,p,f),this.G=2}}else this.G==3&&(a?Nh(this,a):this.i.length==0||mh(this.h)||Nh(this))};function Nh(a,f){var p;f?p=f.l:p=a.U++;const g=Sn(a.I);Mt(g,"SID",a.K),Mt(g,"RID",p),Mt(g,"AID",a.T),Wr(a,g),a.m&&a.o&&dl(g,a.m,a.o),p=new Qn(a,a.j,p,a.B+1),a.m===null&&(p.H=a.o),f&&(a.i=f.D.concat(a.i)),f=Mh(a,p,1e3),p.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),fl(a.h,p),ll(p,g,f)}function Wr(a,f){a.H&&K(a.H,function(p,g){Mt(f,g,p)}),a.l&&vh({},function(p,g){Mt(f,g,p)})}function Mh(a,f,p){p=Math.min(a.i.length,p);var g=a.l?m(a.l.Na,a.l,a):null;t:{var x=a.i;let O=-1;for(;;){const J=["count="+p];O==-1?0<p?(O=x[0].g,J.push("ofs="+O)):O=0:J.push("ofs="+O);let Dt=!0;for(let ce=0;ce<p;ce++){let Rt=x[ce].g;const me=x[ce].map;if(Rt-=O,0>Rt)O=Math.max(0,x[ce].g-100),Dt=!1;else try{rv(me,J,"req"+Rt+"_")}catch{g&&g(me)}}if(Dt){g=J.join("&");break t}}}return a=a.i.splice(0,p),f.D=a,g}function Lh(a){if(!a.g&&!a.u){a.Y=1;var f=a.Fa;Tt||Ze(),vt||(Tt(),vt=!0),Ue.add(f,a),a.v=0}}function ml(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Ur(m(a.Fa,a),Bh(a,a.v)),a.v++,!0)}e.Fa=function(){if(this.u=null,Fh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Ur(m(this.ab,this),a)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ie(10),yo(this),Fh(this))};function gl(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function Fh(a){a.g=new Qn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var f=Sn(a.qa);Mt(f,"RID","rpc"),Mt(f,"SID",a.K),Mt(f,"AID",a.T),Mt(f,"CI",a.F?"0":"1"),!a.F&&a.ja&&Mt(f,"TO",a.ja),Mt(f,"TYPE","xmlhttp"),Wr(a,f),a.m&&a.o&&dl(f,a.m,a.o),a.L&&(a.g.I=a.L);var p=a.g;a=a.ia,p.L=1,p.v=fo(Sn(f)),p.m=null,p.P=!0,hh(p,a)}e.Za=function(){this.C!=null&&(this.C=null,yo(this),ml(this),Ie(19))};function vo(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function Uh(a,f){var p=null;if(a.g==f){vo(a),gl(a),a.g=null;var g=2}else if(hl(a.h,f))p=f.D,yh(a.h,f),g=1;else return;if(a.G!=0){if(f.o)if(g==1){p=f.m?f.m.length:0,f=Date.now()-f.F;var x=a.B;g=oo(),pt(g,new ah(g,p)),_o(a)}else Lh(a);else if(x=f.s,x==3||x==0&&0<f.X||!(g==1&&lv(a,f)||g==2&&ml(a)))switch(p&&0<p.length&&(f=a.h,f.i=f.i.concat(p)),x){case 1:Rs(a,5);break;case 4:Rs(a,10);break;case 3:Rs(a,6);break;default:Rs(a,2)}}}function Bh(a,f){let p=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(p*=2),p*f}function Rs(a,f){if(a.j.info("Error code "+f),f==2){var p=m(a.fb,a),g=a.Xa;const x=!g;g=new Ss(g||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||uo(g,"https"),fo(g),x?ev(g.toString(),p):nv(g.toString(),p)}else Ie(2);a.G=0,a.l&&a.l.sa(f),$h(a),Oh(a)}e.fb=function(a){a?(this.j.info("Successfully pinged google.com"),Ie(2)):(this.j.info("Failed to ping google.com"),Ie(1))};function $h(a){if(a.G=0,a.ka=[],a.l){const f=_h(a.h);(f.length!=0||a.i.length!=0)&&(P(a.ka,f),P(a.ka,a.i),a.h.i.length=0,C(a.i),a.i.length=0),a.l.ra()}}function jh(a,f,p){var g=p instanceof Ss?Sn(p):new Ss(p);if(g.g!="")f&&(g.g=f+"."+g.g),ho(g,g.s);else{var x=l.location;g=x.protocol,f=f?f+"."+x.hostname:x.hostname,x=+x.port;var O=new Ss(null);g&&uo(O,g),f&&(O.g=f),x&&ho(O,x),p&&(O.l=p),g=O}return p=a.D,f=a.ya,p&&f&&Mt(g,p,f),Mt(g,"VER",a.la),Wr(a,g),g}function qh(a,f,p){if(f&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=a.Ca&&!a.pa?new zt(new po({eb:p})):new zt(a.pa),f.Ha(a.J),f}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Hh(){}e=Hh.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function wo(){}wo.prototype.g=function(a,f){return new Be(a,f)};function Be(a,f){at.call(this),this.g=new Dh(f),this.l=a,this.h=f&&f.messageUrlParams||null,a=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(a?a["X-WebChannel-Content-Type"]=f.messageContentType:a={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(a?a["X-WebChannel-Client-Profile"]=f.va:a={"X-WebChannel-Client-Profile":f.va}),this.g.S=a,(a=f&&f.Sb)&&!N(a)&&(this.g.m=a),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!N(f)&&(this.g.D=f,a=this.h,a!==null&&f in a&&(a=this.h,f in a&&delete a[f])),this.j=new rr(this)}T(Be,at),Be.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Be.prototype.close=function(){pl(this.g)},Be.prototype.o=function(a){var f=this.g;if(typeof a=="string"){var p={};p.__data__=a,a=p}else this.u&&(p={},p.__data__=le(a),a=p);f.i.push(new z_(f.Ya++,a)),f.G==3&&_o(f)},Be.prototype.N=function(){this.g.l=null,delete this.j,pl(this.g),delete this.g,Be.aa.N.call(this)};function zh(a){rl.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var f=a.__sm__;if(f){t:{for(const p in f){a=p;break t}a=void 0}(this.i=a)&&(a=this.i,f=f!==null&&a in f?f[a]:void 0),this.data=f}else this.data=a}T(zh,rl);function Kh(){il.call(this),this.status=1}T(Kh,il);function rr(a){this.g=a}T(rr,Hh),rr.prototype.ua=function(){pt(this.g,"a")},rr.prototype.ta=function(a){pt(this.g,new zh(a))},rr.prototype.sa=function(a){pt(this.g,new Kh)},rr.prototype.ra=function(){pt(this.g,"b")},wo.prototype.createWebChannel=wo.prototype.g,Be.prototype.send=Be.prototype.o,Be.prototype.open=Be.prototype.m,Be.prototype.close=Be.prototype.close,Gg=function(){return new wo},Kg=function(){return oo()},zg=bs,bc={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ao.NO_ERROR=0,ao.TIMEOUT=8,ao.HTTP_ERROR=6,Bo=ao,lh.COMPLETE="complete",Hg=lh,sh.EventType=Lr,Lr.OPEN="a",Lr.CLOSE="b",Lr.ERROR="c",Lr.MESSAGE="d",at.prototype.listen=at.prototype.K,ei=sh,zt.prototype.listenOnce=zt.prototype.L,zt.prototype.getLastError=zt.prototype.Ka,zt.prototype.getLastErrorCode=zt.prototype.Ba,zt.prototype.getStatus=zt.prototype.Z,zt.prototype.getResponseJson=zt.prototype.Oa,zt.prototype.getResponseText=zt.prototype.oa,zt.prototype.send=zt.prototype.ea,zt.prototype.setWithCredentials=zt.prototype.Ha,qg=zt}).apply(typeof Ro<"u"?Ro:typeof self<"u"?self:typeof window<"u"?window:{});const bd="@firebase/firestore",Id="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}ve.UNAUTHENTICATED=new ve(null),ve.GOOGLE_CREDENTIALS=new ve("google-credentials-uid"),ve.FIRST_PARTY=new ve("first-party-uid"),ve.MOCK_USER=new ve("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kr="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws=new gu("@firebase/firestore");function ur(){return Ws.logLevel}function et(e,...t){if(Ws.logLevel<=It.DEBUG){const n=t.map(_u);Ws.debug(`Firestore (${kr}): ${e}`,...n)}}function qn(e,...t){if(Ws.logLevel<=It.ERROR){const n=t.map(_u);Ws.error(`Firestore (${kr}): ${e}`,...n)}}function Ar(e,...t){if(Ws.logLevel<=It.WARN){const n=t.map(_u);Ws.warn(`Firestore (${kr}): ${e}`,...n)}}function _u(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(e,t,n){let s="Unexpected state";typeof t=="string"?s=t:n=t,Wg(e,s,n)}function Wg(e,t,n){let s=`FIRESTORE (${kr}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw qn(s),new Error(s)}function xt(e,t,n,s){let r="Unexpected state";typeof n=="string"?r=n:s=n,e||Wg(t,r,s)}function dt(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class st extends Es{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class fb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(ve.UNAUTHENTICATED))}shutdown(){}}class db{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class pb{constructor(t){this.t=t,this.currentUser=ve.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){xt(this.o===void 0,42304);let s=this.i;const r=c=>this.i!==s?(s=this.i,n(c)):Promise.resolve();let i=new cs;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new cs,t.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const c=i;t.enqueueRetryable(async()=>{await c.promise,await r(this.currentUser)})},l=c=>{et("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(et("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new cs)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==t?(et("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(xt(typeof s.accessToken=="string",31837,{l:s}),new Qg(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return xt(t===null||typeof t=="string",2055,{h:t}),new ve(t)}}class mb{constructor(t,n,s){this.P=t,this.T=n,this.I=s,this.type="FirstParty",this.user=ve.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class gb{constructor(t,n,s){this.P=t,this.T=n,this.I=s}getToken(){return Promise.resolve(new mb(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(ve.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Sd{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yb{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,YA(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){xt(this.o===void 0,3512);const s=i=>{i.error!=null&&et("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,et("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{t.enqueueRetryable(()=>s(i))};const r=i=>{et("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):et("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Sd(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(xt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Sd(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _b(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let s=0;s<e;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=_b(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=t.charAt(r[i]%62))}return s}}function wt(e,t){return e<t?-1:e>t?1:0}function Ic(e,t){const n=Math.min(e.length,t.length);for(let s=0;s<n;s++){const r=e.charAt(s),i=t.charAt(s);if(r!==i)return $l(r)===$l(i)?wt(r,i):$l(r)?1:-1}return wt(e.length,t.length)}const vb=55296,wb=57343;function $l(e){const t=e.charCodeAt(0);return t>=vb&&t<=wb}function br(e,t,n){return e.length===t.length&&e.every((s,r)=>n(s,t[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rd="__name__";class gn{constructor(t,n,s){n===void 0?n=0:n>t.length&&lt(637,{offset:n,range:t.length}),s===void 0?s=t.length-n:s>t.length-n&&lt(1746,{length:s,range:t.length-n}),this.segments=t,this.offset=n,this.len=s}get length(){return this.len}isEqual(t){return gn.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof gn?t.forEach(s=>{n.push(s)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,s=this.limit();n<s;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const s=Math.min(t.length,n.length);for(let r=0;r<s;r++){const i=gn.compareSegments(t.get(r),n.get(r));if(i!==0)return i}return wt(t.length,n.length)}static compareSegments(t,n){const s=gn.isNumericId(t),r=gn.isNumericId(n);return s&&!r?-1:!s&&r?1:s&&r?gn.extractNumericId(t).compare(gn.extractNumericId(n)):Ic(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return ls.fromString(t.substring(4,t.length-2))}}class qt extends gn{construct(t,n,s){return new qt(t,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const s of t){if(s.indexOf("//")>=0)throw new st(q.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(r=>r.length>0))}return new qt(n)}static emptyPath(){return new qt([])}}const Eb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fe extends gn{construct(t,n,s){return new fe(t,n,s)}static isValidIdentifier(t){return Eb.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fe.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Rd}static keyField(){return new fe([Rd])}static fromServerFormat(t){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new st(q.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;r<t.length;){const l=t[r];if(l==="\\"){if(r+1===t.length)throw new st(q.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const c=t[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new st(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=c,r+=2}else l==="`"?(o=!o,r++):l!=="."||o?(s+=l,r++):(i(),r++)}if(i(),o)throw new st(q.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new fe(n)}static emptyPath(){return new fe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(t){this.path=t}static fromPath(t){return new ot(qt.fromString(t))}static fromName(t){return new ot(qt.fromString(t).popFirst(5))}static empty(){return new ot(qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&qt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return qt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ot(new qt(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tb(e,t,n){if(!n)throw new st(q.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Ab(e,t,n,s){if(t===!0&&s===!0)throw new st(q.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Cd(e){if(!ot.isDocumentKey(e))throw new st(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Jg(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function wu(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(s){return s.constructor?s.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":lt(12329,{type:typeof e})}function Qs(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new st(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=wu(e);throw new st(q.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(e,t){const n={typeString:e};return t&&(n.value=t),n}function Zi(e,t){if(!Jg(e))throw new st(q.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in t)if(t[s]){const r=t[s].typeString,i="value"in t[s]?{value:t[s].value}:void 0;if(!(s in e)){n=`JSON missing required field: '${s}'`;break}const o=e[s];if(r&&typeof o!==r){n=`JSON field '${s}' must be a ${r}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${s}' field to equal '${i.value}'`;break}}if(n)throw new st(q.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pd=-62135596800,Vd=1e6;class Ft{static now(){return Ft.fromMillis(Date.now())}static fromDate(t){return Ft.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),s=Math.floor((t-1e3*n)*Vd);return new Ft(n,s)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new st(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new st(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<Pd)throw new st(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new st(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Vd}_compareTo(t){return this.seconds===t.seconds?wt(this.nanoseconds,t.nanoseconds):wt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ft._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Zi(t,Ft._jsonSchema))return new Ft(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-Pd;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ft._jsonSchemaVersion="firestore/timestamp/1.0",Ft._jsonSchema={type:Xt("string",Ft._jsonSchemaVersion),seconds:Xt("number"),nanoseconds:Xt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{static fromTimestamp(t){return new ht(t)}static min(){return new ht(new Ft(0,0))}static max(){return new ht(new Ft(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ni=-1;function bb(e,t){const n=e.toTimestamp().seconds,s=e.toTimestamp().nanoseconds+1,r=ht.fromTimestamp(s===1e9?new Ft(n+1,0):new Ft(n,s));return new ds(r,ot.empty(),t)}function Ib(e){return new ds(e.readTime,e.key,Ni)}class ds{constructor(t,n,s){this.readTime=t,this.documentKey=n,this.largestBatchId=s}static min(){return new ds(ht.min(),ot.empty(),Ni)}static max(){return new ds(ht.max(),ot.empty(),Ni)}}function Sb(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=ot.comparator(e.documentKey,t.documentKey),n!==0?n:wt(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Cb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dr(e){if(e.code!==q.FAILED_PRECONDITION||e.message!==Rb)throw e;et("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&lt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new $((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(t,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof $?n:$.resolve(n)}catch(n){return $.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):$.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):$.reject(n)}static resolve(t){return new $((n,s)=>{n(t)})}static reject(t){return new $((n,s)=>{s(t)})}static waitFor(t){return new $((n,s)=>{let r=0,i=0,o=!1;t.forEach(l=>{++r,l.next(()=>{++i,o&&i===r&&n()},c=>s(c))}),o=!0,i===r&&n()})}static or(t){let n=$.resolve(!1);for(const s of t)n=n.next(r=>r?$.resolve(r):s());return n}static forEach(t,n){const s=[];return t.forEach((r,i)=>{s.push(n.call(this,r,i))}),this.waitFor(s)}static mapArray(t,n){return new $((s,r)=>{const i=t.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const u=c;n(t[u]).next(h=>{o[u]=h,++l,l===i&&s(o)},h=>r(h))}})}static doWhile(t,n){return new $((s,r)=>{const i=()=>{t()===!0?n().next(()=>{i()},r):s()};i()})}}function Pb(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Or(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Ba.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eu=-1;function $a(e){return e==null}function ia(e){return e===0&&1/e==-1/0}function Vb(e){return typeof e=="number"&&Number.isInteger(e)&&!ia(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xg="";function xb(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=xd(t)),t=kb(e.get(n),t);return xd(t)}function kb(e,t){let n=t;const s=e.length;for(let r=0;r<s;r++){const i=e.charAt(r);switch(i){case"\0":n+="";break;case Xg:n+="";break;default:n+=i}}return n}function xd(e){return e+Xg+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kd(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ts(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Yg(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(t,n){this.comparator=t,this.root=n||ue.EMPTY}insert(t,n){return new Ht(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,ue.BLACK,null,null))}remove(t){return new Ht(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ue.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(t,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(t){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(t,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,s)=>(t(n,s),!1))}toString(){const t=[];return this.inorderTraversal((n,s)=>(t.push(`${n}:${s}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Co(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Co(this.root,t,this.comparator,!1)}getReverseIterator(){return new Co(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Co(this.root,t,this.comparator,!0)}}class Co{constructor(t,n,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=n?s(t.key,n):1,n&&r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(i===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ue{constructor(t,n,s,r,i){this.key=t,this.value=n,this.color=s??ue.RED,this.left=r??ue.EMPTY,this.right=i??ue.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,s,r,i){return new ue(t??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,s){let r=this;const i=s(t,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(t,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(t,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ue.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let s,r=this;if(n(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(t,r.key)===0){if(r.right.isEmpty())return ue.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ue.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ue.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw lt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw lt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw lt(27949);return t+(this.isRed()?0:1)}}ue.EMPTY=null,ue.RED=!0,ue.BLACK=!1;ue.EMPTY=new class{constructor(){this.size=0}get key(){throw lt(57766)}get value(){throw lt(16141)}get color(){throw lt(16727)}get left(){throw lt(29726)}get right(){throw lt(36894)}copy(t,n,s,r,i){return this}insert(t,n,s){return new ue(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(t){this.comparator=t,this.data=new Ht(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,s)=>(t(n),!1))}forEachInRange(t,n){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,t[1])>=0)return;n(r.key)}}forEachWhile(t,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Dd(this.data.getIterator())}getIteratorFrom(t){return new Dd(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(s=>{n=n.add(s)}),n}isEqual(t){if(!(t instanceof ne)||this.size!==t.size)return!1;const n=this.data.getIterator(),s=t.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new ne(this.comparator);return n.data=t,n}}class Dd{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(t){this.fields=t,t.sort(fe.comparator)}static empty(){return new He([])}unionWith(t){let n=new ne(fe.comparator);for(const s of this.fields)n=n.add(s);for(const s of t)n=n.add(s);return new He(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return br(this.fields,t.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Zg("Invalid base64 string: "+i):i}}(t);return new de(n)}static fromUint8Array(t){const n=function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i}(t);return new de(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return wt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}de.EMPTY_BYTE_STRING=new de("");const Db=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ps(e){if(xt(!!e,39018),typeof e=="string"){let t=0;const n=Db.exec(e);if(xt(!!n,46558,{timestamp:e}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}const s=new Date(e);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:Wt(e.seconds),nanos:Wt(e.nanos)}}function Wt(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function ms(e){return typeof e=="string"?de.fromBase64String(e):de.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ty="server_timestamp",ey="__type__",ny="__previous_value__",sy="__local_write_time__";function Tu(e){var n,s;return((s=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[ey])==null?void 0:s.stringValue)===ty}function ja(e){const t=e.mapValue.fields[ny];return Tu(t)?ja(t):t}function Mi(e){const t=ps(e.mapValue.fields[sy].timestampValue);return new Ft(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{constructor(t,n,s,r,i,o,l,c,u,h){this.databaseId=t,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=h}}const oa="(default)";class Li{constructor(t,n){this.projectId=t,this.database=n||oa}static empty(){return new Li("","")}get isDefaultDatabase(){return this.database===oa}isEqual(t){return t instanceof Li&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ry="__type__",Nb="__max__",Po={mapValue:{}},iy="__vector__",aa="value";function gs(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Tu(e)?4:Lb(e)?9007199254740991:Mb(e)?10:11:lt(28295,{value:e})}function bn(e,t){if(e===t)return!0;const n=gs(e);if(n!==gs(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Mi(e).isEqual(Mi(t));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=ps(r.timestampValue),l=ps(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(r,i){return ms(r.bytesValue).isEqual(ms(i.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(r,i){return Wt(r.geoPointValue.latitude)===Wt(i.geoPointValue.latitude)&&Wt(r.geoPointValue.longitude)===Wt(i.geoPointValue.longitude)}(e,t);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Wt(r.integerValue)===Wt(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=Wt(r.doubleValue),l=Wt(i.doubleValue);return o===l?ia(o)===ia(l):isNaN(o)&&isNaN(l)}return!1}(e,t);case 9:return br(e.arrayValue.values||[],t.arrayValue.values||[],bn);case 10:case 11:return function(r,i){const o=r.mapValue.fields||{},l=i.mapValue.fields||{};if(kd(o)!==kd(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!bn(o[c],l[c])))return!1;return!0}(e,t);default:return lt(52216,{left:e})}}function Fi(e,t){return(e.values||[]).find(n=>bn(n,t))!==void 0}function Ir(e,t){if(e===t)return 0;const n=gs(e),s=gs(t);if(n!==s)return wt(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return wt(e.booleanValue,t.booleanValue);case 2:return function(i,o){const l=Wt(i.integerValue||i.doubleValue),c=Wt(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(e,t);case 3:return Od(e.timestampValue,t.timestampValue);case 4:return Od(Mi(e),Mi(t));case 5:return Ic(e.stringValue,t.stringValue);case 6:return function(i,o){const l=ms(i),c=ms(o);return l.compareTo(c)}(e.bytesValue,t.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const h=wt(l[u],c[u]);if(h!==0)return h}return wt(l.length,c.length)}(e.referenceValue,t.referenceValue);case 8:return function(i,o){const l=wt(Wt(i.latitude),Wt(o.latitude));return l!==0?l:wt(Wt(i.longitude),Wt(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Nd(e.arrayValue,t.arrayValue);case 10:return function(i,o){var m,y,T,C;const l=i.fields||{},c=o.fields||{},u=(m=l[aa])==null?void 0:m.arrayValue,h=(y=c[aa])==null?void 0:y.arrayValue,d=wt(((T=u==null?void 0:u.values)==null?void 0:T.length)||0,((C=h==null?void 0:h.values)==null?void 0:C.length)||0);return d!==0?d:Nd(u,h)}(e.mapValue,t.mapValue);case 11:return function(i,o){if(i===Po.mapValue&&o===Po.mapValue)return 0;if(i===Po.mapValue)return 1;if(o===Po.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),u=o.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let d=0;d<c.length&&d<h.length;++d){const m=Ic(c[d],h[d]);if(m!==0)return m;const y=Ir(l[c[d]],u[h[d]]);if(y!==0)return y}return wt(c.length,h.length)}(e.mapValue,t.mapValue);default:throw lt(23264,{he:n})}}function Od(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return wt(e,t);const n=ps(e),s=ps(t),r=wt(n.seconds,s.seconds);return r!==0?r:wt(n.nanos,s.nanos)}function Nd(e,t){const n=e.values||[],s=t.values||[];for(let r=0;r<n.length&&r<s.length;++r){const i=Ir(n[r],s[r]);if(i)return i}return wt(n.length,s.length)}function Sr(e){return Sc(e)}function Sc(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const s=ps(n);return`time(${s.seconds},${s.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return ms(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return ot.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let s="[",r=!0;for(const i of n.values||[])r?r=!1:s+=",",s+=Sc(i);return s+"]"}(e.arrayValue):"mapValue"in e?function(n){const s=Object.keys(n.fields||{}).sort();let r="{",i=!0;for(const o of s)i?i=!1:r+=",",r+=`${o}:${Sc(n.fields[o])}`;return r+"}"}(e.mapValue):lt(61005,{value:e})}function $o(e){switch(gs(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=ja(e);return t?16+$o(t):16;case 5:return 2*e.stringValue.length;case 6:return ms(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((r,i)=>r+$o(i),0)}(e.arrayValue);case 10:case 11:return function(s){let r=0;return Ts(s.fields,(i,o)=>{r+=i.length+$o(o)}),r}(e.mapValue);default:throw lt(13486,{value:e})}}function Rc(e){return!!e&&"integerValue"in e}function Au(e){return!!e&&"arrayValue"in e}function Md(e){return!!e&&"nullValue"in e}function Ld(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function jo(e){return!!e&&"mapValue"in e}function Mb(e){var n,s;return((s=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[ry])==null?void 0:s.stringValue)===iy}function yi(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return Ts(e.mapValue.fields,(n,s)=>t.mapValue.fields[n]=yi(s)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=yi(e.arrayValue.values[n]);return t}return{...e}}function Lb(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Nb}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(t){this.value=t}static empty(){return new Ne({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let s=0;s<t.length-1;++s)if(n=(n.mapValue.fields||{})[t.get(s)],!jo(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=yi(n)}setAll(t){let n=fe.emptyPath(),s={},r=[];t.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,s,r),s={},r=[],n=l.popLast()}o?s[l.lastSegment()]=yi(o):r.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(t){const n=this.field(t.popLast());jo(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return bn(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<t.length;++s){let r=n.mapValue.fields[t.get(s)];jo(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[t.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(t,n,s){Ts(n,(r,i)=>t[r]=i);for(const r of s)delete t[r]}clone(){return new Ne(yi(this.value))}}function oy(e){const t=[];return Ts(e.fields,(n,s)=>{const r=new fe([n]);if(jo(s)){const i=oy(s.mapValue).fields;if(i.length===0)t.push(r);else for(const o of i)t.push(r.child(o))}else t.push(r)}),new He(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(t,n,s,r,i,o,l){this.key=t,this.documentType=n,this.version=s,this.readTime=r,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(t){return new Ee(t,0,ht.min(),ht.min(),ht.min(),Ne.empty(),0)}static newFoundDocument(t,n,s,r){return new Ee(t,1,n,ht.min(),s,r,0)}static newNoDocument(t,n){return new Ee(t,2,n,ht.min(),ht.min(),Ne.empty(),0)}static newUnknownDocument(t,n){return new Ee(t,3,n,ht.min(),ht.min(),Ne.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(ht.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Ne.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Ne.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ht.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Ee&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Ee(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(t,n){this.position=t,this.inclusive=n}}function Fd(e,t,n){let s=0;for(let r=0;r<e.position.length;r++){const i=t[r],o=e.position[r];if(i.field.isKeyField()?s=ot.comparator(ot.fromName(o.referenceValue),n.key):s=Ir(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function Ud(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!bn(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(t,n="asc"){this.field=t,this.dir=n}}function Fb(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{}class te extends ay{constructor(t,n,s){super(),this.field=t,this.op=n,this.value=s}static create(t,n,s){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,s):new Bb(t,n,s):n==="array-contains"?new qb(t,s):n==="in"?new Hb(t,s):n==="not-in"?new zb(t,s):n==="array-contains-any"?new Kb(t,s):new te(t,n,s)}static createKeyFieldInFilter(t,n,s){return n==="in"?new $b(t,s):new jb(t,s)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ir(n,this.value)):n!==null&&gs(this.value)===gs(n)&&this.matchesComparison(Ir(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return lt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class In extends ay{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new In(t,n)}matches(t){return ly(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ly(e){return e.op==="and"}function cy(e){return Ub(e)&&ly(e)}function Ub(e){for(const t of e.filters)if(t instanceof In)return!1;return!0}function Cc(e){if(e instanceof te)return e.field.canonicalString()+e.op.toString()+Sr(e.value);if(cy(e))return e.filters.map(t=>Cc(t)).join(",");{const t=e.filters.map(n=>Cc(n)).join(",");return`${e.op}(${t})`}}function uy(e,t){return e instanceof te?function(s,r){return r instanceof te&&s.op===r.op&&s.field.isEqual(r.field)&&bn(s.value,r.value)}(e,t):e instanceof In?function(s,r){return r instanceof In&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce((i,o,l)=>i&&uy(o,r.filters[l]),!0):!1}(e,t):void lt(19439)}function hy(e){return e instanceof te?function(n){return`${n.field.canonicalString()} ${n.op} ${Sr(n.value)}`}(e):e instanceof In?function(n){return n.op.toString()+" {"+n.getFilters().map(hy).join(" ,")+"}"}(e):"Filter"}class Bb extends te{constructor(t,n,s){super(t,n,s),this.key=ot.fromName(s.referenceValue)}matches(t){const n=ot.comparator(t.key,this.key);return this.matchesComparison(n)}}class $b extends te{constructor(t,n){super(t,"in",n),this.keys=fy("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class jb extends te{constructor(t,n){super(t,"not-in",n),this.keys=fy("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function fy(e,t){var n;return(((n=t.arrayValue)==null?void 0:n.values)||[]).map(s=>ot.fromName(s.referenceValue))}class qb extends te{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Au(n)&&Fi(n.arrayValue,this.value)}}class Hb extends te{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Fi(this.value.arrayValue,n)}}class zb extends te{constructor(t,n){super(t,"not-in",n)}matches(t){if(Fi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Fi(this.value.arrayValue,n)}}class Kb extends te{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Au(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>Fi(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(t,n=null,s=[],r=[],i=null,o=null,l=null){this.path=t,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=l,this.Te=null}}function Bd(e,t=null,n=[],s=[],r=null,i=null,o=null){return new Gb(e,t,n,s,r,i,o)}function bu(e){const t=dt(e);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(s=>Cc(s)).join(","),n+="|ob:",n+=t.orderBy.map(s=>function(i){return i.field.canonicalString()+i.dir}(s)).join(","),$a(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(s=>Sr(s)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(s=>Sr(s)).join(",")),t.Te=n}return t.Te}function Iu(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Fb(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!uy(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Ud(e.startAt,t.startAt)&&Ud(e.endAt,t.endAt)}function Pc(e){return ot.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(t,n=null,s=[],r=[],i=null,o="F",l=null,c=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Wb(e,t,n,s,r,i,o,l){return new qa(e,t,n,s,r,i,o,l)}function Su(e){return new qa(e)}function $d(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function Qb(e){return e.collectionGroup!==null}function _i(e){const t=dt(e);if(t.Ie===null){t.Ie=[];const n=new Set;for(const i of t.explicitOrderBy)t.Ie.push(i),n.add(i.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new ne(fe.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(t).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||t.Ie.push(new ca(i,s))}),n.has(fe.keyField().canonicalString())||t.Ie.push(new ca(fe.keyField(),s))}return t.Ie}function vn(e){const t=dt(e);return t.Ee||(t.Ee=Jb(t,_i(e))),t.Ee}function Jb(e,t){if(e.limitType==="F")return Bd(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(r=>{const i=r.dir==="desc"?"asc":"desc";return new ca(r.field,i)});const n=e.endAt?new la(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new la(e.startAt.position,e.startAt.inclusive):null;return Bd(e.path,e.collectionGroup,t,e.filters,e.limit,n,s)}}function Vc(e,t,n){return new qa(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Ha(e,t){return Iu(vn(e),vn(t))&&e.limitType===t.limitType}function dy(e){return`${bu(vn(e))}|lt:${e.limitType}`}function hr(e){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(r=>hy(r)).join(", ")}]`),$a(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(r=>Sr(r)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(r=>Sr(r)).join(",")),`Target(${s})`}(vn(e))}; limitType=${e.limitType})`}function za(e,t){return t.isFoundDocument()&&function(s,r){const i=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):ot.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)}(e,t)&&function(s,r){for(const i of _i(s))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(e,t)&&function(s,r){for(const i of s.filters)if(!i.matches(r))return!1;return!0}(e,t)&&function(s,r){return!(s.startAt&&!function(o,l,c){const u=Fd(o,l,c);return o.inclusive?u<=0:u<0}(s.startAt,_i(s),r)||s.endAt&&!function(o,l,c){const u=Fd(o,l,c);return o.inclusive?u>=0:u>0}(s.endAt,_i(s),r))}(e,t)}function Xb(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function py(e){return(t,n)=>{let s=!1;for(const r of _i(e)){const i=Yb(r,t,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function Yb(e,t,n){const s=e.field.isKeyField()?ot.comparator(t.key,n.key):function(i,o,l){const c=o.data.field(i),u=l.data.field(i);return c!==null&&u!==null?Ir(c,u):lt(42886)}(e.field,t,n);switch(e.dir){case"asc":return s;case"desc":return-1*s;default:return lt(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,t))return i}}has(t){return this.get(t)!==void 0}set(t,n){const s=this.mapKeyFn(t),r=this.inner[s];if(r===void 0)return this.inner[s]=[[t,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,n]);r.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],t))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Ts(this.inner,(n,s)=>{for(const[r,i]of s)t(r,i)})}isEmpty(){return Yg(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb=new Ht(ot.comparator);function Hn(){return Zb}const my=new Ht(ot.comparator);function ni(...e){let t=my;for(const n of e)t=t.insert(n.key,n);return t}function gy(e){let t=my;return e.forEach((n,s)=>t=t.insert(n,s.overlayedDocument)),t}function Bs(){return vi()}function yy(){return vi()}function vi(){return new Zs(e=>e.toString(),(e,t)=>e.isEqual(t))}const tI=new Ht(ot.comparator),eI=new ne(ot.comparator);function Et(...e){let t=eI;for(const n of e)t=t.add(n);return t}const nI=new ne(wt);function sI(){return nI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ru(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ia(t)?"-0":t}}function _y(e){return{integerValue:""+e}}function vy(e,t){return Vb(t)?_y(t):Ru(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(){this._=void 0}}function rI(e,t,n){return e instanceof Ui?function(r,i){const o={fields:{[ey]:{stringValue:ty},[sy]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&Tu(i)&&(i=ja(i)),i&&(o.fields[ny]=i),{mapValue:o}}(n,t):e instanceof Bi?Ey(e,t):e instanceof $i?Ty(e,t):function(r,i){const o=wy(r,i),l=jd(o)+jd(r.Ae);return Rc(o)&&Rc(r.Ae)?_y(l):Ru(r.serializer,l)}(e,t)}function iI(e,t,n){return e instanceof Bi?Ey(e,t):e instanceof $i?Ty(e,t):n}function wy(e,t){return e instanceof ji?function(s){return Rc(s)||function(i){return!!i&&"doubleValue"in i}(s)}(t)?t:{integerValue:0}:null}class Ui extends Ka{}class Bi extends Ka{constructor(t){super(),this.elements=t}}function Ey(e,t){const n=Ay(t);for(const s of e.elements)n.some(r=>bn(r,s))||n.push(s);return{arrayValue:{values:n}}}class $i extends Ka{constructor(t){super(),this.elements=t}}function Ty(e,t){let n=Ay(t);for(const s of e.elements)n=n.filter(r=>!bn(r,s));return{arrayValue:{values:n}}}class ji extends Ka{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function jd(e){return Wt(e.integerValue||e.doubleValue)}function Ay(e){return Au(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{constructor(t,n){this.field=t,this.transform=n}}function oI(e,t){return e.field.isEqual(t.field)&&function(s,r){return s instanceof Bi&&r instanceof Bi||s instanceof $i&&r instanceof $i?br(s.elements,r.elements,bn):s instanceof ji&&r instanceof ji?bn(s.Ae,r.Ae):s instanceof Ui&&r instanceof Ui}(e.transform,t.transform)}class aI{constructor(t,n){this.version=t,this.transformResults=n}}class wn{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new wn}static exists(t){return new wn(void 0,t)}static updateTime(t){return new wn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function qo(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Ga{}function Iy(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Ry(e.key,wn.none()):new to(e.key,e.data,wn.none());{const n=e.data,s=Ne.empty();let r=new ne(fe.comparator);for(let i of t.fields)if(!r.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new As(e.key,s,new He(r.toArray()),wn.none())}}function lI(e,t,n){e instanceof to?function(r,i,o){const l=r.value.clone(),c=Hd(r.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(e,t,n):e instanceof As?function(r,i,o){if(!qo(r.precondition,i))return void i.convertToUnknownDocument(o.version);const l=Hd(r.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(Sy(r)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(e,t,n):function(r,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function wi(e,t,n,s){return e instanceof to?function(i,o,l,c){if(!qo(i.precondition,o))return l;const u=i.value.clone(),h=zd(i.fieldTransforms,c,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(e,t,n,s):e instanceof As?function(i,o,l,c){if(!qo(i.precondition,o))return l;const u=zd(i.fieldTransforms,c,o),h=o.data;return h.setAll(Sy(i)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(d=>d.field))}(e,t,n,s):function(i,o,l){return qo(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(e,t,n)}function cI(e,t){let n=null;for(const s of e.fieldTransforms){const r=t.data.field(s.field),i=wy(s.transform,r||null);i!=null&&(n===null&&(n=Ne.empty()),n.set(s.field,i))}return n||null}function qd(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&br(s,r,(i,o)=>oI(i,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class to extends Ga{constructor(t,n,s,r=[]){super(),this.key=t,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class As extends Ga{constructor(t,n,s,r,i=[]){super(),this.key=t,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Sy(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=e.data.field(n);t.set(n,s)}}),t}function Hd(e,t,n){const s=new Map;xt(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let r=0;r<n.length;r++){const i=e[r],o=i.transform,l=t.data.field(i.field);s.set(i.field,iI(o,l,n[r]))}return s}function zd(e,t,n){const s=new Map;for(const r of e){const i=r.transform,o=n.data.field(r.field);s.set(r.field,rI(i,o,t))}return s}class Ry extends Ga{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class uI extends Ga{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(t,n,s,r){this.batchId=t,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(t,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(t.key)&&lI(i,t,s[r])}}applyToLocalView(t,n){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(n=wi(s,t,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(n=wi(s,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const s=yy();return this.mutations.forEach(r=>{const i=t.get(r.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(r.key)?null:l;const c=Iy(o,l);c!==null&&s.set(r.key,c),o.isValidDocument()||o.convertToNoDocument(ht.min())}),s}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Et())}isEqual(t){return this.batchId===t.batchId&&br(this.mutations,t.mutations,(n,s)=>qd(n,s))&&br(this.baseMutations,t.baseMutations,(n,s)=>qd(n,s))}}class Cu{constructor(t,n,s,r){this.batch=t,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(t,n,s){xt(t.mutations.length===s.length,58842,{me:t.mutations.length,fe:s.length});let r=function(){return tI}();const i=t.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new Cu(t,n,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jt,bt;function pI(e){switch(e){case q.OK:return lt(64938);case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0;default:return lt(15467,{code:e})}}function Cy(e){if(e===void 0)return qn("GRPC error has no .code"),q.UNKNOWN;switch(e){case Jt.OK:return q.OK;case Jt.CANCELLED:return q.CANCELLED;case Jt.UNKNOWN:return q.UNKNOWN;case Jt.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case Jt.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case Jt.INTERNAL:return q.INTERNAL;case Jt.UNAVAILABLE:return q.UNAVAILABLE;case Jt.UNAUTHENTICATED:return q.UNAUTHENTICATED;case Jt.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case Jt.NOT_FOUND:return q.NOT_FOUND;case Jt.ALREADY_EXISTS:return q.ALREADY_EXISTS;case Jt.PERMISSION_DENIED:return q.PERMISSION_DENIED;case Jt.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case Jt.ABORTED:return q.ABORTED;case Jt.OUT_OF_RANGE:return q.OUT_OF_RANGE;case Jt.UNIMPLEMENTED:return q.UNIMPLEMENTED;case Jt.DATA_LOSS:return q.DATA_LOSS;default:return lt(39323,{code:e})}}(bt=Jt||(Jt={}))[bt.OK=0]="OK",bt[bt.CANCELLED=1]="CANCELLED",bt[bt.UNKNOWN=2]="UNKNOWN",bt[bt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",bt[bt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",bt[bt.NOT_FOUND=5]="NOT_FOUND",bt[bt.ALREADY_EXISTS=6]="ALREADY_EXISTS",bt[bt.PERMISSION_DENIED=7]="PERMISSION_DENIED",bt[bt.UNAUTHENTICATED=16]="UNAUTHENTICATED",bt[bt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",bt[bt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",bt[bt.ABORTED=10]="ABORTED",bt[bt.OUT_OF_RANGE=11]="OUT_OF_RANGE",bt[bt.UNIMPLEMENTED=12]="UNIMPLEMENTED",bt[bt.INTERNAL=13]="INTERNAL",bt[bt.UNAVAILABLE=14]="UNAVAILABLE",bt[bt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI=new ls([4294967295,4294967295],0);function Kd(e){const t=mI().encode(e),n=new jg;return n.update(t),new Uint8Array(n.digest())}function Gd(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),s=t.getUint32(4,!0),r=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new ls([n,s],0),new ls([r,i],0)]}class Pu{constructor(t,n,s){if(this.bitmap=t,this.padding=n,this.hashCount=s,n<0||n>=8)throw new si(`Invalid padding: ${n}`);if(s<0)throw new si(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new si(`Invalid hash count: ${s}`);if(t.length===0&&n!==0)throw new si(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=ls.fromNumber(this.ge)}ye(t,n,s){let r=t.add(n.multiply(ls.fromNumber(s)));return r.compare(gI)===1&&(r=new ls([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=Kd(t),[s,r]=Gd(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);if(!this.we(o))return!1}return!0}static create(t,n,s){const r=t%8==0?0:8-t%8,i=new Uint8Array(Math.ceil(t/8)),o=new Pu(i,r,n);return s.forEach(l=>o.insert(l)),o}insert(t){if(this.ge===0)return;const n=Kd(t),[s,r]=Gd(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);this.Se(o)}}Se(t){const n=Math.floor(t/8),s=t%8;this.bitmap[n]|=1<<s}}class si extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(t,n,s,r,i){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,n,s){const r=new Map;return r.set(t,eo.createSynthesizedTargetChangeForCurrentChange(t,n,s)),new Wa(ht.min(),r,new Ht(wt),Hn(),Et())}}class eo{constructor(t,n,s,r,i){this.resumeToken=t,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,n,s){return new eo(s,n,Et(),Et(),Et())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(t,n,s,r){this.be=t,this.removedTargetIds=n,this.key=s,this.De=r}}class Py{constructor(t,n){this.targetId=t,this.Ce=n}}class Vy{constructor(t,n,s=de.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=n,this.resumeToken=s,this.cause=r}}class Wd{constructor(){this.ve=0,this.Fe=Qd(),this.Me=de.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Et(),n=Et(),s=Et();return this.Fe.forEach((r,i)=>{switch(i){case 0:t=t.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:lt(38017,{changeType:i})}}),new eo(this.Me,this.xe,t,n,s)}qe(){this.Oe=!1,this.Fe=Qd()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,xt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class yI{constructor(t){this.Ge=t,this.ze=new Map,this.je=Hn(),this.Je=Vo(),this.He=Vo(),this.Ye=new Ht(wt)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,n=>{const s=this.nt(n);switch(t.state){case 0:this.rt(n)&&s.Le(t.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(t.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(t.resumeToken));break;default:lt(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach((s,r)=>{this.rt(r)&&n(r)})}st(t){const n=t.targetId,s=t.Ce.count,r=this.ot(n);if(r){const i=r.target;if(Pc(i))if(s===0){const o=new ot(i.path);this.et(n,o,Ee.newNoDocument(o,ht.min()))}else xt(s===1,20013,{expectedCount:s});else{const o=this._t(n);if(o!==s){const l=this.ut(t),c=l?this.ct(l,t,o):1;if(c!==0){this.it(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=n;let o,l;try{o=ms(s).toUint8Array()}catch(c){if(c instanceof Zg)return Ar("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Pu(o,r,i)}catch(c){return Ar(c instanceof si?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(t,n,s){return n.Ce.count===s-this.Pt(t,n.targetId)?0:2}Pt(t,n){const s=this.Ge.getRemoteKeysForTarget(n);let r=0;return s.forEach(i=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;t.mightContain(l)||(this.et(n,i,null),r++)}),r}Tt(t){const n=new Map;this.ze.forEach((i,o)=>{const l=this.ot(o);if(l){if(i.current&&Pc(l.target)){const c=new ot(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,Ee.newNoDocument(c,t))}i.Be&&(n.set(o,i.ke()),i.qe())}});let s=Et();this.He.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(s=s.add(i))}),this.je.forEach((i,o)=>o.setReadTime(t));const r=new Wa(t,n,this.Ye,this.je,s);return this.je=Hn(),this.Je=Vo(),this.He=Vo(),this.Ye=new Ht(wt),r}Xe(t,n){if(!this.rt(t))return;const s=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,s){if(!this.rt(t))return;const r=this.nt(t);this.Et(t,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),s&&(this.je=this.je.insert(n,s))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new Wd,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new ne(wt),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new ne(wt),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||et("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new Wd),this.Ge.getRemoteKeysForTarget(t).forEach(n=>{this.et(t,n,null)})}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function Vo(){return new Ht(ot.comparator)}function Qd(){return new Ht(ot.comparator)}const _I={asc:"ASCENDING",desc:"DESCENDING"},vI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wI={and:"AND",or:"OR"};class EI{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function xc(e,t){return e.useProto3Json||$a(t)?t:{value:t}}function ua(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function xy(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function TI(e,t){return ua(e,t.toTimestamp())}function En(e){return xt(!!e,49232),ht.fromTimestamp(function(n){const s=ps(n);return new Ft(s.seconds,s.nanos)}(e))}function Vu(e,t){return kc(e,t).canonicalString()}function kc(e,t){const n=function(r){return new qt(["projects",r.projectId,"databases",r.database])}(e).child("documents");return t===void 0?n:n.child(t)}function ky(e){const t=qt.fromString(e);return xt(Ly(t),10190,{key:t.toString()}),t}function Dc(e,t){return Vu(e.databaseId,t.path)}function jl(e,t){const n=ky(t);if(n.get(1)!==e.databaseId.projectId)throw new st(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new st(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ot(Oy(n))}function Dy(e,t){return Vu(e.databaseId,t)}function AI(e){const t=ky(e);return t.length===4?qt.emptyPath():Oy(t)}function Oc(e){return new qt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Oy(e){return xt(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function Jd(e,t,n){return{name:Dc(e,t),fields:n.value.mapValue.fields}}function bI(e,t){let n;if("targetChange"in t){t.targetChange;const s=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:lt(39313,{state:u})}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],i=function(u,h){return u.useProto3Json?(xt(h===void 0||typeof h=="string",58123),de.fromBase64String(h||"")):(xt(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),de.fromUint8Array(h||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,l=o&&function(u){const h=u.code===void 0?q.UNKNOWN:Cy(u.code);return new st(h,u.message||"")}(o);n=new Vy(s,r,i,l||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const r=jl(e,s.document.name),i=En(s.document.updateTime),o=s.document.createTime?En(s.document.createTime):ht.min(),l=new Ne({mapValue:{fields:s.document.fields}}),c=Ee.newFoundDocument(r,i,o,l),u=s.targetIds||[],h=s.removedTargetIds||[];n=new Ho(u,h,c.key,c)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const r=jl(e,s.document),i=s.readTime?En(s.readTime):ht.min(),o=Ee.newNoDocument(r,i),l=s.removedTargetIds||[];n=new Ho([],l,o.key,o)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const r=jl(e,s.document),i=s.removedTargetIds||[];n=new Ho([],i,r,null)}else{if(!("filter"in t))return lt(11601,{Rt:t});{t.filter;const s=t.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,o=new dI(r,i),l=s.targetId;n=new Py(l,o)}}return n}function II(e,t){let n;if(t instanceof to)n={update:Jd(e,t.key,t.value)};else if(t instanceof Ry)n={delete:Dc(e,t.key)};else if(t instanceof As)n={update:Jd(e,t.key,t.data),updateMask:OI(t.fieldMask)};else{if(!(t instanceof uI))return lt(16599,{Vt:t.type});n={verify:Dc(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(s=>function(i,o){const l=o.transform;if(l instanceof Ui)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Bi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof $i)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof ji)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw lt(20930,{transform:o.transform})}(0,s))),t.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:TI(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:lt(27497)}(e,t.precondition)),n}function SI(e,t){return e&&e.length>0?(xt(t!==void 0,14353),e.map(n=>function(r,i){let o=r.updateTime?En(r.updateTime):En(i);return o.isEqual(ht.min())&&(o=En(i)),new aI(o,r.transformResults||[])}(n,t))):[]}function RI(e,t){return{documents:[Dy(e,t.path)]}}function CI(e,t){const n={structuredQuery:{}},s=t.path;let r;t.collectionGroup!==null?(r=s,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=Dy(e,r);const i=function(u){if(u.length!==0)return My(In.create(u,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(h=>function(m){return{field:fr(m.field),direction:xI(m.dir)}}(h))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const l=xc(e,t.limit);return l!==null&&(n.structuredQuery.limit=l),t.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(t.endAt)),{ft:n,parent:r}}function PI(e){let t=AI(e.parent);const n=e.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){xt(s===1,65062);const h=n.from[0];h.allDescendants?r=h.collectionId:t=t.child(h.collectionId)}let i=[];n.where&&(i=function(d){const m=Ny(d);return m instanceof In&&cy(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(m=>function(T){return new ca(dr(T.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(d){let m;return m=typeof d=="object"?d.value:d,$a(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(d){const m=!!d.before,y=d.values||[];return new la(y,m)}(n.startAt));let u=null;return n.endAt&&(u=function(d){const m=!d.before,y=d.values||[];return new la(y,m)}(n.endAt)),Wb(t,r,o,i,l,"F",c,u)}function VI(e,t){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return lt(28987,{purpose:r})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function Ny(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=dr(n.unaryFilter.field);return te.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=dr(n.unaryFilter.field);return te.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=dr(n.unaryFilter.field);return te.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=dr(n.unaryFilter.field);return te.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return lt(61313);default:return lt(60726)}}(e):e.fieldFilter!==void 0?function(n){return te.create(dr(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return lt(58110);default:return lt(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return In.create(n.compositeFilter.filters.map(s=>Ny(s)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return lt(1026)}}(n.compositeFilter.op))}(e):lt(30097,{filter:e})}function xI(e){return _I[e]}function kI(e){return vI[e]}function DI(e){return wI[e]}function fr(e){return{fieldPath:e.canonicalString()}}function dr(e){return fe.fromServerFormat(e.fieldPath)}function My(e){return e instanceof te?function(n){if(n.op==="=="){if(Ld(n.value))return{unaryFilter:{field:fr(n.field),op:"IS_NAN"}};if(Md(n.value))return{unaryFilter:{field:fr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Ld(n.value))return{unaryFilter:{field:fr(n.field),op:"IS_NOT_NAN"}};if(Md(n.value))return{unaryFilter:{field:fr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fr(n.field),op:kI(n.op),value:n.value}}}(e):e instanceof In?function(n){const s=n.getFilters().map(r=>My(r));return s.length===1?s[0]:{compositeFilter:{op:DI(n.op),filters:s}}}(e):lt(54877,{filter:e})}function OI(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function Ly(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(t,n,s,r,i=ht.min(),o=ht.min(),l=de.EMPTY_BYTE_STRING,c=null){this.target=t,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(t){return new ss(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new ss(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new ss(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new ss(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(t){this.yt=t}}function MI(e){const t=PI({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?Vc(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(){this.Cn=new FI}addToCollectionParentIndex(t,n){return this.Cn.add(n),$.resolve()}getCollectionParents(t,n){return $.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return $.resolve()}deleteFieldIndex(t,n){return $.resolve()}deleteAllFieldIndexes(t){return $.resolve()}createTargetIndexes(t,n){return $.resolve()}getDocumentsMatchingTarget(t,n){return $.resolve(null)}getIndexType(t,n){return $.resolve(0)}getFieldIndexes(t,n){return $.resolve([])}getNextCollectionGroupToUpdate(t){return $.resolve(null)}getMinOffset(t,n){return $.resolve(ds.min())}getMinOffsetFromCollectionGroup(t,n){return $.resolve(ds.min())}updateCollectionGroup(t,n,s){return $.resolve()}updateIndexEntries(t,n){return $.resolve()}}class FI{constructor(){this.index={}}add(t){const n=t.lastSegment(),s=t.popLast(),r=this.index[n]||new ne(qt.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(t){const n=t.lastSegment(),s=t.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(t){return(this.index[t]||new ne(qt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xd={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Fy=41943040;class Oe{static withCacheSize(t){return new Oe(t,Oe.DEFAULT_COLLECTION_PERCENTILE,Oe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Oe.DEFAULT_COLLECTION_PERCENTILE=10,Oe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Oe.DEFAULT=new Oe(Fy,Oe.DEFAULT_COLLECTION_PERCENTILE,Oe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Oe.DISABLED=new Oe(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Rr(0)}static cr(){return new Rr(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yd="LruGarbageCollector",UI=1048576;function Zd([e,t],[n,s]){const r=wt(e,n);return r===0?wt(t,s):r}class BI{constructor(t){this.Ir=t,this.buffer=new ne(Zd),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();Zd(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class $I{constructor(t,n,s){this.garbageCollector=t,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){et(Yd,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Or(n)?et(Yd,"Ignoring IndexedDB error during garbage collection: ",n):await Dr(n)}await this.Vr(3e5)})}}class jI{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next(s=>Math.floor(n/100*s))}nthSequenceNumber(t,n){if(n===0)return $.resolve(Ba.ce);const s=new BI(n);return this.mr.forEachTarget(t,r=>s.Ar(r.sequenceNumber)).next(()=>this.mr.pr(t,r=>s.Ar(r))).next(()=>s.maxValue)}removeTargets(t,n,s){return this.mr.removeTargets(t,n,s)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(et("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(Xd)):this.getCacheSize(t).next(s=>s<this.params.cacheSizeCollectionThreshold?(et("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Xd):this.yr(t,n))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let s,r,i,o,l,c,u;const h=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(et("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),r=this.params.maximumSequenceNumbersToCollect):r=d,o=Date.now(),this.nthSequenceNumber(t,r))).next(d=>(s=d,l=Date.now(),this.removeTargets(t,s,n))).next(d=>(i=d,c=Date.now(),this.removeOrphanedDocuments(t,s))).next(d=>(u=Date.now(),ur()<=It.DEBUG&&et("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${r} in `+(l-o)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${d} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:d})))}}function qI(e,t){return new jI(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(){this.changes=new Zs(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Ee.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?$.resolve(s):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(t,n,s,r){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(t,n){let s=null;return this.documentOverlayCache.getOverlay(t,n).next(r=>(s=r,this.remoteDocumentCache.getEntry(t,n))).next(r=>(s!==null&&wi(s.mutation,r,He.empty(),Ft.now()),r))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(s=>this.getLocalViewOfDocuments(t,s,Et()).next(()=>s))}getLocalViewOfDocuments(t,n,s=Et()){const r=Bs();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,s).next(i=>{let o=ni();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const s=Bs();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,Et()))}populateOverlays(t,n,s){const r=[];return s.forEach(i=>{n.has(i)||r.push(i)}),this.documentOverlayCache.getOverlays(t,r).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(t,n,s,r){let i=Hn();const o=vi(),l=function(){return vi()}();return n.forEach((c,u)=>{const h=s.get(u.key);r.has(u.key)&&(h===void 0||h.mutation instanceof As)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),wi(h.mutation,u,h.mutation.getFieldMask(),Ft.now())):o.set(u.key,He.empty())}),this.recalculateAndSaveOverlays(t,i).next(c=>(c.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>l.set(u,new zI(h,o.get(u)??null))),l))}recalculateAndSaveOverlays(t,n){const s=vi();let r=new Ht((o,l)=>o-l),i=Et();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let h=s.get(c)||He.empty();h=l.applyToLocalView(u,h),s.set(c,h);const d=(r.get(l.batchId)||Et()).add(c);r=r.insert(l.batchId,d)})}).next(()=>{const o=[],l=r.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,h=c.value,d=yy();h.forEach(m=>{if(!i.has(m)){const y=Iy(n.get(m),s.get(m));y!==null&&d.set(m,y),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(t,u,d))}return $.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(s=>this.recalculateAndSaveOverlays(t,s))}getDocumentsMatchingQuery(t,n,s,r){return function(o){return ot.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):Qb(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,s,r):this.getDocumentsMatchingCollectionQuery(t,n,s,r)}getNextDocuments(t,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,s,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,s.largestBatchId,r-i.size):$.resolve(Bs());let l=Ni,c=i;return o.next(u=>$.forEach(u,(h,d)=>(l<d.largestBatchId&&(l=d.largestBatchId),i.get(h)?$.resolve():this.remoteDocumentCache.getEntry(t,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(t,u,i)).next(()=>this.computeViews(t,c,u,Et())).next(h=>({batchId:l,changes:gy(h)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new ot(n)).next(s=>{let r=ni();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(t,n,s,r){const i=n.collectionGroup;let o=ni();return this.indexManager.getCollectionParents(t,i).next(l=>$.forEach(l,c=>{const u=function(d,m){return new qa(m,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(t,u,s,r).next(h=>{h.forEach((d,m)=>{o=o.insert(d,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,s.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,s,i,r))).next(o=>{i.forEach((c,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,Ee.newInvalidDocument(h)))});let l=ni();return o.forEach((c,u)=>{const h=i.get(c);h!==void 0&&wi(h.mutation,u,He.empty(),Ft.now()),za(n,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return $.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:En(r.createTime)}}(n)),$.resolve()}getNamedQuery(t,n){return $.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,function(r){return{name:r.name,query:MI(r.bundledQuery),readTime:En(r.readTime)}}(n)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(){this.overlays=new Ht(ot.comparator),this.qr=new Map}getOverlay(t,n){return $.resolve(this.overlays.get(n))}getOverlays(t,n){const s=Bs();return $.forEach(n,r=>this.getOverlay(t,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(t,n,s){return s.forEach((r,i)=>{this.St(t,n,i)}),$.resolve()}removeOverlaysForBatchId(t,n,s){const r=this.qr.get(s);return r!==void 0&&(r.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(s)),$.resolve()}getOverlaysForCollection(t,n,s){const r=Bs(),i=n.length+1,o=new ot(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>s&&r.set(c.getKey(),c)}return $.resolve(r)}getOverlaysForCollectionGroup(t,n,s,r){let i=new Ht((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>s){let h=i.get(u.largestBatchId);h===null&&(h=Bs(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const l=Bs(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>l.set(u,h)),!(l.size()>=r)););return $.resolve(l)}St(t,n,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.qr.get(r.largestBatchId).delete(s.key);this.qr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new fI(n,s));let i=this.qr.get(n);i===void 0&&(i=Et(),this.qr.set(n,i)),this.qr.set(n,i.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(){this.sessionToken=de.EMPTY_BYTE_STRING}getSessionToken(t){return $.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(){this.Qr=new ne(se.$r),this.Ur=new ne(se.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const s=new se(t,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(t,n){t.forEach(s=>this.addReference(s,n))}removeReference(t,n){this.Gr(new se(t,n))}zr(t,n){t.forEach(s=>this.removeReference(s,n))}jr(t){const n=new ot(new qt([])),s=new se(n,t),r=new se(n,t+1),i=[];return this.Ur.forEachInRange([s,r],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new ot(new qt([])),s=new se(n,t),r=new se(n,t+1);let i=Et();return this.Ur.forEachInRange([s,r],o=>{i=i.add(o.key)}),i}containsKey(t){const n=new se(t,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&t.isEqual(s.key)}}class se{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return ot.comparator(t.key,n.key)||wt(t.Yr,n.Yr)}static Kr(t,n){return wt(t.Yr,n.Yr)||ot.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new ne(se.$r)}checkEmpty(t){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,s,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new hI(i,n,s,r);this.mutationQueue.push(o);for(const l of r)this.Zr=this.Zr.add(new se(l.key,i)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return $.resolve(o)}lookupMutationBatch(t,n){return $.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const s=n+1,r=this.ei(s),i=r<0?0:r;return $.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?Eu:this.tr-1)}getAllMutationBatches(t){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const s=new se(n,0),r=new se(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([s,r],o=>{const l=this.Xr(o.Yr);i.push(l)}),$.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,n){let s=new ne(wt);return n.forEach(r=>{const i=new se(r,0),o=new se(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],l=>{s=s.add(l.Yr)})}),$.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(t,n){const s=n.path,r=s.length+1;let i=s;ot.isDocumentKey(i)||(i=i.child(""));const o=new se(new ot(i),0);let l=new ne(wt);return this.Zr.forEachWhile(c=>{const u=c.key.path;return!!s.isPrefixOf(u)&&(u.length===r&&(l=l.add(c.Yr)),!0)},o),$.resolve(this.ti(l))}ti(t){const n=[];return t.forEach(s=>{const r=this.Xr(s);r!==null&&n.push(r)}),n}removeMutationBatch(t,n){xt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return $.forEach(n.mutations,r=>{const i=new se(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.Zr=s})}ir(t){}containsKey(t,n){const s=new se(n,0),r=this.Zr.firstAfterOrEqual(s);return $.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,$.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(t){this.ri=t,this.docs=function(){return new Ht(ot.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,o=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const s=this.docs.get(n);return $.resolve(s?s.document.mutableCopy():Ee.newInvalidDocument(n))}getEntries(t,n){let s=Hn();return n.forEach(r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():Ee.newInvalidDocument(r))}),$.resolve(s)}getDocumentsMatchingQuery(t,n,s,r){let i=Hn();const o=n.path,l=new ot(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:h}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||Sb(Ib(h),s)<=0||(r.has(h.key)||za(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return $.resolve(i)}getAllFromCollectionGroup(t,n,s,r){lt(9500)}ii(t,n){return $.forEach(this.docs,s=>n(s))}newChangeBuffer(t){return new YI(this)}getSize(t){return $.resolve(this.size)}}class YI extends HI{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(t,r)):this.Nr.removeEntry(s)}),$.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(t){this.persistence=t,this.si=new Zs(n=>bu(n),Iu),this.lastRemoteSnapshotVersion=ht.min(),this.highestTargetId=0,this.oi=0,this._i=new xu,this.targetCount=0,this.ai=Rr.ur()}forEachTarget(t,n){return this.si.forEach((s,r)=>n(r)),$.resolve()}getLastRemoteSnapshotVersion(t){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return $.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(t,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),$.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new Rr(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,$.resolve()}updateTargetData(t,n){return this.Pr(n),$.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,$.resolve()}removeTargets(t,n,s){let r=0;const i=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=n&&s.get(l.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(t,l.targetId)),r++)}),$.waitFor(i).next(()=>r)}getTargetCount(t){return $.resolve(this.targetCount)}getTargetData(t,n){const s=this.si.get(n)||null;return $.resolve(s)}addMatchingKeys(t,n,s){return this._i.Wr(n,s),$.resolve()}removeMatchingKeys(t,n,s){this._i.zr(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach(o=>{i.push(r.markPotentiallyOrphaned(t,o))}),$.waitFor(i)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),$.resolve()}getMatchingKeysForTargetId(t,n){const s=this._i.Hr(n);return $.resolve(s)}containsKey(t,n){return $.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(t,n){this.ui={},this.overlays={},this.ci=new Ba(0),this.li=!1,this.li=!0,this.hi=new QI,this.referenceDelegate=t(this),this.Pi=new ZI(this),this.indexManager=new LI,this.remoteDocumentCache=function(r){return new XI(r)}(s=>this.referenceDelegate.Ti(s)),this.serializer=new NI(n),this.Ii=new GI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new WI,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let s=this.ui[t.toKey()];return s||(s=new JI(n,this.referenceDelegate),this.ui[t.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,s){et("MemoryPersistence","Starting transaction:",t);const r=new tS(this.ci.next());return this.referenceDelegate.Ei(),s(r).next(i=>this.referenceDelegate.di(r).next(()=>i)).toPromise().then(i=>(r.raiseOnCommittedEvent(),i))}Ai(t,n){return $.or(Object.values(this.ui).map(s=>()=>s.containsKey(t,n)))}}class tS extends Cb{constructor(t){super(),this.currentSequenceNumber=t}}class ku{constructor(t){this.persistence=t,this.Ri=new xu,this.Vi=null}static mi(t){return new ku(t)}get fi(){if(this.Vi)return this.Vi;throw lt(60996)}addReference(t,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),$.resolve()}removeReference(t,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),$.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),$.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,n.targetId).next(r=>{r.forEach(i=>this.fi.add(i.toString()))}).next(()=>s.removeTargetData(t,n))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.fi,s=>{const r=ot.fromPath(s);return this.gi(t,r).next(i=>{i||n.removeEntry(r,ht.min())})}).next(()=>(this.Vi=null,n.apply(t)))}updateLimboDocument(t,n){return this.gi(t,n).next(s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(t){return 0}gi(t,n){return $.or([()=>$.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class ha{constructor(t,n){this.persistence=t,this.pi=new Zs(s=>xb(s.path),(s,r)=>s.isEqual(r)),this.garbageCollector=qI(this,n)}static mi(t,n){return new ha(t,n)}Ei(){}di(t){return $.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(s=>n.next(r=>s+r))}wr(t){let n=0;return this.pr(t,s=>{n++}).next(()=>n)}pr(t,n){return $.forEach(this.pi,(s,r)=>this.br(t,s,r).next(i=>i?$.resolve():n(r)))}removeTargets(t,n,s){return this.persistence.getTargetCache().removeTargets(t,n,s)}removeOrphanedDocuments(t,n){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(t,o=>this.br(t,o,n).next(l=>{l||(s++,i.removeEntry(o,ht.min()))})).next(()=>i.apply(t)).next(()=>s)}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),$.resolve()}removeTarget(t,n){const s=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,n,s){return this.pi.set(s,t.currentSequenceNumber),$.resolve()}removeReference(t,n,s){return this.pi.set(s,t.currentSequenceNumber),$.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),$.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=$o(t.data.value)),n}br(t,n,s){return $.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const r=this.pi.get(n);return $.resolve(r!==void 0&&r>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(t,n,s,r){this.targetId=t,this.fromCache=n,this.Es=s,this.ds=r}static As(t,n){let s=Et(),r=Et();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Du(t,n.fromCache,s,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return WT()?8:Pb(zT())>0?6:4}()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,s,r){const i={result:null};return this.ys(t,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(t,n,r,s).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new eS;return this.Ss(t,n,o).next(l=>{if(i.result=l,this.Vs)return this.bs(t,n,o,l.size)})}).next(()=>i.result)}bs(t,n,s,r){return s.documentReadCount<this.fs?(ur()<=It.DEBUG&&et("QueryEngine","SDK will not create cache indexes for query:",hr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),$.resolve()):(ur()<=It.DEBUG&&et("QueryEngine","Query:",hr(n),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.gs*r?(ur()<=It.DEBUG&&et("QueryEngine","The SDK decides to create cache indexes for query:",hr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,vn(n))):$.resolve())}ys(t,n){if($d(n))return $.resolve(null);let s=vn(n);return this.indexManager.getIndexType(t,s).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Vc(n,null,"F"),s=vn(n)),this.indexManager.getDocumentsMatchingTarget(t,s).next(i=>{const o=Et(...i);return this.ps.getDocuments(t,o).next(l=>this.indexManager.getMinOffset(t,s).next(c=>{const u=this.Ds(n,l);return this.Cs(n,u,o,c.readTime)?this.ys(t,Vc(n,null,"F")):this.vs(t,u,n,c)}))})))}ws(t,n,s,r){return $d(n)||r.isEqual(ht.min())?$.resolve(null):this.ps.getDocuments(t,s).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,s,r)?$.resolve(null):(ur()<=It.DEBUG&&et("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),hr(n)),this.vs(t,o,n,bb(r,Ni)).next(l=>l))})}Ds(t,n){let s=new ne(py(t));return n.forEach((r,i)=>{za(t,i)&&(s=s.add(i))}),s}Cs(t,n,s,r){if(t.limit===null)return!1;if(s.size!==n.size)return!0;const i=t.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(t,n,s){return ur()<=It.DEBUG&&et("QueryEngine","Using full collection scan to execute query:",hr(n)),this.ps.getDocumentsMatchingQuery(t,n,ds.min(),s)}vs(t,n,s,r){return this.ps.getDocumentsMatchingQuery(t,s,r).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ou="LocalStore",sS=3e8;class rS{constructor(t,n,s,r){this.persistence=t,this.Fs=n,this.serializer=r,this.Ms=new Ht(wt),this.xs=new Zs(i=>bu(i),Iu),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(s)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new KI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Ms))}}function iS(e,t,n,s){return new rS(e,t,n,s)}async function By(e,t){const n=dt(e);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next(i=>(r=i,n.Bs(t),n.mutationQueue.getAllMutationBatches(s))).next(i=>{const o=[],l=[];let c=Et();for(const u of r){o.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}for(const u of i){l.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(s,c).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:l}))})})}function oS(e,t){const n=dt(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=t.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,u,h){const d=u.batch,m=d.keys();let y=$.resolve();return m.forEach(T=>{y=y.next(()=>h.getEntry(c,T)).next(C=>{const P=u.docVersions.get(T);xt(P!==null,48541),C.version.compareTo(P)<0&&(d.applyToRemoteDocument(C,u),C.isValidDocument()&&(C.setReadTime(u.commitVersion),h.addEntry(C)))})}),y.next(()=>l.mutationQueue.removeMutationBatch(c,d))}(n,s,t,i).next(()=>i.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(l){let c=Et();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(t))).next(()=>n.localDocuments.getDocuments(s,r))})}function $y(e){const t=dt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Pi.getLastRemoteSnapshotVersion(n))}function aS(e,t){const n=dt(e),s=t.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const l=[];t.targetChanges.forEach((h,d)=>{const m=r.get(d);if(!m)return;l.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,d).next(()=>n.Pi.addMatchingKeys(i,h.addedDocuments,d)));let y=m.withSequenceNumber(i.currentSequenceNumber);t.targetMismatches.get(d)!==null?y=y.withResumeToken(de.EMPTY_BYTE_STRING,ht.min()).withLastLimboFreeSnapshotVersion(ht.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,s)),r=r.insert(d,y),function(C,P,U){return C.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=sS?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0}(m,y,h)&&l.push(n.Pi.updateTargetData(i,y))});let c=Hn(),u=Et();if(t.documentUpdates.forEach(h=>{t.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),l.push(lS(i,o,t.documentUpdates).next(h=>{c=h.ks,u=h.qs})),!s.isEqual(ht.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next(d=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,s));l.push(h)}return $.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(n.Ms=r,i))}function lS(e,t,n){let s=Et(),r=Et();return n.forEach(i=>s=s.add(i)),t.getEntries(e,s).next(i=>{let o=Hn();return n.forEach((l,c)=>{const u=i.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(l)),c.isNoDocument()&&c.version.isEqual(ht.min())?(t.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(t.addEntry(c),o=o.insert(l,c)):et(Ou,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{ks:o,qs:r}})}function cS(e,t){const n=dt(e);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(t===void 0&&(t=Eu),n.mutationQueue.getNextMutationBatchAfterBatchId(s,t)))}function uS(e,t){const n=dt(e);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return n.Pi.getTargetData(s,t).next(i=>i?(r=i,$.resolve(r)):n.Pi.allocateTargetId(s).next(o=>(r=new ss(t,o,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=n.Ms.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(t,s.targetId)),s})}async function Nc(e,t,n){const s=dt(e),r=s.Ms.get(t),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,o=>s.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!Or(o))throw o;et(Ou,`Failed to update sequence numbers for target ${t}: ${o}`)}s.Ms=s.Ms.remove(t),s.xs.delete(r.target)}function tp(e,t,n){const s=dt(e);let r=ht.min(),i=Et();return s.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,h){const d=dt(c),m=d.xs.get(h);return m!==void 0?$.resolve(d.Ms.get(m)):d.Pi.getTargetData(u,h)}(s,o,vn(t)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>s.Fs.getDocumentsMatchingQuery(o,t,n?r:ht.min(),n?i:Et())).next(l=>(hS(s,Xb(t),l),{documents:l,Qs:i})))}function hS(e,t,n){let s=e.Os.get(t)||ht.min();n.forEach((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),e.Os.set(t,s)}class ep{constructor(){this.activeTargetIds=sI()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class fS{constructor(){this.Mo=new ep,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,s){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,s){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new ep,Promise.resolve()}handleUserChange(t,n,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const np="ConnectivityMonitor";class sp{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){et(np,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){et(np,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xo=null;function Mc(){return xo===null?xo=function(){return 268435456+Math.round(2147483648*Math.random())}():xo++,"0x"+xo.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ql="RestConnection",pS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class mS{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${s}/databases/${r}`,this.Wo=this.databaseId.database===oa?`project_id=${s}`:`project_id=${s}&database_id=${r}`}Go(t,n,s,r,i){const o=Mc(),l=this.zo(t,n.toUriEncodedString());et(ql,`Sending RPC '${t}' ${o}:`,l,s);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,r,i);const{host:u}=new URL(l),h=mu(u);return this.Jo(t,l,c,s,h).then(d=>(et(ql,`Received RPC '${t}' ${o}: `,d),d),d=>{throw Ar(ql,`RPC '${t}' ${o} failed with error: `,d,"url: ",l,"request:",s),d})}Ho(t,n,s,r,i,o){return this.Go(t,n,s,r,i)}jo(t,n,s){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+kr}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,i)=>t[i]=r),s&&s.headers.forEach((r,i)=>t[i]=r)}zo(t,n){const s=pS[t];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ye="WebChannelConnection";class yS extends mS{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,s,r,i){const o=Mc();return new Promise((l,c)=>{const u=new qg;u.setWithCredentials(!0),u.listenOnce(Hg.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Bo.NO_ERROR:const d=u.getResponseJson();et(ye,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(d)),l(d);break;case Bo.TIMEOUT:et(ye,`RPC '${t}' ${o} timed out`),c(new st(q.DEADLINE_EXCEEDED,"Request time out"));break;case Bo.HTTP_ERROR:const m=u.getStatus();if(et(ye,`RPC '${t}' ${o} failed with status:`,m,"response text:",u.getResponseText()),m>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);const T=y==null?void 0:y.error;if(T&&T.status&&T.message){const C=function(U){const N=U.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(N)>=0?N:q.UNKNOWN}(T.status);c(new st(C,T.message))}else c(new st(q.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new st(q.UNAVAILABLE,"Connection failed."));break;default:lt(9055,{l_:t,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{et(ye,`RPC '${t}' ${o} completed.`)}});const h=JSON.stringify(r);et(ye,`RPC '${t}' ${o} sending request:`,r),u.send(n,"POST",h,s,15)})}T_(t,n,s){const r=Mc(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=Gg(),l=Kg(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,s),c.encodeInitMessageHeaders=!0;const h=i.join("");et(ye,`Creating RPC '${t}' stream ${r}: ${h}`,c);const d=o.createWebChannel(h,c);this.I_(d);let m=!1,y=!1;const T=new gS({Yo:P=>{y?et(ye,`Not sending because RPC '${t}' stream ${r} is closed:`,P):(m||(et(ye,`Opening RPC '${t}' stream ${r} transport.`),d.open(),m=!0),et(ye,`RPC '${t}' stream ${r} sending:`,P),d.send(P))},Zo:()=>d.close()}),C=(P,U,N)=>{P.listen(U,B=>{try{N(B)}catch(H){setTimeout(()=>{throw H},0)}})};return C(d,ei.EventType.OPEN,()=>{y||(et(ye,`RPC '${t}' stream ${r} transport opened.`),T.o_())}),C(d,ei.EventType.CLOSE,()=>{y||(y=!0,et(ye,`RPC '${t}' stream ${r} transport closed`),T.a_(),this.E_(d))}),C(d,ei.EventType.ERROR,P=>{y||(y=!0,Ar(ye,`RPC '${t}' stream ${r} transport errored. Name:`,P.name,"Message:",P.message),T.a_(new st(q.UNAVAILABLE,"The operation could not be completed")))}),C(d,ei.EventType.MESSAGE,P=>{var U;if(!y){const N=P.data[0];xt(!!N,16349);const B=N,H=(B==null?void 0:B.error)||((U=B[0])==null?void 0:U.error);if(H){et(ye,`RPC '${t}' stream ${r} received error:`,H);const G=H.status;let K=function(_){const A=Jt[_];if(A!==void 0)return Cy(A)}(G),S=H.message;K===void 0&&(K=q.INTERNAL,S="Unknown error status: "+G+" with message "+H.message),y=!0,T.a_(new st(K,S)),d.close()}else et(ye,`RPC '${t}' stream ${r} received:`,N),T.u_(N)}}),C(l,zg.STAT_EVENT,P=>{P.stat===bc.PROXY?et(ye,`RPC '${t}' stream ${r} detected buffering proxy`):P.stat===bc.NOPROXY&&et(ye,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{T.__()},0),T}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(n=>n===t)}}function Hl(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qa(e){return new EI(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{constructor(t,n,s=1e3,r=1.5,i=6e4){this.Mi=t,this.timerId=n,this.d_=s,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-s);r>0&&et("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rp="PersistentStream";class qy{constructor(t,n,s,r,i,o,l,c){this.Mi=t,this.S_=s,this.b_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new jy(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===q.RESOURCE_EXHAUSTED?(qn(n.toString()),qn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.D_===n&&this.G_(s,r)},s=>{t(()=>{const r=new st(q.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(r)})})}G_(t,n){const s=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo(()=>{s(()=>this.listener.Xo())}),this.stream.t_(()=>{s(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{s(()=>this.z_(r))}),this.stream.onMessage(r=>{s(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return et(rp,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget(()=>this.D_===t?n():(et(rp,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class _S extends qy{constructor(t,n,s,r,i,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=bI(this.serializer,t),s=function(i){if(!("targetChange"in i))return ht.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ht.min():o.readTime?En(o.readTime):ht.min()}(t);return this.listener.H_(n,s)}Y_(t){const n={};n.database=Oc(this.serializer),n.addTarget=function(i,o){let l;const c=o.target;if(l=Pc(c)?{documents:RI(i,c)}:{query:CI(i,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=xy(i,o.resumeToken);const u=xc(i,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(ht.min())>0){l.readTime=ua(i,o.snapshotVersion.toTimestamp());const u=xc(i,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,t);const s=VI(this.serializer,t);s&&(n.labels=s),this.q_(n)}Z_(t){const n={};n.database=Oc(this.serializer),n.removeTarget=t,this.q_(n)}}class vS extends qy{constructor(t,n,s,r,i,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return xt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,xt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){xt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=SI(t.writeResults,t.commitTime),s=En(t.commitTime);return this.listener.na(s,n)}ra(){const t={};t.database=Oc(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map(s=>II(this.serializer,s))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{}class ES extends wS{constructor(t,n,s,r){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=s,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new st(q.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(t,kc(n,s),r,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new st(q.UNKNOWN,i.toString())})}Ho(t,n,s,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(t,kc(n,s),r,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new st(q.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class TS{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(qn(n),this.aa=!1):et("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js="RemoteStore";class AS{constructor(t,n,s,r,i){this.localStore=t,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{s.enqueueAndForget(async()=>{tr(this)&&(et(Js,"Restarting streams for network reachability change."),await async function(c){const u=dt(c);u.Ea.add(4),await no(u),u.Ra.set("Unknown"),u.Ea.delete(4),await Ja(u)}(this))})}),this.Ra=new TS(s,r)}}async function Ja(e){if(tr(e))for(const t of e.da)await t(!0)}async function no(e){for(const t of e.da)await t(!1)}function Hy(e,t){const n=dt(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),Fu(n)?Lu(n):Nr(n).O_()&&Mu(n,t))}function Nu(e,t){const n=dt(e),s=Nr(n);n.Ia.delete(t),s.O_()&&zy(n,t),n.Ia.size===0&&(s.O_()?s.L_():tr(n)&&n.Ra.set("Unknown"))}function Mu(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ht.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Nr(e).Y_(t)}function zy(e,t){e.Va.Ue(t),Nr(e).Z_(t)}function Lu(e){e.Va=new yI({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Nr(e).start(),e.Ra.ua()}function Fu(e){return tr(e)&&!Nr(e).x_()&&e.Ia.size>0}function tr(e){return dt(e).Ea.size===0}function Ky(e){e.Va=void 0}async function bS(e){e.Ra.set("Online")}async function IS(e){e.Ia.forEach((t,n)=>{Mu(e,t)})}async function SS(e,t){Ky(e),Fu(e)?(e.Ra.ha(t),Lu(e)):e.Ra.set("Unknown")}async function RS(e,t,n){if(e.Ra.set("Online"),t instanceof Vy&&t.state===2&&t.cause)try{await async function(r,i){const o=i.cause;for(const l of i.targetIds)r.Ia.has(l)&&(await r.remoteSyncer.rejectListen(l,o),r.Ia.delete(l),r.Va.removeTarget(l))}(e,t)}catch(s){et(Js,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await fa(e,s)}else if(t instanceof Ho?e.Va.Ze(t):t instanceof Py?e.Va.st(t):e.Va.tt(t),!n.isEqual(ht.min()))try{const s=await $y(e.localStore);n.compareTo(s)>=0&&await function(i,o){const l=i.Va.Tt(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.Ia.get(u);h&&i.Ia.set(u,h.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const h=i.Ia.get(c);if(!h)return;i.Ia.set(c,h.withResumeToken(de.EMPTY_BYTE_STRING,h.snapshotVersion)),zy(i,c);const d=new ss(h.target,c,u,h.sequenceNumber);Mu(i,d)}),i.remoteSyncer.applyRemoteEvent(l)}(e,n)}catch(s){et(Js,"Failed to raise snapshot:",s),await fa(e,s)}}async function fa(e,t,n){if(!Or(t))throw t;e.Ea.add(1),await no(e),e.Ra.set("Offline"),n||(n=()=>$y(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{et(Js,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await Ja(e)})}function Gy(e,t){return t().catch(n=>fa(e,n,t))}async function Xa(e){const t=dt(e),n=ys(t);let s=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Eu;for(;CS(t);)try{const r=await cS(t.localStore,s);if(r===null){t.Ta.length===0&&n.L_();break}s=r.batchId,PS(t,r)}catch(r){await fa(t,r)}Wy(t)&&Qy(t)}function CS(e){return tr(e)&&e.Ta.length<10}function PS(e,t){e.Ta.push(t);const n=ys(e);n.O_()&&n.X_&&n.ea(t.mutations)}function Wy(e){return tr(e)&&!ys(e).x_()&&e.Ta.length>0}function Qy(e){ys(e).start()}async function VS(e){ys(e).ra()}async function xS(e){const t=ys(e);for(const n of e.Ta)t.ea(n.mutations)}async function kS(e,t,n){const s=e.Ta.shift(),r=Cu.from(s,t,n);await Gy(e,()=>e.remoteSyncer.applySuccessfulWrite(r)),await Xa(e)}async function DS(e,t){t&&ys(e).X_&&await async function(s,r){if(function(o){return pI(o)&&o!==q.ABORTED}(r.code)){const i=s.Ta.shift();ys(s).B_(),await Gy(s,()=>s.remoteSyncer.rejectFailedWrite(i.batchId,r)),await Xa(s)}}(e,t),Wy(e)&&Qy(e)}async function ip(e,t){const n=dt(e);n.asyncQueue.verifyOperationInProgress(),et(Js,"RemoteStore received new credentials");const s=tr(n);n.Ea.add(3),await no(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Ja(n)}async function OS(e,t){const n=dt(e);t?(n.Ea.delete(2),await Ja(n)):t||(n.Ea.add(2),await no(n),n.Ra.set("Unknown"))}function Nr(e){return e.ma||(e.ma=function(n,s,r){const i=dt(n);return i.sa(),new _S(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(e.datastore,e.asyncQueue,{Xo:bS.bind(null,e),t_:IS.bind(null,e),r_:SS.bind(null,e),H_:RS.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),Fu(e)?Lu(e):e.Ra.set("Unknown")):(await e.ma.stop(),Ky(e))})),e.ma}function ys(e){return e.fa||(e.fa=function(n,s,r){const i=dt(n);return i.sa(),new vS(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:VS.bind(null,e),r_:DS.bind(null,e),ta:xS.bind(null,e),na:kS.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await Xa(e)):(await e.fa.stop(),e.Ta.length>0&&(et(Js,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(t,n,s,r,i){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new cs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,s,r,i){const o=Date.now()+s,l=new Uu(t,n,o,r,i);return l.start(s),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new st(q.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Bu(e,t){if(qn("AsyncQueue",`${t}: ${e}`),Or(e))return new st(q.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{static emptySet(t){return new wr(t.comparator)}constructor(t){this.comparator=t?(n,s)=>t(n,s)||ot.comparator(n.key,s.key):(n,s)=>ot.comparator(n.key,s.key),this.keyedMap=ni(),this.sortedSet=new Ht(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,s)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof wr)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const s=new wr;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(){this.ga=new Ht(ot.comparator)}track(t){const n=t.doc.key,s=this.ga.get(n);s?t.type!==0&&s.type===3?this.ga=this.ga.insert(n,t):t.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.ga=this.ga.remove(n):t.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):lt(63341,{Rt:t,pa:s}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal((n,s)=>{t.push(s)}),t}}class Cr{constructor(t,n,s,r,i,o,l,c,u){this.query=t,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(t,n,s,r,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Cr(t,n,wr.emptySet(n),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Ha(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,s=t.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class MS{constructor(){this.queries=ap(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const r=dt(n),i=r.queries;r.queries=ap(),i.forEach((o,l)=>{for(const c of l.Sa)c.onError(s)})})(this,new st(q.ABORTED,"Firestore shutting down"))}}function ap(){return new Zs(e=>dy(e),Ha)}async function LS(e,t){const n=dt(e);let s=3;const r=t.query;let i=n.queries.get(r);i?!i.ba()&&t.Da()&&(s=2):(i=new NS,s=t.Da()?0:1);try{switch(s){case 0:i.wa=await n.onListen(r,!0);break;case 1:i.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const l=Bu(o,`Initialization of query '${hr(t.query)}' failed`);return void t.onError(l)}n.queries.set(r,i),i.Sa.push(t),t.va(n.onlineState),i.wa&&t.Fa(i.wa)&&$u(n)}async function FS(e,t){const n=dt(e),s=t.query;let r=3;const i=n.queries.get(s);if(i){const o=i.Sa.indexOf(t);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?r=t.Da()?0:1:!i.ba()&&t.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function US(e,t){const n=dt(e);let s=!1;for(const r of t){const i=r.query,o=n.queries.get(i);if(o){for(const l of o.Sa)l.Fa(r)&&(s=!0);o.wa=r}}s&&$u(n)}function BS(e,t,n){const s=dt(e),r=s.queries.get(t);if(r)for(const i of r.Sa)i.onError(n);s.queries.delete(t)}function $u(e){e.Ca.forEach(t=>{t.next()})}var Lc,lp;(lp=Lc||(Lc={})).Ma="default",lp.Cache="cache";class $S{constructor(t,n,s){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(t){if(!this.options.includeMetadataChanges){const s=[];for(const r of t.docChanges)r.type!==3&&s.push(r);t=new Cr(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=Cr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Lc.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy{constructor(t){this.key=t}}class Xy{constructor(t){this.key=t}}class jS{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Et(),this.mutatedKeys=Et(),this.eu=py(t),this.tu=new wr(this.eu)}get nu(){return this.Ya}ru(t,n){const s=n?n.iu:new op,r=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=r,l=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((h,d)=>{const m=r.get(h),y=za(this.query,d)?d:null,T=!!m&&this.mutatedKeys.has(m.key),C=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let P=!1;m&&y?m.data.isEqual(y.data)?T!==C&&(s.track({type:3,doc:y}),P=!0):this.su(m,y)||(s.track({type:2,doc:y}),P=!0,(c&&this.eu(y,c)>0||u&&this.eu(y,u)<0)&&(l=!0)):!m&&y?(s.track({type:0,doc:y}),P=!0):m&&!y&&(s.track({type:1,doc:m}),P=!0,(c||u)&&(l=!0)),P&&(y?(o=o.add(y),i=C?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),s.track({type:1,doc:h})}return{tu:o,iu:s,Cs:l,mutatedKeys:i}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,s,r){const i=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const o=t.iu.ya();o.sort((h,d)=>function(y,T){const C=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return lt(20277,{Rt:P})}};return C(y)-C(T)}(h.type,d.type)||this.eu(h.doc,d.doc)),this.ou(s),r=r??!1;const l=n&&!r?this._u():[],c=this.Xa.size===0&&this.current&&!r?1:0,u=c!==this.Za;return this.Za=c,o.length!==0||u?{snapshot:new Cr(this.query,t.tu,i,o,t.mutatedKeys,c===0,u,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new op,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Et(),this.tu.forEach(s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))});const n=[];return t.forEach(s=>{this.Xa.has(s)||n.push(new Xy(s))}),this.Xa.forEach(s=>{t.has(s)||n.push(new Jy(s))}),n}cu(t){this.Ya=t.Qs,this.Xa=Et();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return Cr.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ju="SyncEngine";class qS{constructor(t,n,s){this.query=t,this.targetId=n,this.view=s}}class HS{constructor(t){this.key=t,this.hu=!1}}class zS{constructor(t,n,s,r,i,o){this.localStore=t,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Zs(l=>dy(l),Ha),this.Iu=new Map,this.Eu=new Set,this.du=new Ht(ot.comparator),this.Au=new Map,this.Ru=new xu,this.Vu={},this.mu=new Map,this.fu=Rr.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function KS(e,t,n=!0){const s=s_(e);let r;const i=s.Tu.get(t);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.lu()):r=await Yy(s,t,n,!0),r}async function GS(e,t){const n=s_(e);await Yy(n,t,!0,!1)}async function Yy(e,t,n,s){const r=await uS(e.localStore,vn(t)),i=r.targetId,o=e.sharedClientState.addLocalQueryTarget(i,n);let l;return s&&(l=await WS(e,t,i,o==="current",r.resumeToken)),e.isPrimaryClient&&n&&Hy(e.remoteStore,r),l}async function WS(e,t,n,s,r){e.pu=(d,m,y)=>async function(C,P,U,N){let B=P.view.ru(U);B.Cs&&(B=await tp(C.localStore,P.query,!1).then(({documents:S})=>P.view.ru(S,B)));const H=N&&N.targetChanges.get(P.targetId),G=N&&N.targetMismatches.get(P.targetId)!=null,K=P.view.applyChanges(B,C.isPrimaryClient,H,G);return up(C,P.targetId,K.au),K.snapshot}(e,d,m,y);const i=await tp(e.localStore,t,!0),o=new jS(t,i.Qs),l=o.ru(i.documents),c=eo.createSynthesizedTargetChangeForCurrentChange(n,s&&e.onlineState!=="Offline",r),u=o.applyChanges(l,e.isPrimaryClient,c);up(e,n,u.au);const h=new qS(t,n,o);return e.Tu.set(t,h),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),u.snapshot}async function QS(e,t,n){const s=dt(e),r=s.Tu.get(t),i=s.Iu.get(r.targetId);if(i.length>1)return s.Iu.set(r.targetId,i.filter(o=>!Ha(o,t))),void s.Tu.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await Nc(s.localStore,r.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(r.targetId),n&&Nu(s.remoteStore,r.targetId),Fc(s,r.targetId)}).catch(Dr)):(Fc(s,r.targetId),await Nc(s.localStore,r.targetId,!0))}async function JS(e,t){const n=dt(e),s=n.Tu.get(t),r=n.Iu.get(s.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Nu(n.remoteStore,s.targetId))}async function XS(e,t,n){const s=rR(e);try{const r=await function(o,l){const c=dt(o),u=Ft.now(),h=l.reduce((y,T)=>y.add(T.key),Et());let d,m;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let T=Hn(),C=Et();return c.Ns.getEntries(y,h).next(P=>{T=P,T.forEach((U,N)=>{N.isValidDocument()||(C=C.add(U))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,T)).next(P=>{d=P;const U=[];for(const N of l){const B=cI(N,d.get(N.key).overlayedDocument);B!=null&&U.push(new As(N.key,B,oy(B.value.mapValue),wn.exists(!0)))}return c.mutationQueue.addMutationBatch(y,u,U,l)}).next(P=>{m=P;const U=P.applyToLocalDocumentSet(d,C);return c.documentOverlayCache.saveOverlays(y,P.batchId,U)})}).then(()=>({batchId:m.batchId,changes:gy(d)}))}(s.localStore,t);s.sharedClientState.addPendingMutation(r.batchId),function(o,l,c){let u=o.Vu[o.currentUser.toKey()];u||(u=new Ht(wt)),u=u.insert(l,c),o.Vu[o.currentUser.toKey()]=u}(s,r.batchId,n),await so(s,r.changes),await Xa(s.remoteStore)}catch(r){const i=Bu(r,"Failed to persist write");n.reject(i)}}async function Zy(e,t){const n=dt(e);try{const s=await aS(n.localStore,t);t.targetChanges.forEach((r,i)=>{const o=n.Au.get(i);o&&(xt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.hu=!0:r.modifiedDocuments.size>0?xt(o.hu,14607):r.removedDocuments.size>0&&(xt(o.hu,42227),o.hu=!1))}),await so(n,s,t)}catch(s){await Dr(s)}}function cp(e,t,n){const s=dt(e);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.Tu.forEach((i,o)=>{const l=o.view.va(t);l.snapshot&&r.push(l.snapshot)}),function(o,l){const c=dt(o);c.onlineState=l;let u=!1;c.queries.forEach((h,d)=>{for(const m of d.Sa)m.va(l)&&(u=!0)}),u&&$u(c)}(s.eventManager,t),r.length&&s.Pu.H_(r),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function YS(e,t,n){const s=dt(e);s.sharedClientState.updateQueryState(t,"rejected",n);const r=s.Au.get(t),i=r&&r.key;if(i){let o=new Ht(ot.comparator);o=o.insert(i,Ee.newNoDocument(i,ht.min()));const l=Et().add(i),c=new Wa(ht.min(),new Map,new Ht(wt),o,l);await Zy(s,c),s.du=s.du.remove(i),s.Au.delete(t),qu(s)}else await Nc(s.localStore,t,!1).then(()=>Fc(s,t,n)).catch(Dr)}async function ZS(e,t){const n=dt(e),s=t.batch.batchId;try{const r=await oS(n.localStore,t);e_(n,s,null),t_(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await so(n,r)}catch(r){await Dr(r)}}async function tR(e,t,n){const s=dt(e);try{const r=await function(o,l){const c=dt(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return c.mutationQueue.lookupMutationBatch(u,l).next(d=>(xt(d!==null,37113),h=d.keys(),c.mutationQueue.removeMutationBatch(u,d))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>c.localDocuments.getDocuments(u,h))})}(s.localStore,t);e_(s,t,n),t_(s,t),s.sharedClientState.updateMutationState(t,"rejected",n),await so(s,r)}catch(r){await Dr(r)}}function t_(e,t){(e.mu.get(t)||[]).forEach(n=>{n.resolve()}),e.mu.delete(t)}function e_(e,t,n){const s=dt(e);let r=s.Vu[s.currentUser.toKey()];if(r){const i=r.get(t);i&&(n?i.reject(n):i.resolve(),r=r.remove(t)),s.Vu[s.currentUser.toKey()]=r}}function Fc(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const s of e.Iu.get(t))e.Tu.delete(s),n&&e.Pu.yu(s,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(s=>{e.Ru.containsKey(s)||n_(e,s)})}function n_(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(Nu(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),qu(e))}function up(e,t,n){for(const s of n)s instanceof Jy?(e.Ru.addReference(s.key,t),eR(e,s)):s instanceof Xy?(et(ju,"Document no longer in limbo: "+s.key),e.Ru.removeReference(s.key,t),e.Ru.containsKey(s.key)||n_(e,s.key)):lt(19791,{wu:s})}function eR(e,t){const n=t.key,s=n.path.canonicalString();e.du.get(n)||e.Eu.has(s)||(et(ju,"New document in limbo: "+n),e.Eu.add(s),qu(e))}function qu(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new ot(qt.fromString(t)),s=e.fu.next();e.Au.set(s,new HS(n)),e.du=e.du.insert(n,s),Hy(e.remoteStore,new ss(vn(Su(n.path)),s,"TargetPurposeLimboResolution",Ba.ce))}}async function so(e,t,n){const s=dt(e),r=[],i=[],o=[];s.Tu.isEmpty()||(s.Tu.forEach((l,c)=>{o.push(s.pu(c,t,n).then(u=>{var h;if((u||n)&&s.isPrimaryClient){const d=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:h.current;s.sharedClientState.updateQueryState(c.targetId,d?"current":"not-current")}if(u){r.push(u);const d=Du.As(c.targetId,u);i.push(d)}}))}),await Promise.all(o),s.Pu.H_(r),await async function(c,u){const h=dt(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>$.forEach(u,m=>$.forEach(m.Es,y=>h.persistence.referenceDelegate.addReference(d,m.targetId,y)).next(()=>$.forEach(m.ds,y=>h.persistence.referenceDelegate.removeReference(d,m.targetId,y)))))}catch(d){if(!Or(d))throw d;et(Ou,"Failed to update sequence numbers: "+d)}for(const d of u){const m=d.targetId;if(!d.fromCache){const y=h.Ms.get(m),T=y.snapshotVersion,C=y.withLastLimboFreeSnapshotVersion(T);h.Ms=h.Ms.insert(m,C)}}}(s.localStore,i))}async function nR(e,t){const n=dt(e);if(!n.currentUser.isEqual(t)){et(ju,"User change. New user:",t.toKey());const s=await By(n.localStore,t);n.currentUser=t,function(i,o){i.mu.forEach(l=>{l.forEach(c=>{c.reject(new st(q.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await so(n,s.Ls)}}function sR(e,t){const n=dt(e),s=n.Au.get(t);if(s&&s.hu)return Et().add(s.key);{let r=Et();const i=n.Iu.get(t);if(!i)return r;for(const o of i){const l=n.Tu.get(o);r=r.unionWith(l.view.nu)}return r}}function s_(e){const t=dt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Zy.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=sR.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=YS.bind(null,t),t.Pu.H_=US.bind(null,t.eventManager),t.Pu.yu=BS.bind(null,t.eventManager),t}function rR(e){const t=dt(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=ZS.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=tR.bind(null,t),t}class da{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Qa(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return iS(this.persistence,new nS,t.initialUser,this.serializer)}Cu(t){return new Uy(ku.mi,this.serializer)}Du(t){return new fS}async terminate(){var t,n;(t=this.gcScheduler)==null||t.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}da.provider={build:()=>new da};class iR extends da{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){xt(this.persistence.referenceDelegate instanceof ha,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new $I(s,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?Oe.withCacheSize(this.cacheSizeBytes):Oe.DEFAULT;return new Uy(s=>ha.mi(s,n),this.serializer)}}class Uc{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>cp(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=nR.bind(null,this.syncEngine),await OS(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new MS}()}createDatastore(t){const n=Qa(t.databaseInfo.databaseId),s=function(i){return new yS(i)}(t.databaseInfo);return function(i,o,l,c){return new ES(i,o,l,c)}(t.authCredentials,t.appCheckCredentials,s,n)}createRemoteStore(t){return function(s,r,i,o,l){return new AS(s,r,i,o,l)}(this.localStore,this.datastore,t.asyncQueue,n=>cp(this.syncEngine,n,0),function(){return sp.v()?new sp:new dS}())}createSyncEngine(t,n){return function(r,i,o,l,c,u,h){const d=new zS(r,i,o,l,c,u);return h&&(d.gu=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(r){const i=dt(r);et(Js,"RemoteStore shutting down."),i.Ea.add(5),await no(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(t=this.datastore)==null||t.terminate(),(n=this.eventManager)==null||n.terminate()}}Uc.provider={build:()=>new Uc};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):qn("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _s="FirestoreClient";class aR{constructor(t,n,s,r,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=ve.UNAUTHENTICATED,this.clientId=vu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,async o=>{et(_s,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(s,o=>(et(_s,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new cs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const s=Bu(n,"Failed to shutdown persistence");t.reject(s)}}),t.promise}}async function zl(e,t){e.asyncQueue.verifyOperationInProgress(),et(_s,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let s=n.initialUser;e.setCredentialChangeListener(async r=>{s.isEqual(r)||(await By(t.localStore,r),s=r)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function hp(e,t){e.asyncQueue.verifyOperationInProgress();const n=await lR(e);et(_s,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(s=>ip(t.remoteStore,s)),e.setAppCheckTokenChangeListener((s,r)=>ip(t.remoteStore,r)),e._onlineComponents=t}async function lR(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){et(_s,"Using user provided OfflineComponentProvider");try{await zl(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(r){return r.name==="FirebaseError"?r.code===q.FAILED_PRECONDITION||r.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Ar("Error using user provided cache. Falling back to memory cache: "+n),await zl(e,new da)}}else et(_s,"Using default OfflineComponentProvider"),await zl(e,new iR(void 0));return e._offlineComponents}async function r_(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(et(_s,"Using user provided OnlineComponentProvider"),await hp(e,e._uninitializedComponentsProvider._online)):(et(_s,"Using default OnlineComponentProvider"),await hp(e,new Uc))),e._onlineComponents}function cR(e){return r_(e).then(t=>t.syncEngine)}async function uR(e){const t=await r_(e),n=t.eventManager;return n.onListen=KS.bind(null,t.syncEngine),n.onUnlisten=QS.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=GS.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=JS.bind(null,t.syncEngine),n}function hR(e,t,n={}){const s=new cs;return e.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,u){const h=new oR({next:m=>{h.Nu(),o.enqueueAndForget(()=>FS(i,d));const y=m.docs.has(l);!y&&m.fromCache?u.reject(new st(q.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&c&&c.source==="server"?u.reject(new st(q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),d=new $S(Su(l.path),h,{includeMetadataChanges:!0,qa:!0});return LS(i,d)}(await uR(e),e.asyncQueue,t,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i_(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fp=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o_="firestore.googleapis.com",dp=!0;class pp{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new st(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=o_,this.ssl=dp}else this.host=t.host,this.ssl=t.ssl??dp;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=Fy;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<UI)throw new st(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Ab("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=i_(t.experimentalLongPollingOptions??{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new st(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new st(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new st(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(s,r){return s.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Hu{constructor(t,n,s,r){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new pp({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new st(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new st(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pp(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new fb;switch(s.type){case"firstParty":return new gb(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new st(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=fp.get(n);s&&(et("ComponentProvider","Removing Datastore"),fp.delete(n),s.terminate())}(this),Promise.resolve()}}function fR(e,t,n,s={}){var u;e=Qs(e,Hu);const r=mu(t),i=e._getSettings(),o={...i,emulatorOptions:e._getEmulatorOptions()},l=`${t}:${n}`;r&&(BT(`https://${l}`),HT("Firestore",!0)),i.host!==o_&&i.host!==l&&Ar("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:r,emulatorOptions:s};if(!Di(c,o)&&(e._setSettings(c),s.mockUserToken)){let h,d;if(typeof s.mockUserToken=="string")h=s.mockUserToken,d=ve.MOCK_USER;else{h=$T(s.mockUserToken,(u=e._app)==null?void 0:u.options.projectId);const m=s.mockUserToken.sub||s.mockUserToken.user_id;if(!m)throw new st(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new ve(m)}e._authCredentials=new db(new Qg(h,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(t,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new zu(this.firestore,t,this._query)}}class ee{constructor(t,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qi(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ee(this.firestore,t,this._key)}toJSON(){return{type:ee._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,s){if(Zi(n,ee._jsonSchema))return new ee(t,s||null,new ot(qt.fromString(n.referencePath)))}}ee._jsonSchemaVersion="firestore/documentReference/1.0",ee._jsonSchema={type:Xt("string",ee._jsonSchemaVersion),referencePath:Xt("string")};class qi extends zu{constructor(t,n,s){super(t,n,Su(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ee(this.firestore,null,new ot(t))}withConverter(t){return new qi(this.firestore,t,this._path)}}function en(e,t,...n){if(e=Bn(e),arguments.length===1&&(t=vu.newId()),Tb("doc","path",t),e instanceof Hu){const s=qt.fromString(t,...n);return Cd(s),new ee(e,null,new ot(s))}{if(!(e instanceof ee||e instanceof qi))throw new st(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=e._path.child(qt.fromString(t,...n));return Cd(s),new ee(e.firestore,e instanceof qi?e.converter:null,new ot(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mp="AsyncQueue";class gp{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new jy(this,"async_queue_retry"),this._c=()=>{const s=Hl();s&&et(mp,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=t;const n=Hl();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=Hl();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const n=new cs;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!Or(t))throw t;et(mp,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const n=this.ac.then(()=>(this.rc=!0,t().catch(s=>{throw this.nc=s,this.rc=!1,qn("INTERNAL UNHANDLED ERROR: ",yp(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=n,n}enqueueAfterDelay(t,n,s){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const r=Uu.createAndSchedule(this,t,n,s,i=>this.hc(i));return this.tc.push(r),r}uc(){this.nc&&lt(47125,{Pc:yp(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function yp(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}class Ya extends Hu{constructor(t,n,s,r){super(t,n,s,r),this.type="firestore",this._queue=new gp,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new gp(t),this._firestoreClient=void 0,await t}}}function dR(e,t){const n=typeof e=="object"?e:Ug(),s=typeof e=="string"?e:oa,r=Yi(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=FT("firestore");i&&fR(r,...i)}return r}function a_(e){if(e._terminated)throw new st(q.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||pR(e),e._firestoreClient}function pR(e){var s,r,i;const t=e._freezeSettings(),n=function(l,c,u,h){return new Ob(l,c,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,i_(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(e._databaseId,((s=e._app)==null?void 0:s.options.appId)||"",e._persistenceKey,t);e._componentsProvider||(r=t.localCache)!=null&&r._offlineComponentProvider&&((i=t.localCache)!=null&&i._onlineComponentProvider)&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new aR(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Je(de.fromBase64String(t))}catch(n){throw new st(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Je(de.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Je._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Zi(t,Je._jsonSchema))return Je.fromBase64String(t.bytes)}}Je._jsonSchemaVersion="firestore/bytes/1.0",Je._jsonSchema={type:Xt("string",Je._jsonSchemaVersion),bytes:Xt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new st(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fe(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new st(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new st(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return wt(this._lat,t._lat)||wt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Tn._jsonSchemaVersion}}static fromJSON(t){if(Zi(t,Tn._jsonSchema))return new Tn(t.latitude,t.longitude)}}Tn._jsonSchemaVersion="firestore/geoPoint/1.0",Tn._jsonSchema={type:Xt("string",Tn._jsonSchemaVersion),latitude:Xt("number"),longitude:Xt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(s,r){if(s.length!==r.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==r[i])return!1;return!0}(this._values,t._values)}toJSON(){return{type:An._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Zi(t,An._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(n=>typeof n=="number"))return new An(t.vectorValues);throw new st(q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}An._jsonSchemaVersion="firestore/vectorValue/1.0",An._jsonSchema={type:Xt("string",An._jsonSchemaVersion),vectorValues:Xt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR=/^__.*__$/;class gR{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return this.fieldMask!==null?new As(t,this.data,this.fieldMask,n,this.fieldTransforms):new to(t,this.data,n,this.fieldTransforms)}}class l_{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return new As(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function c_(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw lt(40011,{Ac:e})}}class Ku{constructor(t,n,s,r,i,o){this.settings=t,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Ku({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var r;const n=(r=this.path)==null?void 0:r.child(t),s=this.Vc({path:n,fc:!1});return s.gc(t),s}yc(t){var r;const n=(r=this.path)==null?void 0:r.child(t),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return pa(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(c_(this.Ac)&&mR.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class yR{constructor(t,n,s){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=s||Qa(t)}Cc(t,n,s,r=!1){return new Ku({Ac:t,methodName:n,Dc:s,path:fe.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function u_(e){const t=e._freezeSettings(),n=Qa(e._databaseId);return new yR(e._databaseId,!!t.ignoreUndefinedProperties,n)}function _R(e,t,n,s,r,i={}){const o=e.Cc(i.merge||i.mergeFields?2:0,t,n,r);Qu("Data must be an object, but it was:",o,s);const l=h_(s,o);let c,u;if(i.merge)c=new He(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const d of i.mergeFields){const m=Bc(t,d,n);if(!o.contains(m))throw new st(q.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);d_(h,m)||h.push(m)}c=new He(h),u=o.fieldTransforms.filter(d=>c.covers(d.field))}else c=null,u=o.fieldTransforms;return new gR(new Ne(l),c,u)}class tl extends ro{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof tl}}class Gu extends ro{_toFieldTransform(t){return new by(t.path,new Ui)}isEqual(t){return t instanceof Gu}}class Wu extends ro{constructor(t,n){super(t),this.Fc=n}_toFieldTransform(t){const n=new ji(t.serializer,vy(t.serializer,this.Fc));return new by(t.path,n)}isEqual(t){return t instanceof Wu&&this.Fc===t.Fc}}function vR(e,t,n,s){const r=e.Cc(1,t,n);Qu("Data must be an object, but it was:",r,s);const i=[],o=Ne.empty();Ts(s,(c,u)=>{const h=Ju(t,c,n);u=Bn(u);const d=r.yc(h);if(u instanceof tl)i.push(h);else{const m=el(u,d);m!=null&&(i.push(h),o.set(h,m))}});const l=new He(i);return new l_(o,l,r.fieldTransforms)}function wR(e,t,n,s,r,i){const o=e.Cc(1,t,n),l=[Bc(t,s,n)],c=[r];if(i.length%2!=0)throw new st(q.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)l.push(Bc(t,i[m])),c.push(i[m+1]);const u=[],h=Ne.empty();for(let m=l.length-1;m>=0;--m)if(!d_(u,l[m])){const y=l[m];let T=c[m];T=Bn(T);const C=o.yc(y);if(T instanceof tl)u.push(y);else{const P=el(T,C);P!=null&&(u.push(y),h.set(y,P))}}const d=new He(u);return new l_(h,d,o.fieldTransforms)}function el(e,t){if(f_(e=Bn(e)))return Qu("Unsupported field value:",t,e),h_(e,t);if(e instanceof ro)return function(s,r){if(!c_(r.Ac))throw r.Sc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(s,r){const i=[];let o=0;for(const l of s){let c=el(l,r.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(e,t)}return function(s,r){if((s=Bn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return vy(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=Ft.fromDate(s);return{timestampValue:ua(r.serializer,i)}}if(s instanceof Ft){const i=new Ft(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:ua(r.serializer,i)}}if(s instanceof Tn)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Je)return{bytesValue:xy(r.serializer,s._byteString)};if(s instanceof ee){const i=r.databaseId,o=s.firestore._databaseId;if(!o.isEqual(i))throw r.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Vu(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof An)return function(o,l){return{mapValue:{fields:{[ry]:{stringValue:iy},[aa]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Sc("VectorValues must only contain numeric values.");return Ru(l.serializer,u)})}}}}}}(s,r);throw r.Sc(`Unsupported field value: ${wu(s)}`)}(e,t)}function h_(e,t){const n={};return Yg(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ts(e,(s,r)=>{const i=el(r,t.mc(s));i!=null&&(n[s]=i)}),{mapValue:{fields:n}}}function f_(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Ft||e instanceof Tn||e instanceof Je||e instanceof ee||e instanceof ro||e instanceof An)}function Qu(e,t,n){if(!f_(n)||!Jg(n)){const s=wu(n);throw s==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+s)}}function Bc(e,t,n){if((t=Bn(t))instanceof Za)return t._internalPath;if(typeof t=="string")return Ju(e,t);throw pa("Field path arguments must be of type string or ",e,!1,void 0,n)}const ER=new RegExp("[~\\*/\\[\\]]");function Ju(e,t,n){if(t.search(ER)>=0)throw pa(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Za(...t.split("."))._internalPath}catch{throw pa(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function pa(e,t,n,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let l=`Function ${t}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${s}`),o&&(c+=` in document ${r}`),c+=")"),new st(q.INVALID_ARGUMENT,l+e+c)}function d_(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{constructor(t,n,s,r,i){this._firestore=t,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ee(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new TR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(m_("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class TR extends p_{data(){return super.data()}}function m_(e,t){return typeof t=="string"?Ju(e,t):t instanceof Za?t._internalPath:t._delegate._internalPath}class AR{convertValue(t,n="none"){switch(gs(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Wt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(ms(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw lt(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const s={};return Ts(t,(r,i)=>{s[r]=this.convertValue(i,n)}),s}convertVectorValue(t){var s,r,i;const n=(i=(r=(s=t.fields)==null?void 0:s[aa].arrayValue)==null?void 0:r.values)==null?void 0:i.map(o=>Wt(o.doubleValue));return new An(n)}convertGeoPoint(t){return new Tn(Wt(t.latitude),Wt(t.longitude))}convertArray(t,n){return(t.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(t,n){switch(n){case"previous":const s=ja(t);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Mi(t));default:return null}}convertTimestamp(t){const n=ps(t);return new Ft(n.seconds,n.nanos)}convertDocumentKey(t,n){const s=qt.fromString(t);xt(Ly(s),9688,{name:t});const r=new Li(s.get(1),s.get(3)),i=new ot(s.popFirst(5));return r.isEqual(n)||qn(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bR(e,t,n){let s;return s=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,s}class ri{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Ks extends p_{constructor(t,n,s,r,i,o){super(t,n,s,r,o),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new zo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const s=this._document.data.field(m_("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new st(q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=Ks._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ks._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ks._jsonSchema={type:Xt("string",Ks._jsonSchemaVersion),bundleSource:Xt("string","DocumentSnapshot"),bundleName:Xt("string"),bundle:Xt("string")};class zo extends Ks{data(t={}){return super.data(t)}}class Ei{constructor(t,n,s,r){this._firestore=t,this._userDataWriter=n,this._snapshot=r,this.metadata=new ri(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(s=>{t.call(n,new zo(this._firestore,this._userDataWriter,s.key,s,new ri(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new st(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(l=>{const c=new zo(r._firestore,r._userDataWriter,l.doc.key,l.doc,new ri(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new zo(r._firestore,r._userDataWriter,l.doc.key,l.doc,new ri(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let u=-1,h=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:IR(l.type),doc:c,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new st(q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Ei._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=vu.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],r=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),s.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),r.push(i.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function IR(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return lt(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(e){e=Qs(e,ee);const t=Qs(e.firestore,Ya);return hR(a_(t),e._key).then(n=>RR(t,e,n))}Ei._jsonSchemaVersion="firestore/querySnapshot/1.0",Ei._jsonSchema={type:Xt("string",Ei._jsonSchemaVersion),bundleSource:Xt("string","QuerySnapshot"),bundleName:Xt("string"),bundle:Xt("string")};class SR extends AR{constructor(t){super(),this.firestore=t}convertBytes(t){return new Je(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new ee(this.firestore,null,n)}}function _e(e,t,n){e=Qs(e,ee);const s=Qs(e.firestore,Ya),r=bR(e.converter,t,n);return g_(s,[_R(u_(s),"setDoc",e._key,r,e.converter!==null,n).toMutation(e._key,wn.none())])}function kn(e,t,n,...s){e=Qs(e,ee);const r=Qs(e.firestore,Ya),i=u_(r);let o;return o=typeof(t=Bn(t))=="string"||t instanceof Za?wR(i,"updateDoc",e._key,t,n,s):vR(i,"updateDoc",e._key,t),g_(r,[o.toMutation(e._key,wn.exists(!0))])}function g_(e,t){return function(s,r){const i=new cs;return s.asyncQueue.enqueueAndForget(async()=>XS(await cR(s),r,i)),i.promise}(a_(e),t)}function RR(e,t,n){const s=n.docs.get(t._key),r=new SR(e);return new Ks(e,r,t._key,s,new ri(n.hasPendingWrites,n.fromCache),t.converter)}function Lt(){return new Gu("serverTimestamp")}function $e(e){return new Wu("increment",e)}(function(t,n=!0){(function(r){kr=r})(eb),fs(new $n("firestore",(s,{instanceIdentifier:r,options:i})=>{const o=s.getProvider("app").getImmediate(),l=new Ya(new pb(s.getProvider("auth-internal")),new yb(o,s.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new st(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Li(u.options.projectId,h)}(o,r),o);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),_n(bd,Id,t),_n(bd,Id,"esm2020")})();var CR="firebase",PR="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_n(CR,PR,"app");const y_="@firebase/installations",Xu="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const __=1e4,v_=`w:${Xu}`,w_="FIS_v2",VR="https://firebaseinstallations.googleapis.com/v1",xR=60*60*1e3,kR="installations",DR="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OR={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Xs=new Ua(kR,DR,OR);function E_(e){return e instanceof Es&&e.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T_({projectId:e}){return`${VR}/projects/${e}/installations`}function A_(e){return{token:e.token,requestStatus:2,expiresIn:MR(e.expiresIn),creationTime:Date.now()}}async function b_(e,t){const s=(await t.json()).error;return Xs.create("request-failed",{requestName:e,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function I_({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function NR(e,{refreshToken:t}){const n=I_(e);return n.append("Authorization",LR(t)),n}async function S_(e){const t=await e();return t.status>=500&&t.status<600?e():t}function MR(e){return Number(e.replace("s","000"))}function LR(e){return`${w_} ${e}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FR({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const s=T_(e),r=I_(e),i=t.getImmediate({optional:!0});if(i){const u=await i.getHeartbeatsHeader();u&&r.append("x-firebase-client",u)}const o={fid:n,authVersion:w_,appId:e.appId,sdkVersion:v_},l={method:"POST",headers:r,body:JSON.stringify(o)},c=await S_(()=>fetch(s,l));if(c.ok){const u=await c.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:A_(u.authToken)}}else throw await b_("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R_(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UR(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR=/^[cdef][\w-]{21}$/,$c="";function $R(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const n=jR(e);return BR.test(n)?n:$c}catch{return $c}}function jR(e){return UR(e).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nl(e){return`${e.appName}!${e.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C_=new Map;function P_(e,t){const n=nl(e);V_(n,t),qR(n,t)}function V_(e,t){const n=C_.get(e);if(n)for(const s of n)s(t)}function qR(e,t){const n=HR();n&&n.postMessage({key:e,fid:t}),zR()}let $s=null;function HR(){return!$s&&"BroadcastChannel"in self&&($s=new BroadcastChannel("[Firebase] FID Change"),$s.onmessage=e=>{V_(e.data.key,e.data.fid)}),$s}function zR(){C_.size===0&&$s&&($s.close(),$s=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR="firebase-installations-database",GR=1,Ys="firebase-installations-store";let Kl=null;function Yu(){return Kl||(Kl=Lg(KR,GR,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(Ys)}}})),Kl}async function ma(e,t){const n=nl(e),r=(await Yu()).transaction(Ys,"readwrite"),i=r.objectStore(Ys),o=await i.get(n);return await i.put(t,n),await r.done,(!o||o.fid!==t.fid)&&P_(e,t.fid),t}async function x_(e){const t=nl(e),s=(await Yu()).transaction(Ys,"readwrite");await s.objectStore(Ys).delete(t),await s.done}async function sl(e,t){const n=nl(e),r=(await Yu()).transaction(Ys,"readwrite"),i=r.objectStore(Ys),o=await i.get(n),l=t(o);return l===void 0?await i.delete(n):await i.put(l,n),await r.done,l&&(!o||o.fid!==l.fid)&&P_(e,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zu(e){let t;const n=await sl(e.appConfig,s=>{const r=WR(s),i=QR(e,r);return t=i.registrationPromise,i.installationEntry});return n.fid===$c?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}function WR(e){const t=e||{fid:$R(),registrationStatus:0};return k_(t)}function QR(e,t){if(t.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(Xs.create("app-offline"));return{installationEntry:t,registrationPromise:r}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},s=JR(e,n);return{installationEntry:n,registrationPromise:s}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:XR(e)}:{installationEntry:t}}async function JR(e,t){try{const n=await FR(e,t);return ma(e.appConfig,n)}catch(n){throw E_(n)&&n.customData.serverCode===409?await x_(e.appConfig):await ma(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}async function XR(e){let t=await _p(e.appConfig);for(;t.registrationStatus===1;)await R_(100),t=await _p(e.appConfig);if(t.registrationStatus===0){const{installationEntry:n,registrationPromise:s}=await Zu(e);return s||n}return t}function _p(e){return sl(e,t=>{if(!t)throw Xs.create("installation-not-found");return k_(t)})}function k_(e){return YR(e)?{fid:e.fid,registrationStatus:0}:e}function YR(e){return e.registrationStatus===1&&e.registrationTime+__<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZR({appConfig:e,heartbeatServiceProvider:t},n){const s=tC(e,n),r=NR(e,n),i=t.getImmediate({optional:!0});if(i){const u=await i.getHeartbeatsHeader();u&&r.append("x-firebase-client",u)}const o={installation:{sdkVersion:v_,appId:e.appId}},l={method:"POST",headers:r,body:JSON.stringify(o)},c=await S_(()=>fetch(s,l));if(c.ok){const u=await c.json();return A_(u)}else throw await b_("Generate Auth Token",c)}function tC(e,{fid:t}){return`${T_(e)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function th(e,t=!1){let n;const s=await sl(e.appConfig,i=>{if(!D_(i))throw Xs.create("not-registered");const o=i.authToken;if(!t&&sC(o))return i;if(o.requestStatus===1)return n=eC(e,t),i;{if(!navigator.onLine)throw Xs.create("app-offline");const l=iC(i);return n=nC(e,l),l}});return n?await n:s.authToken}async function eC(e,t){let n=await vp(e.appConfig);for(;n.authToken.requestStatus===1;)await R_(100),n=await vp(e.appConfig);const s=n.authToken;return s.requestStatus===0?th(e,t):s}function vp(e){return sl(e,t=>{if(!D_(t))throw Xs.create("not-registered");const n=t.authToken;return oC(n)?{...t,authToken:{requestStatus:0}}:t})}async function nC(e,t){try{const n=await ZR(e,t),s={...t,authToken:n};return await ma(e.appConfig,s),n}catch(n){if(E_(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await x_(e.appConfig);else{const s={...t,authToken:{requestStatus:0}};await ma(e.appConfig,s)}throw n}}function D_(e){return e!==void 0&&e.registrationStatus===2}function sC(e){return e.requestStatus===2&&!rC(e)}function rC(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+xR}function iC(e){const t={requestStatus:1,requestTime:Date.now()};return{...e,authToken:t}}function oC(e){return e.requestStatus===1&&e.requestTime+__<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aC(e){const t=e,{installationEntry:n,registrationPromise:s}=await Zu(t);return s?s.catch(console.error):th(t).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lC(e,t=!1){const n=e;return await cC(n),(await th(n,t)).token}async function cC(e){const{registrationPromise:t}=await Zu(e);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(e){if(!e||!e.options)throw Gl("App Configuration");if(!e.name)throw Gl("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw Gl(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function Gl(e){return Xs.create("missing-app-config-values",{valueName:e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O_="installations",hC="installations-internal",fC=e=>{const t=e.getProvider("app").getImmediate(),n=uC(t),s=Yi(t,"heartbeat");return{app:t,appConfig:n,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},dC=e=>{const t=e.getProvider("app").getImmediate(),n=Yi(t,O_).getImmediate();return{getId:()=>aC(n),getToken:r=>lC(n,r)}};function pC(){fs(new $n(O_,fC,"PUBLIC")),fs(new $n(hC,dC,"PRIVATE"))}pC();_n(y_,Xu);_n(y_,Xu,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ga="analytics",mC="firebase_id",gC="origin",yC=60*1e3,_C="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",eh="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fe=new gu("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},ze=new Ua("analytics","Analytics",vC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wC(e){if(!e.startsWith(eh)){const t=ze.create("invalid-gtag-resource",{gtagURL:e});return Fe.warn(t.message),""}return e}function N_(e){return Promise.all(e.map(t=>t.catch(n=>n)))}function EC(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}function TC(e,t){const n=EC("firebase-js-sdk-policy",{createScriptURL:wC}),s=document.createElement("script"),r=`${eh}?l=${e}&id=${t}`;s.src=n?n==null?void 0:n.createScriptURL(r):r,s.async=!0,document.head.appendChild(s)}function AC(e){let t=[];return Array.isArray(window[e])?t=window[e]:window[e]=t,t}async function bC(e,t,n,s,r,i){const o=s[r];try{if(o)await t[o];else{const c=(await N_(n)).find(u=>u.measurementId===r);c&&await t[c.appId]}}catch(l){Fe.error(l)}e("config",r,i)}async function IC(e,t,n,s,r){try{let i=[];if(r&&r.send_to){let o=r.send_to;Array.isArray(o)||(o=[o]);const l=await N_(n);for(const c of o){const u=l.find(d=>d.measurementId===c),h=u&&t[u.appId];if(h)i.push(h);else{i=[];break}}}i.length===0&&(i=Object.values(t)),await Promise.all(i),e("event",s,r||{})}catch(i){Fe.error(i)}}function SC(e,t,n,s){async function r(i,...o){try{if(i==="event"){const[l,c]=o;await IC(e,t,n,l,c)}else if(i==="config"){const[l,c]=o;await bC(e,t,n,s,l,c)}else if(i==="consent"){const[l,c]=o;e("consent",l,c)}else if(i==="get"){const[l,c,u]=o;e("get",l,c,u)}else if(i==="set"){const[l]=o;e("set",l)}else e(i,...o)}catch(l){Fe.error(l)}}return r}function RC(e,t,n,s,r){let i=function(...o){window[s].push(arguments)};return window[r]&&typeof window[r]=="function"&&(i=window[r]),window[r]=SC(i,e,t,n),{gtagCore:i,wrappedGtag:window[r]}}function CC(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(eh)&&n.src.includes(e))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC=30,VC=1e3;class xC{constructor(t={},n=VC){this.throttleMetadata=t,this.intervalMillis=n}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,n){this.throttleMetadata[t]=n}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}}const M_=new xC;function kC(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function DC(e){var o;const{appId:t,apiKey:n}=e,s={method:"GET",headers:kC(n)},r=_C.replace("{app-id}",t),i=await fetch(r,s);if(i.status!==200&&i.status!==304){let l="";try{const c=await i.json();(o=c.error)!=null&&o.message&&(l=c.error.message)}catch{}throw ze.create("config-fetch-failed",{httpStatus:i.status,responseMessage:l})}return i.json()}async function OC(e,t=M_,n){const{appId:s,apiKey:r,measurementId:i}=e.options;if(!s)throw ze.create("no-app-id");if(!r){if(i)return{measurementId:i,appId:s};throw ze.create("no-api-key")}const o=t.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new LC;return setTimeout(async()=>{l.abort()},yC),L_({appId:s,apiKey:r,measurementId:i},o,l,t)}async function L_(e,{throttleEndTimeMillis:t,backoffCount:n},s,r=M_){var l;const{appId:i,measurementId:o}=e;try{await NC(s,t)}catch(c){if(o)return Fe.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:i,measurementId:o};throw c}try{const c=await DC(e);return r.deleteThrottleMetadata(i),c}catch(c){const u=c;if(!MC(u)){if(r.deleteThrottleMetadata(i),o)return Fe.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:i,measurementId:o};throw c}const h=Number((l=u==null?void 0:u.customData)==null?void 0:l.httpStatus)===503?pd(n,r.intervalMillis,PC):pd(n,r.intervalMillis),d={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return r.setThrottleMetadata(i,d),Fe.debug(`Calling attemptFetch again in ${h} millis`),L_(e,d,s,r)}}function NC(e,t){return new Promise((n,s)=>{const r=Math.max(t-Date.now(),0),i=setTimeout(n,r);e.addEventListener(()=>{clearTimeout(i),s(ze.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function MC(e){if(!(e instanceof Es)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return t===429||t===500||t===503||t===504}class LC{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}async function FC(e,t,n,s,r){if(r&&r.global){e("event",n,s);return}else{const i=await t,o={...s,send_to:i};e("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UC(){if(Dg())try{await Og()}catch(e){return Fe.warn(ze.create("indexeddb-unavailable",{errorInfo:e==null?void 0:e.toString()}).message),!1}else return Fe.warn(ze.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function BC(e,t,n,s,r,i,o){const l=OC(e);l.then(m=>{n[m.measurementId]=m.appId,e.options.measurementId&&m.measurementId!==e.options.measurementId&&Fe.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>Fe.error(m)),t.push(l);const c=UC().then(m=>{if(m)return s.getId()}),[u,h]=await Promise.all([l,c]);CC(i)||TC(i,u.measurementId),r("js",new Date);const d=(o==null?void 0:o.config)??{};return d[gC]="firebase",d.update=!0,h!=null&&(d[mC]=h),r("config",u.measurementId,d),u.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(t){this.app=t}_delete(){return delete Ti[this.app.options.appId],Promise.resolve()}}let Ti={},wp=[];const Ep={};let Wl="dataLayer",jC="gtag",Tp,F_,Ap=!1;function qC(){const e=[];if(GT()&&e.push("This is a browser extension environment."),QT()||e.push("Cookies are not available."),e.length>0){const t=e.map((s,r)=>`(${r+1}) ${s}`).join(" "),n=ze.create("invalid-analytics-context",{errorInfo:t});Fe.warn(n.message)}}function HC(e,t,n){qC();const s=e.options.appId;if(!s)throw ze.create("no-app-id");if(!e.options.apiKey)if(e.options.measurementId)Fe.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw ze.create("no-api-key");if(Ti[s]!=null)throw ze.create("already-exists",{id:s});if(!Ap){AC(Wl);const{wrappedGtag:i,gtagCore:o}=RC(Ti,wp,Ep,Wl,jC);F_=i,Tp=o,Ap=!0}return Ti[s]=BC(e,wp,Ep,t,Tp,Wl,n),new $C(e)}function zC(e=Ug()){e=Bn(e);const t=Yi(e,ga);return t.isInitialized()?t.getImmediate():KC(e)}function KC(e,t={}){const n=Yi(e,ga);if(n.isInitialized()){const r=n.getImmediate();if(Di(t,n.getOptions()))return r;throw ze.create("already-initialized")}return n.initialize({options:t})}function GC(e,t,n,s){e=Bn(e),FC(F_,Ti[e.app.options.appId],t,n,s).catch(r=>Fe.error(r))}const bp="@firebase/analytics",Ip="0.10.18";function WC(){fs(new $n(ga,(t,{options:n})=>{const s=t.getProvider("app").getImmediate(),r=t.getProvider("installations-internal").getImmediate();return HC(s,r,n)},"PUBLIC")),fs(new $n("analytics-internal",e,"PRIVATE")),_n(bp,Ip),_n(bp,Ip,"esm2020");function e(t){try{const n=t.getProvider(ga).getImmediate();return{logEvent:(s,r,i)=>GC(n,s,r,i)}}catch(n){throw ze.create("interop-component-reg-failed",{reason:n})}}}WC();const QC={apiKey:"AIzaSyDXWUfod0b1iucUsp4rBpJ397AyB-EvYs4",authDomain:"maibot-pluginmarket.firebaseapp.com",projectId:"maibot-pluginmarket",storageBucket:"maibot-pluginmarket.firebasestorage.app",messagingSenderId:"992003266389",appId:"1:992003266389:web:cf4f80fa559ca02ef7c1dc",measurementId:"G-VW7EWVKKFQ"},U_=Fg(QC),nn=dR(U_);zC(U_);const Ms=class Ms{constructor(){Cn(this,"userId");Cn(this,"fingerprint");this.fingerprint=this.generateFingerprint(),this.userId=this.getOrCreateUserId()}static getInstance(){return Ms.instance||(Ms.instance=new Ms),Ms.instance}generateFingerprint(){const t=document.createElement("canvas"),n=t.getContext("2d");n&&(n.textBaseline="top",n.font="14px Arial",n.fillText("Browser fingerprint",2,2));const s=[navigator.userAgent,navigator.language,screen.width+"x"+screen.height,screen.colorDepth,new Date().getTimezoneOffset(),!!window.sessionStorage,!!window.localStorage,t.toDataURL()].join("|");return this.hashString(s)}hashString(t){let n=0;for(let s=0;s<t.length;s++){const r=t.charCodeAt(s);n=(n<<5)-n+r,n=n&n}return Math.abs(n).toString(36)}getOrCreateUserId(){let t=localStorage.getItem("plugin_market_user_id")||sessionStorage.getItem("plugin_market_user_id");if(!t){const n=Date.now(),s=Math.random().toString(36).substr(2,9),r=this.fingerprint.substr(0,8);t=`user_${n}_${s}_${r}`,localStorage.setItem("plugin_market_user_id",t),sessionStorage.setItem("plugin_market_user_id",t),localStorage.setItem("plugin_market_user_created",new Date().toISOString())}return t}getUserId(){return this.userId}getFingerprint(){return this.fingerprint}getUserSession(){const t=localStorage.getItem("plugin_market_user_created"),n=Date.now();return{userId:this.userId,fingerprint:this.fingerprint,isNewUser:!t||Date.now()-new Date(t).getTime()<24*60*60*1e3,createdAt:t,sessionStart:n}}isSameUser(t){if(this.userId===t)return!0;const n=this.userId.split("_").pop(),s=t.split("_").pop();return n===s}resetUserId(){return localStorage.removeItem("plugin_market_user_id"),sessionStorage.removeItem("plugin_market_user_id"),localStorage.removeItem("plugin_market_user_created"),this.userId=this.getOrCreateUserId(),this.userId}getUserStats(){const t=parseInt(localStorage.getItem("plugin_market_sessions")||"0")+1,n=localStorage.getItem("plugin_market_last_visit");return localStorage.setItem("plugin_market_sessions",t.toString()),localStorage.setItem("plugin_market_last_visit",new Date().toISOString()),{totalSessions:t,lastVisit:n,userAgent:navigator.userAgent,language:navigator.language,timezone:new Date().getTimezoneOffset()}}};Cn(Ms,"instance");let jc=Ms;const Sp=jc.getInstance(),Ls=class Ls{constructor(){Cn(this,"userId");this.userId=Sp.getUserId()}static getInstance(){return Ls.instance||(Ls.instance=new Ls),Ls.instance}async recordSiteVisit(){var t;try{const n=new Date().toISOString().split("T")[0],s=en(nn,"site_stats","general"),r=en(nn,"user_stats",this.userId);console.log("Recording site visit for user:",this.userId);const i=await pn(r),o=!i.exists()||((t=i.data())==null?void 0:t.lastVisitDate)!==n,l=Sp.getUserSession();await _e(r,{lastVisitDate:n,lastUpdated:Lt(),fingerprint:l.fingerprint,userAgent:navigator.userAgent,isNewUser:l.isNewUser},{merge:!0}),o&&(console.log("First visit today, updating site stats"),(await pn(s)).exists()?await _e(s,{totalVisits:$e(1),dailyVisits:$e(1),lastVisitDate:n,lastUpdated:Lt()},{merge:!0}):await _e(s,{totalVisits:1,dailyVisits:1,lastVisitDate:n,lastUpdated:Lt()})),console.log("Site visit recorded successfully")}catch(n){console.error("Error recording site visit:",n),console.error("Error details:",{userId:this.userId,errorCode:n==null?void 0:n.code,errorMessage:n==null?void 0:n.message})}}async getPluginStats(t){var n;try{const s=en(nn,"plugin_stats",t),r=await pn(s);if(r.exists()){const i=r.data();return{id:t,likes:i.likes||0,dislikes:i.dislikes||0,clickCount:i.clickCount||0,lastUpdated:((n=i.lastUpdated)==null?void 0:n.toDate())||new Date}}else return await _e(s,{...{likes:0,dislikes:0,clickCount:0},lastUpdated:Lt()}),{id:t,likes:0,dislikes:0,clickCount:0,lastUpdated:new Date}}catch(s){return console.error("Error getting plugin stats:",s),{id:t,likes:0,dislikes:0,clickCount:0,lastUpdated:new Date}}}async likePlugin(t){var n;try{const s=en(nn,"plugin_stats",t),r=en(nn,"user_actions",`${this.userId}_${t}`);(await pn(s)).exists()||await _e(s,{likes:0,dislikes:0,clickCount:0,lastUpdated:Lt()});const o=await pn(r);if(o.exists()){const l=(n=o.data())==null?void 0:n.action;l==="like"?(await kn(s,{likes:$e(-1),lastUpdated:Lt()}),await _e(r,{action:null,lastUpdated:Lt()},{merge:!0})):l==="dislike"?(await kn(s,{likes:$e(1),dislikes:$e(-1),lastUpdated:Lt()}),await _e(r,{action:"like",lastUpdated:Lt()},{merge:!0})):(await kn(s,{likes:$e(1),lastUpdated:Lt()}),await _e(r,{action:"like",lastUpdated:Lt()},{merge:!0}))}else await kn(s,{likes:$e(1),lastUpdated:Lt()}),await _e(r,{action:"like",lastUpdated:Lt()});console.log(`Plugin ${t} liked successfully`)}catch(s){console.error("Error liking plugin:",s),console.error("Error details:",{userId:this.userId,pluginId:t,errorCode:s==null?void 0:s.code,errorMessage:s==null?void 0:s.message})}}async dislikePlugin(t){var n;try{const s=en(nn,"plugin_stats",t),r=en(nn,"user_actions",`${this.userId}_${t}`);(await pn(s)).exists()||await _e(s,{likes:0,dislikes:0,clickCount:0,lastUpdated:Lt()});const o=await pn(r);if(o.exists()){const l=(n=o.data())==null?void 0:n.action;l==="dislike"?(await kn(s,{dislikes:$e(-1),lastUpdated:Lt()}),await _e(r,{action:null,lastUpdated:Lt()},{merge:!0})):l==="like"?(await kn(s,{likes:$e(-1),dislikes:$e(1),lastUpdated:Lt()}),await _e(r,{action:"dislike",lastUpdated:Lt()},{merge:!0})):(await kn(s,{dislikes:$e(1),lastUpdated:Lt()}),await _e(r,{action:"dislike",lastUpdated:Lt()},{merge:!0}))}else await kn(s,{dislikes:$e(1),lastUpdated:Lt()}),await _e(r,{action:"dislike",lastUpdated:Lt()});console.log(`Plugin ${t} disliked successfully`)}catch(s){console.error("Error disliking plugin:",s),console.error("Error details:",{userId:this.userId,pluginId:t,errorCode:s==null?void 0:s.code,errorMessage:s==null?void 0:s.message})}}async recordPluginClick(t,n="homepage"){try{const s=en(nn,"plugin_stats",t),r=en(nn,"plugin_clicks",`${t}_${Date.now()}_${Math.random().toString(36).substr(2,5)}`);(await pn(s)).exists()||await _e(s,{likes:0,dislikes:0,clickCount:0,lastUpdated:Lt()}),await kn(s,{clickCount:$e(1),lastUpdated:Lt()}),await _e(r,{pluginId:t,userId:this.userId,clickType:n,timestamp:Lt(),userAgent:navigator.userAgent,referrer:document.referrer}),console.log(`Plugin ${t} click recorded successfully`)}catch(s){console.error("Error recording plugin click:",s),console.error("Error details:",{userId:this.userId,pluginId:t,clickType:n,errorCode:s==null?void 0:s.code,errorMessage:s==null?void 0:s.message})}}async getUserAction(t){var n;try{const s=`${this.userId}_${t}`,r=en(nn,"user_actions",s),i=await pn(r);if(i.exists()){const o=((n=i.data())==null?void 0:n.action)||null;return console.log("User action found:",o),o}return console.log("No user action found, returning null"),null}catch(s){return console.error("Error getting user action:",s),console.error("Error details:",{userId:this.userId,pluginId:t,actionId:`${this.userId}_${t}`,errorCode:s==null?void 0:s.code,errorMessage:s==null?void 0:s.message}),null}}async getSiteStats(){var t;try{const n=en(nn,"site_stats","general"),s=await pn(n);if(s.exists()){const r=s.data();return{totalVisits:r.totalVisits||0,dailyVisits:r.dailyVisits||0,lastVisitDate:r.lastVisitDate||"",lastUpdated:((t=r.lastUpdated)==null?void 0:t.toDate())||new Date}}else return{totalVisits:0,dailyVisits:0,lastVisitDate:"",lastUpdated:new Date}}catch(n){return console.error("Error getting site stats:",n),{totalVisits:0,dailyVisits:0,lastVisitDate:"",lastUpdated:new Date}}}async getBatchPluginStats(t){const n={};try{const s=t.map(i=>this.getPluginStats(i));(await Promise.all(s)).forEach(i=>{n[i.id]=i})}catch(s){console.error("Error getting batch plugin stats:",s)}return n}getUserId(){return this.userId}};Cn(Ls,"instance");let qc=Ls;const rs=qc.getInstance(),JC={class:"card-body flex flex-col h-full"},XC={class:"flex items-start justify-between mb-2"},YC={class:"card-title text-lg font-bold text-primary truncate flex-1 mr-2"},ZC={class:"badge badge-outline badge-sm"},t2={class:"flex items-center gap-2 mb-3"},e2={class:"avatar placeholder"},n2={class:"bg-primary text-primary-content rounded-full w-6 h-6"},s2={class:"text-xs"},r2={class:"text-sm text-base-content/70"},i2={class:"text-sm text-base-content/80 mb-3 line-clamp-3 flex-grow"},o2={class:"flex flex-wrap gap-1 mb-3 min-h-[2rem]"},a2={class:"badge badge-primary badge-sm"},l2={class:"text-xs text-base-content/60 mb-3 h-4"},c2={key:0},u2={key:1},h2={class:"flex items-center justify-between mb-3 text-xs text-base-content/60"},f2={class:"flex items-center gap-2"},d2=["disabled"],p2=["disabled"],m2={class:"flex items-center gap-1"},g2={class:"card-actions justify-end mt-auto"},y2=cn({__name:"PluginCard",props:{plugin:{}},emits:["show-detail"],setup(e){const t=e,n=re(!1),s=Zt(()=>{var h;return((h=t.plugin.stats)==null?void 0:h.userAction)==="like"}),r=Zt(()=>{var h;return((h=t.plugin.stats)==null?void 0:h.userAction)==="dislike"}),i=Zt(()=>(t.plugin.manifest.keywords||[]).slice(0,3)),o=h=>h.split(" ").map(d=>d.charAt(0)).join("").toUpperCase().slice(0,2),l=async()=>{if(!n.value){n.value=!0;try{await rs.likePlugin(t.plugin.id),t.plugin.stats||(t.plugin.stats={likes:0,dislikes:0,clickCount:0}),t.plugin.stats.userAction==="like"?(t.plugin.stats.likes--,t.plugin.stats.userAction=null):t.plugin.stats.userAction==="dislike"?(t.plugin.stats.likes++,t.plugin.stats.dislikes--,t.plugin.stats.userAction="like"):(t.plugin.stats.likes++,t.plugin.stats.userAction="like")}catch(h){console.error("Error handling like:",h)}finally{n.value=!1}}},c=async()=>{if(!n.value){n.value=!0;try{await rs.dislikePlugin(t.plugin.id),t.plugin.stats||(t.plugin.stats={likes:0,dislikes:0,clickCount:0}),t.plugin.stats.userAction==="dislike"?(t.plugin.stats.dislikes--,t.plugin.stats.userAction=null):t.plugin.stats.userAction==="like"?(t.plugin.stats.likes--,t.plugin.stats.dislikes++,t.plugin.stats.userAction="dislike"):(t.plugin.stats.dislikes++,t.plugin.stats.userAction="dislike")}catch(h){console.error("Error handling dislike:",h)}finally{n.value=!1}}},u=async(h,d="homepage")=>{try{await rs.recordPluginClick(t.plugin.id,d),t.plugin.stats||(t.plugin.stats={likes:0,dislikes:0,clickCount:0}),t.plugin.stats.clickCount++,window.open(h,"_blank","noopener,noreferrer")}catch(m){console.error("Error recording click:",m),window.open(h,"_blank","noopener,noreferrer")}};return Kn(async()=>{try{const h=await rs.getUserAction(t.plugin.id);t.plugin.stats&&(t.plugin.stats.userAction=h)}catch(h){console.error("Error getting user action:",h)}}),(h,d)=>{var m,y,T;return gt(),_t("div",{class:"card bg-base-100 shadow-lg card-hover cursor-pointer transform transition-all duration-300 hover:shadow-xl hover:scale-105 h-full",onClick:d[2]||(d[2]=C=>h.$emit("show-detail",h.plugin))},[k("div",JC,[k("div",XC,[k("h2",YC,yt(h.plugin.manifest.name),1),k("div",ZC," v"+yt(h.plugin.manifest.version),1)]),k("div",t2,[k("div",e2,[k("div",n2,[k("span",s2,yt(o(h.plugin.manifest.author.name)),1)])]),k("span",r2,yt(h.plugin.manifest.author.name),1)]),k("p",i2,yt(h.plugin.manifest.description),1),k("div",o2,[k("div",a2,yt(h.plugin.categoryDisplay),1),(gt(!0),_t(Ve,null,Ra(i.value,C=>(gt(),_t("div",{key:C,class:"badge badge-ghost badge-sm"},yt(C),1))),128))]),k("div",l2,[k("span",null,"兼容版本: "+yt(h.plugin.manifest.host_application.min_version),1),h.plugin.manifest.host_application.max_version?(gt(),_t("span",c2," - "+yt(h.plugin.manifest.host_application.max_version),1)):(gt(),_t("span",u2," - 最新版本"))]),k("div",h2,[k("div",f2,[k("button",{onClick:pr(l,["stop"]),class:rn(["btn btn-ghost btn-xs gap-1 transition-colors",{"text-success":s.value}]),disabled:n.value},[d[3]||(d[3]=k("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3",fill:"currentColor",viewBox:"0 0 24 24"},[k("path",{d:"M7.493 18.75c-.425 0-.82-.236-.975-.632A7.48 7.48 0 016 15.375c0-1.75.599-3.358 1.602-4.634.151-.192.373-.309.6-.397.473-.183.89-.514 1.212-.924a9.042 9.042 0 012.861-2.4c.723-.384 1.35-.956 1.653-1.715a4.498 4.498 0 00.322-1.672V3a.75.75 0 01.75-.75 2.25 2.25 0 012.25 2.25c0 1.152-.26 2.243-.723 3.218-.266.558.107 1.282.725 1.282h3.126c1.026 0 1.945.694 2.054 1.715.045.422.068.85.068 1.285a11.95 11.95 0 01-2.649 7.521c-.388.482-.987.729-1.605.729H14.23c-.483 0-.964-.078-1.423-.23l-3.114-1.04a4.501 4.501 0 00-1.423-.23h-.777zM2.331 10.977a11.969 11.969 0 00-.831 4.398 12 12 0 00.52 3.507c.26.85 1.084 1.368 1.973 1.368H4.9c.445 0 .72-.498.523-.898a8.963 8.963 0 01-.924-3.977c0-1.708.476-3.305 1.302-4.666.245-.403-.028-.959-.5-.959H4.25c-.832 0-1.612.453-1.918 1.227z"})],-1)),Fs(" "+yt(((m=h.plugin.stats)==null?void 0:m.likes)||0),1)],10,d2),k("button",{onClick:pr(c,["stop"]),class:rn(["btn btn-ghost btn-xs gap-1 transition-colors",{"text-error":r.value}]),disabled:n.value},[d[4]||(d[4]=k("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3",fill:"currentColor",viewBox:"0 0 24 24"},[k("path",{d:"M15.73 5.25h1.035A7.465 7.465 0 0118 9.375a7.465 7.465 0 01-1.235 4.125h-.148c-.806 0-1.534.446-2.031 1.08a9.04 9.04 0 01-2.861 2.4c-.723.384-1.35.956-1.653 1.715a4.498 4.498 0 00-.322 1.672V21a.75.75 0 01-.75.75 2.25 2.25 0 01-2.25-2.25c0-1.152.26-2.243.723-3.218C7.74 15.724 7.366 15 6.748 15H3.622c-1.026 0-1.945-.694-2.054-1.715A12.134 12.134 0 011.5 12c0-2.848.992-5.464 2.649-7.521C4.537 3.997 5.136 3.75 5.754 3.75h1.317c.483 0 .964.078 1.423.23l3.114 1.04a4.501 4.501 0 001.423.23zM21.669 13.023c.536-1.362.831-2.845.831-4.398 0-1.22-.182-2.398-.52-3.507-.26-.85-1.084-1.368-1.973-1.368H19.1c-.445 0-.72.498-.523.898.591 1.2.924 2.55.924 3.977a8.959 8.959 0 01-1.302 4.666c-.245.403.028.959.5.959h1.053c.832 0 1.612-.453 1.918-1.227z"})],-1)),Fs(" "+yt(((y=h.plugin.stats)==null?void 0:y.dislikes)||0),1)],10,p2)]),k("div",m2,[d[5]||(d[5]=k("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[k("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),k("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)),k("span",null,yt(((T=h.plugin.stats)==null?void 0:T.clickCount)||0),1)])]),k("div",g2,[h.plugin.manifest.homepage_url?(gt(),_t("button",{key:0,onClick:d[0]||(d[0]=pr(C=>u(h.plugin.manifest.homepage_url,"homepage"),["stop"])),class:"btn btn-outline btn-sm transition-all duration-200 hover:scale-105"},[...d[6]||(d[6]=[k("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[k("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})],-1),Fs(" 主页 ",-1)])])):Ce("",!0),h.plugin.manifest.repository_url?(gt(),_t("button",{key:1,onClick:d[1]||(d[1]=pr(C=>u(h.plugin.manifest.repository_url,"repository"),["stop"])),class:"btn btn-primary btn-sm transition-all duration-200 hover:scale-105"},[...d[7]||(d[7]=[k("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"currentColor",viewBox:"0 0 24 24"},[k("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})],-1),Fs(" 源码 ",-1)])])):Ce("",!0)])])])}}}),_2=Pr(y2,[["__scopeId","data-v-8ebd841d"]]),v2={class:"join w-full max-w-md"},w2={class:"relative flex-1"},E2=cn({__name:"SearchBar",props:{modelValue:{}},emits:["update:modelValue","search"],setup(e,{emit:t}){const n=e,s=t,r=re(n.modelValue),i=()=>{s("update:modelValue",r.value),s("search",r.value)},o=()=>{r.value="",i()};return Hs(()=>n.modelValue,l=>{r.value=l}),(l,c)=>(gt(),_t("div",v2,[k("div",w2,[am(k("input",{"onUpdate:modelValue":c[0]||(c[0]=u=>r.value=u),type:"text",placeholder:"搜索插件名称、描述、作者或关键词...",class:"input input-bordered join-item w-full pr-10",onInput:i,onKeyup:NE(i,["enter"])},null,544),[[xE,r.value]]),c[1]||(c[1]=k("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 absolute right-3 top-1/2 transform -translate-y-1/2 text-base-content/40",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[k("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))]),r.value?(gt(),_t("button",{key:0,onClick:o,class:"btn btn-outline join-item",title:"清除搜索"},[...c[2]||(c[2]=[k("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[k("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])):Ce("",!0)]))}}),T2={class:"dropdown dropdown-bottom"},A2={tabindex:"0",role:"button",class:"btn btn-outline"},b2={tabindex:"0",class:"dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-auto min-w-52 max-w-xs overflow-y-auto"},I2=["onClick"],S2={class:"flex-1 text-left"},R2={key:0,class:"badge badge-sm flex-shrink-0 ml-2"},C2=cn({__name:"CategoryFilter",props:{categories:{},plugins:{},modelValue:{}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,s=t,r=Zt(()=>n.modelValue),i=l=>{s("update:modelValue",l)},o=l=>l==="全部"?n.plugins.length:n.plugins.filter(c=>c.categoryDisplay===l).length;return(l,c)=>(gt(),_t("div",T2,[k("div",A2,[c[0]||(c[0]=k("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[k("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.707A1 1 0 013 7V4z"})],-1)),Fs(" "+yt(r.value)+" ",1),c[1]||(c[1]=k("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[k("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))]),k("ul",b2,[(gt(!0),_t(Ve,null,Ra(l.categories,u=>(gt(),_t("li",{key:u,class:"w-full"},[k("a",{class:rn([{active:u===r.value},"flex items-center justify-between w-full whitespace-nowrap"]),onClick:h=>i(u)},[k("span",S2,yt(u),1),u!=="全部"?(gt(),_t("span",R2,yt(o(u)),1)):Ce("",!0)],10,I2)]))),128))])]))}}),P2=Pr(C2,[["__scopeId","data-v-75554bb1"]]),V2={class:"flex flex-col items-center justify-center py-12"},x2={class:"text-center space-y-2"},k2={class:"text-lg font-medium text-primary animate-pulse"},D2={key:0,class:"w-64 mt-6"},O2=cn({__name:"LoadingSpinner",props:{message:{default:"加载中..."},showProgress:{type:Boolean,default:!1}},setup(e){yE(r=>({ca4e3296:n.value+"%"}));const t=e,n=re(0);let s=null;return Kn(()=>{t.showProgress&&(s=setInterval(()=>{n.value<90&&(n.value+=Math.random()*10)},500))}),Ki(()=>{s&&clearInterval(s)}),(r,i)=>(gt(),_t("div",V2,[i[2]||(i[2]=k("div",{class:"relative mb-6"},[k("div",{class:"w-16 h-16 border-4 border-primary/20 border-t-primary rounded-full animate-spin"}),k("div",{class:"absolute inset-2 w-12 h-12 bg-primary/10 rounded-full animate-pulse"}),k("div",{class:"absolute inset-1/2 w-2 h-2 bg-primary rounded-full transform -translate-x-1/2 -translate-y-1/2 animate-ping"})],-1)),k("div",x2,[k("p",k2,yt(r.message),1),i[0]||(i[0]=k("div",{class:"flex space-x-1 justify-center"},[k("div",{class:"w-2 h-2 bg-primary rounded-full animate-bounce",style:{"animation-delay":"0ms"}}),k("div",{class:"w-2 h-2 bg-primary rounded-full animate-bounce",style:{"animation-delay":"150ms"}}),k("div",{class:"w-2 h-2 bg-primary rounded-full animate-bounce",style:{"animation-delay":"300ms"}})],-1))]),r.showProgress?(gt(),_t("div",D2,[...i[1]||(i[1]=[k("div",{class:"w-full bg-base-300 rounded-full h-2"},[k("div",{class:"bg-primary h-2 rounded-full transition-all duration-300 ease-out loading-progress"})],-1)])])):Ce("",!0)]))}}),N2=Pr(O2,[["__scopeId","data-v-56f61c32"]]),M2={class:"relative w-6 h-6 overflow-hidden"},L2=cn({__name:"ThemeToggle",emits:["theme-changed"],setup(e,{emit:t}){const n=t,s=re(!1),r=re(!1),i=async()=>{r.value=!0,await new Promise(l=>setTimeout(l,150)),s.value=!s.value;const o=s.value?"dark":"light";document.documentElement.setAttribute("data-theme",o),localStorage.setItem("theme",o),n("theme-changed",s.value),setTimeout(()=>{r.value=!1},350)};return Kn(()=>{const o=localStorage.getItem("theme"),l=window.matchMedia("(prefers-color-scheme: dark)").matches,c=o?o==="dark":l;s.value=c;const u=c?"dark":"light";document.documentElement.setAttribute("data-theme",u),n("theme-changed",s.value)}),(o,l)=>(gt(),_t("button",{onClick:i,class:rn(["btn btn-circle btn-ghost theme-toggle",{"theme-switching":r.value}]),title:"切换主题"},[k("div",M2,[(gt(),_t("svg",{xmlns:"http://www.w3.org/2000/svg",class:rn(["absolute inset-0 w-6 h-6 transition-all duration-500 ease-in-out sun-icon",{"rotate-90 opacity-0":s.value,"rotate-0 opacity-100":!s.value}]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...l[0]||(l[0]=[k("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"},null,-1)])],2)),(gt(),_t("svg",{xmlns:"http://www.w3.org/2000/svg",class:rn(["absolute inset-0 w-6 h-6 transition-all duration-500 ease-in-out moon-icon",{"rotate-0 opacity-100":s.value,"-rotate-90 opacity-0":!s.value}]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...l[1]||(l[1]=[k("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"},null,-1)])],2))])],2))}}),F2=Pr(L2,[["__scopeId","data-v-e034e2d7"]]),U2={class:"modal-container"},B2={class:"modal-header"},$2={class:"header-info"},j2={class:"title-row"},q2={class:"modal-title"},H2={class:"badges"},z2={class:"version-badge"},K2={class:"category-badge"},G2={class:"author-row"},W2={class:"author-avatar"},Q2={class:"author-name"},J2={key:0,class:"license-badge"},X2={class:"modal-body"},Y2={class:"info-section"},Z2={class:"description"},tP={class:"info-section"},eP={class:"version-grid"},nP={class:"version-item"},sP={class:"version-value min-version"},rP={class:"version-item"},iP={class:"version-value max-version"},oP={key:0,class:"info-section"},aP={class:"keywords"},lP={key:1,class:"info-section"},cP={class:"language-info"},uP={class:"language-tag"},hP={key:0,class:"multilingual"},fP={class:"info-section"},dP={class:"plugin-info-grid"},pP={class:"info-item"},mP={class:"info-item"},gP={class:"plugin-id"},yP={class:"modal-footer"},_P=cn({__name:"PluginDetailModal",props:{plugin:{},show:{type:Boolean}},emits:["close"],setup(e,{emit:t}){const n=e,s=t,r=h=>h.split(" ").map(d=>d.charAt(0)).join("").toUpperCase().slice(0,2),i=h=>{window.open(h,"_blank","noopener,noreferrer")},o=h=>{h.preventDefault()},l=()=>{document.body.style.overflow="hidden",document.body.style.paddingRight="0px",document.addEventListener("touchmove",o,{passive:!1}),document.addEventListener("wheel",o,{passive:!1})},c=()=>{document.body.style.overflow="",document.body.style.paddingRight="",document.removeEventListener("touchmove",o),document.removeEventListener("wheel",o)},u=h=>{h.key==="Escape"&&n.show&&s("close")};return Hs(()=>n.show,h=>{h?(l(),document.addEventListener("keydown",u)):(c(),document.removeEventListener("keydown",u))},{immediate:!0}),Ki(()=>{c(),document.removeEventListener("keydown",u)}),(h,d)=>(gt(),Va(tw,{to:"body"},[Kt(uE,{name:"modal",appear:""},{default:nu(()=>{var m;return[h.show?(gt(),_t("div",{key:0,class:"modal-overlay",onClick:d[5]||(d[5]=pr(y=>h.$emit("close"),["self"]))},[k("div",U2,[k("div",{class:"modal-content",onClick:d[4]||(d[4]=pr(()=>{},["stop"]))},[k("header",B2,[k("div",$2,[k("div",j2,[k("h2",q2,yt(h.plugin.manifest.name),1),k("div",H2,[k("span",z2,"v"+yt(h.plugin.manifest.version),1),k("span",K2,yt(h.plugin.categoryDisplay),1)])]),k("div",G2,[k("div",W2,yt(r(h.plugin.manifest.author.name)),1),k("span",Q2,yt(h.plugin.manifest.author.name),1),h.plugin.manifest.license?(gt(),_t("span",J2,yt(h.plugin.manifest.license),1)):Ce("",!0)])]),k("button",{class:"close-button",onClick:d[0]||(d[0]=y=>h.$emit("close")),"aria-label":"关闭"},[...d[6]||(d[6]=[k("svg",{viewBox:"0 0 24 24",width:"24",height:"24"},[k("path",{fill:"none",d:"M18 6L6 18M6 6l12 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1)])])]),k("main",X2,[k("section",Y2,[d[7]||(d[7]=k("h3",{class:"section-title"},"📝 插件描述",-1)),k("p",Z2,yt(h.plugin.manifest.description),1)]),k("section",tP,[d[10]||(d[10]=k("h3",{class:"section-title"},"🔧 版本兼容性",-1)),k("div",eP,[k("div",nP,[d[8]||(d[8]=k("label",null,"最低版本",-1)),k("span",sP,yt(h.plugin.manifest.host_application.min_version),1)]),k("div",rP,[d[9]||(d[9]=k("label",null,"最高版本",-1)),k("span",iP,yt(h.plugin.manifest.host_application.max_version||"最新版本"),1)])])]),(m=h.plugin.manifest.keywords)!=null&&m.length?(gt(),_t("section",oP,[d[11]||(d[11]=k("h3",{class:"section-title"},"🏷️ 关键词",-1)),k("div",aP,[(gt(!0),_t(Ve,null,Ra(h.plugin.manifest.keywords,y=>(gt(),_t("span",{key:y,class:"keyword-tag"},yt(y),1))),128))])])):Ce("",!0),h.plugin.manifest.default_locale?(gt(),_t("section",lP,[d[12]||(d[12]=k("h3",{class:"section-title"},"🌐 语言支持",-1)),k("div",cP,[k("span",uP,yt(h.plugin.manifest.default_locale),1),h.plugin.manifest.locales_path?(gt(),_t("span",hP," 支持多语言 ")):Ce("",!0)])])):Ce("",!0),k("section",fP,[d[15]||(d[15]=k("h3",{class:"section-title"},"📊 插件信息",-1)),k("div",dP,[k("div",pP,[d[13]||(d[13]=k("label",null,"清单版本",-1)),k("span",null,yt(h.plugin.manifest.manifest_version),1)]),k("div",mP,[d[14]||(d[14]=k("label",null,"插件ID",-1)),k("span",gP,yt(h.plugin.id),1)])])])]),k("footer",yP,[k("button",{class:"action-button secondary",onClick:d[1]||(d[1]=y=>h.$emit("close"))}," 关闭 "),h.plugin.manifest.homepage_url?(gt(),_t("button",{key:0,class:"action-button tertiary",onClick:d[2]||(d[2]=y=>i(h.plugin.manifest.homepage_url))},[...d[16]||(d[16]=[k("svg",{viewBox:"0 0 24 24",width:"16",height:"16"},[k("path",{fill:"none",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),k("span",null,"访问主页",-1)])])):Ce("",!0),h.plugin.manifest.repository_url?(gt(),_t("button",{key:1,class:"action-button primary",onClick:d[3]||(d[3]=y=>i(h.plugin.manifest.repository_url))},[...d[17]||(d[17]=[k("svg",{viewBox:"0 0 24 24",width:"16",height:"16"},[k("path",{fill:"currentColor",d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})],-1),k("span",null,"查看源码",-1)])])):Ce("",!0)])])])])):Ce("",!0)]}),_:1})]))}}),vP=Pr(_P,[["__scopeId","data-v-f145f416"]]),wP={class:"min-h-screen bg-base-200"},EP={class:"navbar bg-base-100 shadow-lg"},TP={class:"container mx-auto"},AP={class:"flex-1"},bP={class:"flex-none"},IP={class:"container mx-auto px-4 py-8"},SP={class:"hero mb-8 fade-in"},RP={class:"hero-content text-center"},CP={class:"max-w-md slide-up"},PP={class:"stats stats-horizontal shadow scale-in"},VP={class:"stat"},xP={class:"stat-value text-primary"},kP={class:"stat"},DP={class:"stat-value text-secondary"},OP={class:"stat"},NP={class:"stat-value text-accent"},MP={class:"flex flex-col lg:flex-row gap-4 mb-8 items-center justify-between"},LP={class:"flex flex-col sm:flex-row gap-4 items-center"},FP={class:"text-sm text-base-content/60"},UP={key:0,class:"flex justify-center"},BP={key:1,class:"alert alert-error"},$P={key:2,class:"text-center py-12"},jP={class:"text-base-content/60 mb-4"},qP={key:3,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 auto-rows-fr"},HP=cn({__name:"Home",setup(e){const t=re([]),n=re(!1),s=re(""),r=re(""),i=re("全部"),o=re(null),l=re({totalVisits:0,dailyVisits:0}),c=_c.getInstance(),u=Zt(()=>c.getAllCategories()),h=Zt(()=>t.value.length),d=Zt(()=>Math.max(0,u.value.length-1)),m=Zt(()=>{let G=t.value;return i.value!=="全部"&&(G=c.getPluginsByCategory(i.value)),r.value.trim()&&(G=c.searchPlugins(r.value)),G}),y=async G=>{try{const K=G.map(_=>_.id),[S,v]=await Promise.all([rs.getBatchPluginStats(K),Promise.all(K.map(_=>rs.getUserAction(_)))]);G.forEach((_,A)=>{const R=S[_.id];_.stats={likes:(R==null?void 0:R.likes)||0,dislikes:(R==null?void 0:R.dislikes)||0,clickCount:(R==null?void 0:R.clickCount)||0,userAction:v[A]}})}catch(K){console.error("Error loading plugin stats:",K)}},T=async()=>{try{n.value=!0,s.value="";const G=await c.fetchPlugins();t.value=G,await y(t.value)}catch(G){s.value=G instanceof Error?G.message:"加载失败"}finally{n.value=!1}},C=async()=>{try{const G=await rs.getSiteStats();l.value={totalVisits:G.totalVisits,dailyVisits:G.dailyVisits}}catch(G){console.error("Error loading site stats:",G)}},P=G=>{r.value=G,G.trim()&&(i.value="全部")},U=()=>{r.value=""},N=G=>{o.value=G},B=()=>{o.value=null},H=G=>{console.log("主题已切换到:",G?"暗色":"明亮")};return Kn(async()=>{try{await rs.recordSiteVisit(),await Promise.all([T(),C()])}catch(G){console.error("Error during initialization:",G)}}),(G,K)=>{const S=pw("router-link");return gt(),_t("div",wP,[k("header",EP,[k("div",TP,[k("div",AP,[Kt(S,{to:"/",class:"btn btn-ghost text-xl"},{default:nu(()=>[...K[2]||(K[2]=[k("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[k("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})],-1),Fs(" 麦麦插件商店 ",-1)])]),_:1})]),k("div",bP,[Kt(F2,{onThemeChanged:H})])])]),k("main",IP,[k("div",SP,[k("div",RP,[k("div",CP,[K[6]||(K[6]=k("h1",{class:"text-4xl font-bold gradient-bg bg-clip-text text-transparent"}," 麦麦插件商店 ",-1)),K[7]||(K[7]=k("p",{class:"py-6 text-base-content/70"}," 发现并获取丰富的麦麦QQ机器人插件，让你的机器人更加强大 ",-1)),k("div",PP,[k("div",VP,[K[3]||(K[3]=k("div",{class:"stat-title"},"插件总数",-1)),k("div",xP,yt(h.value),1)]),k("div",kP,[K[4]||(K[4]=k("div",{class:"stat-title"},"分类数量",-1)),k("div",DP,yt(d.value),1)]),k("div",OP,[K[5]||(K[5]=k("div",{class:"stat-title"},"总访问量",-1)),k("div",NP,yt(l.value.totalVisits),1)])])])])]),k("div",MP,[k("div",LP,[Kt(P2,{modelValue:i.value,"onUpdate:modelValue":K[0]||(K[0]=v=>i.value=v),categories:u.value,plugins:t.value},null,8,["modelValue","categories","plugins"]),k("div",FP," 显示 "+yt(m.value.length)+" 个插件 ",1)]),Kt(E2,{modelValue:r.value,"onUpdate:modelValue":K[1]||(K[1]=v=>r.value=v),onSearch:P},null,8,["modelValue"])]),n.value?(gt(),_t("div",UP,[Kt(N2,{message:"正在加载插件列表...",showProgress:!0})])):s.value?(gt(),_t("div",BP,[K[8]||(K[8]=k("svg",{xmlns:"http://www.w3.org/2000/svg",class:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24"},[k("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),k("span",null,yt(s.value),1),k("button",{onClick:T,class:"btn btn-sm"},"重试")])):m.value.length===0?(gt(),_t("div",$P,[K[9]||(K[9]=k("div",{class:"text-6xl mb-4"},"🔍",-1)),K[10]||(K[10]=k("h3",{class:"text-xl font-semibold mb-2"},"没有找到插件",-1)),k("p",jP,yt(r.value?"尝试使用不同的关键词搜索":"当前分类下暂无插件"),1),r.value?(gt(),_t("button",{key:0,onClick:U,class:"btn btn-primary"}," 清除搜索 ")):Ce("",!0)])):(gt(),_t("div",qP,[(gt(!0),_t(Ve,null,Ra(m.value,(v,_)=>(gt(),_t("div",{key:v.id,class:"grid-item flex",style:Hi({"animation-delay":_*.1+"s"})},[Kt(_2,{plugin:v,onShowDetail:N,class:"w-full"},null,8,["plugin"])],4))),128))]))]),o.value?(gt(),Va(vP,{key:0,plugin:o.value,show:!0,onClose:B},null,8,["plugin"])):Ce("",!0),K[11]||(K[11]=k("footer",{class:"footer footer-center p-10 bg-base-200 text-base-content"},[k("aside",null,[k("p",{class:"font-bold"}," 麦麦插件商店 "),k("p",null,"为麦麦QQ机器人提供插件展示和分发服务"),k("p",null,"Copyright © 2024 - All right reserved")])],-1))])}}}),zP=$0({history:y0("/plugin-repo/"),routes:[{path:"/",name:"home",component:HP}]});FE(J0).use(zP).mount("#app");
