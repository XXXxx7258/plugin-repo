var yv=Object.defineProperty;var _v=(e,t,n)=>t in e?yv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Vn=(e,t,n)=>_v(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();/**
* @vue/shared v3.5.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Xc(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const Mt={},gr=[],an=()=>{},Lp=()=>!1,Aa=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Yc=e=>e.startsWith("onUpdate:"),le=Object.assign,Zc=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},vv=Object.prototype.hasOwnProperty,Dt=(e,t)=>vv.call(e,t),ft=Array.isArray,yr=e=>Gi(e)==="[object Map]",Ia=e=>Gi(e)==="[object Set]",tf=e=>Gi(e)==="[object Date]",vt=e=>typeof e=="function",Yt=e=>typeof e=="string",Sn=e=>typeof e=="symbol",Lt=e=>e!==null&&typeof e=="object",Fp=e=>(Lt(e)||vt(e))&&vt(e.then)&&vt(e.catch),Up=Object.prototype.toString,Gi=e=>Up.call(e),wv=e=>Gi(e).slice(8,-1),Bp=e=>Gi(e)==="[object Object]",tu=e=>Yt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,li=Xc(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Sa=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Ev=/-(\w)/g,nn=Sa(e=>e.replace(Ev,(t,n)=>n?n.toUpperCase():"")),bv=/\B([A-Z])/g,Ts=Sa(e=>e.replace(bv,"-$1").toLowerCase()),Ra=Sa(e=>e.charAt(0).toUpperCase()+e.slice(1)),Rl=Sa(e=>e?`on${Ra(e)}`:""),ls=(e,t)=>!Object.is(e,t),Mo=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},$p=(e,t,n,s=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:s,value:n})},Jo=e=>{const t=parseFloat(e);return isNaN(t)?e:t},Tv=e=>{const t=Yt(e)?Number(e):NaN;return isNaN(t)?e:t};let ef;const Ca=()=>ef||(ef=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Wi(e){if(ft(e)){const t={};for(let n=0;n<e.length;n++){const s=e[n],r=Yt(s)?Rv(s):Wi(s);if(r)for(const i in r)t[i]=r[i]}return t}else if(Yt(e)||Lt(e))return e}const Av=/;(?![^(]*\))/g,Iv=/:([^]+)/,Sv=/\/\*[^]*?\*\//g;function Rv(e){const t={};return e.replace(Sv,"").split(Av).forEach(n=>{if(n){const s=n.split(Iv);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function tn(e){let t="";if(Yt(e))t=e;else if(ft(e))for(let n=0;n<e.length;n++){const s=tn(e[n]);s&&(t+=s+" ")}else if(Lt(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const Cv="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Pv=Xc(Cv);function jp(e){return!!e||e===""}function xv(e,t){if(e.length!==t.length)return!1;let n=!0;for(let s=0;n&&s<e.length;s++)n=Pa(e[s],t[s]);return n}function Pa(e,t){if(e===t)return!0;let n=tf(e),s=tf(t);if(n||s)return n&&s?e.getTime()===t.getTime():!1;if(n=Sn(e),s=Sn(t),n||s)return e===t;if(n=ft(e),s=ft(t),n||s)return n&&s?xv(e,t):!1;if(n=Lt(e),s=Lt(t),n||s){if(!n||!s)return!1;const r=Object.keys(e).length,i=Object.keys(t).length;if(r!==i)return!1;for(const o in e){const l=e.hasOwnProperty(o),c=t.hasOwnProperty(o);if(l&&!c||!l&&c||!Pa(e[o],t[o]))return!1}}return String(e)===String(t)}function kv(e,t){return e.findIndex(n=>Pa(n,t))}const qp=e=>!!(e&&e.__v_isRef===!0),_t=e=>Yt(e)?e:e==null?"":ft(e)||Lt(e)&&(e.toString===Up||!vt(e.toString))?qp(e)?_t(e.value):JSON.stringify(e,Hp,2):String(e),Hp=(e,t)=>qp(t)?Hp(e,t.value):yr(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[s,r],i)=>(n[Cl(s,i)+" =>"]=r,n),{})}:Ia(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Cl(n))}:Sn(t)?Cl(t):Lt(t)&&!ft(t)&&!Bp(t)?String(t):t,Cl=(e,t="")=>{var n;return Sn(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};function Vv(e){return e==null?"initial":typeof e=="string"?e===""?" ":e:String(e)}/**
* @vue/reactivity v3.5.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Le;class Dv{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Le,!t&&Le&&(this.index=(Le.scopes||(Le.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=Le;try{return Le=this,t()}finally{Le=n}}}on(){++this._on===1&&(this.prevScope=Le,Le=this)}off(){this._on>0&&--this._on===0&&(Le=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function Nv(){return Le}let Ft;const Pl=new WeakSet;class zp{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Le&&Le.active&&Le.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Pl.has(this)&&(Pl.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Gp(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,nf(this),Wp(this);const t=Ft,n=ln;Ft=this,ln=!0;try{return this.fn()}finally{Qp(this),Ft=t,ln=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)su(t);this.deps=this.depsTail=void 0,nf(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Pl.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){sc(this)&&this.run()}get dirty(){return sc(this)}}let Kp=0,ci,ui;function Gp(e,t=!1){if(e.flags|=8,t){e.next=ui,ui=e;return}e.next=ci,ci=e}function eu(){Kp++}function nu(){if(--Kp>0)return;if(ui){let t=ui;for(ui=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;ci;){let t=ci;for(ci=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(s){e||(e=s)}t=n}}if(e)throw e}function Wp(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Qp(e){let t,n=e.depsTail,s=n;for(;s;){const r=s.prevDep;s.version===-1?(s===n&&(n=r),su(s),Ov(s)):t=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=r}e.deps=t,e.depsTail=n}function sc(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Jp(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Jp(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Si)||(e.globalVersion=Si,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!sc(e))))return;e.flags|=2;const t=e.dep,n=Ft,s=ln;Ft=e,ln=!0;try{Wp(e);const r=e.fn(e._value);(t.version===0||ls(r,e._value))&&(e.flags|=128,e._value=r,t.version++)}catch(r){throw t.version++,r}finally{Ft=n,ln=s,Qp(e),e.flags&=-3}}function su(e,t=!1){const{dep:n,prevSub:s,nextSub:r}=e;if(s&&(s.nextSub=r,e.prevSub=void 0),r&&(r.prevSub=s,e.nextSub=void 0),n.subs===e&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)su(i,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function Ov(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let ln=!0;const Xp=[];function $n(){Xp.push(ln),ln=!1}function jn(){const e=Xp.pop();ln=e===void 0?!0:e}function nf(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=Ft;Ft=void 0;try{t()}finally{Ft=n}}}let Si=0;class Mv{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ru{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Ft||!ln||Ft===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Ft)n=this.activeLink=new Mv(Ft,this),Ft.deps?(n.prevDep=Ft.depsTail,Ft.depsTail.nextDep=n,Ft.depsTail=n):Ft.deps=Ft.depsTail=n,Yp(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=Ft.depsTail,n.nextDep=void 0,Ft.depsTail.nextDep=n,Ft.depsTail=n,Ft.deps===n&&(Ft.deps=s)}return n}trigger(t){this.version++,Si++,this.notify(t)}notify(t){eu();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{nu()}}}function Yp(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let s=t.deps;s;s=s.nextDep)Yp(s)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const rc=new WeakMap,zs=Symbol(""),ic=Symbol(""),Ri=Symbol("");function Te(e,t,n){if(ln&&Ft){let s=rc.get(e);s||rc.set(e,s=new Map);let r=s.get(n);r||(s.set(n,r=new ru),r.map=s,r.key=n),r.track()}}function Un(e,t,n,s,r,i){const o=rc.get(e);if(!o){Si++;return}const l=c=>{c&&c.trigger()};if(eu(),t==="clear")o.forEach(l);else{const c=ft(e),u=c&&tu(n);if(c&&n==="length"){const h=Number(s);o.forEach((d,m)=>{(m==="length"||m===Ri||!Sn(m)&&m>=h)&&l(d)})}else switch((n!==void 0||o.has(void 0))&&l(o.get(n)),u&&l(o.get(Ri)),t){case"add":c?u&&l(o.get("length")):(l(o.get(zs)),yr(e)&&l(o.get(ic)));break;case"delete":c||(l(o.get(zs)),yr(e)&&l(o.get(ic)));break;case"set":yr(e)&&l(o.get(zs));break}}nu()}function lr(e){const t=kt(e);return t===e?t:(Te(t,"iterate",Ri),en(e)?t:t.map(pe))}function xa(e){return Te(e=kt(e),"iterate",Ri),e}const Lv={__proto__:null,[Symbol.iterator](){return xl(this,Symbol.iterator,pe)},concat(...e){return lr(this).concat(...e.map(t=>ft(t)?lr(t):t))},entries(){return xl(this,"entries",e=>(e[1]=pe(e[1]),e))},every(e,t){return Dn(this,"every",e,t,void 0,arguments)},filter(e,t){return Dn(this,"filter",e,t,n=>n.map(pe),arguments)},find(e,t){return Dn(this,"find",e,t,pe,arguments)},findIndex(e,t){return Dn(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Dn(this,"findLast",e,t,pe,arguments)},findLastIndex(e,t){return Dn(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Dn(this,"forEach",e,t,void 0,arguments)},includes(...e){return kl(this,"includes",e)},indexOf(...e){return kl(this,"indexOf",e)},join(e){return lr(this).join(e)},lastIndexOf(...e){return kl(this,"lastIndexOf",e)},map(e,t){return Dn(this,"map",e,t,void 0,arguments)},pop(){return Yr(this,"pop")},push(...e){return Yr(this,"push",e)},reduce(e,...t){return sf(this,"reduce",e,t)},reduceRight(e,...t){return sf(this,"reduceRight",e,t)},shift(){return Yr(this,"shift")},some(e,t){return Dn(this,"some",e,t,void 0,arguments)},splice(...e){return Yr(this,"splice",e)},toReversed(){return lr(this).toReversed()},toSorted(e){return lr(this).toSorted(e)},toSpliced(...e){return lr(this).toSpliced(...e)},unshift(...e){return Yr(this,"unshift",e)},values(){return xl(this,"values",pe)}};function xl(e,t,n){const s=xa(e),r=s[t]();return s!==e&&!en(e)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.value&&(i.value=n(i.value)),i}),r}const Fv=Array.prototype;function Dn(e,t,n,s,r,i){const o=xa(e),l=o!==e&&!en(e),c=o[t];if(c!==Fv[t]){const d=c.apply(e,i);return l?pe(d):d}let u=n;o!==e&&(l?u=function(d,m){return n.call(this,pe(d),m,e)}:n.length>2&&(u=function(d,m){return n.call(this,d,m,e)}));const h=c.call(o,u,s);return l&&r?r(h):h}function sf(e,t,n,s){const r=xa(e);let i=n;return r!==e&&(en(e)?n.length>3&&(i=function(o,l,c){return n.call(this,o,l,c,e)}):i=function(o,l,c){return n.call(this,o,pe(l),c,e)}),r[t](i,...s)}function kl(e,t,n){const s=kt(e);Te(s,"iterate",Ri);const r=s[t](...n);return(r===-1||r===!1)&&au(n[0])?(n[0]=kt(n[0]),s[t](...n)):r}function Yr(e,t,n=[]){$n(),eu();const s=kt(e)[t].apply(e,n);return nu(),jn(),s}const Uv=Xc("__proto__,__v_isRef,__isVue"),Zp=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Sn));function Bv(e){Sn(e)||(e=String(e));const t=kt(this);return Te(t,"has",e),t.hasOwnProperty(e)}class tm{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,s){if(n==="__v_skip")return t.__v_skip;const r=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return i;if(n==="__v_raw")return s===(r?i?Jv:rm:i?sm:nm).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const o=ft(t);if(!r){let c;if(o&&(c=Lv[n]))return c;if(n==="hasOwnProperty")return Bv}const l=Reflect.get(t,n,Pe(t)?t:s);return(Sn(n)?Zp.has(n):Uv(n))||(r||Te(t,"get",n),i)?l:Pe(l)?o&&tu(n)?l:l.value:Lt(l)?r?om(l):ka(l):l}}class em extends tm{constructor(t=!1){super(!1,t)}set(t,n,s,r){let i=t[n];if(!this._isShallow){const c=ps(i);if(!en(s)&&!ps(s)&&(i=kt(i),s=kt(s)),!ft(t)&&Pe(i)&&!Pe(s))return c||(i.value=s),!0}const o=ft(t)&&tu(n)?Number(n)<t.length:Dt(t,n),l=Reflect.set(t,n,s,Pe(t)?t:r);return t===kt(r)&&(o?ls(s,i)&&Un(t,"set",n,s):Un(t,"add",n,s)),l}deleteProperty(t,n){const s=Dt(t,n);t[n];const r=Reflect.deleteProperty(t,n);return r&&s&&Un(t,"delete",n,void 0),r}has(t,n){const s=Reflect.has(t,n);return(!Sn(n)||!Zp.has(n))&&Te(t,"has",n),s}ownKeys(t){return Te(t,"iterate",ft(t)?"length":zs),Reflect.ownKeys(t)}}class $v extends tm{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const jv=new em,qv=new $v,Hv=new em(!0);const oc=e=>e,So=e=>Reflect.getPrototypeOf(e);function zv(e,t,n){return function(...s){const r=this.__v_raw,i=kt(r),o=yr(i),l=e==="entries"||e===Symbol.iterator&&o,c=e==="keys"&&o,u=r[e](...s),h=n?oc:t?Xo:pe;return!t&&Te(i,"iterate",c?ic:zs),{next(){const{value:d,done:m}=u.next();return m?{value:d,done:m}:{value:l?[h(d[0]),h(d[1])]:h(d),done:m}},[Symbol.iterator](){return this}}}}function Ro(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Kv(e,t){const n={get(r){const i=this.__v_raw,o=kt(i),l=kt(r);e||(ls(r,l)&&Te(o,"get",r),Te(o,"get",l));const{has:c}=So(o),u=t?oc:e?Xo:pe;if(c.call(o,r))return u(i.get(r));if(c.call(o,l))return u(i.get(l));i!==o&&i.get(r)},get size(){const r=this.__v_raw;return!e&&Te(kt(r),"iterate",zs),Reflect.get(r,"size",r)},has(r){const i=this.__v_raw,o=kt(i),l=kt(r);return e||(ls(r,l)&&Te(o,"has",r),Te(o,"has",l)),r===l?i.has(r):i.has(r)||i.has(l)},forEach(r,i){const o=this,l=o.__v_raw,c=kt(l),u=t?oc:e?Xo:pe;return!e&&Te(c,"iterate",zs),l.forEach((h,d)=>r.call(i,u(h),u(d),o))}};return le(n,e?{add:Ro("add"),set:Ro("set"),delete:Ro("delete"),clear:Ro("clear")}:{add(r){!t&&!en(r)&&!ps(r)&&(r=kt(r));const i=kt(this);return So(i).has.call(i,r)||(i.add(r),Un(i,"add",r,r)),this},set(r,i){!t&&!en(i)&&!ps(i)&&(i=kt(i));const o=kt(this),{has:l,get:c}=So(o);let u=l.call(o,r);u||(r=kt(r),u=l.call(o,r));const h=c.call(o,r);return o.set(r,i),u?ls(i,h)&&Un(o,"set",r,i):Un(o,"add",r,i),this},delete(r){const i=kt(this),{has:o,get:l}=So(i);let c=o.call(i,r);c||(r=kt(r),c=o.call(i,r)),l&&l.call(i,r);const u=i.delete(r);return c&&Un(i,"delete",r,void 0),u},clear(){const r=kt(this),i=r.size!==0,o=r.clear();return i&&Un(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=zv(r,e,t)}),n}function iu(e,t){const n=Kv(e,t);return(s,r,i)=>r==="__v_isReactive"?!e:r==="__v_isReadonly"?e:r==="__v_raw"?s:Reflect.get(Dt(n,r)&&r in s?n:s,r,i)}const Gv={get:iu(!1,!1)},Wv={get:iu(!1,!0)},Qv={get:iu(!0,!1)};const nm=new WeakMap,sm=new WeakMap,rm=new WeakMap,Jv=new WeakMap;function Xv(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Yv(e){return e.__v_skip||!Object.isExtensible(e)?0:Xv(wv(e))}function ka(e){return ps(e)?e:ou(e,!1,jv,Gv,nm)}function im(e){return ou(e,!1,Hv,Wv,sm)}function om(e){return ou(e,!0,qv,Qv,rm)}function ou(e,t,n,s,r){if(!Lt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=Yv(e);if(i===0)return e;const o=r.get(e);if(o)return o;const l=new Proxy(e,i===2?s:n);return r.set(e,l),l}function _r(e){return ps(e)?_r(e.__v_raw):!!(e&&e.__v_isReactive)}function ps(e){return!!(e&&e.__v_isReadonly)}function en(e){return!!(e&&e.__v_isShallow)}function au(e){return e?!!e.__v_raw:!1}function kt(e){const t=e&&e.__v_raw;return t?kt(t):e}function Zv(e){return!Dt(e,"__v_skip")&&Object.isExtensible(e)&&$p(e,"__v_skip",!0),e}const pe=e=>Lt(e)?ka(e):e,Xo=e=>Lt(e)?om(e):e;function Pe(e){return e?e.__v_isRef===!0:!1}function Jt(e){return am(e,!1)}function t0(e){return am(e,!0)}function am(e,t){return Pe(e)?e:new e0(e,t)}class e0{constructor(t,n){this.dep=new ru,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:kt(t),this._value=n?t:pe(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,s=this.__v_isShallow||en(t)||ps(t);t=s?t:kt(t),ls(t,n)&&(this._rawValue=t,this._value=s?t:pe(t),this.dep.trigger())}}function Ks(e){return Pe(e)?e.value:e}const n0={get:(e,t,n)=>t==="__v_raw"?e:Ks(Reflect.get(e,t,n)),set:(e,t,n,s)=>{const r=e[t];return Pe(r)&&!Pe(n)?(r.value=n,!0):Reflect.set(e,t,n,s)}};function lm(e){return _r(e)?e:new Proxy(e,n0)}class s0{constructor(t,n,s){this.fn=t,this.setter=n,this._value=void 0,this.dep=new ru(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Si-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&Ft!==this)return Gp(this,!0),!0}get value(){const t=this.dep.track();return Jp(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function r0(e,t,n=!1){let s,r;return vt(e)?s=e:(s=e.get,r=e.set),new s0(s,r,n)}const Co={},Yo=new WeakMap;let Os;function i0(e,t=!1,n=Os){if(n){let s=Yo.get(n);s||Yo.set(n,s=[]),s.push(e)}}function o0(e,t,n=Mt){const{immediate:s,deep:r,once:i,scheduler:o,augmentJob:l,call:c}=n,u=H=>r?H:en(H)||r===!1||r===0?Bn(H,1):Bn(H);let h,d,m,y,b=!1,P=!1;if(Pe(e)?(d=()=>e.value,b=en(e)):_r(e)?(d=()=>u(e),b=!0):ft(e)?(P=!0,b=e.some(H=>_r(H)||en(H)),d=()=>e.map(H=>{if(Pe(H))return H.value;if(_r(H))return u(H);if(vt(H))return c?c(H,2):H()})):vt(e)?t?d=c?()=>c(e,2):e:d=()=>{if(m){$n();try{m()}finally{jn()}}const H=Os;Os=h;try{return c?c(e,3,[y]):e(y)}finally{Os=H}}:d=an,t&&r){const H=d,nt=r===!0?1/0:r;d=()=>Bn(H(),nt)}const x=Nv(),M=()=>{h.stop(),x&&x.active&&Zc(x.effects,h)};if(i&&t){const H=t;t=(...nt)=>{H(...nt),M()}}let O=P?new Array(e.length).fill(Co):Co;const B=H=>{if(!(!(h.flags&1)||!h.dirty&&!H))if(t){const nt=h.run();if(r||b||(P?nt.some((st,S)=>ls(st,O[S])):ls(nt,O))){m&&m();const st=Os;Os=h;try{const S=[nt,O===Co?void 0:P&&O[0]===Co?[]:O,y];O=nt,c?c(t,3,S):t(...S)}finally{Os=st}}}else h.run()};return l&&l(B),h=new zp(d),h.scheduler=o?()=>o(B,!1):B,y=H=>i0(H,!1,h),m=h.onStop=()=>{const H=Yo.get(h);if(H){if(c)c(H,4);else for(const nt of H)nt();Yo.delete(h)}},t?s?B(!0):O=h.run():o?o(B.bind(null,!0),!0):h.run(),M.pause=h.pause.bind(h),M.resume=h.resume.bind(h),M.stop=M,M}function Bn(e,t=1/0,n){if(t<=0||!Lt(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,Pe(e))Bn(e.value,t,n);else if(ft(e))for(let s=0;s<e.length;s++)Bn(e[s],t,n);else if(Ia(e)||yr(e))e.forEach(s=>{Bn(s,t,n)});else if(Bp(e)){for(const s in e)Bn(e[s],t,n);for(const s of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,s)&&Bn(e[s],t,n)}return e}/**
* @vue/runtime-core v3.5.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Qi(e,t,n,s){try{return s?e(...s):e()}catch(r){Va(r,t,n)}}function cn(e,t,n,s){if(vt(e)){const r=Qi(e,t,n,s);return r&&Fp(r)&&r.catch(i=>{Va(i,t,n)}),r}if(ft(e)){const r=[];for(let i=0;i<e.length;i++)r.push(cn(e[i],t,n,s));return r}}function Va(e,t,n,s=!0){const r=t?t.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||Mt;if(t){let l=t.parent;const c=t.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const h=l.ec;if(h){for(let d=0;d<h.length;d++)if(h[d](e,c,u)===!1)return}l=l.parent}if(i){$n(),Qi(i,null,10,[e,c,u]),jn();return}}a0(e,n,r,s,o)}function a0(e,t,n,s=!0,r=!1){if(r)throw e;console.error(e)}const Ne=[];let gn=-1;const vr=[];let ss=null,cr=0;const cm=Promise.resolve();let Zo=null;function lu(e){const t=Zo||cm;return e?t.then(this?e.bind(this):e):t}function l0(e){let t=gn+1,n=Ne.length;for(;t<n;){const s=t+n>>>1,r=Ne[s],i=Ci(r);i<e||i===e&&r.flags&2?t=s+1:n=s}return t}function cu(e){if(!(e.flags&1)){const t=Ci(e),n=Ne[Ne.length-1];!n||!(e.flags&2)&&t>=Ci(n)?Ne.push(e):Ne.splice(l0(t),0,e),e.flags|=1,um()}}function um(){Zo||(Zo=cm.then(dm))}function hm(e){ft(e)?vr.push(...e):ss&&e.id===-1?ss.splice(cr+1,0,e):e.flags&1||(vr.push(e),e.flags|=1),um()}function rf(e,t,n=gn+1){for(;n<Ne.length;n++){const s=Ne[n];if(s&&s.flags&2){if(e&&s.id!==e.uid)continue;Ne.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function fm(e){if(vr.length){const t=[...new Set(vr)].sort((n,s)=>Ci(n)-Ci(s));if(vr.length=0,ss){ss.push(...t);return}for(ss=t,cr=0;cr<ss.length;cr++){const n=ss[cr];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}ss=null,cr=0}}const Ci=e=>e.id==null?e.flags&2?-1:1/0:e.id;function dm(e){try{for(gn=0;gn<Ne.length;gn++){const t=Ne[gn];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Qi(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;gn<Ne.length;gn++){const t=Ne[gn];t&&(t.flags&=-2)}gn=-1,Ne.length=0,fm(),Zo=null,(Ne.length||vr.length)&&dm()}}let Ke=null,pm=null;function ta(e){const t=Ke;return Ke=e,pm=e&&e.type.__scopeId||null,t}function Da(e,t=Ke,n){if(!t||e._n)return e;const s=(...r)=>{s._d&&vf(-1);const i=ta(t);let o;try{o=e(...r)}finally{ta(i),s._d&&vf(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function uu(e,t){if(Ke===null)return e;const n=Ua(Ke),s=e.dirs||(e.dirs=[]);for(let r=0;r<t.length;r++){let[i,o,l,c=Mt]=t[r];i&&(vt(i)&&(i={mounted:i,updated:i}),i.deep&&Bn(o),s.push({dir:i,instance:n,value:o,oldValue:void 0,arg:l,modifiers:c}))}return e}function ks(e,t,n,s){const r=e.dirs,i=t&&t.dirs;for(let o=0;o<r.length;o++){const l=r[o];i&&(l.oldValue=i[o].value);let c=l.dir[s];c&&($n(),cn(c,n,8,[e.el,l,e,t]),jn())}}const mm=Symbol("_vte"),gm=e=>e.__isTeleport,hi=e=>e&&(e.disabled||e.disabled===""),of=e=>e&&(e.defer||e.defer===""),af=e=>typeof SVGElement<"u"&&e instanceof SVGElement,lf=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,ac=(e,t)=>{const n=e&&e.to;return Yt(n)?t?t(n):null:n},ym={name:"Teleport",__isTeleport:!0,process(e,t,n,s,r,i,o,l,c,u){const{mc:h,pc:d,pbc:m,o:{insert:y,querySelector:b,createText:P,createComment:x}}=u,M=hi(t.props);let{shapeFlag:O,children:B,dynamicChildren:H}=t;if(e==null){const nt=t.el=P(""),st=t.anchor=P("");y(nt,n,s),y(st,n,s);const S=(_,T)=>{O&16&&(r&&r.isCE&&(r.ce._teleportTarget=_),h(B,_,T,r,i,o,l,c))},v=()=>{const _=t.target=ac(t.props,b),T=_m(_,t,P,y);_&&(o!=="svg"&&af(_)?o="svg":o!=="mathml"&&lf(_)&&(o="mathml"),M||(S(_,T),Lo(t,!1)))};M&&(S(n,st),Lo(t,!0)),of(t.props)?(t.el.__isMounted=!1,De(()=>{v(),delete t.el.__isMounted},i)):v()}else{if(of(t.props)&&e.el.__isMounted===!1){De(()=>{ym.process(e,t,n,s,r,i,o,l,c,u)},i);return}t.el=e.el,t.targetStart=e.targetStart;const nt=t.anchor=e.anchor,st=t.target=e.target,S=t.targetAnchor=e.targetAnchor,v=hi(e.props),_=v?n:st,T=v?nt:S;if(o==="svg"||af(st)?o="svg":(o==="mathml"||lf(st))&&(o="mathml"),H?(m(e.dynamicChildren,H,_,r,i,o,l),du(e,t,!0)):c||d(e,t,_,T,r,i,o,l,!1),M)v?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):Po(t,n,nt,u,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const C=t.target=ac(t.props,b);C&&Po(t,C,null,u,0)}else v&&Po(t,st,S,u,1);Lo(t,M)}},remove(e,t,n,{um:s,o:{remove:r}},i){const{shapeFlag:o,children:l,anchor:c,targetStart:u,targetAnchor:h,target:d,props:m}=e;if(d&&(r(u),r(h)),i&&r(c),o&16){const y=i||!hi(m);for(let b=0;b<l.length;b++){const P=l[b];s(P,t,n,y,!!P.dynamicChildren)}}},move:Po,hydrate:c0};function Po(e,t,n,{o:{insert:s},m:r},i=2){i===0&&s(e.targetAnchor,t,n);const{el:o,anchor:l,shapeFlag:c,children:u,props:h}=e,d=i===2;if(d&&s(o,t,n),(!d||hi(h))&&c&16)for(let m=0;m<u.length;m++)r(u[m],t,n,2);d&&s(l,t,n)}function c0(e,t,n,s,r,i,{o:{nextSibling:o,parentNode:l,querySelector:c,insert:u,createText:h}},d){const m=t.target=ac(t.props,c);if(m){const y=hi(t.props),b=m._lpa||m.firstChild;if(t.shapeFlag&16)if(y)t.anchor=d(o(e),t,l(e),n,s,r,i),t.targetStart=b,t.targetAnchor=b&&o(b);else{t.anchor=o(e);let P=b;for(;P;){if(P&&P.nodeType===8){if(P.data==="teleport start anchor")t.targetStart=P;else if(P.data==="teleport anchor"){t.targetAnchor=P,m._lpa=t.targetAnchor&&o(t.targetAnchor);break}}P=o(P)}t.targetAnchor||_m(m,t,h,u),d(b&&o(b),t,m,n,s,r,i)}Lo(t,y)}return t.anchor&&o(t.anchor)}const u0=ym;function Lo(e,t){const n=e.ctx;if(n&&n.ut){let s,r;for(t?(s=e.el,r=e.anchor):(s=e.targetStart,r=e.targetAnchor);s&&s!==r;)s.nodeType===1&&s.setAttribute("data-v-owner",n.uid),s=s.nextSibling;n.ut()}}function _m(e,t,n,s){const r=t.targetStart=n(""),i=t.targetAnchor=n("");return r[mm]=i,e&&(s(r,e),s(i,e)),i}const Fn=Symbol("_leaveCb"),xo=Symbol("_enterCb");function h0(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Pn(()=>{e.isMounted=!0}),Rm(()=>{e.isUnmounting=!0}),e}const Ye=[Function,Array],vm={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ye,onEnter:Ye,onAfterEnter:Ye,onEnterCancelled:Ye,onBeforeLeave:Ye,onLeave:Ye,onAfterLeave:Ye,onLeaveCancelled:Ye,onBeforeAppear:Ye,onAppear:Ye,onAfterAppear:Ye,onAppearCancelled:Ye},wm=e=>{const t=e.subTree;return t.component?wm(t.component):t},f0={name:"BaseTransition",props:vm,setup(e,{slots:t}){const n=mu(),s=h0();return()=>{const r=t.default&&Tm(t.default(),!0);if(!r||!r.length)return;const i=Em(r),o=kt(e),{mode:l}=o;if(s.isLeaving)return Vl(i);const c=cf(i);if(!c)return Vl(i);let u=lc(c,o,s,n,d=>u=d);c.type!==Oe&&Pi(c,u);let h=n.subTree&&cf(n.subTree);if(h&&h.type!==Oe&&!Ls(c,h)&&wm(n).type!==Oe){let d=lc(h,o,s,n);if(Pi(h,d),l==="out-in"&&c.type!==Oe)return s.isLeaving=!0,d.afterLeave=()=>{s.isLeaving=!1,n.job.flags&8||n.update(),delete d.afterLeave,h=void 0},Vl(i);l==="in-out"&&c.type!==Oe?d.delayLeave=(m,y,b)=>{const P=bm(s,h);P[String(h.key)]=h,m[Fn]=()=>{y(),m[Fn]=void 0,delete u.delayedLeave,h=void 0},u.delayedLeave=()=>{b(),delete u.delayedLeave,h=void 0}}:h=void 0}else h&&(h=void 0);return i}}};function Em(e){let t=e[0];if(e.length>1){for(const n of e)if(n.type!==Oe){t=n;break}}return t}const d0=f0;function bm(e,t){const{leavingVNodes:n}=e;let s=n.get(t.type);return s||(s=Object.create(null),n.set(t.type,s)),s}function lc(e,t,n,s,r){const{appear:i,mode:o,persisted:l=!1,onBeforeEnter:c,onEnter:u,onAfterEnter:h,onEnterCancelled:d,onBeforeLeave:m,onLeave:y,onAfterLeave:b,onLeaveCancelled:P,onBeforeAppear:x,onAppear:M,onAfterAppear:O,onAppearCancelled:B}=t,H=String(e.key),nt=bm(n,e),st=(_,T)=>{_&&cn(_,s,9,T)},S=(_,T)=>{const C=T[1];st(_,T),ft(_)?_.every(A=>A.length<=1)&&C():_.length<=1&&C()},v={mode:o,persisted:l,beforeEnter(_){let T=c;if(!n.isMounted)if(i)T=x||c;else return;_[Fn]&&_[Fn](!0);const C=nt[H];C&&Ls(e,C)&&C.el[Fn]&&C.el[Fn](),st(T,[_])},enter(_){let T=u,C=h,A=d;if(!n.isMounted)if(i)T=M||u,C=O||h,A=B||d;else return;let w=!1;const Z=_[xo]=Y=>{w||(w=!0,Y?st(A,[_]):st(C,[_]),v.delayedLeave&&v.delayedLeave(),_[xo]=void 0)};T?S(T,[_,Z]):Z()},leave(_,T){const C=String(e.key);if(_[xo]&&_[xo](!0),n.isUnmounting)return T();st(m,[_]);let A=!1;const w=_[Fn]=Z=>{A||(A=!0,T(),Z?st(P,[_]):st(b,[_]),_[Fn]=void 0,nt[C]===e&&delete nt[C])};nt[C]=e,y?S(y,[_,w]):w()},clone(_){const T=lc(_,t,n,s,r);return r&&r(T),T}};return v}function Vl(e){if(Na(e))return e=ms(e),e.children=null,e}function cf(e){if(!Na(e))return gm(e.type)&&e.children?Em(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:n}=e;if(n){if(t&16)return n[0];if(t&32&&vt(n.default))return n.default()}}function Pi(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Pi(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Tm(e,t=!1,n){let s=[],r=0;for(let i=0;i<e.length;i++){let o=e[i];const l=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===Ae?(o.patchFlag&128&&r++,s=s.concat(Tm(o.children,t,l))):(t||o.type!==Oe)&&s.push(l!=null?ms(o,{key:l}):o)}if(r>1)for(let i=0;i<s.length;i++)s[i].patchFlag=-2;return s}/*! #__NO_SIDE_EFFECTS__ */function qe(e,t){return vt(e)?le({name:e.name},t,{setup:e}):e}function Am(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function fi(e,t,n,s,r=!1){if(ft(e)){e.forEach((b,P)=>fi(b,t&&(ft(t)?t[P]:t),n,s,r));return}if(di(s)&&!r){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&fi(e,t,n,s.component.subTree);return}const i=s.shapeFlag&4?Ua(s.component):s.el,o=r?null:i,{i:l,r:c}=e,u=t&&t.r,h=l.refs===Mt?l.refs={}:l.refs,d=l.setupState,m=kt(d),y=d===Mt?Lp:b=>Dt(m,b);if(u!=null&&u!==c){if(Yt(u))h[u]=null,y(u)&&(d[u]=null);else if(Pe(u)){u.value=null;const b=t;b.k&&(h[b.k]=null)}}if(vt(c))Qi(c,l,12,[o,h]);else{const b=Yt(c),P=Pe(c);if(b||P){const x=()=>{if(e.f){const M=b?y(c)?d[c]:h[c]:c.value;if(r)ft(M)&&Zc(M,i);else if(ft(M))M.includes(i)||M.push(i);else if(b)h[c]=[i],y(c)&&(d[c]=h[c]);else{const O=[i];c.value=O,e.k&&(h[e.k]=O)}}else b?(h[c]=o,y(c)&&(d[c]=o)):P&&(c.value=o,e.k&&(h[e.k]=o))};o?(x.id=-1,De(x,n)):x()}}}Ca().requestIdleCallback;Ca().cancelIdleCallback;const di=e=>!!e.type.__asyncLoader,Na=e=>e.type.__isKeepAlive;function p0(e,t){Im(e,"a",t)}function m0(e,t){Im(e,"da",t)}function Im(e,t,n=Re){const s=e.__wdc||(e.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return e()});if(Oa(t,s,n),n){let r=n.parent;for(;r&&r.parent;)Na(r.parent.vnode)&&g0(s,t,n,r),r=r.parent}}function g0(e,t,n,s){const r=Oa(t,e,s,!0);Vr(()=>{Zc(s[t],r)},n)}function Oa(e,t,n=Re,s=!1){if(n){const r=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...o)=>{$n();const l=Xi(n),c=cn(t,n,e,o);return l(),jn(),c});return s?r.unshift(i):r.push(i),i}}const Wn=e=>(t,n=Re)=>{(!ki||e==="sp")&&Oa(e,(...s)=>t(...s),n)},y0=Wn("bm"),Pn=Wn("m"),Sm=Wn("bu"),_0=Wn("u"),Rm=Wn("bum"),Vr=Wn("um"),v0=Wn("sp"),w0=Wn("rtg"),E0=Wn("rtc");function b0(e,t=Re){Oa("ec",e,t)}const T0="components";function Cm(e,t){return I0(T0,e,!0,t)||e}const A0=Symbol.for("v-ndc");function I0(e,t,n=!0,s=!1){const r=Ke||Re;if(r){const i=r.type;{const l=hw(i,!1);if(l&&(l===t||l===nn(t)||l===Ra(nn(t))))return i}const o=uf(r[e]||i[e],t)||uf(r.appContext[e],t);return!o&&s?i:o}}function uf(e,t){return e&&(e[t]||e[nn(t)]||e[Ra(nn(t))])}function Ji(e,t,n,s){let r;const i=n,o=ft(e);if(o||Yt(e)){const l=o&&_r(e);let c=!1,u=!1;l&&(c=!en(e),u=ps(e),e=xa(e)),r=new Array(e.length);for(let h=0,d=e.length;h<d;h++)r[h]=t(c?u?Xo(pe(e[h])):pe(e[h]):e[h],h,void 0,i)}else if(typeof e=="number"){r=new Array(e);for(let l=0;l<e;l++)r[l]=t(l+1,l,void 0,i)}else if(Lt(e))if(e[Symbol.iterator])r=Array.from(e,(l,c)=>t(l,c,void 0,i));else{const l=Object.keys(e);r=new Array(l.length);for(let c=0,u=l.length;c<u;c++){const h=l[c];r[c]=t(e[h],h,c,i)}}else r=[];return r}const cc=e=>e?Gm(e)?Ua(e):cc(e.parent):null,pi=le(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>cc(e.parent),$root:e=>cc(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>xm(e),$forceUpdate:e=>e.f||(e.f=()=>{cu(e.update)}),$nextTick:e=>e.n||(e.n=lu.bind(e.proxy)),$watch:e=>K0.bind(e)}),Dl=(e,t)=>e!==Mt&&!e.__isScriptSetup&&Dt(e,t),S0={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:s,data:r,props:i,accessCache:o,type:l,appContext:c}=e;let u;if(t[0]!=="$"){const y=o[t];if(y!==void 0)switch(y){case 1:return s[t];case 2:return r[t];case 4:return n[t];case 3:return i[t]}else{if(Dl(s,t))return o[t]=1,s[t];if(r!==Mt&&Dt(r,t))return o[t]=2,r[t];if((u=e.propsOptions[0])&&Dt(u,t))return o[t]=3,i[t];if(n!==Mt&&Dt(n,t))return o[t]=4,n[t];uc&&(o[t]=0)}}const h=pi[t];let d,m;if(h)return t==="$attrs"&&Te(e.attrs,"get",""),h(e);if((d=l.__cssModules)&&(d=d[t]))return d;if(n!==Mt&&Dt(n,t))return o[t]=4,n[t];if(m=c.config.globalProperties,Dt(m,t))return m[t]},set({_:e},t,n){const{data:s,setupState:r,ctx:i}=e;return Dl(r,t)?(r[t]=n,!0):s!==Mt&&Dt(s,t)?(s[t]=n,!0):Dt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:s,appContext:r,propsOptions:i,type:o}},l){let c,u;return!!(n[l]||e!==Mt&&l[0]!=="$"&&Dt(e,l)||Dl(t,l)||(c=i[0])&&Dt(c,l)||Dt(s,l)||Dt(pi,l)||Dt(r.config.globalProperties,l)||(u=o.__cssModules)&&u[l])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Dt(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function hf(e){return ft(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let uc=!0;function R0(e){const t=xm(e),n=e.proxy,s=e.ctx;uc=!1,t.beforeCreate&&ff(t.beforeCreate,e,"bc");const{data:r,computed:i,methods:o,watch:l,provide:c,inject:u,created:h,beforeMount:d,mounted:m,beforeUpdate:y,updated:b,activated:P,deactivated:x,beforeDestroy:M,beforeUnmount:O,destroyed:B,unmounted:H,render:nt,renderTracked:st,renderTriggered:S,errorCaptured:v,serverPrefetch:_,expose:T,inheritAttrs:C,components:A,directives:w,filters:Z}=t;if(u&&C0(u,s,null),o)for(const ot in o){const pt=o[ot];vt(pt)&&(s[ot]=pt.bind(n))}if(r){const ot=r.call(n,n);Lt(ot)&&(e.data=ka(ot))}if(uc=!0,i)for(const ot in i){const pt=i[ot],ee=vt(pt)?pt.bind(n,n):vt(pt.get)?pt.get.bind(n,n):an,qt=!vt(pt)&&vt(pt.set)?pt.set.bind(n):an,xe=Xt({get:ee,set:qt});Object.defineProperty(s,ot,{enumerable:!0,configurable:!0,get:()=>xe.value,set:zt=>xe.value=zt})}if(l)for(const ot in l)Pm(l[ot],s,n,ot);if(c){const ot=vt(c)?c.call(n):c;Reflect.ownKeys(ot).forEach(pt=>{Fo(pt,ot[pt])})}h&&ff(h,e,"c");function Tt(ot,pt){ft(pt)?pt.forEach(ee=>ot(ee.bind(n))):pt&&ot(pt.bind(n))}if(Tt(y0,d),Tt(Pn,m),Tt(Sm,y),Tt(_0,b),Tt(p0,P),Tt(m0,x),Tt(b0,v),Tt(E0,st),Tt(w0,S),Tt(Rm,O),Tt(Vr,H),Tt(v0,_),ft(T))if(T.length){const ot=e.exposed||(e.exposed={});T.forEach(pt=>{Object.defineProperty(ot,pt,{get:()=>n[pt],set:ee=>n[pt]=ee,enumerable:!0})})}else e.exposed||(e.exposed={});nt&&e.render===an&&(e.render=nt),C!=null&&(e.inheritAttrs=C),A&&(e.components=A),w&&(e.directives=w),_&&Am(e)}function C0(e,t,n=an){ft(e)&&(e=hc(e));for(const s in e){const r=e[s];let i;Lt(r)?"default"in r?i=vn(r.from||s,r.default,!0):i=vn(r.from||s):i=vn(r),Pe(i)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):t[s]=i}}function ff(e,t,n){cn(ft(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,n)}function Pm(e,t,n,s){let r=s.includes(".")?jm(n,s):()=>n[s];if(Yt(e)){const i=t[e];vt(i)&&cs(r,i)}else if(vt(e))cs(r,e.bind(n));else if(Lt(e))if(ft(e))e.forEach(i=>Pm(i,t,n,s));else{const i=vt(e.handler)?e.handler.bind(n):t[e.handler];vt(i)&&cs(r,i,e)}}function xm(e){const t=e.type,{mixins:n,extends:s}=t,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=e.appContext,l=i.get(t);let c;return l?c=l:!r.length&&!n&&!s?c=t:(c={},r.length&&r.forEach(u=>ea(c,u,o,!0)),ea(c,t,o)),Lt(t)&&i.set(t,c),c}function ea(e,t,n,s=!1){const{mixins:r,extends:i}=t;i&&ea(e,i,n,!0),r&&r.forEach(o=>ea(e,o,n,!0));for(const o in t)if(!(s&&o==="expose")){const l=P0[o]||n&&n[o];e[o]=l?l(e[o],t[o]):t[o]}return e}const P0={data:df,props:pf,emits:pf,methods:si,computed:si,beforeCreate:Ve,created:Ve,beforeMount:Ve,mounted:Ve,beforeUpdate:Ve,updated:Ve,beforeDestroy:Ve,beforeUnmount:Ve,destroyed:Ve,unmounted:Ve,activated:Ve,deactivated:Ve,errorCaptured:Ve,serverPrefetch:Ve,components:si,directives:si,watch:k0,provide:df,inject:x0};function df(e,t){return t?e?function(){return le(vt(e)?e.call(this,this):e,vt(t)?t.call(this,this):t)}:t:e}function x0(e,t){return si(hc(e),hc(t))}function hc(e){if(ft(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Ve(e,t){return e?[...new Set([].concat(e,t))]:t}function si(e,t){return e?le(Object.create(null),e,t):t}function pf(e,t){return e?ft(e)&&ft(t)?[...new Set([...e,...t])]:le(Object.create(null),hf(e),hf(t??{})):t}function k0(e,t){if(!e)return t;if(!t)return e;const n=le(Object.create(null),e);for(const s in t)n[s]=Ve(e[s],t[s]);return n}function km(){return{app:null,config:{isNativeTag:Lp,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let V0=0;function D0(e,t){return function(s,r=null){vt(s)||(s=le({},s)),r!=null&&!Lt(r)&&(r=null);const i=km(),o=new WeakSet,l=[];let c=!1;const u=i.app={_uid:V0++,_component:s,_props:r,_container:null,_context:i,_instance:null,version:dw,get config(){return i.config},set config(h){},use(h,...d){return o.has(h)||(h&&vt(h.install)?(o.add(h),h.install(u,...d)):vt(h)&&(o.add(h),h(u,...d))),u},mixin(h){return i.mixins.includes(h)||i.mixins.push(h),u},component(h,d){return d?(i.components[h]=d,u):i.components[h]},directive(h,d){return d?(i.directives[h]=d,u):i.directives[h]},mount(h,d,m){if(!c){const y=u._ceVNode||$t(s,r);return y.appContext=i,m===!0?m="svg":m===!1&&(m=void 0),e(y,h,m),c=!0,u._container=h,h.__vue_app__=u,Ua(y.component)}},onUnmount(h){l.push(h)},unmount(){c&&(cn(l,u._instance,16),e(null,u._container),delete u._container.__vue_app__)},provide(h,d){return i.provides[h]=d,u},runWithContext(h){const d=wr;wr=u;try{return h()}finally{wr=d}}};return u}}let wr=null;function Fo(e,t){if(Re){let n=Re.provides;const s=Re.parent&&Re.parent.provides;s===n&&(n=Re.provides=Object.create(s)),n[e]=t}}function vn(e,t,n=!1){const s=mu();if(s||wr){let r=wr?wr._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&e in r)return r[e];if(arguments.length>1)return n&&vt(t)?t.call(s&&s.proxy):t}}const Vm={},Dm=()=>Object.create(Vm),Nm=e=>Object.getPrototypeOf(e)===Vm;function N0(e,t,n,s=!1){const r={},i=Dm();e.propsDefaults=Object.create(null),Om(e,t,r,i);for(const o in e.propsOptions[0])o in r||(r[o]=void 0);n?e.props=s?r:im(r):e.type.props?e.props=r:e.props=i,e.attrs=i}function O0(e,t,n,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=e,l=kt(r),[c]=e.propsOptions;let u=!1;if((s||o>0)&&!(o&16)){if(o&8){const h=e.vnode.dynamicProps;for(let d=0;d<h.length;d++){let m=h[d];if(Ma(e.emitsOptions,m))continue;const y=t[m];if(c)if(Dt(i,m))y!==i[m]&&(i[m]=y,u=!0);else{const b=nn(m);r[b]=fc(c,l,b,y,e,!1)}else y!==i[m]&&(i[m]=y,u=!0)}}}else{Om(e,t,r,i)&&(u=!0);let h;for(const d in l)(!t||!Dt(t,d)&&((h=Ts(d))===d||!Dt(t,h)))&&(c?n&&(n[d]!==void 0||n[h]!==void 0)&&(r[d]=fc(c,l,d,void 0,e,!0)):delete r[d]);if(i!==l)for(const d in i)(!t||!Dt(t,d))&&(delete i[d],u=!0)}u&&Un(e.attrs,"set","")}function Om(e,t,n,s){const[r,i]=e.propsOptions;let o=!1,l;if(t)for(let c in t){if(li(c))continue;const u=t[c];let h;r&&Dt(r,h=nn(c))?!i||!i.includes(h)?n[h]=u:(l||(l={}))[h]=u:Ma(e.emitsOptions,c)||(!(c in s)||u!==s[c])&&(s[c]=u,o=!0)}if(i){const c=kt(n),u=l||Mt;for(let h=0;h<i.length;h++){const d=i[h];n[d]=fc(r,c,d,u[d],e,!Dt(u,d))}}return o}function fc(e,t,n,s,r,i){const o=e[n];if(o!=null){const l=Dt(o,"default");if(l&&s===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&vt(c)){const{propsDefaults:u}=r;if(n in u)s=u[n];else{const h=Xi(r);s=u[n]=c.call(null,t),h()}}else s=c;r.ce&&r.ce._setProp(n,s)}o[0]&&(i&&!l?s=!1:o[1]&&(s===""||s===Ts(n))&&(s=!0))}return s}const M0=new WeakMap;function Mm(e,t,n=!1){const s=n?M0:t.propsCache,r=s.get(e);if(r)return r;const i=e.props,o={},l=[];let c=!1;if(!vt(e)){const h=d=>{c=!0;const[m,y]=Mm(d,t,!0);le(o,m),y&&l.push(...y)};!n&&t.mixins.length&&t.mixins.forEach(h),e.extends&&h(e.extends),e.mixins&&e.mixins.forEach(h)}if(!i&&!c)return Lt(e)&&s.set(e,gr),gr;if(ft(i))for(let h=0;h<i.length;h++){const d=nn(i[h]);mf(d)&&(o[d]=Mt)}else if(i)for(const h in i){const d=nn(h);if(mf(d)){const m=i[h],y=o[d]=ft(m)||vt(m)?{type:m}:le({},m),b=y.type;let P=!1,x=!0;if(ft(b))for(let M=0;M<b.length;++M){const O=b[M],B=vt(O)&&O.name;if(B==="Boolean"){P=!0;break}else B==="String"&&(x=!1)}else P=vt(b)&&b.name==="Boolean";y[0]=P,y[1]=x,(P||Dt(y,"default"))&&l.push(d)}}const u=[o,l];return Lt(e)&&s.set(e,u),u}function mf(e){return e[0]!=="$"&&!li(e)}const hu=e=>e==="_"||e==="_ctx"||e==="$stable",fu=e=>ft(e)?e.map(_n):[_n(e)],L0=(e,t,n)=>{if(t._n)return t;const s=Da((...r)=>fu(t(...r)),n);return s._c=!1,s},Lm=(e,t,n)=>{const s=e._ctx;for(const r in e){if(hu(r))continue;const i=e[r];if(vt(i))t[r]=L0(r,i,s);else if(i!=null){const o=fu(i);t[r]=()=>o}}},Fm=(e,t)=>{const n=fu(t);e.slots.default=()=>n},Um=(e,t,n)=>{for(const s in t)(n||!hu(s))&&(e[s]=t[s])},F0=(e,t,n)=>{const s=e.slots=Dm();if(e.vnode.shapeFlag&32){const r=t._;r?(Um(s,t,n),n&&$p(s,"_",r,!0)):Lm(t,s)}else t&&Fm(e,t)},U0=(e,t,n)=>{const{vnode:s,slots:r}=e;let i=!0,o=Mt;if(s.shapeFlag&32){const l=t._;l?n&&l===1?i=!1:Um(r,t,n):(i=!t.$stable,Lm(t,r)),o=t}else t&&(Fm(e,t),o={default:1});if(i)for(const l in r)!hu(l)&&o[l]==null&&delete r[l]},De=Z0;function B0(e){return $0(e)}function $0(e,t){const n=Ca();n.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:l,createComment:c,setText:u,setElementText:h,parentNode:d,nextSibling:m,setScopeId:y=an,insertStaticContent:b}=e,P=(E,I,k,F=null,j=null,U=null,Q=void 0,G=null,K=!!I.dynamicChildren)=>{if(E===I)return;E&&!Ls(E,I)&&(F=L(E),zt(E,j,U,!0),E=null),I.patchFlag===-2&&(K=!1,I.dynamicChildren=null);const{type:z,ref:ct,shapeFlag:X}=I;switch(z){case La:x(E,I,k,F);break;case Oe:M(E,I,k,F);break;case mi:E==null&&O(I,k,F,Q);break;case Ae:A(E,I,k,F,j,U,Q,G,K);break;default:X&1?nt(E,I,k,F,j,U,Q,G,K):X&6?w(E,I,k,F,j,U,Q,G,K):(X&64||X&128)&&z.process(E,I,k,F,j,U,Q,G,K,rt)}ct!=null&&j?fi(ct,E&&E.ref,U,I||E,!I):ct==null&&E&&E.ref!=null&&fi(E.ref,null,U,E,!0)},x=(E,I,k,F)=>{if(E==null)s(I.el=l(I.children),k,F);else{const j=I.el=E.el;I.children!==E.children&&u(j,I.children)}},M=(E,I,k,F)=>{E==null?s(I.el=c(I.children||""),k,F):I.el=E.el},O=(E,I,k,F)=>{[E.el,E.anchor]=b(E.children,I,k,F,E.el,E.anchor)},B=({el:E,anchor:I},k,F)=>{let j;for(;E&&E!==I;)j=m(E),s(E,k,F),E=j;s(I,k,F)},H=({el:E,anchor:I})=>{let k;for(;E&&E!==I;)k=m(E),r(E),E=k;r(I)},nt=(E,I,k,F,j,U,Q,G,K)=>{I.type==="svg"?Q="svg":I.type==="math"&&(Q="mathml"),E==null?st(I,k,F,j,U,Q,G,K):_(E,I,j,U,Q,G,K)},st=(E,I,k,F,j,U,Q,G)=>{let K,z;const{props:ct,shapeFlag:X,transition:at,dirs:gt}=E;if(K=E.el=o(E.type,U,ct&&ct.is,ct),X&8?h(K,E.children):X&16&&v(E.children,K,null,F,j,Nl(E,U),Q,G),gt&&ks(E,null,F,"created"),S(K,E,E.scopeId,Q,F),ct){for(const Et in ct)Et!=="value"&&!li(Et)&&i(K,Et,null,ct[Et],U,F);"value"in ct&&i(K,"value",null,ct.value,U),(z=ct.onVnodeBeforeMount)&&dn(z,F,E)}gt&&ks(E,null,F,"beforeMount");const ht=j0(j,at);ht&&at.beforeEnter(K),s(K,I,k),((z=ct&&ct.onVnodeMounted)||ht||gt)&&De(()=>{z&&dn(z,F,E),ht&&at.enter(K),gt&&ks(E,null,F,"mounted")},j)},S=(E,I,k,F,j)=>{if(k&&y(E,k),F)for(let U=0;U<F.length;U++)y(E,F[U]);if(j){let U=j.subTree;if(I===U||Hm(U.type)&&(U.ssContent===I||U.ssFallback===I)){const Q=j.vnode;S(E,Q,Q.scopeId,Q.slotScopeIds,j.parent)}}},v=(E,I,k,F,j,U,Q,G,K=0)=>{for(let z=K;z<E.length;z++){const ct=E[z]=G?rs(E[z]):_n(E[z]);P(null,ct,I,k,F,j,U,Q,G)}},_=(E,I,k,F,j,U,Q)=>{const G=I.el=E.el;let{patchFlag:K,dynamicChildren:z,dirs:ct}=I;K|=E.patchFlag&16;const X=E.props||Mt,at=I.props||Mt;let gt;if(k&&Vs(k,!1),(gt=at.onVnodeBeforeUpdate)&&dn(gt,k,I,E),ct&&ks(I,E,k,"beforeUpdate"),k&&Vs(k,!0),(X.innerHTML&&at.innerHTML==null||X.textContent&&at.textContent==null)&&h(G,""),z?T(E.dynamicChildren,z,G,k,F,Nl(I,j),U):Q||pt(E,I,G,null,k,F,Nl(I,j),U,!1),K>0){if(K&16)C(G,X,at,k,j);else if(K&2&&X.class!==at.class&&i(G,"class",null,at.class,j),K&4&&i(G,"style",X.style,at.style,j),K&8){const ht=I.dynamicProps;for(let Et=0;Et<ht.length;Et++){const St=ht[Et],ce=X[St],ue=at[St];(ue!==ce||St==="value")&&i(G,St,ce,ue,j,k)}}K&1&&E.children!==I.children&&h(G,I.children)}else!Q&&z==null&&C(G,X,at,k,j);((gt=at.onVnodeUpdated)||ct)&&De(()=>{gt&&dn(gt,k,I,E),ct&&ks(I,E,k,"updated")},F)},T=(E,I,k,F,j,U,Q)=>{for(let G=0;G<I.length;G++){const K=E[G],z=I[G],ct=K.el&&(K.type===Ae||!Ls(K,z)||K.shapeFlag&198)?d(K.el):k;P(K,z,ct,null,F,j,U,Q,!0)}},C=(E,I,k,F,j)=>{if(I!==k){if(I!==Mt)for(const U in I)!li(U)&&!(U in k)&&i(E,U,I[U],null,j,F);for(const U in k){if(li(U))continue;const Q=k[U],G=I[U];Q!==G&&U!=="value"&&i(E,U,G,Q,j,F)}"value"in k&&i(E,"value",I.value,k.value,j)}},A=(E,I,k,F,j,U,Q,G,K)=>{const z=I.el=E?E.el:l(""),ct=I.anchor=E?E.anchor:l("");let{patchFlag:X,dynamicChildren:at,slotScopeIds:gt}=I;gt&&(G=G?G.concat(gt):gt),E==null?(s(z,k,F),s(ct,k,F),v(I.children||[],k,ct,j,U,Q,G,K)):X>0&&X&64&&at&&E.dynamicChildren?(T(E.dynamicChildren,at,k,j,U,Q,G),(I.key!=null||j&&I===j.subTree)&&du(E,I,!0)):pt(E,I,k,ct,j,U,Q,G,K)},w=(E,I,k,F,j,U,Q,G,K)=>{I.slotScopeIds=G,E==null?I.shapeFlag&512?j.ctx.activate(I,k,F,Q,K):Z(I,k,F,j,U,Q,K):Y(E,I,K)},Z=(E,I,k,F,j,U,Q)=>{const G=E.component=ow(E,F,j);if(Na(E)&&(G.ctx.renderer=rt),aw(G,!1,Q),G.asyncDep){if(j&&j.registerDep(G,Tt,Q),!E.el){const K=G.subTree=$t(Oe);M(null,K,I,k),E.placeholder=K.el}}else Tt(G,E,I,k,j,U,Q)},Y=(E,I,k)=>{const F=I.component=E.component;if(X0(E,I,k))if(F.asyncDep&&!F.asyncResolved){ot(F,I,k);return}else F.next=I,F.update();else I.el=E.el,F.vnode=I},Tt=(E,I,k,F,j,U,Q)=>{const G=()=>{if(E.isMounted){let{next:X,bu:at,u:gt,parent:ht,vnode:Et}=E;{const ye=Bm(E);if(ye){X&&(X.el=Et.el,ot(E,X,Q)),ye.asyncDep.then(()=>{E.isUnmounted||G()});return}}let St=X,ce;Vs(E,!1),X?(X.el=Et.el,ot(E,X,Q)):X=Et,at&&Mo(at),(ce=X.props&&X.props.onVnodeBeforeUpdate)&&dn(ce,ht,X,Et),Vs(E,!0);const ue=yf(E),Je=E.subTree;E.subTree=ue,P(Je,ue,d(Je.el),L(Je),E,j,U),X.el=ue.el,St===null&&Y0(E,ue.el),gt&&De(gt,j),(ce=X.props&&X.props.onVnodeUpdated)&&De(()=>dn(ce,ht,X,Et),j)}else{let X;const{el:at,props:gt}=I,{bm:ht,m:Et,parent:St,root:ce,type:ue}=E,Je=di(I);Vs(E,!1),ht&&Mo(ht),!Je&&(X=gt&&gt.onVnodeBeforeMount)&&dn(X,St,I),Vs(E,!0);{ce.ce&&ce.ce._def.shadowRoot!==!1&&ce.ce._injectChildStyle(ue);const ye=E.subTree=yf(E);P(null,ye,k,F,E,j,U),I.el=ye.el}if(Et&&De(Et,j),!Je&&(X=gt&&gt.onVnodeMounted)){const ye=I;De(()=>dn(X,St,ye),j)}(I.shapeFlag&256||St&&di(St.vnode)&&St.vnode.shapeFlag&256)&&E.a&&De(E.a,j),E.isMounted=!0,I=k=F=null}};E.scope.on();const K=E.effect=new zp(G);E.scope.off();const z=E.update=K.run.bind(K),ct=E.job=K.runIfDirty.bind(K);ct.i=E,ct.id=E.uid,K.scheduler=()=>cu(ct),Vs(E,!0),z()},ot=(E,I,k)=>{I.component=E;const F=E.vnode.props;E.vnode=I,E.next=null,O0(E,I.props,F,k),U0(E,I.children,k),$n(),rf(E),jn()},pt=(E,I,k,F,j,U,Q,G,K=!1)=>{const z=E&&E.children,ct=E?E.shapeFlag:0,X=I.children,{patchFlag:at,shapeFlag:gt}=I;if(at>0){if(at&128){qt(z,X,k,F,j,U,Q,G,K);return}else if(at&256){ee(z,X,k,F,j,U,Q,G,K);return}}gt&8?(ct&16&&Me(z,j,U),X!==z&&h(k,X)):ct&16?gt&16?qt(z,X,k,F,j,U,Q,G,K):Me(z,j,U,!0):(ct&8&&h(k,""),gt&16&&v(X,k,F,j,U,Q,G,K))},ee=(E,I,k,F,j,U,Q,G,K)=>{E=E||gr,I=I||gr;const z=E.length,ct=I.length,X=Math.min(z,ct);let at;for(at=0;at<X;at++){const gt=I[at]=K?rs(I[at]):_n(I[at]);P(E[at],gt,k,null,j,U,Q,G,K)}z>ct?Me(E,j,U,!0,!1,X):v(I,k,F,j,U,Q,G,K,X)},qt=(E,I,k,F,j,U,Q,G,K)=>{let z=0;const ct=I.length;let X=E.length-1,at=ct-1;for(;z<=X&&z<=at;){const gt=E[z],ht=I[z]=K?rs(I[z]):_n(I[z]);if(Ls(gt,ht))P(gt,ht,k,null,j,U,Q,G,K);else break;z++}for(;z<=X&&z<=at;){const gt=E[X],ht=I[at]=K?rs(I[at]):_n(I[at]);if(Ls(gt,ht))P(gt,ht,k,null,j,U,Q,G,K);else break;X--,at--}if(z>X){if(z<=at){const gt=at+1,ht=gt<ct?I[gt].el:F;for(;z<=at;)P(null,I[z]=K?rs(I[z]):_n(I[z]),k,ht,j,U,Q,G,K),z++}}else if(z>at)for(;z<=X;)zt(E[z],j,U,!0),z++;else{const gt=z,ht=z,Et=new Map;for(z=ht;z<=at;z++){const he=I[z]=K?rs(I[z]):_n(I[z]);he.key!=null&&Et.set(he.key,z)}let St,ce=0;const ue=at-ht+1;let Je=!1,ye=0;const Xn=new Array(ue);for(z=0;z<ue;z++)Xn[z]=0;for(z=gt;z<=X;z++){const he=E[z];if(ce>=ue){zt(he,j,U,!0);continue}let Xe;if(he.key!=null)Xe=Et.get(he.key);else for(St=ht;St<=at;St++)if(Xn[St-ht]===0&&Ls(he,I[St])){Xe=St;break}Xe===void 0?zt(he,j,U,!0):(Xn[Xe-ht]=z+1,Xe>=ye?ye=Xe:Je=!0,P(he,I[Xe],k,null,j,U,Q,G,K),ce++)}const Ur=Je?q0(Xn):gr;for(St=Ur.length-1,z=ue-1;z>=0;z--){const he=ht+z,Xe=I[he],co=I[he+1],sr=he+1<ct?co.el||co.placeholder:F;Xn[z]===0?P(null,Xe,k,sr,j,U,Q,G,K):Je&&(St<0||z!==Ur[St]?xe(Xe,k,sr,2):St--)}}},xe=(E,I,k,F,j=null)=>{const{el:U,type:Q,transition:G,children:K,shapeFlag:z}=E;if(z&6){xe(E.component.subTree,I,k,F);return}if(z&128){E.suspense.move(I,k,F);return}if(z&64){Q.move(E,I,k,rt);return}if(Q===Ae){s(U,I,k);for(let X=0;X<K.length;X++)xe(K[X],I,k,F);s(E.anchor,I,k);return}if(Q===mi){B(E,I,k);return}if(F!==2&&z&1&&G)if(F===0)G.beforeEnter(U),s(U,I,k),De(()=>G.enter(U),j);else{const{leave:X,delayLeave:at,afterLeave:gt}=G,ht=()=>{E.ctx.isUnmounted?r(U):s(U,I,k)},Et=()=>{U._isLeaving&&U[Fn](!0),X(U,()=>{ht(),gt&&gt()})};at?at(U,ht,Et):Et()}else s(U,I,k)},zt=(E,I,k,F=!1,j=!1)=>{const{type:U,props:Q,ref:G,children:K,dynamicChildren:z,shapeFlag:ct,patchFlag:X,dirs:at,cacheIndex:gt}=E;if(X===-2&&(j=!1),G!=null&&($n(),fi(G,null,k,E,!0),jn()),gt!=null&&(I.renderCache[gt]=void 0),ct&256){I.ctx.deactivate(E);return}const ht=ct&1&&at,Et=!di(E);let St;if(Et&&(St=Q&&Q.onVnodeBeforeUnmount)&&dn(St,I,E),ct&6)fn(E.component,k,F);else{if(ct&128){E.suspense.unmount(k,F);return}ht&&ks(E,null,I,"beforeUnmount"),ct&64?E.type.remove(E,I,k,rt,F):z&&!z.hasOnce&&(U!==Ae||X>0&&X&64)?Me(z,I,k,!1,!0):(U===Ae&&X&384||!j&&ct&16)&&Me(K,I,k),F&&Kt(E)}(Et&&(St=Q&&Q.onVnodeUnmounted)||ht)&&De(()=>{St&&dn(St,I,E),ht&&ks(E,null,I,"unmounted")},k)},Kt=E=>{const{type:I,el:k,anchor:F,transition:j}=E;if(I===Ae){Jn(k,F);return}if(I===mi){H(E);return}const U=()=>{r(k),j&&!j.persisted&&j.afterLeave&&j.afterLeave()};if(E.shapeFlag&1&&j&&!j.persisted){const{leave:Q,delayLeave:G}=j,K=()=>Q(k,U);G?G(E.el,U,K):K()}else U()},Jn=(E,I)=>{let k;for(;E!==I;)k=m(E),r(E),E=k;r(I)},fn=(E,I,k)=>{const{bum:F,scope:j,job:U,subTree:Q,um:G,m:K,a:z}=E;gf(K),gf(z),F&&Mo(F),j.stop(),U&&(U.flags|=8,zt(Q,E,I,k)),G&&De(G,I),De(()=>{E.isUnmounted=!0},I)},Me=(E,I,k,F=!1,j=!1,U=0)=>{for(let Q=U;Q<E.length;Q++)zt(E[Q],I,k,F,j)},L=E=>{if(E.shapeFlag&6)return L(E.component.subTree);if(E.shapeFlag&128)return E.suspense.next();const I=m(E.anchor||E.el),k=I&&I[mm];return k?m(k):I};let tt=!1;const J=(E,I,k)=>{E==null?I._vnode&&zt(I._vnode,null,null,!0):P(I._vnode||null,E,I,null,null,null,k),I._vnode=E,tt||(tt=!0,rf(),fm(),tt=!1)},rt={p:P,um:zt,m:xe,r:Kt,mt:Z,mc:v,pc:pt,pbc:T,n:L,o:e};return{render:J,hydrate:void 0,createApp:D0(J)}}function Nl({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Vs({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function j0(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function du(e,t,n=!1){const s=e.children,r=t.children;if(ft(s)&&ft(r))for(let i=0;i<s.length;i++){const o=s[i];let l=r[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=r[i]=rs(r[i]),l.el=o.el),!n&&l.patchFlag!==-2&&du(o,l)),l.type===La&&l.patchFlag!==-1&&(l.el=o.el),l.type===Oe&&!l.el&&(l.el=o.el)}}function q0(e){const t=e.slice(),n=[0];let s,r,i,o,l;const c=e.length;for(s=0;s<c;s++){const u=e[s];if(u!==0){if(r=n[n.length-1],e[r]<u){t[s]=r,n.push(s);continue}for(i=0,o=n.length-1;i<o;)l=i+o>>1,e[n[l]]<u?i=l+1:o=l;u<e[n[i]]&&(i>0&&(t[s]=n[i-1]),n[i]=s)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=t[o];return n}function Bm(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Bm(t)}function gf(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const H0=Symbol.for("v-scx"),z0=()=>vn(H0);function cs(e,t,n){return $m(e,t,n)}function $m(e,t,n=Mt){const{immediate:s,deep:r,flush:i,once:o}=n,l=le({},n),c=t&&s||!t&&i!=="post";let u;if(ki){if(i==="sync"){const y=z0();u=y.__watcherHandles||(y.__watcherHandles=[])}else if(!c){const y=()=>{};return y.stop=an,y.resume=an,y.pause=an,y}}const h=Re;l.call=(y,b,P)=>cn(y,h,b,P);let d=!1;i==="post"?l.scheduler=y=>{De(y,h&&h.suspense)}:i!=="sync"&&(d=!0,l.scheduler=(y,b)=>{b?y():cu(y)}),l.augmentJob=y=>{t&&(y.flags|=4),d&&(y.flags|=2,h&&(y.id=h.uid,y.i=h))};const m=o0(e,t,l);return ki&&(u?u.push(m):c&&m()),m}function K0(e,t,n){const s=this.proxy,r=Yt(e)?e.includes(".")?jm(s,e):()=>s[e]:e.bind(s,s);let i;vt(t)?i=t:(i=t.handler,n=t);const o=Xi(this),l=$m(r,i.bind(s),n);return o(),l}function jm(e,t){const n=t.split(".");return()=>{let s=e;for(let r=0;r<n.length&&s;r++)s=s[n[r]];return s}}const G0=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${nn(t)}Modifiers`]||e[`${Ts(t)}Modifiers`];function W0(e,t,...n){if(e.isUnmounted)return;const s=e.vnode.props||Mt;let r=n;const i=t.startsWith("update:"),o=i&&G0(s,t.slice(7));o&&(o.trim&&(r=n.map(h=>Yt(h)?h.trim():h)),o.number&&(r=n.map(Jo)));let l,c=s[l=Rl(t)]||s[l=Rl(nn(t))];!c&&i&&(c=s[l=Rl(Ts(t))]),c&&cn(c,e,6,r);const u=s[l+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,cn(u,e,6,r)}}function qm(e,t,n=!1){const s=t.emitsCache,r=s.get(e);if(r!==void 0)return r;const i=e.emits;let o={},l=!1;if(!vt(e)){const c=u=>{const h=qm(u,t,!0);h&&(l=!0,le(o,h))};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!i&&!l?(Lt(e)&&s.set(e,null),null):(ft(i)?i.forEach(c=>o[c]=null):le(o,i),Lt(e)&&s.set(e,o),o)}function Ma(e,t){return!e||!Aa(t)?!1:(t=t.slice(2).replace(/Once$/,""),Dt(e,t[0].toLowerCase()+t.slice(1))||Dt(e,Ts(t))||Dt(e,t))}function yf(e){const{type:t,vnode:n,proxy:s,withProxy:r,propsOptions:[i],slots:o,attrs:l,emit:c,render:u,renderCache:h,props:d,data:m,setupState:y,ctx:b,inheritAttrs:P}=e,x=ta(e);let M,O;try{if(n.shapeFlag&4){const H=r||s,nt=H;M=_n(u.call(nt,H,h,d,y,m,b)),O=l}else{const H=t;M=_n(H.length>1?H(d,{attrs:l,slots:o,emit:c}):H(d,null)),O=t.props?l:Q0(l)}}catch(H){gi.length=0,Va(H,e,1),M=$t(Oe)}let B=M;if(O&&P!==!1){const H=Object.keys(O),{shapeFlag:nt}=B;H.length&&nt&7&&(i&&H.some(Yc)&&(O=J0(O,i)),B=ms(B,O,!1,!0))}return n.dirs&&(B=ms(B,null,!1,!0),B.dirs=B.dirs?B.dirs.concat(n.dirs):n.dirs),n.transition&&Pi(B,n.transition),M=B,ta(x),M}const Q0=e=>{let t;for(const n in e)(n==="class"||n==="style"||Aa(n))&&((t||(t={}))[n]=e[n]);return t},J0=(e,t)=>{const n={};for(const s in e)(!Yc(s)||!(s.slice(9)in t))&&(n[s]=e[s]);return n};function X0(e,t,n){const{props:s,children:r,component:i}=e,{props:o,children:l,patchFlag:c}=t,u=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return s?_f(s,o,u):!!o;if(c&8){const h=t.dynamicProps;for(let d=0;d<h.length;d++){const m=h[d];if(o[m]!==s[m]&&!Ma(u,m))return!0}}}else return(r||l)&&(!l||!l.$stable)?!0:s===o?!1:s?o?_f(s,o,u):!0:!!o;return!1}function _f(e,t,n){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(t[i]!==e[i]&&!Ma(n,i))return!0}return!1}function Y0({vnode:e,parent:t},n){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===e&&(s.el=e.el),s===e)(e=t.vnode).el=n,t=t.parent;else break}}const Hm=e=>e.__isSuspense;function Z0(e,t){t&&t.pendingBranch?ft(e)?t.effects.push(...e):t.effects.push(e):hm(e)}const Ae=Symbol.for("v-fgt"),La=Symbol.for("v-txt"),Oe=Symbol.for("v-cmt"),mi=Symbol.for("v-stc"),gi=[];let Ge=null;function lt(e=!1){gi.push(Ge=e?null:[])}function tw(){gi.pop(),Ge=gi[gi.length-1]||null}let xi=1;function vf(e,t=!1){xi+=e,e<0&&Ge&&t&&(Ge.hasOnce=!0)}function zm(e){return e.dynamicChildren=xi>0?Ge||gr:null,tw(),xi>0&&Ge&&Ge.push(e),e}function dt(e,t,n,s,r,i){return zm(R(e,t,n,s,r,i,!0))}function Fa(e,t,n,s,r){return zm($t(e,t,n,s,r,!0))}function na(e){return e?e.__v_isVNode===!0:!1}function Ls(e,t){return e.type===t.type&&e.key===t.key}const Km=({key:e})=>e??null,Uo=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Yt(e)||Pe(e)||vt(e)?{i:Ke,r:e,k:t,f:!!n}:e:null);function R(e,t=null,n=null,s=0,r=null,i=e===Ae?0:1,o=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Km(t),ref:t&&Uo(t),scopeId:pm,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Ke};return l?(pu(c,n),i&128&&e.normalize(c)):n&&(c.shapeFlag|=Yt(n)?8:16),xi>0&&!o&&Ge&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&Ge.push(c),c}const $t=ew;function ew(e,t=null,n=null,s=0,r=null,i=!1){if((!e||e===A0)&&(e=Oe),na(e)){const l=ms(e,t,!0);return n&&pu(l,n),xi>0&&!i&&Ge&&(l.shapeFlag&6?Ge[Ge.indexOf(e)]=l:Ge.push(l)),l.patchFlag=-2,l}if(fw(e)&&(e=e.__vccOpts),t){t=nw(t);let{class:l,style:c}=t;l&&!Yt(l)&&(t.class=tn(l)),Lt(c)&&(au(c)&&!ft(c)&&(c=le({},c)),t.style=Wi(c))}const o=Yt(e)?1:Hm(e)?128:gm(e)?64:Lt(e)?4:vt(e)?2:0;return R(e,t,n,s,r,o,i,!0)}function nw(e){return e?au(e)||Nm(e)?le({},e):e:null}function ms(e,t,n=!1,s=!1){const{props:r,ref:i,patchFlag:o,children:l,transition:c}=e,u=t?sw(r||{},t):r,h={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&Km(u),ref:t&&t.ref?n&&i?ft(i)?i.concat(Uo(t)):[i,Uo(t)]:Uo(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Ae?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:c,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&ms(e.ssContent),ssFallback:e.ssFallback&&ms(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c&&s&&Pi(h,c.clone(h)),h}function Se(e=" ",t=0){return $t(La,null,e,t)}function Tr(e,t){const n=$t(mi,null,e);return n.staticCount=t,n}function Ht(e="",t=!1){return t?(lt(),Fa(Oe,null,e)):$t(Oe,null,e)}function _n(e){return e==null||typeof e=="boolean"?$t(Oe):ft(e)?$t(Ae,null,e.slice()):na(e)?rs(e):$t(La,null,String(e))}function rs(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:ms(e)}function pu(e,t){let n=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(ft(t))n=16;else if(typeof t=="object")if(s&65){const r=t.default;r&&(r._c&&(r._d=!1),pu(e,r()),r._c&&(r._d=!0));return}else{n=32;const r=t._;!r&&!Nm(t)?t._ctx=Ke:r===3&&Ke&&(Ke.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else vt(t)?(t={default:t,_ctx:Ke},n=32):(t=String(t),s&64?(n=16,t=[Se(t)]):n=8);e.children=t,e.shapeFlag|=n}function sw(...e){const t={};for(let n=0;n<e.length;n++){const s=e[n];for(const r in s)if(r==="class")t.class!==s.class&&(t.class=tn([t.class,s.class]));else if(r==="style")t.style=Wi([t.style,s.style]);else if(Aa(r)){const i=t[r],o=s[r];o&&i!==o&&!(ft(i)&&i.includes(o))&&(t[r]=i?[].concat(i,o):o)}else r!==""&&(t[r]=s[r])}return t}function dn(e,t,n,s=null){cn(e,t,7,[n,s])}const rw=km();let iw=0;function ow(e,t,n){const s=e.type,r=(t?t.appContext:e.appContext)||rw,i={uid:iw++,vnode:e,type:s,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Dv(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Mm(s,r),emitsOptions:qm(s,r),emit:null,emitted:null,propsDefaults:Mt,inheritAttrs:s.inheritAttrs,ctx:Mt,data:Mt,props:Mt,attrs:Mt,slots:Mt,refs:Mt,setupState:Mt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=W0.bind(null,i),e.ce&&e.ce(i),i}let Re=null;const mu=()=>Re||Ke;let sa,dc;{const e=Ca(),t=(n,s)=>{let r;return(r=e[n])||(r=e[n]=[]),r.push(s),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};sa=t("__VUE_INSTANCE_SETTERS__",n=>Re=n),dc=t("__VUE_SSR_SETTERS__",n=>ki=n)}const Xi=e=>{const t=Re;return sa(e),e.scope.on(),()=>{e.scope.off(),sa(t)}},wf=()=>{Re&&Re.scope.off(),sa(null)};function Gm(e){return e.vnode.shapeFlag&4}let ki=!1;function aw(e,t=!1,n=!1){t&&dc(t);const{props:s,children:r}=e.vnode,i=Gm(e);N0(e,s,i,t),F0(e,r,n||t);const o=i?lw(e,t):void 0;return t&&dc(!1),o}function lw(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,S0);const{setup:s}=n;if(s){$n();const r=e.setupContext=s.length>1?uw(e):null,i=Xi(e),o=Qi(s,e,0,[e.props,r]),l=Fp(o);if(jn(),i(),(l||e.sp)&&!di(e)&&Am(e),l){if(o.then(wf,wf),t)return o.then(c=>{Ef(e,c)}).catch(c=>{Va(c,e,0)});e.asyncDep=o}else Ef(e,o)}else Wm(e)}function Ef(e,t,n){vt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Lt(t)&&(e.setupState=lm(t)),Wm(e)}function Wm(e,t,n){const s=e.type;e.render||(e.render=s.render||an);{const r=Xi(e);$n();try{R0(e)}finally{jn(),r()}}}const cw={get(e,t){return Te(e,"get",""),e[t]}};function uw(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,cw),slots:e.slots,emit:e.emit,expose:t}}function Ua(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(lm(Zv(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in pi)return pi[n](e)},has(t,n){return n in t||n in pi}})):e.proxy}function hw(e,t=!0){return vt(e)?e.displayName||e.name:e.name||t&&e.__name}function fw(e){return vt(e)&&"__vccOpts"in e}const Xt=(e,t)=>r0(e,t,ki);function gu(e,t,n){const s=arguments.length;return s===2?Lt(t)&&!ft(t)?na(t)?$t(e,null,[t]):$t(e,t):$t(e,null,t):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&na(n)&&(n=[n]),$t(e,t,n))}const dw="3.5.19";/**
* @vue/runtime-dom v3.5.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let pc;const bf=typeof window<"u"&&window.trustedTypes;if(bf)try{pc=bf.createPolicy("vue",{createHTML:e=>e})}catch{}const Qm=pc?e=>pc.createHTML(e):e=>e,pw="http://www.w3.org/2000/svg",mw="http://www.w3.org/1998/Math/MathML",Ln=typeof document<"u"?document:null,Tf=Ln&&Ln.createElement("template"),gw={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,s)=>{const r=t==="svg"?Ln.createElementNS(pw,e):t==="mathml"?Ln.createElementNS(mw,e):n?Ln.createElement(e,{is:n}):Ln.createElement(e);return e==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:e=>Ln.createTextNode(e),createComment:e=>Ln.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Ln.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,s,r,i){const o=n?n.previousSibling:t.lastChild;if(r&&(r===i||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),n),!(r===i||!(r=r.nextSibling)););else{Tf.innerHTML=Qm(s==="svg"?`<svg>${e}</svg>`:s==="mathml"?`<math>${e}</math>`:e);const l=Tf.content;if(s==="svg"||s==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}t.insertBefore(l,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},es="transition",Zr="animation",Vi=Symbol("_vtc"),Jm={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},yw=le({},vm,Jm),_w=e=>(e.displayName="Transition",e.props=yw,e),vw=_w((e,{slots:t})=>gu(d0,ww(e),t)),Ds=(e,t=[])=>{ft(e)?e.forEach(n=>n(...t)):e&&e(...t)},Af=e=>e?ft(e)?e.some(t=>t.length>1):e.length>1:!1;function ww(e){const t={};for(const A in e)A in Jm||(t[A]=e[A]);if(e.css===!1)return t;const{name:n="v",type:s,duration:r,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:l=`${n}-enter-to`,appearFromClass:c=i,appearActiveClass:u=o,appearToClass:h=l,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:m=`${n}-leave-active`,leaveToClass:y=`${n}-leave-to`}=e,b=Ew(r),P=b&&b[0],x=b&&b[1],{onBeforeEnter:M,onEnter:O,onEnterCancelled:B,onLeave:H,onLeaveCancelled:nt,onBeforeAppear:st=M,onAppear:S=O,onAppearCancelled:v=B}=t,_=(A,w,Z,Y)=>{A._enterCancelled=Y,Ns(A,w?h:l),Ns(A,w?u:o),Z&&Z()},T=(A,w)=>{A._isLeaving=!1,Ns(A,d),Ns(A,y),Ns(A,m),w&&w()},C=A=>(w,Z)=>{const Y=A?S:O,Tt=()=>_(w,A,Z);Ds(Y,[w,Tt]),If(()=>{Ns(w,A?c:i),Nn(w,A?h:l),Af(Y)||Sf(w,s,P,Tt)})};return le(t,{onBeforeEnter(A){Ds(M,[A]),Nn(A,i),Nn(A,o)},onBeforeAppear(A){Ds(st,[A]),Nn(A,c),Nn(A,u)},onEnter:C(!1),onAppear:C(!0),onLeave(A,w){A._isLeaving=!0;const Z=()=>T(A,w);Nn(A,d),A._enterCancelled?(Nn(A,m),Pf()):(Pf(),Nn(A,m)),If(()=>{A._isLeaving&&(Ns(A,d),Nn(A,y),Af(H)||Sf(A,s,x,Z))}),Ds(H,[A,Z])},onEnterCancelled(A){_(A,!1,void 0,!0),Ds(B,[A])},onAppearCancelled(A){_(A,!0,void 0,!0),Ds(v,[A])},onLeaveCancelled(A){T(A),Ds(nt,[A])}})}function Ew(e){if(e==null)return null;if(Lt(e))return[Ol(e.enter),Ol(e.leave)];{const t=Ol(e);return[t,t]}}function Ol(e){return Tv(e)}function Nn(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[Vi]||(e[Vi]=new Set)).add(t)}function Ns(e,t){t.split(/\s+/).forEach(s=>s&&e.classList.remove(s));const n=e[Vi];n&&(n.delete(t),n.size||(e[Vi]=void 0))}function If(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let bw=0;function Sf(e,t,n,s){const r=e._endId=++bw,i=()=>{r===e._endId&&s()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:l,propCount:c}=Tw(e,t);if(!o)return s();const u=o+"end";let h=0;const d=()=>{e.removeEventListener(u,m),i()},m=y=>{y.target===e&&++h>=c&&d()};setTimeout(()=>{h<c&&d()},l+1),e.addEventListener(u,m)}function Tw(e,t){const n=window.getComputedStyle(e),s=b=>(n[b]||"").split(", "),r=s(`${es}Delay`),i=s(`${es}Duration`),o=Rf(r,i),l=s(`${Zr}Delay`),c=s(`${Zr}Duration`),u=Rf(l,c);let h=null,d=0,m=0;t===es?o>0&&(h=es,d=o,m=i.length):t===Zr?u>0&&(h=Zr,d=u,m=c.length):(d=Math.max(o,u),h=d>0?o>u?es:Zr:null,m=h?h===es?i.length:c.length:0);const y=h===es&&/\b(transform|all)(,|$)/.test(s(`${es}Property`).toString());return{type:h,timeout:d,propCount:m,hasTransform:y}}function Rf(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,s)=>Cf(n)+Cf(e[s])))}function Cf(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function Pf(){return document.body.offsetHeight}function Aw(e,t,n){const s=e[Vi];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const ra=Symbol("_vod"),Xm=Symbol("_vsh"),Iw={beforeMount(e,{value:t},{transition:n}){e[ra]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):ti(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:s}){!t!=!n&&(s?t?(s.beforeEnter(e),ti(e,!0),s.enter(e)):s.leave(e,()=>{ti(e,!1)}):ti(e,t))},beforeUnmount(e,{value:t}){ti(e,t)}};function ti(e,t){e.style.display=t?e[ra]:"none",e[Xm]=!t}const Ym=Symbol("");function Sw(e){const t=mu();if(!t)return;const n=t.ut=(r=e(t.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${t.uid}"]`)).forEach(i=>ia(i,r))},s=()=>{const r=e(t.proxy);t.ce?ia(t.ce,r):mc(t.subTree,r),n(r)};Sm(()=>{hm(s)}),Pn(()=>{cs(s,an,{flush:"post"});const r=new MutationObserver(s);r.observe(t.subTree.el.parentNode,{childList:!0}),Vr(()=>r.disconnect())})}function mc(e,t){if(e.shapeFlag&128){const n=e.suspense;e=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{mc(n.activeBranch,t)})}for(;e.component;)e=e.component.subTree;if(e.shapeFlag&1&&e.el)ia(e.el,t);else if(e.type===Ae)e.children.forEach(n=>mc(n,t));else if(e.type===mi){let{el:n,anchor:s}=e;for(;n&&(ia(n,t),n!==s);)n=n.nextSibling}}function ia(e,t){if(e.nodeType===1){const n=e.style;let s="";for(const r in t){const i=Vv(t[r]);n.setProperty(`--${r}`,i),s+=`--${r}: ${i};`}n[Ym]=s}}const Rw=/(^|;)\s*display\s*:/;function Cw(e,t,n){const s=e.style,r=Yt(n);let i=!1;if(n&&!r){if(t)if(Yt(t))for(const o of t.split(";")){const l=o.slice(0,o.indexOf(":")).trim();n[l]==null&&Bo(s,l,"")}else for(const o in t)n[o]==null&&Bo(s,o,"");for(const o in n)o==="display"&&(i=!0),Bo(s,o,n[o])}else if(r){if(t!==n){const o=s[Ym];o&&(n+=";"+o),s.cssText=n,i=Rw.test(n)}}else t&&e.removeAttribute("style");ra in e&&(e[ra]=i?s.display:"",e[Xm]&&(s.display="none"))}const xf=/\s*!important$/;function Bo(e,t,n){if(ft(n))n.forEach(s=>Bo(e,t,s));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const s=Pw(e,t);xf.test(n)?e.setProperty(Ts(s),n.replace(xf,""),"important"):e[s]=n}}const kf=["Webkit","Moz","ms"],Ml={};function Pw(e,t){const n=Ml[t];if(n)return n;let s=nn(t);if(s!=="filter"&&s in e)return Ml[t]=s;s=Ra(s);for(let r=0;r<kf.length;r++){const i=kf[r]+s;if(i in e)return Ml[t]=i}return t}const Vf="http://www.w3.org/1999/xlink";function Df(e,t,n,s,r,i=Pv(t)){s&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(Vf,t.slice(6,t.length)):e.setAttributeNS(Vf,t,n):n==null||i&&!jp(n)?e.removeAttribute(t):e.setAttribute(t,i?"":Sn(n)?String(n):n)}function Nf(e,t,n,s,r){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?Qm(n):n);return}const i=e.tagName;if(t==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?e.getAttribute("value")||"":e.value,c=n==null?e.type==="checkbox"?"on":"":String(n);(l!==c||!("_value"in e))&&(e.value=c),n==null&&e.removeAttribute(t),e._value=n;return}let o=!1;if(n===""||n==null){const l=typeof e[t];l==="boolean"?n=jp(n):n==null&&l==="string"?(n="",o=!0):l==="number"&&(n=0,o=!0)}try{e[t]=n}catch{}o&&e.removeAttribute(r||t)}function Fs(e,t,n,s){e.addEventListener(t,n,s)}function xw(e,t,n,s){e.removeEventListener(t,n,s)}const Of=Symbol("_vei");function kw(e,t,n,s,r=null){const i=e[Of]||(e[Of]={}),o=i[t];if(s&&o)o.value=s;else{const[l,c]=Vw(t);if(s){const u=i[t]=Ow(s,r);Fs(e,l,u,c)}else o&&(xw(e,l,o,c),i[t]=void 0)}}const Mf=/(?:Once|Passive|Capture)$/;function Vw(e){let t;if(Mf.test(e)){t={};let s;for(;s=e.match(Mf);)e=e.slice(0,e.length-s[0].length),t[s[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Ts(e.slice(2)),t]}let Ll=0;const Dw=Promise.resolve(),Nw=()=>Ll||(Dw.then(()=>Ll=0),Ll=Date.now());function Ow(e,t){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;cn(Mw(s,n.value),t,5,[s])};return n.value=e,n.attached=Nw(),n}function Mw(e,t){if(ft(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(s=>r=>!r._stopped&&s&&s(r))}else return t}const Lf=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Lw=(e,t,n,s,r,i)=>{const o=r==="svg";t==="class"?Aw(e,s,o):t==="style"?Cw(e,n,s):Aa(t)?Yc(t)||kw(e,t,n,s,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Fw(e,t,s,o))?(Nf(e,t,s),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Df(e,t,s,o,i,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Yt(s))?Nf(e,nn(t),s,i,t):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),Df(e,t,s,o))};function Fw(e,t,n,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in e&&Lf(t)&&vt(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const r=e.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return Lf(t)&&Yt(n)?!1:t in e}const oa=e=>{const t=e.props["onUpdate:modelValue"]||!1;return ft(t)?n=>Mo(t,n):t};function Uw(e){e.target.composing=!0}function Ff(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Er=Symbol("_assign"),Bw={created(e,{modifiers:{lazy:t,trim:n,number:s}},r){e[Er]=oa(r);const i=s||r.props&&r.props.type==="number";Fs(e,t?"change":"input",o=>{if(o.target.composing)return;let l=e.value;n&&(l=l.trim()),i&&(l=Jo(l)),e[Er](l)}),n&&Fs(e,"change",()=>{e.value=e.value.trim()}),t||(Fs(e,"compositionstart",Uw),Fs(e,"compositionend",Ff),Fs(e,"change",Ff))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:s,trim:r,number:i}},o){if(e[Er]=oa(o),e.composing)return;const l=(i||e.type==="number")&&!/^0\d/.test(e.value)?Jo(e.value):e.value,c=t??"";l!==c&&(document.activeElement===e&&e.type!=="range"&&(s&&t===n||r&&e.value.trim()===c)||(e.value=c))}},$w={deep:!0,created(e,{value:t,modifiers:{number:n}},s){const r=Ia(t);Fs(e,"change",()=>{const i=Array.prototype.filter.call(e.options,o=>o.selected).map(o=>n?Jo(aa(o)):aa(o));e[Er](e.multiple?r?new Set(i):i:i[0]),e._assigning=!0,lu(()=>{e._assigning=!1})}),e[Er]=oa(s)},mounted(e,{value:t}){Uf(e,t)},beforeUpdate(e,t,n){e[Er]=oa(n)},updated(e,{value:t}){e._assigning||Uf(e,t)}};function Uf(e,t){const n=e.multiple,s=ft(t);if(!(n&&!s&&!Ia(t))){for(let r=0,i=e.options.length;r<i;r++){const o=e.options[r],l=aa(o);if(n)if(s){const c=typeof l;c==="string"||c==="number"?o.selected=t.some(u=>String(u)===String(l)):o.selected=kv(t,l)>-1}else o.selected=t.has(l);else if(Pa(aa(o),t)){e.selectedIndex!==r&&(e.selectedIndex=r);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function aa(e){return"_value"in e?e._value:e.value}const jw=["ctrl","shift","alt","meta"],qw={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>jw.some(n=>e[`${n}Key`]&&!t.includes(n))},mr=(e,t)=>{const n=e._withMods||(e._withMods={}),s=t.join(".");return n[s]||(n[s]=(r,...i)=>{for(let o=0;o<t.length;o++){const l=qw[t[o]];if(l&&l(r,t))return}return e(r,...i)})},Hw={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},zw=(e,t)=>{const n=e._withKeys||(e._withKeys={}),s=t.join(".");return n[s]||(n[s]=r=>{if(!("key"in r))return;const i=Ts(r.key);if(t.some(o=>o===i||Hw[o]===i))return e(r)})},Kw=le({patchProp:Lw},gw);let Bf;function Gw(){return Bf||(Bf=B0(Kw))}const Ww=(...e)=>{const t=Gw().createApp(...e),{mount:n}=t;return t.mount=s=>{const r=Jw(s);if(!r)return;const i=t._component;!vt(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=n(r,!1,Qw(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},t};function Qw(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Jw(e){return Yt(e)?document.querySelector(e):e}/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const ur=typeof document<"u";function Zm(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Xw(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&Zm(e.default)}const Vt=Object.assign;function Fl(e,t){const n={};for(const s in t){const r=t[s];n[s]=un(r)?r.map(e):e(r)}return n}const yi=()=>{},un=Array.isArray,tg=/#/g,Yw=/&/g,Zw=/\//g,t1=/=/g,e1=/\?/g,eg=/\+/g,n1=/%5B/g,s1=/%5D/g,ng=/%5E/g,r1=/%60/g,sg=/%7B/g,i1=/%7C/g,rg=/%7D/g,o1=/%20/g;function yu(e){return encodeURI(""+e).replace(i1,"|").replace(n1,"[").replace(s1,"]")}function a1(e){return yu(e).replace(sg,"{").replace(rg,"}").replace(ng,"^")}function gc(e){return yu(e).replace(eg,"%2B").replace(o1,"+").replace(tg,"%23").replace(Yw,"%26").replace(r1,"`").replace(sg,"{").replace(rg,"}").replace(ng,"^")}function l1(e){return gc(e).replace(t1,"%3D")}function c1(e){return yu(e).replace(tg,"%23").replace(e1,"%3F")}function u1(e){return e==null?"":c1(e).replace(Zw,"%2F")}function Di(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const h1=/\/$/,f1=e=>e.replace(h1,"");function Ul(e,t,n="/"){let s,r={},i="",o="";const l=t.indexOf("#");let c=t.indexOf("?");return l<c&&l>=0&&(c=-1),c>-1&&(s=t.slice(0,c),i=t.slice(c+1,l>-1?l:t.length),r=e(i)),l>-1&&(s=s||t.slice(0,l),o=t.slice(l,t.length)),s=g1(s??t,n),{fullPath:s+(i&&"?")+i+o,path:s,query:r,hash:Di(o)}}function d1(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function $f(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function p1(e,t,n){const s=t.matched.length-1,r=n.matched.length-1;return s>-1&&s===r&&Ar(t.matched[s],n.matched[r])&&ig(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function Ar(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function ig(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!m1(e[n],t[n]))return!1;return!0}function m1(e,t){return un(e)?jf(e,t):un(t)?jf(t,e):e===t}function jf(e,t){return un(t)?e.length===t.length&&e.every((n,s)=>n===t[s]):e.length===1&&e[0]===t}function g1(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),s=e.split("/"),r=s[s.length-1];(r===".."||r===".")&&s.push("");let i=n.length-1,o,l;for(o=0;o<s.length;o++)if(l=s[o],l!==".")if(l==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+s.slice(o).join("/")}const ns={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Ni;(function(e){e.pop="pop",e.push="push"})(Ni||(Ni={}));var _i;(function(e){e.back="back",e.forward="forward",e.unknown=""})(_i||(_i={}));function y1(e){if(!e)if(ur){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),f1(e)}const _1=/^[^#]+#/;function v1(e,t){return e.replace(_1,"#")+t}function w1(e,t){const n=document.documentElement.getBoundingClientRect(),s=e.getBoundingClientRect();return{behavior:t.behavior,left:s.left-n.left-(t.left||0),top:s.top-n.top-(t.top||0)}}const Ba=()=>({left:window.scrollX,top:window.scrollY});function E1(e){let t;if("el"in e){const n=e.el,s=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;t=w1(r,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function qf(e,t){return(history.state?history.state.position-t:-1)+e}const yc=new Map;function b1(e,t){yc.set(e,t)}function T1(e){const t=yc.get(e);return yc.delete(e),t}let A1=()=>location.protocol+"//"+location.host;function og(e,t){const{pathname:n,search:s,hash:r}=t,i=e.indexOf("#");if(i>-1){let l=r.includes(e.slice(i))?e.slice(i).length:1,c=r.slice(l);return c[0]!=="/"&&(c="/"+c),$f(c,"")}return $f(n,e)+s+r}function I1(e,t,n,s){let r=[],i=[],o=null;const l=({state:m})=>{const y=og(e,location),b=n.value,P=t.value;let x=0;if(m){if(n.value=y,t.value=m,o&&o===b){o=null;return}x=P?m.position-P.position:0}else s(y);r.forEach(M=>{M(n.value,b,{delta:x,type:Ni.pop,direction:x?x>0?_i.forward:_i.back:_i.unknown})})};function c(){o=n.value}function u(m){r.push(m);const y=()=>{const b=r.indexOf(m);b>-1&&r.splice(b,1)};return i.push(y),y}function h(){const{history:m}=window;m.state&&m.replaceState(Vt({},m.state,{scroll:Ba()}),"")}function d(){for(const m of i)m();i=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",h,{passive:!0}),{pauseListeners:c,listen:u,destroy:d}}function Hf(e,t,n,s=!1,r=!1){return{back:e,current:t,forward:n,replaced:s,position:window.history.length,scroll:r?Ba():null}}function S1(e){const{history:t,location:n}=window,s={value:og(e,n)},r={value:t.state};r.value||i(s.value,{back:null,current:s.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function i(c,u,h){const d=e.indexOf("#"),m=d>-1?(n.host&&document.querySelector("base")?e:e.slice(d))+c:A1()+e+c;try{t[h?"replaceState":"pushState"](u,"",m),r.value=u}catch(y){console.error(y),n[h?"replace":"assign"](m)}}function o(c,u){const h=Vt({},t.state,Hf(r.value.back,c,r.value.forward,!0),u,{position:r.value.position});i(c,h,!0),s.value=c}function l(c,u){const h=Vt({},r.value,t.state,{forward:c,scroll:Ba()});i(h.current,h,!0);const d=Vt({},Hf(s.value,c,null),{position:h.position+1},u);i(c,d,!1),s.value=c}return{location:s,state:r,push:l,replace:o}}function R1(e){e=y1(e);const t=S1(e),n=I1(e,t.state,t.location,t.replace);function s(i,o=!0){o||n.pauseListeners(),history.go(i)}const r=Vt({location:"",base:e,go:s,createHref:v1.bind(null,e)},t,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>t.state.value}),r}function C1(e){return typeof e=="string"||e&&typeof e=="object"}function ag(e){return typeof e=="string"||typeof e=="symbol"}const lg=Symbol("");var zf;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(zf||(zf={}));function Ir(e,t){return Vt(new Error,{type:e,[lg]:!0},t)}function On(e,t){return e instanceof Error&&lg in e&&(t==null||!!(e.type&t))}const Kf="[^/]+?",P1={sensitive:!1,strict:!1,start:!0,end:!0},x1=/[.+*?^${}()[\]/\\]/g;function k1(e,t){const n=Vt({},P1,t),s=[];let r=n.start?"^":"";const i=[];for(const u of e){const h=u.length?[]:[90];n.strict&&!u.length&&(r+="/");for(let d=0;d<u.length;d++){const m=u[d];let y=40+(n.sensitive?.25:0);if(m.type===0)d||(r+="/"),r+=m.value.replace(x1,"\\$&"),y+=40;else if(m.type===1){const{value:b,repeatable:P,optional:x,regexp:M}=m;i.push({name:b,repeatable:P,optional:x});const O=M||Kf;if(O!==Kf){y+=10;try{new RegExp(`(${O})`)}catch(H){throw new Error(`Invalid custom RegExp for param "${b}" (${O}): `+H.message)}}let B=P?`((?:${O})(?:/(?:${O}))*)`:`(${O})`;d||(B=x&&u.length<2?`(?:/${B})`:"/"+B),x&&(B+="?"),r+=B,y+=20,x&&(y+=-8),P&&(y+=-20),O===".*"&&(y+=-50)}h.push(y)}s.push(h)}if(n.strict&&n.end){const u=s.length-1;s[u][s[u].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function l(u){const h=u.match(o),d={};if(!h)return null;for(let m=1;m<h.length;m++){const y=h[m]||"",b=i[m-1];d[b.name]=y&&b.repeatable?y.split("/"):y}return d}function c(u){let h="",d=!1;for(const m of e){(!d||!h.endsWith("/"))&&(h+="/"),d=!1;for(const y of m)if(y.type===0)h+=y.value;else if(y.type===1){const{value:b,repeatable:P,optional:x}=y,M=b in u?u[b]:"";if(un(M)&&!P)throw new Error(`Provided param "${b}" is an array but it is not repeatable (* or + modifiers)`);const O=un(M)?M.join("/"):M;if(!O)if(x)m.length<2&&(h.endsWith("/")?h=h.slice(0,-1):d=!0);else throw new Error(`Missing required param "${b}"`);h+=O}}return h||"/"}return{re:o,score:s,keys:i,parse:l,stringify:c}}function V1(e,t){let n=0;for(;n<e.length&&n<t.length;){const s=t[n]-e[n];if(s)return s;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function cg(e,t){let n=0;const s=e.score,r=t.score;for(;n<s.length&&n<r.length;){const i=V1(s[n],r[n]);if(i)return i;n++}if(Math.abs(r.length-s.length)===1){if(Gf(s))return 1;if(Gf(r))return-1}return r.length-s.length}function Gf(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const D1={type:0,value:""},N1=/[a-zA-Z0-9_]/;function O1(e){if(!e)return[[]];if(e==="/")return[[D1]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(y){throw new Error(`ERR (${n})/"${u}": ${y}`)}let n=0,s=n;const r=[];let i;function o(){i&&r.push(i),i=[]}let l=0,c,u="",h="";function d(){u&&(n===0?i.push({type:0,value:u}):n===1||n===2||n===3?(i.length>1&&(c==="*"||c==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:u,regexp:h,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):t("Invalid state to consume buffer"),u="")}function m(){u+=c}for(;l<e.length;){if(c=e[l++],c==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:c==="/"?(u&&d(),o()):c===":"?(d(),n=1):m();break;case 4:m(),n=s;break;case 1:c==="("?n=2:N1.test(c)?m():(d(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&l--);break;case 2:c===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+c:n=3:h+=c;break;case 3:d(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&l--,h="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${u}"`),d(),o(),r}function M1(e,t,n){const s=k1(O1(e.path),n),r=Vt(s,{record:e,parent:t,children:[],alias:[]});return t&&!r.record.aliasOf==!t.record.aliasOf&&t.children.push(r),r}function L1(e,t){const n=[],s=new Map;t=Xf({strict:!1,end:!0,sensitive:!1},t);function r(d){return s.get(d)}function i(d,m,y){const b=!y,P=Qf(d);P.aliasOf=y&&y.record;const x=Xf(t,d),M=[P];if("alias"in d){const H=typeof d.alias=="string"?[d.alias]:d.alias;for(const nt of H)M.push(Qf(Vt({},P,{components:y?y.record.components:P.components,path:nt,aliasOf:y?y.record:P})))}let O,B;for(const H of M){const{path:nt}=H;if(m&&nt[0]!=="/"){const st=m.record.path,S=st[st.length-1]==="/"?"":"/";H.path=m.record.path+(nt&&S+nt)}if(O=M1(H,m,x),y?y.alias.push(O):(B=B||O,B!==O&&B.alias.push(O),b&&d.name&&!Jf(O)&&o(d.name)),ug(O)&&c(O),P.children){const st=P.children;for(let S=0;S<st.length;S++)i(st[S],O,y&&y.children[S])}y=y||O}return B?()=>{o(B)}:yi}function o(d){if(ag(d)){const m=s.get(d);m&&(s.delete(d),n.splice(n.indexOf(m),1),m.children.forEach(o),m.alias.forEach(o))}else{const m=n.indexOf(d);m>-1&&(n.splice(m,1),d.record.name&&s.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function l(){return n}function c(d){const m=B1(d,n);n.splice(m,0,d),d.record.name&&!Jf(d)&&s.set(d.record.name,d)}function u(d,m){let y,b={},P,x;if("name"in d&&d.name){if(y=s.get(d.name),!y)throw Ir(1,{location:d});x=y.record.name,b=Vt(Wf(m.params,y.keys.filter(B=>!B.optional).concat(y.parent?y.parent.keys.filter(B=>B.optional):[]).map(B=>B.name)),d.params&&Wf(d.params,y.keys.map(B=>B.name))),P=y.stringify(b)}else if(d.path!=null)P=d.path,y=n.find(B=>B.re.test(P)),y&&(b=y.parse(P),x=y.record.name);else{if(y=m.name?s.get(m.name):n.find(B=>B.re.test(m.path)),!y)throw Ir(1,{location:d,currentLocation:m});x=y.record.name,b=Vt({},m.params,d.params),P=y.stringify(b)}const M=[];let O=y;for(;O;)M.unshift(O.record),O=O.parent;return{name:x,path:P,params:b,matched:M,meta:U1(M)}}e.forEach(d=>i(d));function h(){n.length=0,s.clear()}return{addRoute:i,resolve:u,removeRoute:o,clearRoutes:h,getRoutes:l,getRecordMatcher:r}}function Wf(e,t){const n={};for(const s of t)s in e&&(n[s]=e[s]);return n}function Qf(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:F1(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function F1(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const s in e.components)t[s]=typeof n=="object"?n[s]:n;return t}function Jf(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function U1(e){return e.reduce((t,n)=>Vt(t,n.meta),{})}function Xf(e,t){const n={};for(const s in e)n[s]=s in t?t[s]:e[s];return n}function B1(e,t){let n=0,s=t.length;for(;n!==s;){const i=n+s>>1;cg(e,t[i])<0?s=i:n=i+1}const r=$1(e);return r&&(s=t.lastIndexOf(r,s-1)),s}function $1(e){let t=e;for(;t=t.parent;)if(ug(t)&&cg(e,t)===0)return t}function ug({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function j1(e){const t={};if(e===""||e==="?")return t;const s=(e[0]==="?"?e.slice(1):e).split("&");for(let r=0;r<s.length;++r){const i=s[r].replace(eg," "),o=i.indexOf("="),l=Di(o<0?i:i.slice(0,o)),c=o<0?null:Di(i.slice(o+1));if(l in t){let u=t[l];un(u)||(u=t[l]=[u]),u.push(c)}else t[l]=c}return t}function Yf(e){let t="";for(let n in e){const s=e[n];if(n=l1(n),s==null){s!==void 0&&(t+=(t.length?"&":"")+n);continue}(un(s)?s.map(i=>i&&gc(i)):[s&&gc(s)]).forEach(i=>{i!==void 0&&(t+=(t.length?"&":"")+n,i!=null&&(t+="="+i))})}return t}function q1(e){const t={};for(const n in e){const s=e[n];s!==void 0&&(t[n]=un(s)?s.map(r=>r==null?null:""+r):s==null?s:""+s)}return t}const H1=Symbol(""),Zf=Symbol(""),$a=Symbol(""),hg=Symbol(""),_c=Symbol("");function ei(){let e=[];function t(s){return e.push(s),()=>{const r=e.indexOf(s);r>-1&&e.splice(r,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function is(e,t,n,s,r,i=o=>o()){const o=s&&(s.enterCallbacks[r]=s.enterCallbacks[r]||[]);return()=>new Promise((l,c)=>{const u=m=>{m===!1?c(Ir(4,{from:n,to:t})):m instanceof Error?c(m):C1(m)?c(Ir(2,{from:t,to:m})):(o&&s.enterCallbacks[r]===o&&typeof m=="function"&&o.push(m),l())},h=i(()=>e.call(s&&s.instances[r],t,n,u));let d=Promise.resolve(h);e.length<3&&(d=d.then(u)),d.catch(m=>c(m))})}function Bl(e,t,n,s,r=i=>i()){const i=[];for(const o of e)for(const l in o.components){let c=o.components[l];if(!(t!=="beforeRouteEnter"&&!o.instances[l]))if(Zm(c)){const h=(c.__vccOpts||c)[t];h&&i.push(is(h,n,s,o,l,r))}else{let u=c();i.push(()=>u.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${l}" at "${o.path}"`);const d=Xw(h)?h.default:h;o.mods[l]=h,o.components[l]=d;const y=(d.__vccOpts||d)[t];return y&&is(y,n,s,o,l,r)()}))}}return i}function td(e){const t=vn($a),n=vn(hg),s=Xt(()=>{const c=Ks(e.to);return t.resolve(c)}),r=Xt(()=>{const{matched:c}=s.value,{length:u}=c,h=c[u-1],d=n.matched;if(!h||!d.length)return-1;const m=d.findIndex(Ar.bind(null,h));if(m>-1)return m;const y=ed(c[u-2]);return u>1&&ed(h)===y&&d[d.length-1].path!==y?d.findIndex(Ar.bind(null,c[u-2])):m}),i=Xt(()=>r.value>-1&&Q1(n.params,s.value.params)),o=Xt(()=>r.value>-1&&r.value===n.matched.length-1&&ig(n.params,s.value.params));function l(c={}){if(W1(c)){const u=t[Ks(e.replace)?"replace":"push"](Ks(e.to)).catch(yi);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:s,href:Xt(()=>s.value.href),isActive:i,isExactActive:o,navigate:l}}function z1(e){return e.length===1?e[0]:e}const K1=qe({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:td,setup(e,{slots:t}){const n=ka(td(e)),{options:s}=vn($a),r=Xt(()=>({[nd(e.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[nd(e.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=t.default&&z1(t.default(n));return e.custom?i:gu("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},i)}}}),G1=K1;function W1(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Q1(e,t){for(const n in t){const s=t[n],r=e[n];if(typeof s=="string"){if(s!==r)return!1}else if(!un(r)||r.length!==s.length||s.some((i,o)=>i!==r[o]))return!1}return!0}function ed(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const nd=(e,t,n)=>e??t??n,J1=qe({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const s=vn(_c),r=Xt(()=>e.route||s.value),i=vn(Zf,0),o=Xt(()=>{let u=Ks(i);const{matched:h}=r.value;let d;for(;(d=h[u])&&!d.components;)u++;return u}),l=Xt(()=>r.value.matched[o.value]);Fo(Zf,Xt(()=>o.value+1)),Fo(H1,l),Fo(_c,r);const c=Jt();return cs(()=>[c.value,l.value,e.name],([u,h,d],[m,y,b])=>{h&&(h.instances[d]=u,y&&y!==h&&u&&u===m&&(h.leaveGuards.size||(h.leaveGuards=y.leaveGuards),h.updateGuards.size||(h.updateGuards=y.updateGuards))),u&&h&&(!y||!Ar(h,y)||!m)&&(h.enterCallbacks[d]||[]).forEach(P=>P(u))},{flush:"post"}),()=>{const u=r.value,h=e.name,d=l.value,m=d&&d.components[h];if(!m)return sd(n.default,{Component:m,route:u});const y=d.props[h],b=y?y===!0?u.params:typeof y=="function"?y(u):y:null,x=gu(m,Vt({},b,t,{onVnodeUnmounted:M=>{M.component.isUnmounted&&(d.instances[h]=null)},ref:c}));return sd(n.default,{Component:x,route:u})||x}}});function sd(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const fg=J1;function X1(e){const t=L1(e.routes,e),n=e.parseQuery||j1,s=e.stringifyQuery||Yf,r=e.history,i=ei(),o=ei(),l=ei(),c=t0(ns);let u=ns;ur&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=Fl.bind(null,L=>""+L),d=Fl.bind(null,u1),m=Fl.bind(null,Di);function y(L,tt){let J,rt;return ag(L)?(J=t.getRecordMatcher(L),rt=tt):rt=L,t.addRoute(rt,J)}function b(L){const tt=t.getRecordMatcher(L);tt&&t.removeRoute(tt)}function P(){return t.getRoutes().map(L=>L.record)}function x(L){return!!t.getRecordMatcher(L)}function M(L,tt){if(tt=Vt({},tt||c.value),typeof L=="string"){const k=Ul(n,L,tt.path),F=t.resolve({path:k.path},tt),j=r.createHref(k.fullPath);return Vt(k,F,{params:m(F.params),hash:Di(k.hash),redirectedFrom:void 0,href:j})}let J;if(L.path!=null)J=Vt({},L,{path:Ul(n,L.path,tt.path).path});else{const k=Vt({},L.params);for(const F in k)k[F]==null&&delete k[F];J=Vt({},L,{params:d(k)}),tt.params=d(tt.params)}const rt=t.resolve(J,tt),Pt=L.hash||"";rt.params=h(m(rt.params));const E=d1(s,Vt({},L,{hash:a1(Pt),path:rt.path})),I=r.createHref(E);return Vt({fullPath:E,hash:Pt,query:s===Yf?q1(L.query):L.query||{}},rt,{redirectedFrom:void 0,href:I})}function O(L){return typeof L=="string"?Ul(n,L,c.value.path):Vt({},L)}function B(L,tt){if(u!==L)return Ir(8,{from:tt,to:L})}function H(L){return S(L)}function nt(L){return H(Vt(O(L),{replace:!0}))}function st(L){const tt=L.matched[L.matched.length-1];if(tt&&tt.redirect){const{redirect:J}=tt;let rt=typeof J=="function"?J(L):J;return typeof rt=="string"&&(rt=rt.includes("?")||rt.includes("#")?rt=O(rt):{path:rt},rt.params={}),Vt({query:L.query,hash:L.hash,params:rt.path!=null?{}:L.params},rt)}}function S(L,tt){const J=u=M(L),rt=c.value,Pt=L.state,E=L.force,I=L.replace===!0,k=st(J);if(k)return S(Vt(O(k),{state:typeof k=="object"?Vt({},Pt,k.state):Pt,force:E,replace:I}),tt||J);const F=J;F.redirectedFrom=tt;let j;return!E&&p1(s,rt,J)&&(j=Ir(16,{to:F,from:rt}),xe(rt,rt,!0,!1)),(j?Promise.resolve(j):T(F,rt)).catch(U=>On(U)?On(U,2)?U:qt(U):pt(U,F,rt)).then(U=>{if(U){if(On(U,2))return S(Vt({replace:I},O(U.to),{state:typeof U.to=="object"?Vt({},Pt,U.to.state):Pt,force:E}),tt||F)}else U=A(F,rt,!0,I,Pt);return C(F,rt,U),U})}function v(L,tt){const J=B(L,tt);return J?Promise.reject(J):Promise.resolve()}function _(L){const tt=Jn.values().next().value;return tt&&typeof tt.runWithContext=="function"?tt.runWithContext(L):L()}function T(L,tt){let J;const[rt,Pt,E]=Y1(L,tt);J=Bl(rt.reverse(),"beforeRouteLeave",L,tt);for(const k of rt)k.leaveGuards.forEach(F=>{J.push(is(F,L,tt))});const I=v.bind(null,L,tt);return J.push(I),Me(J).then(()=>{J=[];for(const k of i.list())J.push(is(k,L,tt));return J.push(I),Me(J)}).then(()=>{J=Bl(Pt,"beforeRouteUpdate",L,tt);for(const k of Pt)k.updateGuards.forEach(F=>{J.push(is(F,L,tt))});return J.push(I),Me(J)}).then(()=>{J=[];for(const k of E)if(k.beforeEnter)if(un(k.beforeEnter))for(const F of k.beforeEnter)J.push(is(F,L,tt));else J.push(is(k.beforeEnter,L,tt));return J.push(I),Me(J)}).then(()=>(L.matched.forEach(k=>k.enterCallbacks={}),J=Bl(E,"beforeRouteEnter",L,tt,_),J.push(I),Me(J))).then(()=>{J=[];for(const k of o.list())J.push(is(k,L,tt));return J.push(I),Me(J)}).catch(k=>On(k,8)?k:Promise.reject(k))}function C(L,tt,J){l.list().forEach(rt=>_(()=>rt(L,tt,J)))}function A(L,tt,J,rt,Pt){const E=B(L,tt);if(E)return E;const I=tt===ns,k=ur?history.state:{};J&&(rt||I?r.replace(L.fullPath,Vt({scroll:I&&k&&k.scroll},Pt)):r.push(L.fullPath,Pt)),c.value=L,xe(L,tt,J,I),qt()}let w;function Z(){w||(w=r.listen((L,tt,J)=>{if(!fn.listening)return;const rt=M(L),Pt=st(rt);if(Pt){S(Vt(Pt,{replace:!0,force:!0}),rt).catch(yi);return}u=rt;const E=c.value;ur&&b1(qf(E.fullPath,J.delta),Ba()),T(rt,E).catch(I=>On(I,12)?I:On(I,2)?(S(Vt(O(I.to),{force:!0}),rt).then(k=>{On(k,20)&&!J.delta&&J.type===Ni.pop&&r.go(-1,!1)}).catch(yi),Promise.reject()):(J.delta&&r.go(-J.delta,!1),pt(I,rt,E))).then(I=>{I=I||A(rt,E,!1),I&&(J.delta&&!On(I,8)?r.go(-J.delta,!1):J.type===Ni.pop&&On(I,20)&&r.go(-1,!1)),C(rt,E,I)}).catch(yi)}))}let Y=ei(),Tt=ei(),ot;function pt(L,tt,J){qt(L);const rt=Tt.list();return rt.length?rt.forEach(Pt=>Pt(L,tt,J)):console.error(L),Promise.reject(L)}function ee(){return ot&&c.value!==ns?Promise.resolve():new Promise((L,tt)=>{Y.add([L,tt])})}function qt(L){return ot||(ot=!L,Z(),Y.list().forEach(([tt,J])=>L?J(L):tt()),Y.reset()),L}function xe(L,tt,J,rt){const{scrollBehavior:Pt}=e;if(!ur||!Pt)return Promise.resolve();const E=!J&&T1(qf(L.fullPath,0))||(rt||!J)&&history.state&&history.state.scroll||null;return lu().then(()=>Pt(L,tt,E)).then(I=>I&&E1(I)).catch(I=>pt(I,L,tt))}const zt=L=>r.go(L);let Kt;const Jn=new Set,fn={currentRoute:c,listening:!0,addRoute:y,removeRoute:b,clearRoutes:t.clearRoutes,hasRoute:x,getRoutes:P,resolve:M,options:e,push:H,replace:nt,go:zt,back:()=>zt(-1),forward:()=>zt(1),beforeEach:i.add,beforeResolve:o.add,afterEach:l.add,onError:Tt.add,isReady:ee,install(L){const tt=this;L.component("RouterLink",G1),L.component("RouterView",fg),L.config.globalProperties.$router=tt,Object.defineProperty(L.config.globalProperties,"$route",{enumerable:!0,get:()=>Ks(c)}),ur&&!Kt&&c.value===ns&&(Kt=!0,H(r.location).catch(Pt=>{}));const J={};for(const Pt in ns)Object.defineProperty(J,Pt,{get:()=>c.value[Pt],enumerable:!0});L.provide($a,tt),L.provide(hg,im(J)),L.provide(_c,c);const rt=L.unmount;Jn.add(L),L.unmount=function(){Jn.delete(L),Jn.size<1&&(u=ns,w&&w(),w=null,c.value=ns,Kt=!1,ot=!1),rt()}}};function Me(L){return L.reduce((tt,J)=>tt.then(()=>_(J)),Promise.resolve())}return fn}function Y1(e,t){const n=[],s=[],r=[],i=Math.max(t.matched.length,e.matched.length);for(let o=0;o<i;o++){const l=t.matched[o];l&&(e.matched.find(u=>Ar(u,l))?s.push(l):n.push(l));const c=e.matched[o];c&&(t.matched.find(u=>Ar(u,c))||r.push(c))}return[n,s,r]}function Z1(){return vn($a)}const tE={class:"loading-content"},eE={class:"loading-text"},nE={class:"loading-message"},sE={class:"progress-bar"},rE=qe({__name:"InitialLoading",emits:["loading-complete"],setup(e,{emit:t}){const n=t,s=Jt(!1),r=Jt(0),i=Jt("正在初始化..."),o=["正在初始化...","连接插件仓库...","加载插件数据...","准备界面...","即将完成..."];let l=0;const c=()=>{const h=(l+1)*20,d=setInterval(()=>{r.value<h?r.value+=Math.random()*3+1:(clearInterval(d),l<o.length-1?(l++,i.value=o[l],setTimeout(()=>c(),300)):setTimeout(()=>{s.value=!0,setTimeout(()=>{n("loading-complete")},1e3)},500))},50)},u=()=>{setTimeout(()=>{c()},500)};return Pn(()=>{u()}),(h,d)=>(lt(),dt("div",{id:"initial-loading",class:tn(["initial-loading",{"loading-out":s.value}])},[R("div",tE,[d[0]||(d[0]=Tr('<div class="logo-container" data-v-62f79310><div class="logo-icon" data-v-62f79310><svg viewBox="0 0 100 100" class="mai-logo" data-v-62f79310><circle cx="50" cy="40" r="25" fill="none" stroke="currentColor" stroke-width="3" data-v-62f79310></circle><circle cx="42" cy="35" r="3" fill="currentColor" data-v-62f79310></circle><circle cx="58" cy="35" r="3" fill="currentColor" data-v-62f79310></circle><path d="M 35 50 Q 50 60 65 50" stroke="currentColor" stroke-width="2" fill="none" data-v-62f79310></path><rect x="30" y="65" width="40" height="20" rx="10" fill="none" stroke="currentColor" stroke-width="2" data-v-62f79310></rect><circle cx="40" cy="75" r="2" fill="currentColor" data-v-62f79310></circle><circle cx="60" cy="75" r="2" fill="currentColor" data-v-62f79310></circle></svg></div><h1 class="loading-title" data-v-62f79310>麦麦插件商店</h1><p class="loading-subtitle" data-v-62f79310>MaiMai Plugin Market</p></div><div class="loading-animation" data-v-62f79310><svg viewBox="0 0 50 50" class="loading-circle" data-v-62f79310><circle r="20" cx="25" cy="25" data-v-62f79310></circle></svg><div class="loading-dots" data-v-62f79310><span data-v-62f79310></span><span data-v-62f79310></span><span data-v-62f79310></span></div></div>',2)),R("div",eE,[R("p",nE,_t(i.value),1),R("div",sE,[R("div",{class:"progress-fill",style:Wi({width:r.value+"%"})},null,4)])])]),d[1]||(d[1]=Tr('<div class="bg-decoration" data-v-62f79310><div class="floating-shapes" data-v-62f79310><div class="shape shape-1" data-v-62f79310></div><div class="shape shape-2" data-v-62f79310></div><div class="shape shape-3" data-v-62f79310></div><div class="shape shape-4" data-v-62f79310></div><div class="shape shape-5" data-v-62f79310></div></div></div>',1))],2))}}),Qn=(e,t)=>{const n=e.__vccOpts||e;for(const[s,r]of t)n[s]=r;return n},iE=Qn(rE,[["__scopeId","data-v-62f79310"]]),oE={key:0,class:"modal modal-open"},aE={class:"modal-box w-11/12 max-w-6xl h-[90vh] max-h-[90vh] p-0 flex flex-col"},lE={class:"navbar bg-primary text-primary-content rounded-t-2xl px-6 py-4 flex-shrink-0"},cE={class:"flex-none"},uE={key:0,class:"text-sm flex items-center gap-2 bg-primary-focus px-3 py-1 rounded-full"},hE={class:"flex-shrink-0 bg-base-200 p-6 rounded-b-2xl"},fE={class:"flex flex-col sm:flex-row gap-3 sm:justify-end"},dE=["disabled"],pE={key:0,class:"badge badge-neutral ml-2"},mE=qe({__name:"NoticeModal",props:{show:{type:Boolean}},emits:["close","agree","disagree"],setup(e,{emit:t}){const n=t,s=Jt(5);let r=null;const i=()=>{s.value>0||n("agree")},o=()=>{n("disagree")},l=()=>{r=setInterval(()=>{s.value--,s.value<=0&&r&&(clearInterval(r),r=null)},1e3)};return Pn(()=>{l()}),Vr(()=>{r&&(clearInterval(r),r=null)}),(c,u)=>c.show?(lt(),dt("div",oE,[R("div",aE,[R("div",lE,[u[1]||(u[1]=Tr('<div class="flex-1" data-v-aef4bf0c><h3 class="text-lg md:text-xl font-bold flex items-center gap-2" data-v-aef4bf0c><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 md:h-8 md:w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-aef4bf0c><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" data-v-aef4bf0c></path></svg><span class="hidden sm:inline" data-v-aef4bf0c>MaiBot插件市场使用公告</span><span class="sm:hidden" data-v-aef4bf0c>使用公告</span></h3></div>',1)),R("div",cE,[s.value>0?(lt(),dt("div",uE,[u[0]||(u[0]=R("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[R("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),Se(" "+_t(s.value)+"秒 ",1)])):Ht("",!0)])]),u[5]||(u[5]=Tr('<div class="flex-1 overflow-y-auto p-6 space-y-6" data-v-aef4bf0c><div class="alert alert-info" data-v-aef4bf0c><svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24" data-v-aef4bf0c><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" data-v-aef4bf0c></path></svg><div class="text-left" data-v-aef4bf0c><h4 class="font-bold text-lg" data-v-aef4bf0c>版本：V1.0</h4><div class="text-sm opacity-80 space-y-1" data-v-aef4bf0c><div data-v-aef4bf0c>发布日期：2025年7月10日</div><div data-v-aef4bf0c>适用范围：MaiBot插件市场及相关服务</div><div class="font-semibold mt-2" data-v-aef4bf0c>2025© MaiBot项目团队</div></div></div></div><div class="alert alert-warning" data-v-aef4bf0c><svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24" data-v-aef4bf0c><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.866-.833-2.636 0L3.178 16.5c-.77.833.192 2.5 1.732 2.5z" data-v-aef4bf0c></path></svg><div class="text-left" data-v-aef4bf0c><h4 class="font-bold text-lg mb-2" data-v-aef4bf0c>重要声明</h4><p class="text-sm" data-v-aef4bf0c> 欢迎使用MaiBot插件市场！在使用本插件市场前，请<strong data-v-aef4bf0c>务必仔细阅读</strong>本公告的所有内容。 继续使用插件市场即表示您<strong data-v-aef4bf0c>完全理解并同意</strong>本公告的所有条款。 </p></div></div><div class="prose prose-sm max-w-none" data-v-aef4bf0c><div class="card bg-base-100 shadow-sm border border-base-300" data-v-aef4bf0c><div class="card-body" data-v-aef4bf0c><h2 class="card-title text-primary text-xl" data-v-aef4bf0c>一、插件市场说明</h2><div class="space-y-4" data-v-aef4bf0c><div data-v-aef4bf0c><h3 class="font-semibold text-lg" data-v-aef4bf0c>1.1 市场定位</h3><p class="text-sm" data-v-aef4bf0c>MaiBot插件市场是为MaiBot用户提供的第三方插件分享和获取平台，旨在丰富MaiBot的功能生态。</p></div><div data-v-aef4bf0c><h3 class="font-semibold text-lg" data-v-aef4bf0c>1.2 服务内容</h3><ul class="list-disc list-inside space-y-1 text-sm ml-4" data-v-aef4bf0c><li data-v-aef4bf0c>提供第三方开发者发布插件的平台</li><li data-v-aef4bf0c>为用户提供插件浏览、搜索和下载功能</li><li data-v-aef4bf0c>展示插件基本信息、使用说明和用户评价</li></ul></div><div data-v-aef4bf0c><h3 class="font-semibold text-lg" data-v-aef4bf0c>1.3 平台性质</h3><p class="text-sm" data-v-aef4bf0c> 插件市场<strong data-v-aef4bf0c>仅作为信息展示和分享平台</strong>，MaiBot项目团队<strong data-v-aef4bf0c>不参与插件的开发、测试或维护</strong>。 </p></div></div></div></div><div class="card bg-base-100 shadow-sm border border-error" data-v-aef4bf0c><div class="card-body" data-v-aef4bf0c><h2 class="card-title text-error text-xl" data-v-aef4bf0c>二、责任界限与免责声明</h2><div class="space-y-4" data-v-aef4bf0c><div data-v-aef4bf0c><h3 class="font-semibold text-lg" data-v-aef4bf0c>2.1 开发者责任</h3><ul class="list-disc list-inside space-y-1 text-sm ml-4" data-v-aef4bf0c><li data-v-aef4bf0c>所有插件均由<strong data-v-aef4bf0c>独立的第三方开发者</strong>开发、维护和分发</li><li data-v-aef4bf0c>插件的功能、质量、安全性、稳定性<strong data-v-aef4bf0c>完全由插件开发者负责</strong></li><li data-v-aef4bf0c>插件开发者应确保其插件<strong data-v-aef4bf0c>符合相关法律法规</strong>要求</li><li data-v-aef4bf0c>插件的技术支持、bug修复、版本更新等<strong data-v-aef4bf0c>由插件开发者提供</strong></li></ul></div><div class="alert alert-error" data-v-aef4bf0c><svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24" data-v-aef4bf0c><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z" data-v-aef4bf0c></path></svg><div class="text-left" data-v-aef4bf0c><h4 class="font-bold" data-v-aef4bf0c>2.2 平台免责</h4><p class="text-sm mb-2" data-v-aef4bf0c><strong data-v-aef4bf0c>MaiBot项目团队明确声明：</strong></p><ul class="text-sm space-y-1" data-v-aef4bf0c><li data-v-aef4bf0c>• <strong data-v-aef4bf0c>不对</strong>任何第三方插件的功能、质量、安全性、合规性提供保证或担保</li><li data-v-aef4bf0c>• <strong data-v-aef4bf0c>不对</strong>因使用第三方插件而产生的任何损失、损害、法律纠纷承担责任</li><li data-v-aef4bf0c>• <strong data-v-aef4bf0c>不对</strong>插件的可用性、兼容性、持续性提供保证</li><li data-v-aef4bf0c>• <strong data-v-aef4bf0c>不参与</strong>插件相关的技术支持、售后服务或争议解决</li></ul></div></div><div data-v-aef4bf0c><h3 class="font-semibold text-lg" data-v-aef4bf0c>2.3 用户责任</h3><ul class="list-disc list-inside space-y-1 text-sm ml-4" data-v-aef4bf0c><li data-v-aef4bf0c>用户使用任何插件的风险<strong data-v-aef4bf0c>完全自担</strong></li><li data-v-aef4bf0c>用户应<strong data-v-aef4bf0c>自行评估</strong>插件的安全性和适用性</li><li data-v-aef4bf0c>用户应<strong data-v-aef4bf0c>遵守</strong>插件开发者制定的使用条款</li><li data-v-aef4bf0c>用户因使用插件产生的任何后果<strong data-v-aef4bf0c>自行承担</strong></li></ul></div></div></div></div><div class="card bg-base-100 shadow-sm border border-warning" data-v-aef4bf0c><div class="card-body" data-v-aef4bf0c><h2 class="card-title text-warning text-xl" data-v-aef4bf0c>三、风险提示</h2><div class="alert alert-warning mt-4" data-v-aef4bf0c><svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24" data-v-aef4bf0c><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.866-.833-2.636 0L3.178 16.5c-.77.833.192 2.5 1.732 2.5z" data-v-aef4bf0c></path></svg><div class="text-left" data-v-aef4bf0c><h4 class="font-bold" data-v-aef4bf0c>⚠️ 重要警告</h4><p class="text-sm mb-2" data-v-aef4bf0c>第三方插件可能存在以下风险：</p><ul class="text-sm space-y-1" data-v-aef4bf0c><li data-v-aef4bf0c>• <strong data-v-aef4bf0c>恶意代码</strong>：可能包含病毒、木马或其他恶意程序</li><li data-v-aef4bf0c>• <strong data-v-aef4bf0c>安全漏洞</strong>：可能导致系统被攻击或数据泄露</li><li data-v-aef4bf0c>• <strong data-v-aef4bf0c>权限滥用</strong>：可能超出预期范围访问您的系统资源</li><li data-v-aef4bf0c>• <strong data-v-aef4bf0c>隐私风险</strong>：可能收集、传输或泄露您的个人信息</li></ul></div></div></div></div><div class="card bg-base-100 shadow-sm border border-success" data-v-aef4bf0c><div class="card-body" data-v-aef4bf0c><h2 class="card-title text-success text-xl" data-v-aef4bf0c>四、使用建议</h2><div class="alert alert-success mt-4" data-v-aef4bf0c><svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24" data-v-aef4bf0c><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" data-v-aef4bf0c></path></svg><div class="text-left" data-v-aef4bf0c><h4 class="font-bold" data-v-aef4bf0c>✅ 强烈建议</h4><ul class="text-sm mt-2 space-y-1" data-v-aef4bf0c><li data-v-aef4bf0c>• 仅从<strong data-v-aef4bf0c>可信来源</strong>获取插件</li><li data-v-aef4bf0c>• 在安装前<strong data-v-aef4bf0c>仔细阅读</strong>插件说明和权限要求</li><li data-v-aef4bf0c>• 定期<strong data-v-aef4bf0c>检查和更新</strong>已安装的插件</li><li data-v-aef4bf0c>• 发现异常行为时<strong data-v-aef4bf0c>立即停用</strong>相关插件</li><li data-v-aef4bf0c>• 在<strong data-v-aef4bf0c>测试环境</strong>中先试用插件功能</li></ul></div></div></div></div><div class="card bg-base-100 shadow-sm border border-info" data-v-aef4bf0c><div class="card-body" data-v-aef4bf0c><h2 class="card-title text-info text-xl" data-v-aef4bf0c>最后提醒</h2><div class="alert alert-info mt-4" data-v-aef4bf0c><svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24" data-v-aef4bf0c><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" data-v-aef4bf0c></path></svg><div class="text-left" data-v-aef4bf0c><h4 class="font-bold" data-v-aef4bf0c>请务必记住</h4><ol class="text-sm mt-2 space-y-1 list-decimal list-inside" data-v-aef4bf0c><li data-v-aef4bf0c><strong data-v-aef4bf0c>插件市场仅为分享平台</strong>，不提供插件质量保证</li><li data-v-aef4bf0c><strong data-v-aef4bf0c>使用任何插件的风险完全自担</strong></li><li data-v-aef4bf0c><strong data-v-aef4bf0c>遇到问题请直接联系插件开发者</strong></li><li data-v-aef4bf0c><strong data-v-aef4bf0c>定期关注本公告的更新内容</strong></li></ol></div></div></div></div><div class="text-center text-sm opacity-70 border-t border-base-300 pt-4 mt-6" data-v-aef4bf0c><p data-v-aef4bf0c><em data-v-aef4bf0c>本公告的最终解释权归MaiBot项目团队所有</em></p><p class="mt-1" data-v-aef4bf0c>感谢您使用MaiBot插件市场，祝您使用愉快！</p></div></div></div>',1)),R("div",hE,[R("div",fE,[R("button",{onClick:o,class:"btn btn-error btn-outline flex-1 sm:flex-none"},[...u[2]||(u[2]=[R("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[R("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),Se(" 不同意 ",-1)])]),R("button",{onClick:i,disabled:s.value>0,class:tn(["btn btn-primary flex-1 sm:flex-none",{"btn-disabled":s.value>0}])},[u[3]||(u[3]=R("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[R("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),u[4]||(u[4]=R("span",null,"我已阅读并同意",-1)),s.value>0?(lt(),dt("span",pE,_t(s.value),1)):Ht("",!0)],10,dE)])])])])):Ht("",!0)}}),gE=Qn(mE,[["__scopeId","data-v-aef4bf0c"]]),yE={id:"app"},rd="mai-plugin-store-visited",id="mai-plugin-store-notice-agreed",_E=qe({__name:"App",setup(e){const t=Jt(!0),n=Jt(!1),s=Jt(!1),r=()=>{t.value=!1,localStorage.getItem(id)?c():n.value=!0},i=()=>{n.value=!1,c()},o=()=>{localStorage.setItem(id,"true"),n.value=!1,c()},l=()=>{try{window.close()}catch{window.location.href="about:blank"}},c=()=>{setTimeout(()=>{s.value=!0},100)};return Pn(()=>{localStorage.getItem(rd)?setTimeout(()=>{r()},100):localStorage.setItem(rd,"true")}),(u,h)=>(lt(),dt("div",yE,[t.value?(lt(),Fa(iE,{key:0,onLoadingComplete:r})):Ht("",!0),$t(gE,{show:n.value,onClose:i,onAgree:o,onDisagree:l},null,8,["show"]),uu(R("div",{class:tn(["main-content",{"content-visible":s.value}])},[$t(Ks(fg))],2),[[Iw,!t.value&&!n.value]])]))}});function dg(e,t){return function(){return e.apply(t,arguments)}}const{toString:vE}=Object.prototype,{getPrototypeOf:_u}=Object,{iterator:ja,toStringTag:pg}=Symbol,qa=(e=>t=>{const n=vE.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),hn=e=>(e=e.toLowerCase(),t=>qa(t)===e),Ha=e=>t=>typeof t===e,{isArray:Dr}=Array,Oi=Ha("undefined");function Yi(e){return e!==null&&!Oi(e)&&e.constructor!==null&&!Oi(e.constructor)&&Be(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const mg=hn("ArrayBuffer");function wE(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&mg(e.buffer),t}const EE=Ha("string"),Be=Ha("function"),gg=Ha("number"),Zi=e=>e!==null&&typeof e=="object",bE=e=>e===!0||e===!1,$o=e=>{if(qa(e)!=="object")return!1;const t=_u(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(pg in e)&&!(ja in e)},TE=e=>{if(!Zi(e)||Yi(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},AE=hn("Date"),IE=hn("File"),SE=hn("Blob"),RE=hn("FileList"),CE=e=>Zi(e)&&Be(e.pipe),PE=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Be(e.append)&&((t=qa(e))==="formdata"||t==="object"&&Be(e.toString)&&e.toString()==="[object FormData]"))},xE=hn("URLSearchParams"),[kE,VE,DE,NE]=["ReadableStream","Request","Response","Headers"].map(hn),OE=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function to(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let s,r;if(typeof e!="object"&&(e=[e]),Dr(e))for(s=0,r=e.length;s<r;s++)t.call(null,e[s],s,e);else{if(Yi(e))return;const i=n?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let l;for(s=0;s<o;s++)l=i[s],t.call(null,e[l],l,e)}}function yg(e,t){if(Yi(e))return null;t=t.toLowerCase();const n=Object.keys(e);let s=n.length,r;for(;s-- >0;)if(r=n[s],t===r.toLowerCase())return r;return null}const js=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,_g=e=>!Oi(e)&&e!==js;function vc(){const{caseless:e}=_g(this)&&this||{},t={},n=(s,r)=>{const i=e&&yg(t,r)||r;$o(t[i])&&$o(s)?t[i]=vc(t[i],s):$o(s)?t[i]=vc({},s):Dr(s)?t[i]=s.slice():t[i]=s};for(let s=0,r=arguments.length;s<r;s++)arguments[s]&&to(arguments[s],n);return t}const ME=(e,t,n,{allOwnKeys:s}={})=>(to(t,(r,i)=>{n&&Be(r)?e[i]=dg(r,n):e[i]=r},{allOwnKeys:s}),e),LE=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),FE=(e,t,n,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},UE=(e,t,n,s)=>{let r,i,o;const l={};if(t=t||{},e==null)return t;do{for(r=Object.getOwnPropertyNames(e),i=r.length;i-- >0;)o=r[i],(!s||s(o,e,t))&&!l[o]&&(t[o]=e[o],l[o]=!0);e=n!==!1&&_u(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},BE=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const s=e.indexOf(t,n);return s!==-1&&s===n},$E=e=>{if(!e)return null;if(Dr(e))return e;let t=e.length;if(!gg(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},jE=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&_u(Uint8Array)),qE=(e,t)=>{const s=(e&&e[ja]).call(e);let r;for(;(r=s.next())&&!r.done;){const i=r.value;t.call(e,i[0],i[1])}},HE=(e,t)=>{let n;const s=[];for(;(n=e.exec(t))!==null;)s.push(n);return s},zE=hn("HTMLFormElement"),KE=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,s,r){return s.toUpperCase()+r}),od=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),GE=hn("RegExp"),vg=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),s={};to(n,(r,i)=>{let o;(o=t(r,i,e))!==!1&&(s[i]=o||r)}),Object.defineProperties(e,s)},WE=e=>{vg(e,(t,n)=>{if(Be(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const s=e[n];if(Be(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},QE=(e,t)=>{const n={},s=r=>{r.forEach(i=>{n[i]=!0})};return Dr(e)?s(e):s(String(e).split(t)),n},JE=()=>{},XE=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function YE(e){return!!(e&&Be(e.append)&&e[pg]==="FormData"&&e[ja])}const ZE=e=>{const t=new Array(10),n=(s,r)=>{if(Zi(s)){if(t.indexOf(s)>=0)return;if(Yi(s))return s;if(!("toJSON"in s)){t[r]=s;const i=Dr(s)?[]:{};return to(s,(o,l)=>{const c=n(o,r+1);!Oi(c)&&(i[l]=c)}),t[r]=void 0,i}}return s};return n(e,0)},tb=hn("AsyncFunction"),eb=e=>e&&(Zi(e)||Be(e))&&Be(e.then)&&Be(e.catch),wg=((e,t)=>e?setImmediate:t?((n,s)=>(js.addEventListener("message",({source:r,data:i})=>{r===js&&i===n&&s.length&&s.shift()()},!1),r=>{s.push(r),js.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Be(js.postMessage)),nb=typeof queueMicrotask<"u"?queueMicrotask.bind(js):typeof process<"u"&&process.nextTick||wg,sb=e=>e!=null&&Be(e[ja]),D={isArray:Dr,isArrayBuffer:mg,isBuffer:Yi,isFormData:PE,isArrayBufferView:wE,isString:EE,isNumber:gg,isBoolean:bE,isObject:Zi,isPlainObject:$o,isEmptyObject:TE,isReadableStream:kE,isRequest:VE,isResponse:DE,isHeaders:NE,isUndefined:Oi,isDate:AE,isFile:IE,isBlob:SE,isRegExp:GE,isFunction:Be,isStream:CE,isURLSearchParams:xE,isTypedArray:jE,isFileList:RE,forEach:to,merge:vc,extend:ME,trim:OE,stripBOM:LE,inherits:FE,toFlatObject:UE,kindOf:qa,kindOfTest:hn,endsWith:BE,toArray:$E,forEachEntry:qE,matchAll:HE,isHTMLForm:zE,hasOwnProperty:od,hasOwnProp:od,reduceDescriptors:vg,freezeMethods:WE,toObjectSet:QE,toCamelCase:KE,noop:JE,toFiniteNumber:XE,findKey:yg,global:js,isContextDefined:_g,isSpecCompliantForm:YE,toJSONObject:ZE,isAsyncFn:tb,isThenable:eb,setImmediate:wg,asap:nb,isIterable:sb};function bt(e,t,n,s,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),s&&(this.request=s),r&&(this.response=r,this.status=r.status?r.status:null)}D.inherits(bt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:D.toJSONObject(this.config),code:this.code,status:this.status}}});const Eg=bt.prototype,bg={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{bg[e]={value:e}});Object.defineProperties(bt,bg);Object.defineProperty(Eg,"isAxiosError",{value:!0});bt.from=(e,t,n,s,r,i)=>{const o=Object.create(Eg);return D.toFlatObject(e,o,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),bt.call(o,e.message,t,n,s,r),o.cause=e,o.name=e.name,i&&Object.assign(o,i),o};const rb=null;function wc(e){return D.isPlainObject(e)||D.isArray(e)}function Tg(e){return D.endsWith(e,"[]")?e.slice(0,-2):e}function ad(e,t,n){return e?e.concat(t).map(function(r,i){return r=Tg(r),!n&&i?"["+r+"]":r}).join(n?".":""):t}function ib(e){return D.isArray(e)&&!e.some(wc)}const ob=D.toFlatObject(D,{},null,function(t){return/^is[A-Z]/.test(t)});function za(e,t,n){if(!D.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=D.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(P,x){return!D.isUndefined(x[P])});const s=n.metaTokens,r=n.visitor||h,i=n.dots,o=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&D.isSpecCompliantForm(t);if(!D.isFunction(r))throw new TypeError("visitor must be a function");function u(b){if(b===null)return"";if(D.isDate(b))return b.toISOString();if(D.isBoolean(b))return b.toString();if(!c&&D.isBlob(b))throw new bt("Blob is not supported. Use a Buffer instead.");return D.isArrayBuffer(b)||D.isTypedArray(b)?c&&typeof Blob=="function"?new Blob([b]):Buffer.from(b):b}function h(b,P,x){let M=b;if(b&&!x&&typeof b=="object"){if(D.endsWith(P,"{}"))P=s?P:P.slice(0,-2),b=JSON.stringify(b);else if(D.isArray(b)&&ib(b)||(D.isFileList(b)||D.endsWith(P,"[]"))&&(M=D.toArray(b)))return P=Tg(P),M.forEach(function(B,H){!(D.isUndefined(B)||B===null)&&t.append(o===!0?ad([P],H,i):o===null?P:P+"[]",u(B))}),!1}return wc(b)?!0:(t.append(ad(x,P,i),u(b)),!1)}const d=[],m=Object.assign(ob,{defaultVisitor:h,convertValue:u,isVisitable:wc});function y(b,P){if(!D.isUndefined(b)){if(d.indexOf(b)!==-1)throw Error("Circular reference detected in "+P.join("."));d.push(b),D.forEach(b,function(M,O){(!(D.isUndefined(M)||M===null)&&r.call(t,M,D.isString(O)?O.trim():O,P,m))===!0&&y(M,P?P.concat(O):[O])}),d.pop()}}if(!D.isObject(e))throw new TypeError("data must be an object");return y(e),t}function ld(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function vu(e,t){this._pairs=[],e&&za(e,this,t)}const Ag=vu.prototype;Ag.append=function(t,n){this._pairs.push([t,n])};Ag.toString=function(t){const n=t?function(s){return t.call(this,s,ld)}:ld;return this._pairs.map(function(r){return n(r[0])+"="+n(r[1])},"").join("&")};function ab(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Ig(e,t,n){if(!t)return e;const s=n&&n.encode||ab;D.isFunction(n)&&(n={serialize:n});const r=n&&n.serialize;let i;if(r?i=r(t,n):i=D.isURLSearchParams(t)?t.toString():new vu(t,n).toString(s),i){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class cd{constructor(){this.handlers=[]}use(t,n,s){return this.handlers.push({fulfilled:t,rejected:n,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){D.forEach(this.handlers,function(s){s!==null&&t(s)})}}const Sg={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},lb=typeof URLSearchParams<"u"?URLSearchParams:vu,cb=typeof FormData<"u"?FormData:null,ub=typeof Blob<"u"?Blob:null,hb={isBrowser:!0,classes:{URLSearchParams:lb,FormData:cb,Blob:ub},protocols:["http","https","file","blob","url","data"]},wu=typeof window<"u"&&typeof document<"u",Ec=typeof navigator=="object"&&navigator||void 0,fb=wu&&(!Ec||["ReactNative","NativeScript","NS"].indexOf(Ec.product)<0),db=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",pb=wu&&window.location.href||"http://localhost",mb=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:wu,hasStandardBrowserEnv:fb,hasStandardBrowserWebWorkerEnv:db,navigator:Ec,origin:pb},Symbol.toStringTag,{value:"Module"})),Ce={...mb,...hb};function gb(e,t){return za(e,new Ce.classes.URLSearchParams,{visitor:function(n,s,r,i){return Ce.isNode&&D.isBuffer(n)?(this.append(s,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function yb(e){return D.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function _b(e){const t={},n=Object.keys(e);let s;const r=n.length;let i;for(s=0;s<r;s++)i=n[s],t[i]=e[i];return t}function Rg(e){function t(n,s,r,i){let o=n[i++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=i>=n.length;return o=!o&&D.isArray(r)?r.length:o,c?(D.hasOwnProp(r,o)?r[o]=[r[o],s]:r[o]=s,!l):((!r[o]||!D.isObject(r[o]))&&(r[o]=[]),t(n,s,r[o],i)&&D.isArray(r[o])&&(r[o]=_b(r[o])),!l)}if(D.isFormData(e)&&D.isFunction(e.entries)){const n={};return D.forEachEntry(e,(s,r)=>{t(yb(s),r,n,0)}),n}return null}function vb(e,t,n){if(D.isString(e))try{return(t||JSON.parse)(e),D.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(n||JSON.stringify)(e)}const eo={transitional:Sg,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const s=n.getContentType()||"",r=s.indexOf("application/json")>-1,i=D.isObject(t);if(i&&D.isHTMLForm(t)&&(t=new FormData(t)),D.isFormData(t))return r?JSON.stringify(Rg(t)):t;if(D.isArrayBuffer(t)||D.isBuffer(t)||D.isStream(t)||D.isFile(t)||D.isBlob(t)||D.isReadableStream(t))return t;if(D.isArrayBufferView(t))return t.buffer;if(D.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(i){if(s.indexOf("application/x-www-form-urlencoded")>-1)return gb(t,this.formSerializer).toString();if((l=D.isFileList(t))||s.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return za(l?{"files[]":t}:t,c&&new c,this.formSerializer)}}return i||r?(n.setContentType("application/json",!1),vb(t)):t}],transformResponse:[function(t){const n=this.transitional||eo.transitional,s=n&&n.forcedJSONParsing,r=this.responseType==="json";if(D.isResponse(t)||D.isReadableStream(t))return t;if(t&&D.isString(t)&&(s&&!this.responseType||r)){const o=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(t)}catch(l){if(o)throw l.name==="SyntaxError"?bt.from(l,bt.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ce.classes.FormData,Blob:Ce.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};D.forEach(["delete","get","head","post","put","patch"],e=>{eo.headers[e]={}});const wb=D.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Eb=e=>{const t={};let n,s,r;return e&&e.split(`
`).forEach(function(o){r=o.indexOf(":"),n=o.substring(0,r).trim().toLowerCase(),s=o.substring(r+1).trim(),!(!n||t[n]&&wb[n])&&(n==="set-cookie"?t[n]?t[n].push(s):t[n]=[s]:t[n]=t[n]?t[n]+", "+s:s)}),t},ud=Symbol("internals");function ni(e){return e&&String(e).trim().toLowerCase()}function jo(e){return e===!1||e==null?e:D.isArray(e)?e.map(jo):String(e)}function bb(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=n.exec(e);)t[s[1]]=s[2];return t}const Tb=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function $l(e,t,n,s,r){if(D.isFunction(s))return s.call(this,t,n);if(r&&(t=n),!!D.isString(t)){if(D.isString(s))return t.indexOf(s)!==-1;if(D.isRegExp(s))return s.test(t)}}function Ab(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,s)=>n.toUpperCase()+s)}function Ib(e,t){const n=D.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+n,{value:function(r,i,o){return this[s].call(this,t,r,i,o)},configurable:!0})})}let $e=class{constructor(t){t&&this.set(t)}set(t,n,s){const r=this;function i(l,c,u){const h=ni(c);if(!h)throw new Error("header name must be a non-empty string");const d=D.findKey(r,h);(!d||r[d]===void 0||u===!0||u===void 0&&r[d]!==!1)&&(r[d||c]=jo(l))}const o=(l,c)=>D.forEach(l,(u,h)=>i(u,h,c));if(D.isPlainObject(t)||t instanceof this.constructor)o(t,n);else if(D.isString(t)&&(t=t.trim())&&!Tb(t))o(Eb(t),n);else if(D.isObject(t)&&D.isIterable(t)){let l={},c,u;for(const h of t){if(!D.isArray(h))throw TypeError("Object iterator must return a key-value pair");l[u=h[0]]=(c=l[u])?D.isArray(c)?[...c,h[1]]:[c,h[1]]:h[1]}o(l,n)}else t!=null&&i(n,t,s);return this}get(t,n){if(t=ni(t),t){const s=D.findKey(this,t);if(s){const r=this[s];if(!n)return r;if(n===!0)return bb(r);if(D.isFunction(n))return n.call(this,r,s);if(D.isRegExp(n))return n.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=ni(t),t){const s=D.findKey(this,t);return!!(s&&this[s]!==void 0&&(!n||$l(this,this[s],s,n)))}return!1}delete(t,n){const s=this;let r=!1;function i(o){if(o=ni(o),o){const l=D.findKey(s,o);l&&(!n||$l(s,s[l],l,n))&&(delete s[l],r=!0)}}return D.isArray(t)?t.forEach(i):i(t),r}clear(t){const n=Object.keys(this);let s=n.length,r=!1;for(;s--;){const i=n[s];(!t||$l(this,this[i],i,t,!0))&&(delete this[i],r=!0)}return r}normalize(t){const n=this,s={};return D.forEach(this,(r,i)=>{const o=D.findKey(s,i);if(o){n[o]=jo(r),delete n[i];return}const l=t?Ab(i):String(i).trim();l!==i&&delete n[i],n[l]=jo(r),s[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return D.forEach(this,(s,r)=>{s!=null&&s!==!1&&(n[r]=t&&D.isArray(s)?s.join(", "):s)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const s=new this(t);return n.forEach(r=>s.set(r)),s}static accessor(t){const s=(this[ud]=this[ud]={accessors:{}}).accessors,r=this.prototype;function i(o){const l=ni(o);s[l]||(Ib(r,o),s[l]=!0)}return D.isArray(t)?t.forEach(i):i(t),this}};$e.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);D.reduceDescriptors($e.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(s){this[n]=s}}});D.freezeMethods($e);function jl(e,t){const n=this||eo,s=t||n,r=$e.from(s.headers);let i=s.data;return D.forEach(e,function(l){i=l.call(n,i,r.normalize(),t?t.status:void 0)}),r.normalize(),i}function Cg(e){return!!(e&&e.__CANCEL__)}function Nr(e,t,n){bt.call(this,e??"canceled",bt.ERR_CANCELED,t,n),this.name="CanceledError"}D.inherits(Nr,bt,{__CANCEL__:!0});function Pg(e,t,n){const s=n.config.validateStatus;!n.status||!s||s(n.status)?e(n):t(new bt("Request failed with status code "+n.status,[bt.ERR_BAD_REQUEST,bt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function Sb(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Rb(e,t){e=e||10;const n=new Array(e),s=new Array(e);let r=0,i=0,o;return t=t!==void 0?t:1e3,function(c){const u=Date.now(),h=s[i];o||(o=u),n[r]=c,s[r]=u;let d=i,m=0;for(;d!==r;)m+=n[d++],d=d%e;if(r=(r+1)%e,r===i&&(i=(i+1)%e),u-o<t)return;const y=h&&u-h;return y?Math.round(m*1e3/y):void 0}}function Cb(e,t){let n=0,s=1e3/t,r,i;const o=(u,h=Date.now())=>{n=h,r=null,i&&(clearTimeout(i),i=null),e(...u)};return[(...u)=>{const h=Date.now(),d=h-n;d>=s?o(u,h):(r=u,i||(i=setTimeout(()=>{i=null,o(r)},s-d)))},()=>r&&o(r)]}const la=(e,t,n=3)=>{let s=0;const r=Rb(50,250);return Cb(i=>{const o=i.loaded,l=i.lengthComputable?i.total:void 0,c=o-s,u=r(c),h=o<=l;s=o;const d={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:u||void 0,estimated:u&&l&&h?(l-o)/u:void 0,event:i,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(d)},n)},hd=(e,t)=>{const n=e!=null;return[s=>t[0]({lengthComputable:n,total:e,loaded:s}),t[1]]},fd=e=>(...t)=>D.asap(()=>e(...t)),Pb=Ce.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Ce.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Ce.origin),Ce.navigator&&/(msie|trident)/i.test(Ce.navigator.userAgent)):()=>!0,xb=Ce.hasStandardBrowserEnv?{write(e,t,n,s,r,i){const o=[e+"="+encodeURIComponent(t)];D.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),D.isString(s)&&o.push("path="+s),D.isString(r)&&o.push("domain="+r),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function kb(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Vb(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function xg(e,t,n){let s=!kb(t);return e&&(s||n==!1)?Vb(e,t):t}const dd=e=>e instanceof $e?{...e}:e;function Qs(e,t){t=t||{};const n={};function s(u,h,d,m){return D.isPlainObject(u)&&D.isPlainObject(h)?D.merge.call({caseless:m},u,h):D.isPlainObject(h)?D.merge({},h):D.isArray(h)?h.slice():h}function r(u,h,d,m){if(D.isUndefined(h)){if(!D.isUndefined(u))return s(void 0,u,d,m)}else return s(u,h,d,m)}function i(u,h){if(!D.isUndefined(h))return s(void 0,h)}function o(u,h){if(D.isUndefined(h)){if(!D.isUndefined(u))return s(void 0,u)}else return s(void 0,h)}function l(u,h,d){if(d in t)return s(u,h);if(d in e)return s(void 0,u)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(u,h,d)=>r(dd(u),dd(h),d,!0)};return D.forEach(Object.keys({...e,...t}),function(h){const d=c[h]||r,m=d(e[h],t[h],h);D.isUndefined(m)&&d!==l||(n[h]=m)}),n}const kg=e=>{const t=Qs({},e);let{data:n,withXSRFToken:s,xsrfHeaderName:r,xsrfCookieName:i,headers:o,auth:l}=t;t.headers=o=$e.from(o),t.url=Ig(xg(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let c;if(D.isFormData(n)){if(Ce.hasStandardBrowserEnv||Ce.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((c=o.getContentType())!==!1){const[u,...h]=c?c.split(";").map(d=>d.trim()).filter(Boolean):[];o.setContentType([u||"multipart/form-data",...h].join("; "))}}if(Ce.hasStandardBrowserEnv&&(s&&D.isFunction(s)&&(s=s(t)),s||s!==!1&&Pb(t.url))){const u=r&&i&&xb.read(i);u&&o.set(r,u)}return t},Db=typeof XMLHttpRequest<"u",Nb=Db&&function(e){return new Promise(function(n,s){const r=kg(e);let i=r.data;const o=$e.from(r.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:u}=r,h,d,m,y,b;function P(){y&&y(),b&&b(),r.cancelToken&&r.cancelToken.unsubscribe(h),r.signal&&r.signal.removeEventListener("abort",h)}let x=new XMLHttpRequest;x.open(r.method.toUpperCase(),r.url,!0),x.timeout=r.timeout;function M(){if(!x)return;const B=$e.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders()),nt={data:!l||l==="text"||l==="json"?x.responseText:x.response,status:x.status,statusText:x.statusText,headers:B,config:e,request:x};Pg(function(S){n(S),P()},function(S){s(S),P()},nt),x=null}"onloadend"in x?x.onloadend=M:x.onreadystatechange=function(){!x||x.readyState!==4||x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0)||setTimeout(M)},x.onabort=function(){x&&(s(new bt("Request aborted",bt.ECONNABORTED,e,x)),x=null)},x.onerror=function(){s(new bt("Network Error",bt.ERR_NETWORK,e,x)),x=null},x.ontimeout=function(){let H=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const nt=r.transitional||Sg;r.timeoutErrorMessage&&(H=r.timeoutErrorMessage),s(new bt(H,nt.clarifyTimeoutError?bt.ETIMEDOUT:bt.ECONNABORTED,e,x)),x=null},i===void 0&&o.setContentType(null),"setRequestHeader"in x&&D.forEach(o.toJSON(),function(H,nt){x.setRequestHeader(nt,H)}),D.isUndefined(r.withCredentials)||(x.withCredentials=!!r.withCredentials),l&&l!=="json"&&(x.responseType=r.responseType),u&&([m,b]=la(u,!0),x.addEventListener("progress",m)),c&&x.upload&&([d,y]=la(c),x.upload.addEventListener("progress",d),x.upload.addEventListener("loadend",y)),(r.cancelToken||r.signal)&&(h=B=>{x&&(s(!B||B.type?new Nr(null,e,x):B),x.abort(),x=null)},r.cancelToken&&r.cancelToken.subscribe(h),r.signal&&(r.signal.aborted?h():r.signal.addEventListener("abort",h)));const O=Sb(r.url);if(O&&Ce.protocols.indexOf(O)===-1){s(new bt("Unsupported protocol "+O+":",bt.ERR_BAD_REQUEST,e));return}x.send(i||null)})},Ob=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let s=new AbortController,r;const i=function(u){if(!r){r=!0,l();const h=u instanceof Error?u:this.reason;s.abort(h instanceof bt?h:new Nr(h instanceof Error?h.message:h))}};let o=t&&setTimeout(()=>{o=null,i(new bt(`timeout ${t} of ms exceeded`,bt.ETIMEDOUT))},t);const l=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(i):u.removeEventListener("abort",i)}),e=null)};e.forEach(u=>u.addEventListener("abort",i));const{signal:c}=s;return c.unsubscribe=()=>D.asap(l),c}},Mb=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let s=0,r;for(;s<n;)r=s+t,yield e.slice(s,r),s=r},Lb=async function*(e,t){for await(const n of Fb(e))yield*Mb(n,t)},Fb=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:s}=await t.read();if(n)break;yield s}}finally{await t.cancel()}},pd=(e,t,n,s)=>{const r=Lb(e,t);let i=0,o,l=c=>{o||(o=!0,s&&s(c))};return new ReadableStream({async pull(c){try{const{done:u,value:h}=await r.next();if(u){l(),c.close();return}let d=h.byteLength;if(n){let m=i+=d;n(m)}c.enqueue(new Uint8Array(h))}catch(u){throw l(u),u}},cancel(c){return l(c),r.return()}},{highWaterMark:2})},Ka=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Vg=Ka&&typeof ReadableStream=="function",Ub=Ka&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),Dg=(e,...t)=>{try{return!!e(...t)}catch{return!1}},Bb=Vg&&Dg(()=>{let e=!1;const t=new Request(Ce.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),md=64*1024,bc=Vg&&Dg(()=>D.isReadableStream(new Response("").body)),ca={stream:bc&&(e=>e.body)};Ka&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!ca[t]&&(ca[t]=D.isFunction(e[t])?n=>n[t]():(n,s)=>{throw new bt(`Response type '${t}' is not supported`,bt.ERR_NOT_SUPPORT,s)})})})(new Response);const $b=async e=>{if(e==null)return 0;if(D.isBlob(e))return e.size;if(D.isSpecCompliantForm(e))return(await new Request(Ce.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(D.isArrayBufferView(e)||D.isArrayBuffer(e))return e.byteLength;if(D.isURLSearchParams(e)&&(e=e+""),D.isString(e))return(await Ub(e)).byteLength},jb=async(e,t)=>{const n=D.toFiniteNumber(e.getContentLength());return n??$b(t)},qb=Ka&&(async e=>{let{url:t,method:n,data:s,signal:r,cancelToken:i,timeout:o,onDownloadProgress:l,onUploadProgress:c,responseType:u,headers:h,withCredentials:d="same-origin",fetchOptions:m}=kg(e);u=u?(u+"").toLowerCase():"text";let y=Ob([r,i&&i.toAbortSignal()],o),b;const P=y&&y.unsubscribe&&(()=>{y.unsubscribe()});let x;try{if(c&&Bb&&n!=="get"&&n!=="head"&&(x=await jb(h,s))!==0){let nt=new Request(t,{method:"POST",body:s,duplex:"half"}),st;if(D.isFormData(s)&&(st=nt.headers.get("content-type"))&&h.setContentType(st),nt.body){const[S,v]=hd(x,la(fd(c)));s=pd(nt.body,md,S,v)}}D.isString(d)||(d=d?"include":"omit");const M="credentials"in Request.prototype;b=new Request(t,{...m,signal:y,method:n.toUpperCase(),headers:h.normalize().toJSON(),body:s,duplex:"half",credentials:M?d:void 0});let O=await fetch(b,m);const B=bc&&(u==="stream"||u==="response");if(bc&&(l||B&&P)){const nt={};["status","statusText","headers"].forEach(_=>{nt[_]=O[_]});const st=D.toFiniteNumber(O.headers.get("content-length")),[S,v]=l&&hd(st,la(fd(l),!0))||[];O=new Response(pd(O.body,md,S,()=>{v&&v(),P&&P()}),nt)}u=u||"text";let H=await ca[D.findKey(ca,u)||"text"](O,e);return!B&&P&&P(),await new Promise((nt,st)=>{Pg(nt,st,{data:H,headers:$e.from(O.headers),status:O.status,statusText:O.statusText,config:e,request:b})})}catch(M){throw P&&P(),M&&M.name==="TypeError"&&/Load failed|fetch/i.test(M.message)?Object.assign(new bt("Network Error",bt.ERR_NETWORK,e,b),{cause:M.cause||M}):bt.from(M,M&&M.code,e,b)}}),Tc={http:rb,xhr:Nb,fetch:qb};D.forEach(Tc,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const gd=e=>`- ${e}`,Hb=e=>D.isFunction(e)||e===null||e===!1,Ng={getAdapter:e=>{e=D.isArray(e)?e:[e];const{length:t}=e;let n,s;const r={};for(let i=0;i<t;i++){n=e[i];let o;if(s=n,!Hb(n)&&(s=Tc[(o=String(n)).toLowerCase()],s===void 0))throw new bt(`Unknown adapter '${o}'`);if(s)break;r[o||"#"+i]=s}if(!s){const i=Object.entries(r).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=t?i.length>1?`since :
`+i.map(gd).join(`
`):" "+gd(i[0]):"as no adapter specified";throw new bt("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return s},adapters:Tc};function ql(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Nr(null,e)}function yd(e){return ql(e),e.headers=$e.from(e.headers),e.data=jl.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Ng.getAdapter(e.adapter||eo.adapter)(e).then(function(s){return ql(e),s.data=jl.call(e,e.transformResponse,s),s.headers=$e.from(s.headers),s},function(s){return Cg(s)||(ql(e),s&&s.response&&(s.response.data=jl.call(e,e.transformResponse,s.response),s.response.headers=$e.from(s.response.headers))),Promise.reject(s)})}const Og="1.11.0",Ga={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Ga[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const _d={};Ga.transitional=function(t,n,s){function r(i,o){return"[Axios v"+Og+"] Transitional option '"+i+"'"+o+(s?". "+s:"")}return(i,o,l)=>{if(t===!1)throw new bt(r(o," has been removed"+(n?" in "+n:"")),bt.ERR_DEPRECATED);return n&&!_d[o]&&(_d[o]=!0,console.warn(r(o," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(i,o,l):!0}};Ga.spelling=function(t){return(n,s)=>(console.warn(`${s} is likely a misspelling of ${t}`),!0)};function zb(e,t,n){if(typeof e!="object")throw new bt("options must be an object",bt.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let r=s.length;for(;r-- >0;){const i=s[r],o=t[i];if(o){const l=e[i],c=l===void 0||o(l,i,e);if(c!==!0)throw new bt("option "+i+" must be "+c,bt.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new bt("Unknown option "+i,bt.ERR_BAD_OPTION)}}const qo={assertOptions:zb,validators:Ga},pn=qo.validators;let Gs=class{constructor(t){this.defaults=t||{},this.interceptors={request:new cd,response:new cd}}async request(t,n){try{return await this._request(t,n)}catch(s){if(s instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const i=r.stack?r.stack.replace(/^.+\n/,""):"";try{s.stack?i&&!String(s.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+i):s.stack=i}catch{}}throw s}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Qs(this.defaults,n);const{transitional:s,paramsSerializer:r,headers:i}=n;s!==void 0&&qo.assertOptions(s,{silentJSONParsing:pn.transitional(pn.boolean),forcedJSONParsing:pn.transitional(pn.boolean),clarifyTimeoutError:pn.transitional(pn.boolean)},!1),r!=null&&(D.isFunction(r)?n.paramsSerializer={serialize:r}:qo.assertOptions(r,{encode:pn.function,serialize:pn.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),qo.assertOptions(n,{baseUrl:pn.spelling("baseURL"),withXsrfToken:pn.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=i&&D.merge(i.common,i[n.method]);i&&D.forEach(["delete","get","head","post","put","patch","common"],b=>{delete i[b]}),n.headers=$e.concat(o,i);const l=[];let c=!0;this.interceptors.request.forEach(function(P){typeof P.runWhen=="function"&&P.runWhen(n)===!1||(c=c&&P.synchronous,l.unshift(P.fulfilled,P.rejected))});const u=[];this.interceptors.response.forEach(function(P){u.push(P.fulfilled,P.rejected)});let h,d=0,m;if(!c){const b=[yd.bind(this),void 0];for(b.unshift(...l),b.push(...u),m=b.length,h=Promise.resolve(n);d<m;)h=h.then(b[d++],b[d++]);return h}m=l.length;let y=n;for(d=0;d<m;){const b=l[d++],P=l[d++];try{y=b(y)}catch(x){P.call(this,x);break}}try{h=yd.call(this,y)}catch(b){return Promise.reject(b)}for(d=0,m=u.length;d<m;)h=h.then(u[d++],u[d++]);return h}getUri(t){t=Qs(this.defaults,t);const n=xg(t.baseURL,t.url,t.allowAbsoluteUrls);return Ig(n,t.params,t.paramsSerializer)}};D.forEach(["delete","get","head","options"],function(t){Gs.prototype[t]=function(n,s){return this.request(Qs(s||{},{method:t,url:n,data:(s||{}).data}))}});D.forEach(["post","put","patch"],function(t){function n(s){return function(i,o,l){return this.request(Qs(l||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}Gs.prototype[t]=n(),Gs.prototype[t+"Form"]=n(!0)});let Kb=class Mg{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const s=this;this.promise.then(r=>{if(!s._listeners)return;let i=s._listeners.length;for(;i-- >0;)s._listeners[i](r);s._listeners=null}),this.promise.then=r=>{let i;const o=new Promise(l=>{s.subscribe(l),i=l}).then(r);return o.cancel=function(){s.unsubscribe(i)},o},t(function(i,o,l){s.reason||(s.reason=new Nr(i,o,l),n(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=s=>{t.abort(s)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new Mg(function(r){t=r}),cancel:t}}};function Gb(e){return function(n){return e.apply(null,n)}}function Wb(e){return D.isObject(e)&&e.isAxiosError===!0}const Ac={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ac).forEach(([e,t])=>{Ac[t]=e});function Lg(e){const t=new Gs(e),n=dg(Gs.prototype.request,t);return D.extend(n,Gs.prototype,t,{allOwnKeys:!0}),D.extend(n,t,null,{allOwnKeys:!0}),n.create=function(r){return Lg(Qs(e,r))},n}const te=Lg(eo);te.Axios=Gs;te.CanceledError=Nr;te.CancelToken=Kb;te.isCancel=Cg;te.VERSION=Og;te.toFormData=za;te.AxiosError=bt;te.Cancel=te.CanceledError;te.all=function(t){return Promise.all(t)};te.spread=Gb;te.isAxiosError=Wb;te.mergeConfig=Qs;te.AxiosHeaders=$e;te.formToJSON=e=>Rg(D.isHTMLForm(e)?new FormData(e):e);te.getAdapter=Ng.getAdapter;te.HttpStatusCode=Ac;te.default=te;const{Axios:OP,AxiosError:MP,CanceledError:LP,isCancel:FP,CancelToken:UP,VERSION:BP,all:$P,Cancel:jP,isAxiosError:qP,spread:HP,toFormData:zP,AxiosHeaders:KP,HttpStatusCode:GP,formToJSON:WP,getAdapter:QP,mergeConfig:JP}=te,Qb="https://raw.githubusercontent.com/DrSmoothl/plugin-repo/refs/heads/main",vd={群组管理:"Group Management",娱乐互动:"Entertainment & Interaction",实用工具:"Utility Tools",内容生成:"Content Generation",多媒体:"Multimedia",外部集成:"External Integration",数据分析与洞察:"Data Analysis & Insights",其他:"Other"},Hl={"Group Management":"群组管理","Entertainment & Interaction":"娱乐互动","Utility Tools":"实用工具","Content Generation":"内容生成",Multimedia:"多媒体","External Integration":"外部集成","Data Analysis & Insights":"数据分析与洞察",Other:"其他"},Us=class Us{constructor(){Vn(this,"plugins",[]);Vn(this,"loading",!1)}static getInstance(){return Us.instance||(Us.instance=new Us),Us.instance}async fetchPlugins(){if(this.loading)return this.plugins;try{this.loading=!0;const t=await te.get(`${Qb}/plugin_details.json`);return this.plugins=t.data.map(n=>({...n,categoryDisplay:this.getCategoryDisplay(n)})),this.plugins}catch(t){throw console.error("获取插件列表失败:",t),new Error("获取插件列表失败，请稍后重试")}finally{this.loading=!1}}getCategoryDisplay(t){const n=t.manifest.categories||[];for(const s of n)if(Hl[s])return Hl[s];for(const s of n)if(vd[s])return Hl[vd[s]];return"其他"}compareVersions(t,n){const s=t.split(".").map(Number),r=n.split(".").map(Number),i=Math.max(s.length,r.length);for(let o=0;o<i;o++){const l=s[o]||0,c=r[o]||0;if(l>c)return 1;if(l<c)return-1}return 0}isPluginCompatible(t,n){const s=t.manifest.host_application.min_version,r=t.manifest.host_application.max_version;return!(this.compareVersions(n,s)<0||r&&this.compareVersions(n,r)>0)}getPluginsByCategory(t){return!t||t==="全部"?this.plugins:this.plugins.filter(n=>n.categoryDisplay===t)}getPluginsByVersion(t){return t?this.plugins.filter(n=>this.isPluginCompatible(n,t)):this.plugins}searchPlugins(t){if(!t.trim())return this.plugins;const n=t.toLowerCase();return this.plugins.filter(s=>s.manifest.name.toLowerCase().includes(n)||s.manifest.description.toLowerCase().includes(n)||s.manifest.author.name.toLowerCase().includes(n)||(s.manifest.keywords||[]).some(r=>r.toLowerCase().includes(n)))}filterPlugins(t){let n=this.plugins;if(t.category&&t.category!=="全部"&&(n=n.filter(s=>s.categoryDisplay===t.category)),t.version&&t.version.trim()&&(n=n.filter(s=>this.isPluginCompatible(s,t.version))),t.searchQuery&&t.searchQuery.trim()){const s=t.searchQuery.toLowerCase();n=n.filter(r=>r.manifest.name.toLowerCase().includes(s)||r.manifest.description.toLowerCase().includes(s)||r.manifest.author.name.toLowerCase().includes(s)||(r.manifest.keywords||[]).some(i=>i.toLowerCase().includes(s)))}return n}getAllCategories(){if(this.plugins.length===0)return["全部","群组管理","娱乐互动","实用工具","内容生成","多媒体","外部集成","数据分析与洞察","其他"];const t=new Set;return this.plugins.forEach(n=>{t.add(n.categoryDisplay)}),["全部",...Array.from(t).sort()]}getAllVersions(){const t=new Set;return this.plugins.forEach(n=>{const s=n.manifest.host_application.min_version;t.add(s)}),Array.from(t).sort((n,s)=>this.compareVersions(n,s))}getPluginCount(){return this.plugins.length}isLoading(){return this.loading}};Vn(Us,"instance");let Ic=Us;/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb=()=>{};var wd={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fg=function(e){const t=[];let n=0;for(let s=0;s<e.length;s++){let r=e.charCodeAt(s);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=r&63|128):(r&64512)===55296&&s+1<e.length&&(e.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(e.charCodeAt(++s)&1023),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=r&63|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=r&63|128)}return t},Xb=function(e){const t=[];let n=0,s=0;for(;n<e.length;){const r=e[n++];if(r<128)t[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=e[n++];t[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=e[n++],o=e[n++],l=e[n++],c=((r&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;t[s++]=String.fromCharCode(55296+(c>>10)),t[s++]=String.fromCharCode(56320+(c&1023))}else{const i=e[n++],o=e[n++];t[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return t.join("")},Ug={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<e.length;r+=3){const i=e[r],o=r+1<e.length,l=o?e[r+1]:0,c=r+2<e.length,u=c?e[r+2]:0,h=i>>2,d=(i&3)<<4|l>>4;let m=(l&15)<<2|u>>6,y=u&63;c||(y=64,o||(m=64)),s.push(n[h],n[d],n[m],n[y])}return s.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Fg(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):Xb(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<e.length;){const i=n[e.charAt(r++)],l=r<e.length?n[e.charAt(r)]:0;++r;const u=r<e.length?n[e.charAt(r)]:64;++r;const d=r<e.length?n[e.charAt(r)]:64;if(++r,i==null||l==null||u==null||d==null)throw new Yb;const m=i<<2|l>>4;if(s.push(m),u!==64){const y=l<<4&240|u>>2;if(s.push(y),d!==64){const b=u<<6&192|d;s.push(b)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Yb extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Zb=function(e){const t=Fg(e);return Ug.encodeByteArray(t,!0)},ua=function(e){return Zb(e).replace(/\./g,"")},tT=function(e){try{return Ug.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nT=()=>eT().__FIREBASE_DEFAULTS__,sT=()=>{if(typeof process>"u"||typeof wd>"u")return;const e=wd.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},rT=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&tT(e[1]);return t&&JSON.parse(t)},Eu=()=>{try{return Jb()||nT()||sT()||rT()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},iT=e=>{var t,n;return(n=(t=Eu())==null?void 0:t.emulatorHosts)==null?void 0:n[e]},oT=e=>{const t=iT(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),s]:[t.substring(0,n),s]},Bg=()=>{var e;return(e=Eu())==null?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bu(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function lT(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cT(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...e};return[ua(JSON.stringify(n)),ua(JSON.stringify(o)),""].join(".")}const vi={};function uT(){const e={prod:[],emulator:[]};for(const t of Object.keys(vi))vi[t]?e.emulator.push(t):e.prod.push(t);return e}function hT(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let Ed=!1;function fT(e,t){if(typeof window>"u"||typeof document>"u"||!bu(window.location.host)||vi[e]===t||vi[e]||Ed)return;vi[e]=t;function n(m){return`__firebase__banner__${m}`}const s="__firebase__banner",i=uT().prod.length>0;function o(){const m=document.getElementById(s);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{Ed=!0,o()},m}function h(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function d(){const m=hT(s),y=n("text"),b=document.getElementById(y)||document.createElement("span"),P=n("learnmore"),x=document.getElementById(P)||document.createElement("a"),M=n("preprendIcon"),O=document.getElementById(M)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const B=m.element;l(B),h(x,P);const H=u();c(O,M),B.append(O,b,x,H),document.body.appendChild(B)}i?(b.innerText="Preview backend disconnected.",O.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(O.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dT(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function pT(){var t;const e=(t=Eu())==null?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function mT(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function gT(){return!pT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $g(){try{return typeof indexedDB=="object"}catch{return!1}}function jg(){return new Promise((e,t)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var i;t(((i=r.error)==null?void 0:i.message)||"")}}catch(n){t(n)}})}function yT(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T="FirebaseError";class As extends Error{constructor(t,n,s){super(n),this.code=t,this.customData=s,this.name=_T,Object.setPrototypeOf(this,As.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wa.prototype.create)}}class Wa{constructor(t,n,s){this.service=t,this.serviceName=n,this.errors=s}create(t,...n){const s=n[0]||{},r=`${this.service}/${t}`,i=this.errors[t],o=i?vT(i,s):"Error",l=`${this.serviceName}: ${o} (${r}).`;return new As(r,l,s)}}function vT(e,t){return e.replace(wT,(n,s)=>{const r=t[s];return r!=null?String(r):`<${s}?>`})}const wT=/\{\$([^}]+)}/g;function Mi(e,t){if(e===t)return!0;const n=Object.keys(e),s=Object.keys(t);for(const r of n){if(!s.includes(r))return!1;const i=e[r],o=t[r];if(bd(i)&&bd(o)){if(!Mi(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function bd(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET=1e3,bT=2,TT=4*60*60*1e3,AT=.5;function Td(e,t=ET,n=bT){const s=t*Math.pow(n,e),r=Math.round(AT*s*(Math.random()-.5)*2);return Math.min(TT,s+r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qn(e){return e&&e._delegate?e._delegate:e}class Hn{constructor(t,n,s){this.name=t,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const s=new aT;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),s=(t==null?void 0:t.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(RT(t))try{this.getOrInitializeService({instanceIdentifier:Ms})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(t=Ms){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Ms){return this.instances.has(t)}getOptions(t=Ms){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);s===l&&o.resolve(r)}return r}onInit(t,n){const s=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(s)??new Set;r.add(t),this.onInitCallbacks.set(s,r);const i=this.instances.get(s);return i&&t(i,s),()=>{r.delete(t)}}invokeOnInitCallbacks(t,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:ST(t),options:n}),this.instances.set(t,s),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=Ms){return this.component?this.component.multipleInstances?t:Ms:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ST(e){return e===Ms?void 0:e}function RT(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new IT(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ct;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Ct||(Ct={}));const PT={debug:Ct.DEBUG,verbose:Ct.VERBOSE,info:Ct.INFO,warn:Ct.WARN,error:Ct.ERROR,silent:Ct.SILENT},xT=Ct.INFO,kT={[Ct.DEBUG]:"log",[Ct.VERBOSE]:"log",[Ct.INFO]:"info",[Ct.WARN]:"warn",[Ct.ERROR]:"error"},VT=(e,t,...n)=>{if(t<e.logLevel)return;const s=new Date().toISOString(),r=kT[t];if(r)console[r](`[${s}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Tu{constructor(t){this.name=t,this._logLevel=xT,this._logHandler=VT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ct))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?PT[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ct.DEBUG,...t),this._logHandler(this,Ct.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ct.VERBOSE,...t),this._logHandler(this,Ct.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ct.INFO,...t),this._logHandler(this,Ct.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ct.WARN,...t),this._logHandler(this,Ct.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ct.ERROR,...t),this._logHandler(this,Ct.ERROR,...t)}}const DT=(e,t)=>t.some(n=>e instanceof n);let Ad,Id;function NT(){return Ad||(Ad=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function OT(){return Id||(Id=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const qg=new WeakMap,Sc=new WeakMap,Hg=new WeakMap,zl=new WeakMap,Au=new WeakMap;function MT(e){const t=new Promise((n,s)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{n(us(e.result)),r()},o=()=>{s(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&qg.set(n,e)}).catch(()=>{}),Au.set(t,e),t}function LT(e){if(Sc.has(e))return;const t=new Promise((n,s)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{n(),r()},o=()=>{s(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)});Sc.set(e,t)}let Rc={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Sc.get(e);if(t==="objectStoreNames")return e.objectStoreNames||Hg.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return us(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function FT(e){Rc=e(Rc)}function UT(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const s=e.call(Kl(this),t,...n);return Hg.set(s,t.sort?t.sort():[t]),us(s)}:OT().includes(e)?function(...t){return e.apply(Kl(this),t),us(qg.get(this))}:function(...t){return us(e.apply(Kl(this),t))}}function BT(e){return typeof e=="function"?UT(e):(e instanceof IDBTransaction&&LT(e),DT(e,NT())?new Proxy(e,Rc):e)}function us(e){if(e instanceof IDBRequest)return MT(e);if(zl.has(e))return zl.get(e);const t=BT(e);return t!==e&&(zl.set(e,t),Au.set(t,e)),t}const Kl=e=>Au.get(e);function zg(e,t,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(e,t),l=us(o);return s&&o.addEventListener("upgradeneeded",c=>{s(us(o.result),c.oldVersion,c.newVersion,us(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),r&&c.addEventListener("versionchange",u=>r(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const $T=["get","getKey","getAll","getAllKeys","count"],jT=["put","add","delete","clear"],Gl=new Map;function Sd(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Gl.get(t))return Gl.get(t);const n=t.replace(/FromIndex$/,""),s=t!==n,r=jT.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||$T.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,r?"readwrite":"readonly");let u=c.store;return s&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),r&&c.done]))[0]};return Gl.set(t,i),i}FT(e=>({...e,get:(t,n,s)=>Sd(t,n)||e.get(t,n,s),has:(t,n)=>!!Sd(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(HT(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function HT(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Cc="@firebase/app",Rd="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zn=new Tu("@firebase/app"),zT="@firebase/app-compat",KT="@firebase/analytics-compat",GT="@firebase/analytics",WT="@firebase/app-check-compat",QT="@firebase/app-check",JT="@firebase/auth",XT="@firebase/auth-compat",YT="@firebase/database",ZT="@firebase/data-connect",tA="@firebase/database-compat",eA="@firebase/functions",nA="@firebase/functions-compat",sA="@firebase/installations",rA="@firebase/installations-compat",iA="@firebase/messaging",oA="@firebase/messaging-compat",aA="@firebase/performance",lA="@firebase/performance-compat",cA="@firebase/remote-config",uA="@firebase/remote-config-compat",hA="@firebase/storage",fA="@firebase/storage-compat",dA="@firebase/firestore",pA="@firebase/ai",mA="@firebase/firestore-compat",gA="firebase",yA="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pc="[DEFAULT]",_A={[Cc]:"fire-core",[zT]:"fire-core-compat",[GT]:"fire-analytics",[KT]:"fire-analytics-compat",[QT]:"fire-app-check",[WT]:"fire-app-check-compat",[JT]:"fire-auth",[XT]:"fire-auth-compat",[YT]:"fire-rtdb",[ZT]:"fire-data-connect",[tA]:"fire-rtdb-compat",[eA]:"fire-fn",[nA]:"fire-fn-compat",[sA]:"fire-iid",[rA]:"fire-iid-compat",[iA]:"fire-fcm",[oA]:"fire-fcm-compat",[aA]:"fire-perf",[lA]:"fire-perf-compat",[cA]:"fire-rc",[uA]:"fire-rc-compat",[hA]:"fire-gcs",[fA]:"fire-gcs-compat",[dA]:"fire-fst",[mA]:"fire-fst-compat",[pA]:"fire-vertex","fire-js":"fire-js",[gA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha=new Map,vA=new Map,xc=new Map;function Cd(e,t){try{e.container.addComponent(t)}catch(n){zn.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function gs(e){const t=e.name;if(xc.has(t))return zn.debug(`There were multiple attempts to register component ${t}.`),!1;xc.set(t,e);for(const n of ha.values())Cd(n,e);for(const n of vA.values())Cd(n,e);return!0}function no(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function wA(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},hs=new Wa("app","Firebase",EA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(t,n,s){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Hn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw hs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA=yA;function Kg(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const s={name:Pc,automaticDataCollectionEnabled:!0,...t},r=s.name;if(typeof r!="string"||!r)throw hs.create("bad-app-name",{appName:String(r)});if(n||(n=Bg()),!n)throw hs.create("no-options");const i=ha.get(r);if(i){if(Mi(n,i.options)&&Mi(s,i.config))return i;throw hs.create("duplicate-app",{appName:r})}const o=new CT(r);for(const c of xc.values())o.addComponent(c);const l=new bA(n,s,o);return ha.set(r,l),l}function Gg(e=Pc){const t=ha.get(e);if(!t&&e===Pc&&Bg())return Kg();if(!t)throw hs.create("no-app",{appName:e});return t}function wn(e,t,n){let s=_A[e]??e;n&&(s+=`-${n}`);const r=s.match(/\s|\//),i=t.match(/\s|\//);if(r||i){const o=[`Unable to register library "${s}" with version "${t}":`];r&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&i&&o.push("and"),i&&o.push(`version name "${t}" contains illegal characters (whitespace or "/")`),zn.warn(o.join(" "));return}gs(new Hn(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AA="firebase-heartbeat-database",IA=1,Li="firebase-heartbeat-store";let Wl=null;function Wg(){return Wl||(Wl=zg(AA,IA,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Li)}catch(n){console.warn(n)}}}}).catch(e=>{throw hs.create("idb-open",{originalErrorMessage:e.message})})),Wl}async function SA(e){try{const n=(await Wg()).transaction(Li),s=await n.objectStore(Li).get(Qg(e));return await n.done,s}catch(t){if(t instanceof As)zn.warn(t.message);else{const n=hs.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});zn.warn(n.message)}}}async function Pd(e,t){try{const s=(await Wg()).transaction(Li,"readwrite");await s.objectStore(Li).put(t,Qg(e)),await s.done}catch(n){if(n instanceof As)zn.warn(n.message);else{const s=hs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});zn.warn(s.message)}}}function Qg(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA=1024,CA=30;class PA{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new kA(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var t,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=xd();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:r}),this._heartbeatsCache.heartbeats.length>CA){const o=VA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){zn.warn(s)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=xd(),{heartbeatsToSend:s,unsentEntries:r}=xA(this._heartbeatsCache.heartbeats),i=ua(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return zn.warn(n),""}}}function xd(){return new Date().toISOString().substring(0,10)}function xA(e,t=RA){const n=[];let s=e.slice();for(const r of e){const i=n.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),kd(n)>t){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),kd(n)>t){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class kA{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $g()?jg().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await SA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return Pd(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return Pd(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function kd(e){return ua(JSON.stringify({version:2,heartbeats:e})).length}function VA(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let s=1;s<e.length;s++)e[s].date<n&&(n=e[s].date,t=s);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DA(e){gs(new Hn("platform-logger",t=>new qT(t),"PRIVATE")),gs(new Hn("heartbeat",t=>new PA(t),"PRIVATE")),wn(Cc,Rd,e),wn(Cc,Rd,"esm2020"),wn("fire-js","")}DA("");var Vd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fs,Jg;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(S,v){function _(){}_.prototype=v.prototype,S.D=v.prototype,S.prototype=new _,S.prototype.constructor=S,S.C=function(T,C,A){for(var w=Array(arguments.length-2),Z=2;Z<arguments.length;Z++)w[Z-2]=arguments[Z];return v.prototype[C].apply(T,w)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(S,v,_){_||(_=0);var T=Array(16);if(typeof v=="string")for(var C=0;16>C;++C)T[C]=v.charCodeAt(_++)|v.charCodeAt(_++)<<8|v.charCodeAt(_++)<<16|v.charCodeAt(_++)<<24;else for(C=0;16>C;++C)T[C]=v[_++]|v[_++]<<8|v[_++]<<16|v[_++]<<24;v=S.g[0],_=S.g[1],C=S.g[2];var A=S.g[3],w=v+(A^_&(C^A))+T[0]+3614090360&4294967295;v=_+(w<<7&4294967295|w>>>25),w=A+(C^v&(_^C))+T[1]+3905402710&4294967295,A=v+(w<<12&4294967295|w>>>20),w=C+(_^A&(v^_))+T[2]+606105819&4294967295,C=A+(w<<17&4294967295|w>>>15),w=_+(v^C&(A^v))+T[3]+3250441966&4294967295,_=C+(w<<22&4294967295|w>>>10),w=v+(A^_&(C^A))+T[4]+4118548399&4294967295,v=_+(w<<7&4294967295|w>>>25),w=A+(C^v&(_^C))+T[5]+1200080426&4294967295,A=v+(w<<12&4294967295|w>>>20),w=C+(_^A&(v^_))+T[6]+2821735955&4294967295,C=A+(w<<17&4294967295|w>>>15),w=_+(v^C&(A^v))+T[7]+4249261313&4294967295,_=C+(w<<22&4294967295|w>>>10),w=v+(A^_&(C^A))+T[8]+1770035416&4294967295,v=_+(w<<7&4294967295|w>>>25),w=A+(C^v&(_^C))+T[9]+2336552879&4294967295,A=v+(w<<12&4294967295|w>>>20),w=C+(_^A&(v^_))+T[10]+4294925233&4294967295,C=A+(w<<17&4294967295|w>>>15),w=_+(v^C&(A^v))+T[11]+2304563134&4294967295,_=C+(w<<22&4294967295|w>>>10),w=v+(A^_&(C^A))+T[12]+1804603682&4294967295,v=_+(w<<7&4294967295|w>>>25),w=A+(C^v&(_^C))+T[13]+4254626195&4294967295,A=v+(w<<12&4294967295|w>>>20),w=C+(_^A&(v^_))+T[14]+2792965006&4294967295,C=A+(w<<17&4294967295|w>>>15),w=_+(v^C&(A^v))+T[15]+1236535329&4294967295,_=C+(w<<22&4294967295|w>>>10),w=v+(C^A&(_^C))+T[1]+4129170786&4294967295,v=_+(w<<5&4294967295|w>>>27),w=A+(_^C&(v^_))+T[6]+3225465664&4294967295,A=v+(w<<9&4294967295|w>>>23),w=C+(v^_&(A^v))+T[11]+643717713&4294967295,C=A+(w<<14&4294967295|w>>>18),w=_+(A^v&(C^A))+T[0]+3921069994&4294967295,_=C+(w<<20&4294967295|w>>>12),w=v+(C^A&(_^C))+T[5]+3593408605&4294967295,v=_+(w<<5&4294967295|w>>>27),w=A+(_^C&(v^_))+T[10]+38016083&4294967295,A=v+(w<<9&4294967295|w>>>23),w=C+(v^_&(A^v))+T[15]+3634488961&4294967295,C=A+(w<<14&4294967295|w>>>18),w=_+(A^v&(C^A))+T[4]+3889429448&4294967295,_=C+(w<<20&4294967295|w>>>12),w=v+(C^A&(_^C))+T[9]+568446438&4294967295,v=_+(w<<5&4294967295|w>>>27),w=A+(_^C&(v^_))+T[14]+3275163606&4294967295,A=v+(w<<9&4294967295|w>>>23),w=C+(v^_&(A^v))+T[3]+4107603335&4294967295,C=A+(w<<14&4294967295|w>>>18),w=_+(A^v&(C^A))+T[8]+1163531501&4294967295,_=C+(w<<20&4294967295|w>>>12),w=v+(C^A&(_^C))+T[13]+2850285829&4294967295,v=_+(w<<5&4294967295|w>>>27),w=A+(_^C&(v^_))+T[2]+4243563512&4294967295,A=v+(w<<9&4294967295|w>>>23),w=C+(v^_&(A^v))+T[7]+1735328473&4294967295,C=A+(w<<14&4294967295|w>>>18),w=_+(A^v&(C^A))+T[12]+2368359562&4294967295,_=C+(w<<20&4294967295|w>>>12),w=v+(_^C^A)+T[5]+4294588738&4294967295,v=_+(w<<4&4294967295|w>>>28),w=A+(v^_^C)+T[8]+2272392833&4294967295,A=v+(w<<11&4294967295|w>>>21),w=C+(A^v^_)+T[11]+1839030562&4294967295,C=A+(w<<16&4294967295|w>>>16),w=_+(C^A^v)+T[14]+4259657740&4294967295,_=C+(w<<23&4294967295|w>>>9),w=v+(_^C^A)+T[1]+2763975236&4294967295,v=_+(w<<4&4294967295|w>>>28),w=A+(v^_^C)+T[4]+1272893353&4294967295,A=v+(w<<11&4294967295|w>>>21),w=C+(A^v^_)+T[7]+4139469664&4294967295,C=A+(w<<16&4294967295|w>>>16),w=_+(C^A^v)+T[10]+3200236656&4294967295,_=C+(w<<23&4294967295|w>>>9),w=v+(_^C^A)+T[13]+681279174&4294967295,v=_+(w<<4&4294967295|w>>>28),w=A+(v^_^C)+T[0]+3936430074&4294967295,A=v+(w<<11&4294967295|w>>>21),w=C+(A^v^_)+T[3]+3572445317&4294967295,C=A+(w<<16&4294967295|w>>>16),w=_+(C^A^v)+T[6]+76029189&4294967295,_=C+(w<<23&4294967295|w>>>9),w=v+(_^C^A)+T[9]+3654602809&4294967295,v=_+(w<<4&4294967295|w>>>28),w=A+(v^_^C)+T[12]+3873151461&4294967295,A=v+(w<<11&4294967295|w>>>21),w=C+(A^v^_)+T[15]+530742520&4294967295,C=A+(w<<16&4294967295|w>>>16),w=_+(C^A^v)+T[2]+3299628645&4294967295,_=C+(w<<23&4294967295|w>>>9),w=v+(C^(_|~A))+T[0]+4096336452&4294967295,v=_+(w<<6&4294967295|w>>>26),w=A+(_^(v|~C))+T[7]+1126891415&4294967295,A=v+(w<<10&4294967295|w>>>22),w=C+(v^(A|~_))+T[14]+2878612391&4294967295,C=A+(w<<15&4294967295|w>>>17),w=_+(A^(C|~v))+T[5]+4237533241&4294967295,_=C+(w<<21&4294967295|w>>>11),w=v+(C^(_|~A))+T[12]+1700485571&4294967295,v=_+(w<<6&4294967295|w>>>26),w=A+(_^(v|~C))+T[3]+2399980690&4294967295,A=v+(w<<10&4294967295|w>>>22),w=C+(v^(A|~_))+T[10]+4293915773&4294967295,C=A+(w<<15&4294967295|w>>>17),w=_+(A^(C|~v))+T[1]+2240044497&4294967295,_=C+(w<<21&4294967295|w>>>11),w=v+(C^(_|~A))+T[8]+1873313359&4294967295,v=_+(w<<6&4294967295|w>>>26),w=A+(_^(v|~C))+T[15]+4264355552&4294967295,A=v+(w<<10&4294967295|w>>>22),w=C+(v^(A|~_))+T[6]+2734768916&4294967295,C=A+(w<<15&4294967295|w>>>17),w=_+(A^(C|~v))+T[13]+1309151649&4294967295,_=C+(w<<21&4294967295|w>>>11),w=v+(C^(_|~A))+T[4]+4149444226&4294967295,v=_+(w<<6&4294967295|w>>>26),w=A+(_^(v|~C))+T[11]+3174756917&4294967295,A=v+(w<<10&4294967295|w>>>22),w=C+(v^(A|~_))+T[2]+718787259&4294967295,C=A+(w<<15&4294967295|w>>>17),w=_+(A^(C|~v))+T[9]+3951481745&4294967295,S.g[0]=S.g[0]+v&4294967295,S.g[1]=S.g[1]+(C+(w<<21&4294967295|w>>>11))&4294967295,S.g[2]=S.g[2]+C&4294967295,S.g[3]=S.g[3]+A&4294967295}s.prototype.u=function(S,v){v===void 0&&(v=S.length);for(var _=v-this.blockSize,T=this.B,C=this.h,A=0;A<v;){if(C==0)for(;A<=_;)r(this,S,A),A+=this.blockSize;if(typeof S=="string"){for(;A<v;)if(T[C++]=S.charCodeAt(A++),C==this.blockSize){r(this,T),C=0;break}}else for(;A<v;)if(T[C++]=S[A++],C==this.blockSize){r(this,T),C=0;break}}this.h=C,this.o+=v},s.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var v=1;v<S.length-8;++v)S[v]=0;var _=8*this.o;for(v=S.length-8;v<S.length;++v)S[v]=_&255,_/=256;for(this.u(S),S=Array(16),v=_=0;4>v;++v)for(var T=0;32>T;T+=8)S[_++]=this.g[v]>>>T&255;return S};function i(S,v){var _=l;return Object.prototype.hasOwnProperty.call(_,S)?_[S]:_[S]=v(S)}function o(S,v){this.h=v;for(var _=[],T=!0,C=S.length-1;0<=C;C--){var A=S[C]|0;T&&A==v||(_[C]=A,T=!1)}this.g=_}var l={};function c(S){return-128<=S&&128>S?i(S,function(v){return new o([v|0],0>v?-1:0)}):new o([S|0],0>S?-1:0)}function u(S){if(isNaN(S)||!isFinite(S))return d;if(0>S)return x(u(-S));for(var v=[],_=1,T=0;S>=_;T++)v[T]=S/_|0,_*=4294967296;return new o(v,0)}function h(S,v){if(S.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(S.charAt(0)=="-")return x(h(S.substring(1),v));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=u(Math.pow(v,8)),T=d,C=0;C<S.length;C+=8){var A=Math.min(8,S.length-C),w=parseInt(S.substring(C,C+A),v);8>A?(A=u(Math.pow(v,A)),T=T.j(A).add(u(w))):(T=T.j(_),T=T.add(u(w)))}return T}var d=c(0),m=c(1),y=c(16777216);e=o.prototype,e.m=function(){if(P(this))return-x(this).m();for(var S=0,v=1,_=0;_<this.g.length;_++){var T=this.i(_);S+=(0<=T?T:4294967296+T)*v,v*=4294967296}return S},e.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(b(this))return"0";if(P(this))return"-"+x(this).toString(S);for(var v=u(Math.pow(S,6)),_=this,T="";;){var C=H(_,v).g;_=M(_,C.j(v));var A=((0<_.g.length?_.g[0]:_.h)>>>0).toString(S);if(_=C,b(_))return A+T;for(;6>A.length;)A="0"+A;T=A+T}},e.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function b(S){if(S.h!=0)return!1;for(var v=0;v<S.g.length;v++)if(S.g[v]!=0)return!1;return!0}function P(S){return S.h==-1}e.l=function(S){return S=M(this,S),P(S)?-1:b(S)?0:1};function x(S){for(var v=S.g.length,_=[],T=0;T<v;T++)_[T]=~S.g[T];return new o(_,~S.h).add(m)}e.abs=function(){return P(this)?x(this):this},e.add=function(S){for(var v=Math.max(this.g.length,S.g.length),_=[],T=0,C=0;C<=v;C++){var A=T+(this.i(C)&65535)+(S.i(C)&65535),w=(A>>>16)+(this.i(C)>>>16)+(S.i(C)>>>16);T=w>>>16,A&=65535,w&=65535,_[C]=w<<16|A}return new o(_,_[_.length-1]&-2147483648?-1:0)};function M(S,v){return S.add(x(v))}e.j=function(S){if(b(this)||b(S))return d;if(P(this))return P(S)?x(this).j(x(S)):x(x(this).j(S));if(P(S))return x(this.j(x(S)));if(0>this.l(y)&&0>S.l(y))return u(this.m()*S.m());for(var v=this.g.length+S.g.length,_=[],T=0;T<2*v;T++)_[T]=0;for(T=0;T<this.g.length;T++)for(var C=0;C<S.g.length;C++){var A=this.i(T)>>>16,w=this.i(T)&65535,Z=S.i(C)>>>16,Y=S.i(C)&65535;_[2*T+2*C]+=w*Y,O(_,2*T+2*C),_[2*T+2*C+1]+=A*Y,O(_,2*T+2*C+1),_[2*T+2*C+1]+=w*Z,O(_,2*T+2*C+1),_[2*T+2*C+2]+=A*Z,O(_,2*T+2*C+2)}for(T=0;T<v;T++)_[T]=_[2*T+1]<<16|_[2*T];for(T=v;T<2*v;T++)_[T]=0;return new o(_,0)};function O(S,v){for(;(S[v]&65535)!=S[v];)S[v+1]+=S[v]>>>16,S[v]&=65535,v++}function B(S,v){this.g=S,this.h=v}function H(S,v){if(b(v))throw Error("division by zero");if(b(S))return new B(d,d);if(P(S))return v=H(x(S),v),new B(x(v.g),x(v.h));if(P(v))return v=H(S,x(v)),new B(x(v.g),v.h);if(30<S.g.length){if(P(S)||P(v))throw Error("slowDivide_ only works with positive integers.");for(var _=m,T=v;0>=T.l(S);)_=nt(_),T=nt(T);var C=st(_,1),A=st(T,1);for(T=st(T,2),_=st(_,2);!b(T);){var w=A.add(T);0>=w.l(S)&&(C=C.add(_),A=w),T=st(T,1),_=st(_,1)}return v=M(S,C.j(v)),new B(C,v)}for(C=d;0<=S.l(v);){for(_=Math.max(1,Math.floor(S.m()/v.m())),T=Math.ceil(Math.log(_)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),A=u(_),w=A.j(v);P(w)||0<w.l(S);)_-=T,A=u(_),w=A.j(v);b(A)&&(A=m),C=C.add(A),S=M(S,w)}return new B(C,S)}e.A=function(S){return H(this,S).h},e.and=function(S){for(var v=Math.max(this.g.length,S.g.length),_=[],T=0;T<v;T++)_[T]=this.i(T)&S.i(T);return new o(_,this.h&S.h)},e.or=function(S){for(var v=Math.max(this.g.length,S.g.length),_=[],T=0;T<v;T++)_[T]=this.i(T)|S.i(T);return new o(_,this.h|S.h)},e.xor=function(S){for(var v=Math.max(this.g.length,S.g.length),_=[],T=0;T<v;T++)_[T]=this.i(T)^S.i(T);return new o(_,this.h^S.h)};function nt(S){for(var v=S.g.length+1,_=[],T=0;T<v;T++)_[T]=S.i(T)<<1|S.i(T-1)>>>31;return new o(_,S.h)}function st(S,v){var _=v>>5;v%=32;for(var T=S.g.length-_,C=[],A=0;A<T;A++)C[A]=0<v?S.i(A+_)>>>v|S.i(A+_+1)<<32-v:S.i(A+_);return new o(C,S.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,Jg=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,fs=o}).apply(typeof Vd<"u"?Vd:typeof self<"u"?self:typeof window<"u"?window:{});var ko=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Xg,ri,Yg,Ho,kc,Zg,ty,ey;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,f,p){return a==Array.prototype||a==Object.prototype||(a[f]=p.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof ko=="object"&&ko];for(var f=0;f<a.length;++f){var p=a[f];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var s=n(this);function r(a,f){if(f)t:{var p=s;a=a.split(".");for(var g=0;g<a.length-1;g++){var V=a[g];if(!(V in p))break t;p=p[V]}a=a[a.length-1],g=p[a],f=f(g),f!=g&&f!=null&&t(p,a,{configurable:!0,writable:!0,value:f})}}function i(a,f){a instanceof String&&(a+="");var p=0,g=!1,V={next:function(){if(!g&&p<a.length){var N=p++;return{value:f(N,a[N]),done:!1}}return g=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}r("Array.prototype.values",function(a){return a||function(){return i(this,function(f,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(a){var f=typeof a;return f=f!="object"?f:a?Array.isArray(a)?"array":f:"null",f=="array"||f=="object"&&typeof a.length=="number"}function u(a){var f=typeof a;return f=="object"&&a!=null||f=="function"}function h(a,f,p){return a.call.apply(a.bind,arguments)}function d(a,f,p){if(!a)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,g),a.apply(f,V)}}return function(){return a.apply(f,arguments)}}function m(a,f,p){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,m.apply(null,arguments)}function y(a,f){var p=Array.prototype.slice.call(arguments,1);return function(){var g=p.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function b(a,f){function p(){}p.prototype=f.prototype,a.aa=f.prototype,a.prototype=new p,a.prototype.constructor=a,a.Qb=function(g,V,N){for(var W=Array(arguments.length-2),Ot=2;Ot<arguments.length;Ot++)W[Ot-2]=arguments[Ot];return f.prototype[V].apply(g,W)}}function P(a){const f=a.length;if(0<f){const p=Array(f);for(let g=0;g<f;g++)p[g]=a[g];return p}return[]}function x(a,f){for(let p=1;p<arguments.length;p++){const g=arguments[p];if(c(g)){const V=a.length||0,N=g.length||0;a.length=V+N;for(let W=0;W<N;W++)a[V+W]=g[W]}else a.push(g)}}class M{constructor(f,p){this.i=f,this.j=p,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function O(a){return/^[\s\xa0]*$/.test(a)}function B(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function H(a){return H[" "](a),a}H[" "]=function(){};var nt=B().indexOf("Gecko")!=-1&&!(B().toLowerCase().indexOf("webkit")!=-1&&B().indexOf("Edge")==-1)&&!(B().indexOf("Trident")!=-1||B().indexOf("MSIE")!=-1)&&B().indexOf("Edge")==-1;function st(a,f,p){for(const g in a)f.call(p,a[g],g,a)}function S(a,f){for(const p in a)f.call(void 0,a[p],p,a)}function v(a){const f={};for(const p in a)f[p]=a[p];return f}const _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(a,f){let p,g;for(let V=1;V<arguments.length;V++){g=arguments[V];for(p in g)a[p]=g[p];for(let N=0;N<_.length;N++)p=_[N],Object.prototype.hasOwnProperty.call(g,p)&&(a[p]=g[p])}}function C(a){var f=1;a=a.split(":");const p=[];for(;0<f&&a.length;)p.push(a.shift()),f--;return a.length&&p.push(a.join(":")),p}function A(a){l.setTimeout(()=>{throw a},0)}function w(){var a=ee;let f=null;return a.g&&(f=a.g,a.g=a.g.next,a.g||(a.h=null),f.next=null),f}class Z{constructor(){this.h=this.g=null}add(f,p){const g=Y.get();g.set(f,p),this.h?this.h.next=g:this.g=g,this.h=g}}var Y=new M(()=>new Tt,a=>a.reset());class Tt{constructor(){this.next=this.g=this.h=null}set(f,p){this.h=f,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let ot,pt=!1,ee=new Z,qt=()=>{const a=l.Promise.resolve(void 0);ot=()=>{a.then(xe)}};var xe=()=>{for(var a;a=w();){try{a.h.call(a.g)}catch(p){A(p)}var f=Y;f.j(a),100>f.h&&(f.h++,a.next=f.g,f.g=a)}pt=!1};function zt(){this.s=this.s,this.C=this.C}zt.prototype.s=!1,zt.prototype.ma=function(){this.s||(this.s=!0,this.N())},zt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Kt(a,f){this.type=a,this.g=this.target=f,this.defaultPrevented=!1}Kt.prototype.h=function(){this.defaultPrevented=!0};var Jn=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,f=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const p=()=>{};l.addEventListener("test",p,f),l.removeEventListener("test",p,f)}catch{}return a}();function fn(a,f){if(Kt.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var p=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=f,f=a.relatedTarget){if(nt){t:{try{H(f.nodeName);var V=!0;break t}catch{}V=!1}V||(f=null)}}else p=="mouseover"?f=a.fromElement:p=="mouseout"&&(f=a.toElement);this.relatedTarget=f,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:Me[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&fn.aa.h.call(this)}}b(fn,Kt);var Me={2:"touch",3:"pen",4:"mouse"};fn.prototype.h=function(){fn.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var L="closure_listenable_"+(1e6*Math.random()|0),tt=0;function J(a,f,p,g,V){this.listener=a,this.proxy=null,this.src=f,this.type=p,this.capture=!!g,this.ha=V,this.key=++tt,this.da=this.fa=!1}function rt(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Pt(a){this.src=a,this.g={},this.h=0}Pt.prototype.add=function(a,f,p,g,V){var N=a.toString();a=this.g[N],a||(a=this.g[N]=[],this.h++);var W=I(a,f,g,V);return-1<W?(f=a[W],p||(f.fa=!1)):(f=new J(f,this.src,N,!!g,V),f.fa=p,a.push(f)),f};function E(a,f){var p=f.type;if(p in a.g){var g=a.g[p],V=Array.prototype.indexOf.call(g,f,void 0),N;(N=0<=V)&&Array.prototype.splice.call(g,V,1),N&&(rt(f),a.g[p].length==0&&(delete a.g[p],a.h--))}}function I(a,f,p,g){for(var V=0;V<a.length;++V){var N=a[V];if(!N.da&&N.listener==f&&N.capture==!!p&&N.ha==g)return V}return-1}var k="closure_lm_"+(1e6*Math.random()|0),F={};function j(a,f,p,g,V){if(Array.isArray(f)){for(var N=0;N<f.length;N++)j(a,f[N],p,g,V);return null}return p=gt(p),a&&a[L]?a.K(f,p,u(g)?!!g.capture:!1,V):U(a,f,p,!1,g,V)}function U(a,f,p,g,V,N){if(!f)throw Error("Invalid event type");var W=u(V)?!!V.capture:!!V,Ot=X(a);if(Ot||(a[k]=Ot=new Pt(a)),p=Ot.add(f,p,g,W,N),p.proxy)return p;if(g=Q(),p.proxy=g,g.src=a,g.listener=p,a.addEventListener)Jn||(V=W),V===void 0&&(V=!1),a.addEventListener(f.toString(),g,V);else if(a.attachEvent)a.attachEvent(z(f.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return p}function Q(){function a(p){return f.call(a.src,a.listener,p)}const f=ct;return a}function G(a,f,p,g,V){if(Array.isArray(f))for(var N=0;N<f.length;N++)G(a,f[N],p,g,V);else g=u(g)?!!g.capture:!!g,p=gt(p),a&&a[L]?(a=a.i,f=String(f).toString(),f in a.g&&(N=a.g[f],p=I(N,p,g,V),-1<p&&(rt(N[p]),Array.prototype.splice.call(N,p,1),N.length==0&&(delete a.g[f],a.h--)))):a&&(a=X(a))&&(f=a.g[f.toString()],a=-1,f&&(a=I(f,p,g,V)),(p=-1<a?f[a]:null)&&K(p))}function K(a){if(typeof a!="number"&&a&&!a.da){var f=a.src;if(f&&f[L])E(f.i,a);else{var p=a.type,g=a.proxy;f.removeEventListener?f.removeEventListener(p,g,a.capture):f.detachEvent?f.detachEvent(z(p),g):f.addListener&&f.removeListener&&f.removeListener(g),(p=X(f))?(E(p,a),p.h==0&&(p.src=null,f[k]=null)):rt(a)}}}function z(a){return a in F?F[a]:F[a]="on"+a}function ct(a,f){if(a.da)a=!0;else{f=new fn(f,this);var p=a.listener,g=a.ha||a.src;a.fa&&K(a),a=p.call(g,f)}return a}function X(a){return a=a[k],a instanceof Pt?a:null}var at="__closure_events_fn_"+(1e9*Math.random()>>>0);function gt(a){return typeof a=="function"?a:(a[at]||(a[at]=function(f){return a.handleEvent(f)}),a[at])}function ht(){zt.call(this),this.i=new Pt(this),this.M=this,this.F=null}b(ht,zt),ht.prototype[L]=!0,ht.prototype.removeEventListener=function(a,f,p,g){G(this,a,f,p,g)};function Et(a,f){var p,g=a.F;if(g)for(p=[];g;g=g.F)p.push(g);if(a=a.M,g=f.type||f,typeof f=="string")f=new Kt(f,a);else if(f instanceof Kt)f.target=f.target||a;else{var V=f;f=new Kt(g,a),T(f,V)}if(V=!0,p)for(var N=p.length-1;0<=N;N--){var W=f.g=p[N];V=St(W,g,!0,f)&&V}if(W=f.g=a,V=St(W,g,!0,f)&&V,V=St(W,g,!1,f)&&V,p)for(N=0;N<p.length;N++)W=f.g=p[N],V=St(W,g,!1,f)&&V}ht.prototype.N=function(){if(ht.aa.N.call(this),this.i){var a=this.i,f;for(f in a.g){for(var p=a.g[f],g=0;g<p.length;g++)rt(p[g]);delete a.g[f],a.h--}}this.F=null},ht.prototype.K=function(a,f,p,g){return this.i.add(String(a),f,!1,p,g)},ht.prototype.L=function(a,f,p,g){return this.i.add(String(a),f,!0,p,g)};function St(a,f,p,g){if(f=a.i.g[String(f)],!f)return!0;f=f.concat();for(var V=!0,N=0;N<f.length;++N){var W=f[N];if(W&&!W.da&&W.capture==p){var Ot=W.listener,fe=W.ha||W.src;W.fa&&E(a.i,W),V=Ot.call(fe,g)!==!1&&V}}return V&&!g.defaultPrevented}function ce(a,f,p){if(typeof a=="function")p&&(a=m(a,p));else if(a&&typeof a.handleEvent=="function")a=m(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:l.setTimeout(a,f||0)}function ue(a){a.g=ce(()=>{a.g=null,a.i&&(a.i=!1,ue(a))},a.l);const f=a.h;a.h=null,a.m.apply(null,f)}class Je extends zt{constructor(f,p){super(),this.m=f,this.l=p,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:ue(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ye(a){zt.call(this),this.h=a,this.g={}}b(ye,zt);var Xn=[];function Ur(a){st(a.g,function(f,p){this.g.hasOwnProperty(p)&&K(f)},a),a.g={}}ye.prototype.N=function(){ye.aa.N.call(this),Ur(this)},ye.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var he=l.JSON.stringify,Xe=l.JSON.parse,co=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function sr(){}sr.prototype.h=null;function ch(a){return a.h||(a.h=a.i())}function uh(){}var Br={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function dl(){Kt.call(this,"d")}b(dl,Kt);function pl(){Kt.call(this,"c")}b(pl,Kt);var Rs={},hh=null;function uo(){return hh=hh||new ht}Rs.La="serverreachability";function fh(a){Kt.call(this,Rs.La,a)}b(fh,Kt);function $r(a){const f=uo();Et(f,new fh(f))}Rs.STAT_EVENT="statevent";function dh(a,f){Kt.call(this,Rs.STAT_EVENT,a),this.stat=f}b(dh,Kt);function ke(a){const f=uo();Et(f,new dh(f,a))}Rs.Ma="timingevent";function ph(a,f){Kt.call(this,Rs.Ma,a),this.size=f}b(ph,Kt);function jr(a,f){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},f)}function qr(){this.g=!0}qr.prototype.xa=function(){this.g=!1};function W_(a,f,p,g,V,N){a.info(function(){if(a.g)if(N)for(var W="",Ot=N.split("&"),fe=0;fe<Ot.length;fe++){var xt=Ot[fe].split("=");if(1<xt.length){var _e=xt[0];xt=xt[1];var ve=_e.split("_");W=2<=ve.length&&ve[1]=="type"?W+(_e+"="+xt+"&"):W+(_e+"=redacted&")}}else W=null;else W=N;return"XMLHTTP REQ ("+g+") [attempt "+V+"]: "+f+`
`+p+`
`+W})}function Q_(a,f,p,g,V,N,W){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+V+"]: "+f+`
`+p+`
`+N+" "+W})}function rr(a,f,p,g){a.info(function(){return"XMLHTTP TEXT ("+f+"): "+X_(a,p)+(g?" "+g:"")})}function J_(a,f){a.info(function(){return"TIMEOUT: "+f})}qr.prototype.info=function(){};function X_(a,f){if(!a.g)return f;if(!f)return null;try{var p=JSON.parse(f);if(p){for(a=0;a<p.length;a++)if(Array.isArray(p[a])){var g=p[a];if(!(2>g.length)){var V=g[1];if(Array.isArray(V)&&!(1>V.length)){var N=V[0];if(N!="noop"&&N!="stop"&&N!="close")for(var W=1;W<V.length;W++)V[W]=""}}}}return he(p)}catch{return f}}var ho={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},mh={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ml;function fo(){}b(fo,sr),fo.prototype.g=function(){return new XMLHttpRequest},fo.prototype.i=function(){return{}},ml=new fo;function Yn(a,f,p,g){this.j=a,this.i=f,this.l=p,this.R=g||1,this.U=new ye(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new gh}function gh(){this.i=null,this.g="",this.h=!1}var yh={},gl={};function yl(a,f,p){a.L=1,a.v=yo(xn(f)),a.m=p,a.P=!0,_h(a,null)}function _h(a,f){a.F=Date.now(),po(a),a.A=xn(a.v);var p=a.A,g=a.R;Array.isArray(g)||(g=[String(g)]),Vh(p.i,"t",g),a.C=0,p=a.j.J,a.h=new gh,a.g=Jh(a.j,p?f:null,!a.m),0<a.O&&(a.M=new Je(m(a.Y,a,a.g),a.O)),f=a.U,p=a.g,g=a.ca;var V="readystatechange";Array.isArray(V)||(V&&(Xn[0]=V.toString()),V=Xn);for(var N=0;N<V.length;N++){var W=j(p,V[N],g||f.handleEvent,!1,f.h||f);if(!W)break;f.g[W.key]=W}f=a.H?v(a.H):{},a.m?(a.u||(a.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,f)):(a.u="GET",a.g.ea(a.A,a.u,null,f)),$r(),W_(a.i,a.u,a.A,a.l,a.R,a.m)}Yn.prototype.ca=function(a){a=a.target;const f=this.M;f&&kn(a)==3?f.j():this.Y(a)},Yn.prototype.Y=function(a){try{if(a==this.g)t:{const ve=kn(this.g);var f=this.g.Ba();const ar=this.g.Z();if(!(3>ve)&&(ve!=3||this.g&&(this.h.h||this.g.oa()||Uh(this.g)))){this.J||ve!=4||f==7||(f==8||0>=ar?$r(3):$r(2)),_l(this);var p=this.g.Z();this.X=p;e:if(vh(this)){var g=Uh(this.g);a="";var V=g.length,N=kn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Cs(this),Hr(this);var W="";break e}this.h.i=new l.TextDecoder}for(f=0;f<V;f++)this.h.h=!0,a+=this.h.i.decode(g[f],{stream:!(N&&f==V-1)});g.length=0,this.h.g+=a,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=p==200,Q_(this.i,this.u,this.A,this.l,this.R,ve,p),this.o){if(this.T&&!this.K){e:{if(this.g){var Ot,fe=this.g;if((Ot=fe.g?fe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(Ot)){var xt=Ot;break e}}xt=null}if(p=xt)rr(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,vl(this,p);else{this.o=!1,this.s=3,ke(12),Cs(this),Hr(this);break t}}if(this.P){p=!0;let sn;for(;!this.J&&this.C<W.length;)if(sn=Y_(this,W),sn==gl){ve==4&&(this.s=4,ke(14),p=!1),rr(this.i,this.l,null,"[Incomplete Response]");break}else if(sn==yh){this.s=4,ke(15),rr(this.i,this.l,W,"[Invalid Chunk]"),p=!1;break}else rr(this.i,this.l,sn,null),vl(this,sn);if(vh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ve!=4||W.length!=0||this.h.h||(this.s=1,ke(16),p=!1),this.o=this.o&&p,!p)rr(this.i,this.l,W,"[Invalid Chunked Response]"),Cs(this),Hr(this);else if(0<W.length&&!this.W){this.W=!0;var _e=this.j;_e.g==this&&_e.ba&&!_e.M&&(_e.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),Il(_e),_e.M=!0,ke(11))}}else rr(this.i,this.l,W,null),vl(this,W);ve==4&&Cs(this),this.o&&!this.J&&(ve==4?Kh(this.j,this):(this.o=!1,po(this)))}else mv(this.g),p==400&&0<W.indexOf("Unknown SID")?(this.s=3,ke(12)):(this.s=0,ke(13)),Cs(this),Hr(this)}}}catch{}finally{}};function vh(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function Y_(a,f){var p=a.C,g=f.indexOf(`
`,p);return g==-1?gl:(p=Number(f.substring(p,g)),isNaN(p)?yh:(g+=1,g+p>f.length?gl:(f=f.slice(g,g+p),a.C=g+p,f)))}Yn.prototype.cancel=function(){this.J=!0,Cs(this)};function po(a){a.S=Date.now()+a.I,wh(a,a.I)}function wh(a,f){if(a.B!=null)throw Error("WatchDog timer not null");a.B=jr(m(a.ba,a),f)}function _l(a){a.B&&(l.clearTimeout(a.B),a.B=null)}Yn.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(J_(this.i,this.A),this.L!=2&&($r(),ke(17)),Cs(this),this.s=2,Hr(this)):wh(this,this.S-a)};function Hr(a){a.j.G==0||a.J||Kh(a.j,a)}function Cs(a){_l(a);var f=a.M;f&&typeof f.ma=="function"&&f.ma(),a.M=null,Ur(a.U),a.g&&(f=a.g,a.g=null,f.abort(),f.ma())}function vl(a,f){try{var p=a.j;if(p.G!=0&&(p.g==a||wl(p.h,a))){if(!a.K&&wl(p.h,a)&&p.G==3){try{var g=p.Da.g.parse(f)}catch{g=null}if(Array.isArray(g)&&g.length==3){var V=g;if(V[0]==0){t:if(!p.u){if(p.g)if(p.g.F+3e3<a.F)To(p),Eo(p);else break t;Al(p),ke(18)}}else p.za=V[1],0<p.za-p.T&&37500>V[2]&&p.F&&p.v==0&&!p.C&&(p.C=jr(m(p.Za,p),6e3));if(1>=Th(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else xs(p,11)}else if((a.K||p.g==a)&&To(p),!O(f))for(V=p.Da.g.parse(f),f=0;f<V.length;f++){let xt=V[f];if(p.T=xt[0],xt=xt[1],p.G==2)if(xt[0]=="c"){p.K=xt[1],p.ia=xt[2];const _e=xt[3];_e!=null&&(p.la=_e,p.j.info("VER="+p.la));const ve=xt[4];ve!=null&&(p.Aa=ve,p.j.info("SVER="+p.Aa));const ar=xt[5];ar!=null&&typeof ar=="number"&&0<ar&&(g=1.5*ar,p.L=g,p.j.info("backChannelRequestTimeoutMs_="+g)),g=p;const sn=a.g;if(sn){const Io=sn.g?sn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Io){var N=g.h;N.g||Io.indexOf("spdy")==-1&&Io.indexOf("quic")==-1&&Io.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&(El(N,N.h),N.h=null))}if(g.D){const Sl=sn.g?sn.g.getResponseHeader("X-HTTP-Session-Id"):null;Sl&&(g.ya=Sl,Ut(g.I,g.D,Sl))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-a.F,p.j.info("Handshake RTT: "+p.R+"ms")),g=p;var W=a;if(g.qa=Qh(g,g.J?g.ia:null,g.W),W.K){Ah(g.h,W);var Ot=W,fe=g.L;fe&&(Ot.I=fe),Ot.B&&(_l(Ot),po(Ot)),g.g=W}else Hh(g);0<p.i.length&&bo(p)}else xt[0]!="stop"&&xt[0]!="close"||xs(p,7);else p.G==3&&(xt[0]=="stop"||xt[0]=="close"?xt[0]=="stop"?xs(p,7):Tl(p):xt[0]!="noop"&&p.l&&p.l.ta(xt),p.v=0)}}$r(4)}catch{}}var Z_=class{constructor(a,f){this.g=a,this.map=f}};function Eh(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function bh(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Th(a){return a.h?1:a.g?a.g.size:0}function wl(a,f){return a.h?a.h==f:a.g?a.g.has(f):!1}function El(a,f){a.g?a.g.add(f):a.h=f}function Ah(a,f){a.h&&a.h==f?a.h=null:a.g&&a.g.has(f)&&a.g.delete(f)}Eh.prototype.cancel=function(){if(this.i=Ih(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Ih(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let f=a.i;for(const p of a.g.values())f=f.concat(p.D);return f}return P(a.i)}function tv(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(c(a)){for(var f=[],p=a.length,g=0;g<p;g++)f.push(a[g]);return f}f=[],p=0;for(g in a)f[p++]=a[g];return f}function ev(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(c(a)||typeof a=="string"){var f=[];a=a.length;for(var p=0;p<a;p++)f.push(p);return f}f=[],p=0;for(const g in a)f[p++]=g;return f}}}function Sh(a,f){if(a.forEach&&typeof a.forEach=="function")a.forEach(f,void 0);else if(c(a)||typeof a=="string")Array.prototype.forEach.call(a,f,void 0);else for(var p=ev(a),g=tv(a),V=g.length,N=0;N<V;N++)f.call(void 0,g[N],p&&p[N],a)}var Rh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function nv(a,f){if(a){a=a.split("&");for(var p=0;p<a.length;p++){var g=a[p].indexOf("="),V=null;if(0<=g){var N=a[p].substring(0,g);V=a[p].substring(g+1)}else N=a[p];f(N,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function Ps(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Ps){this.h=a.h,mo(this,a.j),this.o=a.o,this.g=a.g,go(this,a.s),this.l=a.l;var f=a.i,p=new Gr;p.i=f.i,f.g&&(p.g=new Map(f.g),p.h=f.h),Ch(this,p),this.m=a.m}else a&&(f=String(a).match(Rh))?(this.h=!1,mo(this,f[1]||"",!0),this.o=zr(f[2]||""),this.g=zr(f[3]||"",!0),go(this,f[4]),this.l=zr(f[5]||"",!0),Ch(this,f[6]||"",!0),this.m=zr(f[7]||"")):(this.h=!1,this.i=new Gr(null,this.h))}Ps.prototype.toString=function(){var a=[],f=this.j;f&&a.push(Kr(f,Ph,!0),":");var p=this.g;return(p||f=="file")&&(a.push("//"),(f=this.o)&&a.push(Kr(f,Ph,!0),"@"),a.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&a.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&a.push("/"),a.push(Kr(p,p.charAt(0)=="/"?iv:rv,!0))),(p=this.i.toString())&&a.push("?",p),(p=this.m)&&a.push("#",Kr(p,av)),a.join("")};function xn(a){return new Ps(a)}function mo(a,f,p){a.j=p?zr(f,!0):f,a.j&&(a.j=a.j.replace(/:$/,""))}function go(a,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);a.s=f}else a.s=null}function Ch(a,f,p){f instanceof Gr?(a.i=f,lv(a.i,a.h)):(p||(f=Kr(f,ov)),a.i=new Gr(f,a.h))}function Ut(a,f,p){a.i.set(f,p)}function yo(a){return Ut(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function zr(a,f){return a?f?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Kr(a,f,p){return typeof a=="string"?(a=encodeURI(a).replace(f,sv),p&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function sv(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Ph=/[#\/\?@]/g,rv=/[#\?:]/g,iv=/[#\?]/g,ov=/[#\?@]/g,av=/#/g;function Gr(a,f){this.h=this.g=null,this.i=a||null,this.j=!!f}function Zn(a){a.g||(a.g=new Map,a.h=0,a.i&&nv(a.i,function(f,p){a.add(decodeURIComponent(f.replace(/\+/g," ")),p)}))}e=Gr.prototype,e.add=function(a,f){Zn(this),this.i=null,a=ir(this,a);var p=this.g.get(a);return p||this.g.set(a,p=[]),p.push(f),this.h+=1,this};function xh(a,f){Zn(a),f=ir(a,f),a.g.has(f)&&(a.i=null,a.h-=a.g.get(f).length,a.g.delete(f))}function kh(a,f){return Zn(a),f=ir(a,f),a.g.has(f)}e.forEach=function(a,f){Zn(this),this.g.forEach(function(p,g){p.forEach(function(V){a.call(f,V,g,this)},this)},this)},e.na=function(){Zn(this);const a=Array.from(this.g.values()),f=Array.from(this.g.keys()),p=[];for(let g=0;g<f.length;g++){const V=a[g];for(let N=0;N<V.length;N++)p.push(f[g])}return p},e.V=function(a){Zn(this);let f=[];if(typeof a=="string")kh(this,a)&&(f=f.concat(this.g.get(ir(this,a))));else{a=Array.from(this.g.values());for(let p=0;p<a.length;p++)f=f.concat(a[p])}return f},e.set=function(a,f){return Zn(this),this.i=null,a=ir(this,a),kh(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[f]),this.h+=1,this},e.get=function(a,f){return a?(a=this.V(a),0<a.length?String(a[0]):f):f};function Vh(a,f,p){xh(a,f),0<p.length&&(a.i=null,a.g.set(ir(a,f),P(p)),a.h+=p.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],f=Array.from(this.g.keys());for(var p=0;p<f.length;p++){var g=f[p];const N=encodeURIComponent(String(g)),W=this.V(g);for(g=0;g<W.length;g++){var V=N;W[g]!==""&&(V+="="+encodeURIComponent(String(W[g]))),a.push(V)}}return this.i=a.join("&")};function ir(a,f){return f=String(f),a.j&&(f=f.toLowerCase()),f}function lv(a,f){f&&!a.j&&(Zn(a),a.i=null,a.g.forEach(function(p,g){var V=g.toLowerCase();g!=V&&(xh(this,g),Vh(this,V,p))},a)),a.j=f}function cv(a,f){const p=new qr;if(l.Image){const g=new Image;g.onload=y(ts,p,"TestLoadImage: loaded",!0,f,g),g.onerror=y(ts,p,"TestLoadImage: error",!1,f,g),g.onabort=y(ts,p,"TestLoadImage: abort",!1,f,g),g.ontimeout=y(ts,p,"TestLoadImage: timeout",!1,f,g),l.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else f(!1)}function uv(a,f){const p=new qr,g=new AbortController,V=setTimeout(()=>{g.abort(),ts(p,"TestPingServer: timeout",!1,f)},1e4);fetch(a,{signal:g.signal}).then(N=>{clearTimeout(V),N.ok?ts(p,"TestPingServer: ok",!0,f):ts(p,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(V),ts(p,"TestPingServer: error",!1,f)})}function ts(a,f,p,g,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),g(p)}catch{}}function hv(){this.g=new co}function fv(a,f,p){const g=p||"";try{Sh(a,function(V,N){let W=V;u(V)&&(W=he(V)),f.push(g+N+"="+encodeURIComponent(W))})}catch(V){throw f.push(g+"type="+encodeURIComponent("_badmap")),V}}function _o(a){this.l=a.Ub||null,this.j=a.eb||!1}b(_o,sr),_o.prototype.g=function(){return new vo(this.l,this.j)},_o.prototype.i=function(a){return function(){return a}}({});function vo(a,f){ht.call(this),this.D=a,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(vo,ht),e=vo.prototype,e.open=function(a,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=f,this.readyState=1,Qr(this)},e.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(f.body=a),(this.D||l).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Wr(this)),this.readyState=0},e.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Qr(this)),this.g&&(this.readyState=3,Qr(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Dh(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Dh(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}e.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var f=a.value?a.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!a.done}))&&(this.response=this.responseText+=f)}a.done?Wr(this):Qr(this),this.readyState==3&&Dh(this)}},e.Ra=function(a){this.g&&(this.response=this.responseText=a,Wr(this))},e.Qa=function(a){this.g&&(this.response=a,Wr(this))},e.ga=function(){this.g&&Wr(this)};function Wr(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Qr(a)}e.setRequestHeader=function(a,f){this.u.append(a,f)},e.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],f=this.h.entries();for(var p=f.next();!p.done;)p=p.value,a.push(p[0]+": "+p[1]),p=f.next();return a.join(`\r
`)};function Qr(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(vo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Nh(a){let f="";return st(a,function(p,g){f+=g,f+=":",f+=p,f+=`\r
`}),f}function bl(a,f,p){t:{for(g in p){var g=!1;break t}g=!0}g||(p=Nh(p),typeof a=="string"?p!=null&&encodeURIComponent(String(p)):Ut(a,f,p))}function Qt(a){ht.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Qt,ht);var dv=/^https?$/i,pv=["POST","PUT"];e=Qt.prototype,e.Ha=function(a){this.J=a},e.ea=function(a,f,p,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);f=f?f.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ml.g(),this.v=this.o?ch(this.o):ch(ml),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(f,String(a),!0),this.B=!1}catch(N){Oh(this,N);return}if(a=p||"",p=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var V in g)p.set(V,g[V]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(const N of g.keys())p.set(N,g.get(N));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(p.keys()).find(N=>N.toLowerCase()=="content-type"),V=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(pv,f,void 0))||g||V||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[N,W]of p)this.g.setRequestHeader(N,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Fh(this),this.u=!0,this.g.send(a),this.u=!1}catch(N){Oh(this,N)}};function Oh(a,f){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=f,a.m=5,Mh(a),wo(a)}function Mh(a){a.A||(a.A=!0,Et(a,"complete"),Et(a,"error"))}e.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,Et(this,"complete"),Et(this,"abort"),wo(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wo(this,!0)),Qt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Lh(this):this.bb())},e.bb=function(){Lh(this)};function Lh(a){if(a.h&&typeof o<"u"&&(!a.v[1]||kn(a)!=4||a.Z()!=2)){if(a.u&&kn(a)==4)ce(a.Ea,0,a);else if(Et(a,"readystatechange"),kn(a)==4){a.h=!1;try{const W=a.Z();t:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break t;default:f=!1}var p;if(!(p=f)){var g;if(g=W===0){var V=String(a.D).match(Rh)[1]||null;!V&&l.self&&l.self.location&&(V=l.self.location.protocol.slice(0,-1)),g=!dv.test(V?V.toLowerCase():"")}p=g}if(p)Et(a,"complete"),Et(a,"success");else{a.m=6;try{var N=2<kn(a)?a.g.statusText:""}catch{N=""}a.l=N+" ["+a.Z()+"]",Mh(a)}}finally{wo(a)}}}}function wo(a,f){if(a.g){Fh(a);const p=a.g,g=a.v[0]?()=>{}:null;a.g=null,a.v=null,f||Et(a,"ready");try{p.onreadystatechange=g}catch{}}}function Fh(a){a.I&&(l.clearTimeout(a.I),a.I=null)}e.isActive=function(){return!!this.g};function kn(a){return a.g?a.g.readyState:0}e.Z=function(){try{return 2<kn(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(a){if(this.g){var f=this.g.responseText;return a&&f.indexOf(a)==0&&(f=f.substring(a.length)),Xe(f)}};function Uh(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function mv(a){const f={};a=(a.g&&2<=kn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(O(a[g]))continue;var p=C(a[g]);const V=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const N=f[V]||[];f[V]=N,N.push(p)}S(f,function(g){return g.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Jr(a,f,p){return p&&p.internalChannelParams&&p.internalChannelParams[a]||f}function Bh(a){this.Aa=0,this.i=[],this.j=new qr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Jr("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Jr("baseRetryDelayMs",5e3,a),this.cb=Jr("retryDelaySeedMs",1e4,a),this.Wa=Jr("forwardChannelMaxRetries",2,a),this.wa=Jr("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Eh(a&&a.concurrentRequestLimit),this.Da=new hv,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=Bh.prototype,e.la=8,e.G=1,e.connect=function(a,f,p,g){ke(0),this.W=a,this.H=f||{},p&&g!==void 0&&(this.H.OSID=p,this.H.OAID=g),this.F=this.X,this.I=Qh(this,null,this.W),bo(this)};function Tl(a){if($h(a),a.G==3){var f=a.U++,p=xn(a.I);if(Ut(p,"SID",a.K),Ut(p,"RID",f),Ut(p,"TYPE","terminate"),Xr(a,p),f=new Yn(a,a.j,f),f.L=2,f.v=yo(xn(p)),p=!1,l.navigator&&l.navigator.sendBeacon)try{p=l.navigator.sendBeacon(f.v.toString(),"")}catch{}!p&&l.Image&&(new Image().src=f.v,p=!0),p||(f.g=Jh(f.j,null),f.g.ea(f.v)),f.F=Date.now(),po(f)}Wh(a)}function Eo(a){a.g&&(Il(a),a.g.cancel(),a.g=null)}function $h(a){Eo(a),a.u&&(l.clearTimeout(a.u),a.u=null),To(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function bo(a){if(!bh(a.h)&&!a.s){a.s=!0;var f=a.Ga;ot||qt(),pt||(ot(),pt=!0),ee.add(f,a),a.B=0}}function gv(a,f){return Th(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=f.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=jr(m(a.Ga,a,f),Gh(a,a.B)),a.B++,!0)}e.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const V=new Yn(this,this.j,a);let N=this.o;if(this.S&&(N?(N=v(N),T(N,this.S)):N=this.S),this.m!==null||this.O||(V.H=N,N=null),this.P)t:{for(var f=0,p=0;p<this.i.length;p++){e:{var g=this.i[p];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break e}g=void 0}if(g===void 0)break;if(f+=g,4096<f){f=p;break t}if(f===4096||p===this.i.length-1){f=p+1;break t}}f=1e3}else f=1e3;f=qh(this,V,f),p=xn(this.I),Ut(p,"RID",a),Ut(p,"CVER",22),this.D&&Ut(p,"X-HTTP-Session-Id",this.D),Xr(this,p),N&&(this.O?f="headers="+encodeURIComponent(String(Nh(N)))+"&"+f:this.m&&bl(p,this.m,N)),El(this.h,V),this.Ua&&Ut(p,"TYPE","init"),this.P?(Ut(p,"$req",f),Ut(p,"SID","null"),V.T=!0,yl(V,p,null)):yl(V,p,f),this.G=2}}else this.G==3&&(a?jh(this,a):this.i.length==0||bh(this.h)||jh(this))};function jh(a,f){var p;f?p=f.l:p=a.U++;const g=xn(a.I);Ut(g,"SID",a.K),Ut(g,"RID",p),Ut(g,"AID",a.T),Xr(a,g),a.m&&a.o&&bl(g,a.m,a.o),p=new Yn(a,a.j,p,a.B+1),a.m===null&&(p.H=a.o),f&&(a.i=f.D.concat(a.i)),f=qh(a,p,1e3),p.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),El(a.h,p),yl(p,g,f)}function Xr(a,f){a.H&&st(a.H,function(p,g){Ut(f,g,p)}),a.l&&Sh({},function(p,g){Ut(f,g,p)})}function qh(a,f,p){p=Math.min(a.i.length,p);var g=a.l?m(a.l.Na,a.l,a):null;t:{var V=a.i;let N=-1;for(;;){const W=["count="+p];N==-1?0<p?(N=V[0].g,W.push("ofs="+N)):N=0:W.push("ofs="+N);let Ot=!0;for(let fe=0;fe<p;fe++){let xt=V[fe].g;const _e=V[fe].map;if(xt-=N,0>xt)N=Math.max(0,V[fe].g-100),Ot=!1;else try{fv(_e,W,"req"+xt+"_")}catch{g&&g(_e)}}if(Ot){g=W.join("&");break t}}}return a=a.i.splice(0,p),f.D=a,g}function Hh(a){if(!a.g&&!a.u){a.Y=1;var f=a.Fa;ot||qt(),pt||(ot(),pt=!0),ee.add(f,a),a.v=0}}function Al(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=jr(m(a.Fa,a),Gh(a,a.v)),a.v++,!0)}e.Fa=function(){if(this.u=null,zh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=jr(m(this.ab,this),a)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ke(10),Eo(this),zh(this))};function Il(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function zh(a){a.g=new Yn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var f=xn(a.qa);Ut(f,"RID","rpc"),Ut(f,"SID",a.K),Ut(f,"AID",a.T),Ut(f,"CI",a.F?"0":"1"),!a.F&&a.ja&&Ut(f,"TO",a.ja),Ut(f,"TYPE","xmlhttp"),Xr(a,f),a.m&&a.o&&bl(f,a.m,a.o),a.L&&(a.g.I=a.L);var p=a.g;a=a.ia,p.L=1,p.v=yo(xn(f)),p.m=null,p.P=!0,_h(p,a)}e.Za=function(){this.C!=null&&(this.C=null,Eo(this),Al(this),ke(19))};function To(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function Kh(a,f){var p=null;if(a.g==f){To(a),Il(a),a.g=null;var g=2}else if(wl(a.h,f))p=f.D,Ah(a.h,f),g=1;else return;if(a.G!=0){if(f.o)if(g==1){p=f.m?f.m.length:0,f=Date.now()-f.F;var V=a.B;g=uo(),Et(g,new ph(g,p)),bo(a)}else Hh(a);else if(V=f.s,V==3||V==0&&0<f.X||!(g==1&&gv(a,f)||g==2&&Al(a)))switch(p&&0<p.length&&(f=a.h,f.i=f.i.concat(p)),V){case 1:xs(a,5);break;case 4:xs(a,10);break;case 3:xs(a,6);break;default:xs(a,2)}}}function Gh(a,f){let p=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(p*=2),p*f}function xs(a,f){if(a.j.info("Error code "+f),f==2){var p=m(a.fb,a),g=a.Xa;const V=!g;g=new Ps(g||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||mo(g,"https"),yo(g),V?cv(g.toString(),p):uv(g.toString(),p)}else ke(2);a.G=0,a.l&&a.l.sa(f),Wh(a),$h(a)}e.fb=function(a){a?(this.j.info("Successfully pinged google.com"),ke(2)):(this.j.info("Failed to ping google.com"),ke(1))};function Wh(a){if(a.G=0,a.ka=[],a.l){const f=Ih(a.h);(f.length!=0||a.i.length!=0)&&(x(a.ka,f),x(a.ka,a.i),a.h.i.length=0,P(a.i),a.i.length=0),a.l.ra()}}function Qh(a,f,p){var g=p instanceof Ps?xn(p):new Ps(p);if(g.g!="")f&&(g.g=f+"."+g.g),go(g,g.s);else{var V=l.location;g=V.protocol,f=f?f+"."+V.hostname:V.hostname,V=+V.port;var N=new Ps(null);g&&mo(N,g),f&&(N.g=f),V&&go(N,V),p&&(N.l=p),g=N}return p=a.D,f=a.ya,p&&f&&Ut(g,p,f),Ut(g,"VER",a.la),Xr(a,g),g}function Jh(a,f,p){if(f&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=a.Ca&&!a.pa?new Qt(new _o({eb:p})):new Qt(a.pa),f.Ha(a.J),f}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Xh(){}e=Xh.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Ao(){}Ao.prototype.g=function(a,f){return new He(a,f)};function He(a,f){ht.call(this),this.g=new Bh(f),this.l=a,this.h=f&&f.messageUrlParams||null,a=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(a?a["X-WebChannel-Content-Type"]=f.messageContentType:a={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(a?a["X-WebChannel-Client-Profile"]=f.va:a={"X-WebChannel-Client-Profile":f.va}),this.g.S=a,(a=f&&f.Sb)&&!O(a)&&(this.g.m=a),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!O(f)&&(this.g.D=f,a=this.h,a!==null&&f in a&&(a=this.h,f in a&&delete a[f])),this.j=new or(this)}b(He,ht),He.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},He.prototype.close=function(){Tl(this.g)},He.prototype.o=function(a){var f=this.g;if(typeof a=="string"){var p={};p.__data__=a,a=p}else this.u&&(p={},p.__data__=he(a),a=p);f.i.push(new Z_(f.Ya++,a)),f.G==3&&bo(f)},He.prototype.N=function(){this.g.l=null,delete this.j,Tl(this.g),delete this.g,He.aa.N.call(this)};function Yh(a){dl.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var f=a.__sm__;if(f){t:{for(const p in f){a=p;break t}a=void 0}(this.i=a)&&(a=this.i,f=f!==null&&a in f?f[a]:void 0),this.data=f}else this.data=a}b(Yh,dl);function Zh(){pl.call(this),this.status=1}b(Zh,pl);function or(a){this.g=a}b(or,Xh),or.prototype.ua=function(){Et(this.g,"a")},or.prototype.ta=function(a){Et(this.g,new Yh(a))},or.prototype.sa=function(a){Et(this.g,new Zh)},or.prototype.ra=function(){Et(this.g,"b")},Ao.prototype.createWebChannel=Ao.prototype.g,He.prototype.send=He.prototype.o,He.prototype.open=He.prototype.m,He.prototype.close=He.prototype.close,ey=function(){return new Ao},ty=function(){return uo()},Zg=Rs,kc={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ho.NO_ERROR=0,ho.TIMEOUT=8,ho.HTTP_ERROR=6,Ho=ho,mh.COMPLETE="complete",Yg=mh,uh.EventType=Br,Br.OPEN="a",Br.CLOSE="b",Br.ERROR="c",Br.MESSAGE="d",ht.prototype.listen=ht.prototype.K,ri=uh,Qt.prototype.listenOnce=Qt.prototype.L,Qt.prototype.getLastError=Qt.prototype.Ka,Qt.prototype.getLastErrorCode=Qt.prototype.Ba,Qt.prototype.getStatus=Qt.prototype.Z,Qt.prototype.getResponseJson=Qt.prototype.Oa,Qt.prototype.getResponseText=Qt.prototype.oa,Qt.prototype.send=Qt.prototype.ea,Qt.prototype.setWithCredentials=Qt.prototype.Ha,Xg=Qt}).apply(typeof ko<"u"?ko:typeof self<"u"?self:typeof window<"u"?window:{});const Dd="@firebase/firestore",Nd="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}be.UNAUTHENTICATED=new be(null),be.GOOGLE_CREDENTIALS=new be("google-credentials-uid"),be.FIRST_PARTY=new be("first-party-uid"),be.MOCK_USER=new be("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Or="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js=new Tu("@firebase/firestore");function hr(){return Js.logLevel}function et(e,...t){if(Js.logLevel<=Ct.DEBUG){const n=t.map(Iu);Js.debug(`Firestore (${Or}): ${e}`,...n)}}function Kn(e,...t){if(Js.logLevel<=Ct.ERROR){const n=t.map(Iu);Js.error(`Firestore (${Or}): ${e}`,...n)}}function Sr(e,...t){if(Js.logLevel<=Ct.WARN){const n=t.map(Iu);Js.warn(`Firestore (${Or}): ${e}`,...n)}}function Iu(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(e,t,n){let s="Unexpected state";typeof t=="string"?s=t:n=t,ny(e,s,n)}function ny(e,t,n){let s=`FIRESTORE (${Or}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Kn(s),new Error(s)}function Nt(e,t,n,s){let r="Unexpected state";typeof n=="string"?r=n:s=n,e||ny(t,r,s)}function wt(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class it extends As{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class NA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(be.UNAUTHENTICATED))}shutdown(){}}class OA{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class MA{constructor(t){this.t=t,this.currentUser=be.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Nt(this.o===void 0,42304);let s=this.i;const r=c=>this.i!==s?(s=this.i,n(c)):Promise.resolve();let i=new ds;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ds,t.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const c=i;t.enqueueRetryable(async()=>{await c.promise,await r(this.currentUser)})},l=c=>{et("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(et("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ds)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==t?(et("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Nt(typeof s.accessToken=="string",31837,{l:s}),new sy(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Nt(t===null||typeof t=="string",2055,{h:t}),new be(t)}}class LA{constructor(t,n,s){this.P=t,this.T=n,this.I=s,this.type="FirstParty",this.user=be.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class FA{constructor(t,n,s){this.P=t,this.T=n,this.I=s}getToken(){return Promise.resolve(new LA(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(be.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Od{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class UA{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,wA(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){Nt(this.o===void 0,3512);const s=i=>{i.error!=null&&et("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,et("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{t.enqueueRetryable(()=>s(i))};const r=i=>{et("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):et("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Od(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(Nt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Od(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BA(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let s=0;s<e;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=BA(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=t.charAt(r[i]%62))}return s}}function At(e,t){return e<t?-1:e>t?1:0}function Vc(e,t){const n=Math.min(e.length,t.length);for(let s=0;s<n;s++){const r=e.charAt(s),i=t.charAt(s);if(r!==i)return Ql(r)===Ql(i)?At(r,i):Ql(r)?1:-1}return At(e.length,t.length)}const $A=55296,jA=57343;function Ql(e){const t=e.charCodeAt(0);return t>=$A&&t<=jA}function Rr(e,t,n){return e.length===t.length&&e.every((s,r)=>n(s,t[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Md="__name__";class yn{constructor(t,n,s){n===void 0?n=0:n>t.length&&mt(637,{offset:n,range:t.length}),s===void 0?s=t.length-n:s>t.length-n&&mt(1746,{length:s,range:t.length-n}),this.segments=t,this.offset=n,this.len=s}get length(){return this.len}isEqual(t){return yn.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof yn?t.forEach(s=>{n.push(s)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,s=this.limit();n<s;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const s=Math.min(t.length,n.length);for(let r=0;r<s;r++){const i=yn.compareSegments(t.get(r),n.get(r));if(i!==0)return i}return At(t.length,n.length)}static compareSegments(t,n){const s=yn.isNumericId(t),r=yn.isNumericId(n);return s&&!r?-1:!s&&r?1:s&&r?yn.extractNumericId(t).compare(yn.extractNumericId(n)):Vc(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return fs.fromString(t.substring(4,t.length-2))}}class Gt extends yn{construct(t,n,s){return new Gt(t,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const s of t){if(s.indexOf("//")>=0)throw new it(q.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(r=>r.length>0))}return new Gt(n)}static emptyPath(){return new Gt([])}}const qA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class me extends yn{construct(t,n,s){return new me(t,n,s)}static isValidIdentifier(t){return qA.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),me.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Md}static keyField(){return new me([Md])}static fromServerFormat(t){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new it(q.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;r<t.length;){const l=t[r];if(l==="\\"){if(r+1===t.length)throw new it(q.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const c=t[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new it(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=c,r+=2}else l==="`"?(o=!o,r++):l!=="."||o?(s+=l,r++):(i(),r++)}if(i(),o)throw new it(q.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new me(n)}static emptyPath(){return new me([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(t){this.path=t}static fromPath(t){return new ut(Gt.fromString(t))}static fromName(t){return new ut(Gt.fromString(t).popFirst(5))}static empty(){return new ut(Gt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Gt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Gt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ut(new Gt(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HA(e,t,n){if(!n)throw new it(q.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function zA(e,t,n,s){if(t===!0&&s===!0)throw new it(q.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Ld(e){if(!ut.isDocumentKey(e))throw new it(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function ry(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function Ru(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(s){return s.constructor?s.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":mt(12329,{type:typeof e})}function Xs(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new it(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ru(e);throw new it(q.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function se(e,t){const n={typeString:e};return t&&(n.value=t),n}function so(e,t){if(!ry(e))throw new it(q.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in t)if(t[s]){const r=t[s].typeString,i="value"in t[s]?{value:t[s].value}:void 0;if(!(s in e)){n=`JSON missing required field: '${s}'`;break}const o=e[s];if(r&&typeof o!==r){n=`JSON field '${s}' must be a ${r}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${s}' field to equal '${i.value}'`;break}}if(n)throw new it(q.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fd=-62135596800,Ud=1e6;class jt{static now(){return jt.fromMillis(Date.now())}static fromDate(t){return jt.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),s=Math.floor((t-1e3*n)*Ud);return new jt(n,s)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new it(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new it(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<Fd)throw new it(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new it(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ud}_compareTo(t){return this.seconds===t.seconds?At(this.nanoseconds,t.nanoseconds):At(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:jt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(so(t,jt._jsonSchema))return new jt(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-Fd;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}jt._jsonSchemaVersion="firestore/timestamp/1.0",jt._jsonSchema={type:se("string",jt._jsonSchemaVersion),seconds:se("number"),nanoseconds:se("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{static fromTimestamp(t){return new yt(t)}static min(){return new yt(new jt(0,0))}static max(){return new yt(new jt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fi=-1;function KA(e,t){const n=e.toTimestamp().seconds,s=e.toTimestamp().nanoseconds+1,r=yt.fromTimestamp(s===1e9?new jt(n+1,0):new jt(n,s));return new ys(r,ut.empty(),t)}function GA(e){return new ys(e.readTime,e.key,Fi)}class ys{constructor(t,n,s){this.readTime=t,this.documentKey=n,this.largestBatchId=s}static min(){return new ys(yt.min(),ut.empty(),Fi)}static max(){return new ys(yt.max(),ut.empty(),Fi)}}function WA(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=ut.comparator(e.documentKey,t.documentKey),n!==0?n:At(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class JA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mr(e){if(e.code!==q.FAILED_PRECONDITION||e.message!==QA)throw e;et("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&mt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new $((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(t,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof $?n:$.resolve(n)}catch(n){return $.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):$.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):$.reject(n)}static resolve(t){return new $((n,s)=>{n(t)})}static reject(t){return new $((n,s)=>{s(t)})}static waitFor(t){return new $((n,s)=>{let r=0,i=0,o=!1;t.forEach(l=>{++r,l.next(()=>{++i,o&&i===r&&n()},c=>s(c))}),o=!0,i===r&&n()})}static or(t){let n=$.resolve(!1);for(const s of t)n=n.next(r=>r?$.resolve(r):s());return n}static forEach(t,n){const s=[];return t.forEach((r,i)=>{s.push(n.call(this,r,i))}),this.waitFor(s)}static mapArray(t,n){return new $((s,r)=>{const i=t.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const u=c;n(t[u]).next(h=>{o[u]=h,++l,l===i&&s(o)},h=>r(h))}})}static doWhile(t,n){return new $((s,r)=>{const i=()=>{t()===!0?n().next(()=>{i()},r):s()};i()})}}function XA(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Lr(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Qa.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cu=-1;function Ja(e){return e==null}function fa(e){return e===0&&1/e==-1/0}function YA(e){return typeof e=="number"&&Number.isInteger(e)&&!fa(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iy="";function ZA(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Bd(t)),t=tI(e.get(n),t);return Bd(t)}function tI(e,t){let n=t;const s=e.length;for(let r=0;r<s;r++){const i=e.charAt(r);switch(i){case"\0":n+="";break;case iy:n+="";break;default:n+=i}}return n}function Bd(e){return e+iy+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $d(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Is(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function oy(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(t,n){this.comparator=t,this.root=n||de.EMPTY}insert(t,n){return new Wt(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,de.BLACK,null,null))}remove(t){return new Wt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,de.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(t,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(t){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(t,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,s)=>(t(n,s),!1))}toString(){const t=[];return this.inorderTraversal((n,s)=>(t.push(`${n}:${s}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Vo(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Vo(this.root,t,this.comparator,!1)}getReverseIterator(){return new Vo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Vo(this.root,t,this.comparator,!0)}}class Vo{constructor(t,n,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=n?s(t.key,n):1,n&&r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(i===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class de{constructor(t,n,s,r,i){this.key=t,this.value=n,this.color=s??de.RED,this.left=r??de.EMPTY,this.right=i??de.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,s,r,i){return new de(t??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,s){let r=this;const i=s(t,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(t,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(t,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return de.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let s,r=this;if(n(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(t,r.key)===0){if(r.right.isEmpty())return de.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,de.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,de.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw mt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw mt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw mt(27949);return t+(this.isRed()?0:1)}}de.EMPTY=null,de.RED=!0,de.BLACK=!1;de.EMPTY=new class{constructor(){this.size=0}get key(){throw mt(57766)}get value(){throw mt(16141)}get color(){throw mt(16727)}get left(){throw mt(29726)}get right(){throw mt(36894)}copy(t,n,s,r,i){return this}insert(t,n,s){return new de(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(t){this.comparator=t,this.data=new Wt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,s)=>(t(n),!1))}forEachInRange(t,n){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,t[1])>=0)return;n(r.key)}}forEachWhile(t,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new jd(this.data.getIterator())}getIteratorFrom(t){return new jd(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(s=>{n=n.add(s)}),n}isEqual(t){if(!(t instanceof oe)||this.size!==t.size)return!1;const n=this.data.getIterator(),s=t.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new oe(this.comparator);return n.data=t,n}}class jd{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(t){this.fields=t,t.sort(me.comparator)}static empty(){return new We([])}unionWith(t){let n=new oe(me.comparator);for(const s of this.fields)n=n.add(s);for(const s of t)n=n.add(s);return new We(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Rr(this.fields,t.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new ay("Invalid base64 string: "+i):i}}(t);return new ge(n)}static fromUint8Array(t){const n=function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i}(t);return new ge(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return At(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}ge.EMPTY_BYTE_STRING=new ge("");const eI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _s(e){if(Nt(!!e,39018),typeof e=="string"){let t=0;const n=eI.exec(e);if(Nt(!!n,46558,{timestamp:e}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}const s=new Date(e);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:Zt(e.seconds),nanos:Zt(e.nanos)}}function Zt(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function vs(e){return typeof e=="string"?ge.fromBase64String(e):ge.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ly="server_timestamp",cy="__type__",uy="__previous_value__",hy="__local_write_time__";function Pu(e){var n,s;return((s=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[cy])==null?void 0:s.stringValue)===ly}function Xa(e){const t=e.mapValue.fields[uy];return Pu(t)?Xa(t):t}function Ui(e){const t=_s(e.mapValue.fields[hy].timestampValue);return new jt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(t,n,s,r,i,o,l,c,u,h){this.databaseId=t,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=h}}const da="(default)";class Bi{constructor(t,n){this.projectId=t,this.database=n||da}static empty(){return new Bi("","")}get isDefaultDatabase(){return this.database===da}isEqual(t){return t instanceof Bi&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fy="__type__",sI="__max__",Do={mapValue:{}},dy="__vector__",pa="value";function ws(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Pu(e)?4:iI(e)?9007199254740991:rI(e)?10:11:mt(28295,{value:e})}function Rn(e,t){if(e===t)return!0;const n=ws(e);if(n!==ws(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Ui(e).isEqual(Ui(t));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=_s(r.timestampValue),l=_s(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(r,i){return vs(r.bytesValue).isEqual(vs(i.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(r,i){return Zt(r.geoPointValue.latitude)===Zt(i.geoPointValue.latitude)&&Zt(r.geoPointValue.longitude)===Zt(i.geoPointValue.longitude)}(e,t);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Zt(r.integerValue)===Zt(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=Zt(r.doubleValue),l=Zt(i.doubleValue);return o===l?fa(o)===fa(l):isNaN(o)&&isNaN(l)}return!1}(e,t);case 9:return Rr(e.arrayValue.values||[],t.arrayValue.values||[],Rn);case 10:case 11:return function(r,i){const o=r.mapValue.fields||{},l=i.mapValue.fields||{};if($d(o)!==$d(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Rn(o[c],l[c])))return!1;return!0}(e,t);default:return mt(52216,{left:e})}}function $i(e,t){return(e.values||[]).find(n=>Rn(n,t))!==void 0}function Cr(e,t){if(e===t)return 0;const n=ws(e),s=ws(t);if(n!==s)return At(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return At(e.booleanValue,t.booleanValue);case 2:return function(i,o){const l=Zt(i.integerValue||i.doubleValue),c=Zt(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(e,t);case 3:return qd(e.timestampValue,t.timestampValue);case 4:return qd(Ui(e),Ui(t));case 5:return Vc(e.stringValue,t.stringValue);case 6:return function(i,o){const l=vs(i),c=vs(o);return l.compareTo(c)}(e.bytesValue,t.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const h=At(l[u],c[u]);if(h!==0)return h}return At(l.length,c.length)}(e.referenceValue,t.referenceValue);case 8:return function(i,o){const l=At(Zt(i.latitude),Zt(o.latitude));return l!==0?l:At(Zt(i.longitude),Zt(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Hd(e.arrayValue,t.arrayValue);case 10:return function(i,o){var m,y,b,P;const l=i.fields||{},c=o.fields||{},u=(m=l[pa])==null?void 0:m.arrayValue,h=(y=c[pa])==null?void 0:y.arrayValue,d=At(((b=u==null?void 0:u.values)==null?void 0:b.length)||0,((P=h==null?void 0:h.values)==null?void 0:P.length)||0);return d!==0?d:Hd(u,h)}(e.mapValue,t.mapValue);case 11:return function(i,o){if(i===Do.mapValue&&o===Do.mapValue)return 0;if(i===Do.mapValue)return 1;if(o===Do.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),u=o.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let d=0;d<c.length&&d<h.length;++d){const m=Vc(c[d],h[d]);if(m!==0)return m;const y=Cr(l[c[d]],u[h[d]]);if(y!==0)return y}return At(c.length,h.length)}(e.mapValue,t.mapValue);default:throw mt(23264,{he:n})}}function qd(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return At(e,t);const n=_s(e),s=_s(t),r=At(n.seconds,s.seconds);return r!==0?r:At(n.nanos,s.nanos)}function Hd(e,t){const n=e.values||[],s=t.values||[];for(let r=0;r<n.length&&r<s.length;++r){const i=Cr(n[r],s[r]);if(i)return i}return At(n.length,s.length)}function Pr(e){return Dc(e)}function Dc(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const s=_s(n);return`time(${s.seconds},${s.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return vs(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return ut.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let s="[",r=!0;for(const i of n.values||[])r?r=!1:s+=",",s+=Dc(i);return s+"]"}(e.arrayValue):"mapValue"in e?function(n){const s=Object.keys(n.fields||{}).sort();let r="{",i=!0;for(const o of s)i?i=!1:r+=",",r+=`${o}:${Dc(n.fields[o])}`;return r+"}"}(e.mapValue):mt(61005,{value:e})}function zo(e){switch(ws(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Xa(e);return t?16+zo(t):16;case 5:return 2*e.stringValue.length;case 6:return vs(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((r,i)=>r+zo(i),0)}(e.arrayValue);case 10:case 11:return function(s){let r=0;return Is(s.fields,(i,o)=>{r+=i.length+zo(o)}),r}(e.mapValue);default:throw mt(13486,{value:e})}}function Nc(e){return!!e&&"integerValue"in e}function xu(e){return!!e&&"arrayValue"in e}function zd(e){return!!e&&"nullValue"in e}function Kd(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ko(e){return!!e&&"mapValue"in e}function rI(e){var n,s;return((s=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[fy])==null?void 0:s.stringValue)===dy}function wi(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return Is(e.mapValue.fields,(n,s)=>t.mapValue.fields[n]=wi(s)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=wi(e.arrayValue.values[n]);return t}return{...e}}function iI(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===sI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(t){this.value=t}static empty(){return new Ue({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let s=0;s<t.length-1;++s)if(n=(n.mapValue.fields||{})[t.get(s)],!Ko(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=wi(n)}setAll(t){let n=me.emptyPath(),s={},r=[];t.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,s,r),s={},r=[],n=l.popLast()}o?s[l.lastSegment()]=wi(o):r.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(t){const n=this.field(t.popLast());Ko(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Rn(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<t.length;++s){let r=n.mapValue.fields[t.get(s)];Ko(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[t.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(t,n,s){Is(n,(r,i)=>t[r]=i);for(const r of s)delete t[r]}clone(){return new Ue(wi(this.value))}}function py(e){const t=[];return Is(e.fields,(n,s)=>{const r=new me([n]);if(Ko(s)){const i=py(s.mapValue).fields;if(i.length===0)t.push(r);else for(const o of i)t.push(r.child(o))}else t.push(r)}),new We(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(t,n,s,r,i,o,l){this.key=t,this.documentType=n,this.version=s,this.readTime=r,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(t){return new Ie(t,0,yt.min(),yt.min(),yt.min(),Ue.empty(),0)}static newFoundDocument(t,n,s,r){return new Ie(t,1,n,yt.min(),s,r,0)}static newNoDocument(t,n){return new Ie(t,2,n,yt.min(),yt.min(),Ue.empty(),0)}static newUnknownDocument(t,n){return new Ie(t,3,n,yt.min(),yt.min(),Ue.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(yt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Ue.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Ue.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=yt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Ie&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Ie(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(t,n){this.position=t,this.inclusive=n}}function Gd(e,t,n){let s=0;for(let r=0;r<e.position.length;r++){const i=t[r],o=e.position[r];if(i.field.isKeyField()?s=ut.comparator(ut.fromName(o.referenceValue),n.key):s=Cr(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function Wd(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Rn(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(t,n="asc"){this.field=t,this.dir=n}}function oI(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{}class re extends my{constructor(t,n,s){super(),this.field=t,this.op=n,this.value=s}static create(t,n,s){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,s):new lI(t,n,s):n==="array-contains"?new hI(t,s):n==="in"?new fI(t,s):n==="not-in"?new dI(t,s):n==="array-contains-any"?new pI(t,s):new re(t,n,s)}static createKeyFieldInFilter(t,n,s){return n==="in"?new cI(t,s):new uI(t,s)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Cr(n,this.value)):n!==null&&ws(this.value)===ws(n)&&this.matchesComparison(Cr(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return mt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Cn extends my{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new Cn(t,n)}matches(t){return gy(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function gy(e){return e.op==="and"}function yy(e){return aI(e)&&gy(e)}function aI(e){for(const t of e.filters)if(t instanceof Cn)return!1;return!0}function Oc(e){if(e instanceof re)return e.field.canonicalString()+e.op.toString()+Pr(e.value);if(yy(e))return e.filters.map(t=>Oc(t)).join(",");{const t=e.filters.map(n=>Oc(n)).join(",");return`${e.op}(${t})`}}function _y(e,t){return e instanceof re?function(s,r){return r instanceof re&&s.op===r.op&&s.field.isEqual(r.field)&&Rn(s.value,r.value)}(e,t):e instanceof Cn?function(s,r){return r instanceof Cn&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce((i,o,l)=>i&&_y(o,r.filters[l]),!0):!1}(e,t):void mt(19439)}function vy(e){return e instanceof re?function(n){return`${n.field.canonicalString()} ${n.op} ${Pr(n.value)}`}(e):e instanceof Cn?function(n){return n.op.toString()+" {"+n.getFilters().map(vy).join(" ,")+"}"}(e):"Filter"}class lI extends re{constructor(t,n,s){super(t,n,s),this.key=ut.fromName(s.referenceValue)}matches(t){const n=ut.comparator(t.key,this.key);return this.matchesComparison(n)}}class cI extends re{constructor(t,n){super(t,"in",n),this.keys=wy("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class uI extends re{constructor(t,n){super(t,"not-in",n),this.keys=wy("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function wy(e,t){var n;return(((n=t.arrayValue)==null?void 0:n.values)||[]).map(s=>ut.fromName(s.referenceValue))}class hI extends re{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return xu(n)&&$i(n.arrayValue,this.value)}}class fI extends re{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&$i(this.value.arrayValue,n)}}class dI extends re{constructor(t,n){super(t,"not-in",n)}matches(t){if($i(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!$i(this.value.arrayValue,n)}}class pI extends re{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!xu(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>$i(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(t,n=null,s=[],r=[],i=null,o=null,l=null){this.path=t,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=l,this.Te=null}}function Qd(e,t=null,n=[],s=[],r=null,i=null,o=null){return new mI(e,t,n,s,r,i,o)}function ku(e){const t=wt(e);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(s=>Oc(s)).join(","),n+="|ob:",n+=t.orderBy.map(s=>function(i){return i.field.canonicalString()+i.dir}(s)).join(","),Ja(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(s=>Pr(s)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(s=>Pr(s)).join(",")),t.Te=n}return t.Te}function Vu(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!oI(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!_y(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Wd(e.startAt,t.startAt)&&Wd(e.endAt,t.endAt)}function Mc(e){return ut.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(t,n=null,s=[],r=[],i=null,o="F",l=null,c=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function gI(e,t,n,s,r,i,o,l){return new Ya(e,t,n,s,r,i,o,l)}function Du(e){return new Ya(e)}function Jd(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function yI(e){return e.collectionGroup!==null}function Ei(e){const t=wt(e);if(t.Ie===null){t.Ie=[];const n=new Set;for(const i of t.explicitOrderBy)t.Ie.push(i),n.add(i.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new oe(me.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(t).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||t.Ie.push(new ga(i,s))}),n.has(me.keyField().canonicalString())||t.Ie.push(new ga(me.keyField(),s))}return t.Ie}function En(e){const t=wt(e);return t.Ee||(t.Ee=_I(t,Ei(e))),t.Ee}function _I(e,t){if(e.limitType==="F")return Qd(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(r=>{const i=r.dir==="desc"?"asc":"desc";return new ga(r.field,i)});const n=e.endAt?new ma(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new ma(e.startAt.position,e.startAt.inclusive):null;return Qd(e.path,e.collectionGroup,t,e.filters,e.limit,n,s)}}function Lc(e,t,n){return new Ya(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Za(e,t){return Vu(En(e),En(t))&&e.limitType===t.limitType}function Ey(e){return`${ku(En(e))}|lt:${e.limitType}`}function fr(e){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(r=>vy(r)).join(", ")}]`),Ja(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(r=>Pr(r)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(r=>Pr(r)).join(",")),`Target(${s})`}(En(e))}; limitType=${e.limitType})`}function tl(e,t){return t.isFoundDocument()&&function(s,r){const i=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):ut.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)}(e,t)&&function(s,r){for(const i of Ei(s))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(e,t)&&function(s,r){for(const i of s.filters)if(!i.matches(r))return!1;return!0}(e,t)&&function(s,r){return!(s.startAt&&!function(o,l,c){const u=Gd(o,l,c);return o.inclusive?u<=0:u<0}(s.startAt,Ei(s),r)||s.endAt&&!function(o,l,c){const u=Gd(o,l,c);return o.inclusive?u>=0:u>0}(s.endAt,Ei(s),r))}(e,t)}function vI(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function by(e){return(t,n)=>{let s=!1;for(const r of Ei(e)){const i=wI(r,t,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function wI(e,t,n){const s=e.field.isKeyField()?ut.comparator(t.key,n.key):function(i,o,l){const c=o.data.field(i),u=l.data.field(i);return c!==null&&u!==null?Cr(c,u):mt(42886)}(e.field,t,n);switch(e.dir){case"asc":return s;case"desc":return-1*s;default:return mt(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,t))return i}}has(t){return this.get(t)!==void 0}set(t,n){const s=this.mapKeyFn(t),r=this.inner[s];if(r===void 0)return this.inner[s]=[[t,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,n]);r.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],t))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Is(this.inner,(n,s)=>{for(const[r,i]of s)t(r,i)})}isEmpty(){return oy(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI=new Wt(ut.comparator);function Gn(){return EI}const Ty=new Wt(ut.comparator);function ii(...e){let t=Ty;for(const n of e)t=t.insert(n.key,n);return t}function Ay(e){let t=Ty;return e.forEach((n,s)=>t=t.insert(n,s.overlayedDocument)),t}function qs(){return bi()}function Iy(){return bi()}function bi(){return new er(e=>e.toString(),(e,t)=>e.isEqual(t))}const bI=new Wt(ut.comparator),TI=new oe(ut.comparator);function It(...e){let t=TI;for(const n of e)t=t.add(n);return t}const AI=new oe(At);function II(){return AI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nu(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fa(t)?"-0":t}}function Sy(e){return{integerValue:""+e}}function Ry(e,t){return YA(t)?Sy(t):Nu(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(){this._=void 0}}function SI(e,t,n){return e instanceof ji?function(r,i){const o={fields:{[cy]:{stringValue:ly},[hy]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&Pu(i)&&(i=Xa(i)),i&&(o.fields[uy]=i),{mapValue:o}}(n,t):e instanceof qi?Py(e,t):e instanceof Hi?xy(e,t):function(r,i){const o=Cy(r,i),l=Xd(o)+Xd(r.Ae);return Nc(o)&&Nc(r.Ae)?Sy(l):Nu(r.serializer,l)}(e,t)}function RI(e,t,n){return e instanceof qi?Py(e,t):e instanceof Hi?xy(e,t):n}function Cy(e,t){return e instanceof zi?function(s){return Nc(s)||function(i){return!!i&&"doubleValue"in i}(s)}(t)?t:{integerValue:0}:null}class ji extends el{}class qi extends el{constructor(t){super(),this.elements=t}}function Py(e,t){const n=ky(t);for(const s of e.elements)n.some(r=>Rn(r,s))||n.push(s);return{arrayValue:{values:n}}}class Hi extends el{constructor(t){super(),this.elements=t}}function xy(e,t){let n=ky(t);for(const s of e.elements)n=n.filter(r=>!Rn(r,s));return{arrayValue:{values:n}}}class zi extends el{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function Xd(e){return Zt(e.integerValue||e.doubleValue)}function ky(e){return xu(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy{constructor(t,n){this.field=t,this.transform=n}}function CI(e,t){return e.field.isEqual(t.field)&&function(s,r){return s instanceof qi&&r instanceof qi||s instanceof Hi&&r instanceof Hi?Rr(s.elements,r.elements,Rn):s instanceof zi&&r instanceof zi?Rn(s.Ae,r.Ae):s instanceof ji&&r instanceof ji}(e.transform,t.transform)}class PI{constructor(t,n){this.version=t,this.transformResults=n}}class bn{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new bn}static exists(t){return new bn(void 0,t)}static updateTime(t){return new bn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Go(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class nl{}function Dy(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Oy(e.key,bn.none()):new ro(e.key,e.data,bn.none());{const n=e.data,s=Ue.empty();let r=new oe(me.comparator);for(let i of t.fields)if(!r.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new Ss(e.key,s,new We(r.toArray()),bn.none())}}function xI(e,t,n){e instanceof ro?function(r,i,o){const l=r.value.clone(),c=Zd(r.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(e,t,n):e instanceof Ss?function(r,i,o){if(!Go(r.precondition,i))return void i.convertToUnknownDocument(o.version);const l=Zd(r.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(Ny(r)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(e,t,n):function(r,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function Ti(e,t,n,s){return e instanceof ro?function(i,o,l,c){if(!Go(i.precondition,o))return l;const u=i.value.clone(),h=tp(i.fieldTransforms,c,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(e,t,n,s):e instanceof Ss?function(i,o,l,c){if(!Go(i.precondition,o))return l;const u=tp(i.fieldTransforms,c,o),h=o.data;return h.setAll(Ny(i)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(d=>d.field))}(e,t,n,s):function(i,o,l){return Go(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(e,t,n)}function kI(e,t){let n=null;for(const s of e.fieldTransforms){const r=t.data.field(s.field),i=Cy(s.transform,r||null);i!=null&&(n===null&&(n=Ue.empty()),n.set(s.field,i))}return n||null}function Yd(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&Rr(s,r,(i,o)=>CI(i,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class ro extends nl{constructor(t,n,s,r=[]){super(),this.key=t,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Ss extends nl{constructor(t,n,s,r,i=[]){super(),this.key=t,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Ny(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=e.data.field(n);t.set(n,s)}}),t}function Zd(e,t,n){const s=new Map;Nt(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let r=0;r<n.length;r++){const i=e[r],o=i.transform,l=t.data.field(i.field);s.set(i.field,RI(o,l,n[r]))}return s}function tp(e,t,n){const s=new Map;for(const r of e){const i=r.transform,o=n.data.field(r.field);s.set(r.field,SI(i,o,t))}return s}class Oy extends nl{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class VI extends nl{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(t,n,s,r){this.batchId=t,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(t,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(t.key)&&xI(i,t,s[r])}}applyToLocalView(t,n){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(n=Ti(s,t,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(n=Ti(s,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const s=Iy();return this.mutations.forEach(r=>{const i=t.get(r.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(r.key)?null:l;const c=Dy(o,l);c!==null&&s.set(r.key,c),o.isValidDocument()||o.convertToNoDocument(yt.min())}),s}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),It())}isEqual(t){return this.batchId===t.batchId&&Rr(this.mutations,t.mutations,(n,s)=>Yd(n,s))&&Rr(this.baseMutations,t.baseMutations,(n,s)=>Yd(n,s))}}class Ou{constructor(t,n,s,r){this.batch=t,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(t,n,s){Nt(t.mutations.length===s.length,58842,{me:t.mutations.length,fe:s.length});let r=function(){return bI}();const i=t.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new Ou(t,n,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ne,Rt;function MI(e){switch(e){case q.OK:return mt(64938);case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0;default:return mt(15467,{code:e})}}function My(e){if(e===void 0)return Kn("GRPC error has no .code"),q.UNKNOWN;switch(e){case ne.OK:return q.OK;case ne.CANCELLED:return q.CANCELLED;case ne.UNKNOWN:return q.UNKNOWN;case ne.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case ne.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case ne.INTERNAL:return q.INTERNAL;case ne.UNAVAILABLE:return q.UNAVAILABLE;case ne.UNAUTHENTICATED:return q.UNAUTHENTICATED;case ne.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case ne.NOT_FOUND:return q.NOT_FOUND;case ne.ALREADY_EXISTS:return q.ALREADY_EXISTS;case ne.PERMISSION_DENIED:return q.PERMISSION_DENIED;case ne.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case ne.ABORTED:return q.ABORTED;case ne.OUT_OF_RANGE:return q.OUT_OF_RANGE;case ne.UNIMPLEMENTED:return q.UNIMPLEMENTED;case ne.DATA_LOSS:return q.DATA_LOSS;default:return mt(39323,{code:e})}}(Rt=ne||(ne={}))[Rt.OK=0]="OK",Rt[Rt.CANCELLED=1]="CANCELLED",Rt[Rt.UNKNOWN=2]="UNKNOWN",Rt[Rt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Rt[Rt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Rt[Rt.NOT_FOUND=5]="NOT_FOUND",Rt[Rt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Rt[Rt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Rt[Rt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Rt[Rt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Rt[Rt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Rt[Rt.ABORTED=10]="ABORTED",Rt[Rt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Rt[Rt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Rt[Rt.INTERNAL=13]="INTERNAL",Rt[Rt.UNAVAILABLE=14]="UNAVAILABLE",Rt[Rt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FI=new fs([4294967295,4294967295],0);function ep(e){const t=LI().encode(e),n=new Jg;return n.update(t),new Uint8Array(n.digest())}function np(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),s=t.getUint32(4,!0),r=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new fs([n,s],0),new fs([r,i],0)]}class Mu{constructor(t,n,s){if(this.bitmap=t,this.padding=n,this.hashCount=s,n<0||n>=8)throw new oi(`Invalid padding: ${n}`);if(s<0)throw new oi(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new oi(`Invalid hash count: ${s}`);if(t.length===0&&n!==0)throw new oi(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=fs.fromNumber(this.ge)}ye(t,n,s){let r=t.add(n.multiply(fs.fromNumber(s)));return r.compare(FI)===1&&(r=new fs([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=ep(t),[s,r]=np(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);if(!this.we(o))return!1}return!0}static create(t,n,s){const r=t%8==0?0:8-t%8,i=new Uint8Array(Math.ceil(t/8)),o=new Mu(i,r,n);return s.forEach(l=>o.insert(l)),o}insert(t){if(this.ge===0)return;const n=ep(t),[s,r]=np(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);this.Se(o)}}Se(t){const n=Math.floor(t/8),s=t%8;this.bitmap[n]|=1<<s}}class oi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(t,n,s,r,i){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,n,s){const r=new Map;return r.set(t,io.createSynthesizedTargetChangeForCurrentChange(t,n,s)),new sl(yt.min(),r,new Wt(At),Gn(),It())}}class io{constructor(t,n,s,r,i){this.resumeToken=t,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,n,s){return new io(s,n,It(),It(),It())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(t,n,s,r){this.be=t,this.removedTargetIds=n,this.key=s,this.De=r}}class Ly{constructor(t,n){this.targetId=t,this.Ce=n}}class Fy{constructor(t,n,s=ge.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=n,this.resumeToken=s,this.cause=r}}class sp{constructor(){this.ve=0,this.Fe=rp(),this.Me=ge.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=It(),n=It(),s=It();return this.Fe.forEach((r,i)=>{switch(i){case 0:t=t.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:mt(38017,{changeType:i})}}),new io(this.Me,this.xe,t,n,s)}qe(){this.Oe=!1,this.Fe=rp()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Nt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class UI{constructor(t){this.Ge=t,this.ze=new Map,this.je=Gn(),this.Je=No(),this.He=No(),this.Ye=new Wt(At)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,n=>{const s=this.nt(n);switch(t.state){case 0:this.rt(n)&&s.Le(t.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(t.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(t.resumeToken));break;default:mt(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach((s,r)=>{this.rt(r)&&n(r)})}st(t){const n=t.targetId,s=t.Ce.count,r=this.ot(n);if(r){const i=r.target;if(Mc(i))if(s===0){const o=new ut(i.path);this.et(n,o,Ie.newNoDocument(o,yt.min()))}else Nt(s===1,20013,{expectedCount:s});else{const o=this._t(n);if(o!==s){const l=this.ut(t),c=l?this.ct(l,t,o):1;if(c!==0){this.it(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=n;let o,l;try{o=vs(s).toUint8Array()}catch(c){if(c instanceof ay)return Sr("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Mu(o,r,i)}catch(c){return Sr(c instanceof oi?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(t,n,s){return n.Ce.count===s-this.Pt(t,n.targetId)?0:2}Pt(t,n){const s=this.Ge.getRemoteKeysForTarget(n);let r=0;return s.forEach(i=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;t.mightContain(l)||(this.et(n,i,null),r++)}),r}Tt(t){const n=new Map;this.ze.forEach((i,o)=>{const l=this.ot(o);if(l){if(i.current&&Mc(l.target)){const c=new ut(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,Ie.newNoDocument(c,t))}i.Be&&(n.set(o,i.ke()),i.qe())}});let s=It();this.He.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(s=s.add(i))}),this.je.forEach((i,o)=>o.setReadTime(t));const r=new sl(t,n,this.Ye,this.je,s);return this.je=Gn(),this.Je=No(),this.He=No(),this.Ye=new Wt(At),r}Xe(t,n){if(!this.rt(t))return;const s=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,s){if(!this.rt(t))return;const r=this.nt(t);this.Et(t,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),s&&(this.je=this.je.insert(n,s))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new sp,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new oe(At),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new oe(At),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||et("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new sp),this.Ge.getRemoteKeysForTarget(t).forEach(n=>{this.et(t,n,null)})}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function No(){return new Wt(ut.comparator)}function rp(){return new Wt(ut.comparator)}const BI={asc:"ASCENDING",desc:"DESCENDING"},$I={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},jI={and:"AND",or:"OR"};class qI{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Fc(e,t){return e.useProto3Json||Ja(t)?t:{value:t}}function ya(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Uy(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function HI(e,t){return ya(e,t.toTimestamp())}function Tn(e){return Nt(!!e,49232),yt.fromTimestamp(function(n){const s=_s(n);return new jt(s.seconds,s.nanos)}(e))}function Lu(e,t){return Uc(e,t).canonicalString()}function Uc(e,t){const n=function(r){return new Gt(["projects",r.projectId,"databases",r.database])}(e).child("documents");return t===void 0?n:n.child(t)}function By(e){const t=Gt.fromString(e);return Nt(zy(t),10190,{key:t.toString()}),t}function Bc(e,t){return Lu(e.databaseId,t.path)}function Jl(e,t){const n=By(t);if(n.get(1)!==e.databaseId.projectId)throw new it(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new it(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ut(jy(n))}function $y(e,t){return Lu(e.databaseId,t)}function zI(e){const t=By(e);return t.length===4?Gt.emptyPath():jy(t)}function $c(e){return new Gt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function jy(e){return Nt(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function ip(e,t,n){return{name:Bc(e,t),fields:n.value.mapValue.fields}}function KI(e,t){let n;if("targetChange"in t){t.targetChange;const s=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:mt(39313,{state:u})}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],i=function(u,h){return u.useProto3Json?(Nt(h===void 0||typeof h=="string",58123),ge.fromBase64String(h||"")):(Nt(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),ge.fromUint8Array(h||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,l=o&&function(u){const h=u.code===void 0?q.UNKNOWN:My(u.code);return new it(h,u.message||"")}(o);n=new Fy(s,r,i,l||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const r=Jl(e,s.document.name),i=Tn(s.document.updateTime),o=s.document.createTime?Tn(s.document.createTime):yt.min(),l=new Ue({mapValue:{fields:s.document.fields}}),c=Ie.newFoundDocument(r,i,o,l),u=s.targetIds||[],h=s.removedTargetIds||[];n=new Wo(u,h,c.key,c)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const r=Jl(e,s.document),i=s.readTime?Tn(s.readTime):yt.min(),o=Ie.newNoDocument(r,i),l=s.removedTargetIds||[];n=new Wo([],l,o.key,o)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const r=Jl(e,s.document),i=s.removedTargetIds||[];n=new Wo([],i,r,null)}else{if(!("filter"in t))return mt(11601,{Rt:t});{t.filter;const s=t.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,o=new OI(r,i),l=s.targetId;n=new Ly(l,o)}}return n}function GI(e,t){let n;if(t instanceof ro)n={update:ip(e,t.key,t.value)};else if(t instanceof Oy)n={delete:Bc(e,t.key)};else if(t instanceof Ss)n={update:ip(e,t.key,t.data),updateMask:nS(t.fieldMask)};else{if(!(t instanceof VI))return mt(16599,{Vt:t.type});n={verify:Bc(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(s=>function(i,o){const l=o.transform;if(l instanceof ji)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof qi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Hi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof zi)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw mt(20930,{transform:o.transform})}(0,s))),t.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:HI(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:mt(27497)}(e,t.precondition)),n}function WI(e,t){return e&&e.length>0?(Nt(t!==void 0,14353),e.map(n=>function(r,i){let o=r.updateTime?Tn(r.updateTime):Tn(i);return o.isEqual(yt.min())&&(o=Tn(i)),new PI(o,r.transformResults||[])}(n,t))):[]}function QI(e,t){return{documents:[$y(e,t.path)]}}function JI(e,t){const n={structuredQuery:{}},s=t.path;let r;t.collectionGroup!==null?(r=s,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=$y(e,r);const i=function(u){if(u.length!==0)return Hy(Cn.create(u,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(h=>function(m){return{field:dr(m.field),direction:ZI(m.dir)}}(h))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Fc(e,t.limit);return l!==null&&(n.structuredQuery.limit=l),t.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(t.endAt)),{ft:n,parent:r}}function XI(e){let t=zI(e.parent);const n=e.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){Nt(s===1,65062);const h=n.from[0];h.allDescendants?r=h.collectionId:t=t.child(h.collectionId)}let i=[];n.where&&(i=function(d){const m=qy(d);return m instanceof Cn&&yy(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(m=>function(b){return new ga(pr(b.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(d){let m;return m=typeof d=="object"?d.value:d,Ja(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(d){const m=!!d.before,y=d.values||[];return new ma(y,m)}(n.startAt));let u=null;return n.endAt&&(u=function(d){const m=!d.before,y=d.values||[];return new ma(y,m)}(n.endAt)),gI(t,r,o,i,l,"F",c,u)}function YI(e,t){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return mt(28987,{purpose:r})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function qy(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=pr(n.unaryFilter.field);return re.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=pr(n.unaryFilter.field);return re.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=pr(n.unaryFilter.field);return re.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=pr(n.unaryFilter.field);return re.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return mt(61313);default:return mt(60726)}}(e):e.fieldFilter!==void 0?function(n){return re.create(pr(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return mt(58110);default:return mt(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Cn.create(n.compositeFilter.filters.map(s=>qy(s)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return mt(1026)}}(n.compositeFilter.op))}(e):mt(30097,{filter:e})}function ZI(e){return BI[e]}function tS(e){return $I[e]}function eS(e){return jI[e]}function dr(e){return{fieldPath:e.canonicalString()}}function pr(e){return me.fromServerFormat(e.fieldPath)}function Hy(e){return e instanceof re?function(n){if(n.op==="=="){if(Kd(n.value))return{unaryFilter:{field:dr(n.field),op:"IS_NAN"}};if(zd(n.value))return{unaryFilter:{field:dr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Kd(n.value))return{unaryFilter:{field:dr(n.field),op:"IS_NOT_NAN"}};if(zd(n.value))return{unaryFilter:{field:dr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:dr(n.field),op:tS(n.op),value:n.value}}}(e):e instanceof Cn?function(n){const s=n.getFilters().map(r=>Hy(r));return s.length===1?s[0]:{compositeFilter:{op:eS(n.op),filters:s}}}(e):mt(54877,{filter:e})}function nS(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function zy(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(t,n,s,r,i=yt.min(),o=yt.min(),l=ge.EMPTY_BYTE_STRING,c=null){this.target=t,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(t){return new os(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new os(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new os(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new os(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(t){this.yt=t}}function rS(e){const t=XI({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?Lc(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(){this.Cn=new oS}addToCollectionParentIndex(t,n){return this.Cn.add(n),$.resolve()}getCollectionParents(t,n){return $.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return $.resolve()}deleteFieldIndex(t,n){return $.resolve()}deleteAllFieldIndexes(t){return $.resolve()}createTargetIndexes(t,n){return $.resolve()}getDocumentsMatchingTarget(t,n){return $.resolve(null)}getIndexType(t,n){return $.resolve(0)}getFieldIndexes(t,n){return $.resolve([])}getNextCollectionGroupToUpdate(t){return $.resolve(null)}getMinOffset(t,n){return $.resolve(ys.min())}getMinOffsetFromCollectionGroup(t,n){return $.resolve(ys.min())}updateCollectionGroup(t,n,s){return $.resolve()}updateIndexEntries(t,n){return $.resolve()}}class oS{constructor(){this.index={}}add(t){const n=t.lastSegment(),s=t.popLast(),r=this.index[n]||new oe(Gt.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(t){const n=t.lastSegment(),s=t.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(t){return(this.index[t]||new oe(Gt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const op={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ky=41943040;class Fe{static withCacheSize(t){return new Fe(t,Fe.DEFAULT_COLLECTION_PERCENTILE,Fe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fe.DEFAULT_COLLECTION_PERCENTILE=10,Fe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fe.DEFAULT=new Fe(Ky,Fe.DEFAULT_COLLECTION_PERCENTILE,Fe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fe.DISABLED=new Fe(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new xr(0)}static cr(){return new xr(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ap="LruGarbageCollector",aS=1048576;function lp([e,t],[n,s]){const r=At(e,n);return r===0?At(t,s):r}class lS{constructor(t){this.Ir=t,this.buffer=new oe(lp),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();lp(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class cS{constructor(t,n,s){this.garbageCollector=t,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){et(ap,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Lr(n)?et(ap,"Ignoring IndexedDB error during garbage collection: ",n):await Mr(n)}await this.Vr(3e5)})}}class uS{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next(s=>Math.floor(n/100*s))}nthSequenceNumber(t,n){if(n===0)return $.resolve(Qa.ce);const s=new lS(n);return this.mr.forEachTarget(t,r=>s.Ar(r.sequenceNumber)).next(()=>this.mr.pr(t,r=>s.Ar(r))).next(()=>s.maxValue)}removeTargets(t,n,s){return this.mr.removeTargets(t,n,s)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(et("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(op)):this.getCacheSize(t).next(s=>s<this.params.cacheSizeCollectionThreshold?(et("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),op):this.yr(t,n))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let s,r,i,o,l,c,u;const h=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(et("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),r=this.params.maximumSequenceNumbersToCollect):r=d,o=Date.now(),this.nthSequenceNumber(t,r))).next(d=>(s=d,l=Date.now(),this.removeTargets(t,s,n))).next(d=>(i=d,c=Date.now(),this.removeOrphanedDocuments(t,s))).next(d=>(u=Date.now(),hr()<=Ct.DEBUG&&et("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${r} in `+(l-o)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${d} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:d})))}}function hS(e,t){return new uS(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(){this.changes=new er(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Ie.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?$.resolve(s):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(t,n,s,r){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(t,n){let s=null;return this.documentOverlayCache.getOverlay(t,n).next(r=>(s=r,this.remoteDocumentCache.getEntry(t,n))).next(r=>(s!==null&&Ti(s.mutation,r,We.empty(),jt.now()),r))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(s=>this.getLocalViewOfDocuments(t,s,It()).next(()=>s))}getLocalViewOfDocuments(t,n,s=It()){const r=qs();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,s).next(i=>{let o=ii();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const s=qs();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,It()))}populateOverlays(t,n,s){const r=[];return s.forEach(i=>{n.has(i)||r.push(i)}),this.documentOverlayCache.getOverlays(t,r).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(t,n,s,r){let i=Gn();const o=bi(),l=function(){return bi()}();return n.forEach((c,u)=>{const h=s.get(u.key);r.has(u.key)&&(h===void 0||h.mutation instanceof Ss)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),Ti(h.mutation,u,h.mutation.getFieldMask(),jt.now())):o.set(u.key,We.empty())}),this.recalculateAndSaveOverlays(t,i).next(c=>(c.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>l.set(u,new dS(h,o.get(u)??null))),l))}recalculateAndSaveOverlays(t,n){const s=bi();let r=new Wt((o,l)=>o-l),i=It();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let h=s.get(c)||We.empty();h=l.applyToLocalView(u,h),s.set(c,h);const d=(r.get(l.batchId)||It()).add(c);r=r.insert(l.batchId,d)})}).next(()=>{const o=[],l=r.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,h=c.value,d=Iy();h.forEach(m=>{if(!i.has(m)){const y=Dy(n.get(m),s.get(m));y!==null&&d.set(m,y),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(t,u,d))}return $.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(s=>this.recalculateAndSaveOverlays(t,s))}getDocumentsMatchingQuery(t,n,s,r){return function(o){return ut.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):yI(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,s,r):this.getDocumentsMatchingCollectionQuery(t,n,s,r)}getNextDocuments(t,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,s,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,s.largestBatchId,r-i.size):$.resolve(qs());let l=Fi,c=i;return o.next(u=>$.forEach(u,(h,d)=>(l<d.largestBatchId&&(l=d.largestBatchId),i.get(h)?$.resolve():this.remoteDocumentCache.getEntry(t,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(t,u,i)).next(()=>this.computeViews(t,c,u,It())).next(h=>({batchId:l,changes:Ay(h)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new ut(n)).next(s=>{let r=ii();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(t,n,s,r){const i=n.collectionGroup;let o=ii();return this.indexManager.getCollectionParents(t,i).next(l=>$.forEach(l,c=>{const u=function(d,m){return new Ya(m,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(t,u,s,r).next(h=>{h.forEach((d,m)=>{o=o.insert(d,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,s.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,s,i,r))).next(o=>{i.forEach((c,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,Ie.newInvalidDocument(h)))});let l=ii();return o.forEach((c,u)=>{const h=i.get(c);h!==void 0&&Ti(h.mutation,u,We.empty(),jt.now()),tl(n,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return $.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Tn(r.createTime)}}(n)),$.resolve()}getNamedQuery(t,n){return $.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,function(r){return{name:r.name,query:rS(r.bundledQuery),readTime:Tn(r.readTime)}}(n)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(){this.overlays=new Wt(ut.comparator),this.qr=new Map}getOverlay(t,n){return $.resolve(this.overlays.get(n))}getOverlays(t,n){const s=qs();return $.forEach(n,r=>this.getOverlay(t,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(t,n,s){return s.forEach((r,i)=>{this.St(t,n,i)}),$.resolve()}removeOverlaysForBatchId(t,n,s){const r=this.qr.get(s);return r!==void 0&&(r.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(s)),$.resolve()}getOverlaysForCollection(t,n,s){const r=qs(),i=n.length+1,o=new ut(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>s&&r.set(c.getKey(),c)}return $.resolve(r)}getOverlaysForCollectionGroup(t,n,s,r){let i=new Wt((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>s){let h=i.get(u.largestBatchId);h===null&&(h=qs(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const l=qs(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>l.set(u,h)),!(l.size()>=r)););return $.resolve(l)}St(t,n,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.qr.get(r.largestBatchId).delete(s.key);this.qr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new NI(n,s));let i=this.qr.get(n);i===void 0&&(i=It(),this.qr.set(n,i)),this.qr.set(n,i.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(){this.sessionToken=ge.EMPTY_BYTE_STRING}getSessionToken(t){return $.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(){this.Qr=new oe(ae.$r),this.Ur=new oe(ae.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const s=new ae(t,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(t,n){t.forEach(s=>this.addReference(s,n))}removeReference(t,n){this.Gr(new ae(t,n))}zr(t,n){t.forEach(s=>this.removeReference(s,n))}jr(t){const n=new ut(new Gt([])),s=new ae(n,t),r=new ae(n,t+1),i=[];return this.Ur.forEachInRange([s,r],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new ut(new Gt([])),s=new ae(n,t),r=new ae(n,t+1);let i=It();return this.Ur.forEachInRange([s,r],o=>{i=i.add(o.key)}),i}containsKey(t){const n=new ae(t,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&t.isEqual(s.key)}}class ae{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return ut.comparator(t.key,n.key)||At(t.Yr,n.Yr)}static Kr(t,n){return At(t.Yr,n.Yr)||ut.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new oe(ae.$r)}checkEmpty(t){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,s,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new DI(i,n,s,r);this.mutationQueue.push(o);for(const l of r)this.Zr=this.Zr.add(new ae(l.key,i)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return $.resolve(o)}lookupMutationBatch(t,n){return $.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const s=n+1,r=this.ei(s),i=r<0?0:r;return $.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?Cu:this.tr-1)}getAllMutationBatches(t){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const s=new ae(n,0),r=new ae(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([s,r],o=>{const l=this.Xr(o.Yr);i.push(l)}),$.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,n){let s=new oe(At);return n.forEach(r=>{const i=new ae(r,0),o=new ae(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],l=>{s=s.add(l.Yr)})}),$.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(t,n){const s=n.path,r=s.length+1;let i=s;ut.isDocumentKey(i)||(i=i.child(""));const o=new ae(new ut(i),0);let l=new oe(At);return this.Zr.forEachWhile(c=>{const u=c.key.path;return!!s.isPrefixOf(u)&&(u.length===r&&(l=l.add(c.Yr)),!0)},o),$.resolve(this.ti(l))}ti(t){const n=[];return t.forEach(s=>{const r=this.Xr(s);r!==null&&n.push(r)}),n}removeMutationBatch(t,n){Nt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return $.forEach(n.mutations,r=>{const i=new ae(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.Zr=s})}ir(t){}containsKey(t,n){const s=new ae(n,0),r=this.Zr.firstAfterOrEqual(s);return $.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,$.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(t){this.ri=t,this.docs=function(){return new Wt(ut.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,o=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const s=this.docs.get(n);return $.resolve(s?s.document.mutableCopy():Ie.newInvalidDocument(n))}getEntries(t,n){let s=Gn();return n.forEach(r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():Ie.newInvalidDocument(r))}),$.resolve(s)}getDocumentsMatchingQuery(t,n,s,r){let i=Gn();const o=n.path,l=new ut(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:h}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||WA(GA(h),s)<=0||(r.has(h.key)||tl(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return $.resolve(i)}getAllFromCollectionGroup(t,n,s,r){mt(9500)}ii(t,n){return $.forEach(this.docs,s=>n(s))}newChangeBuffer(t){return new wS(this)}getSize(t){return $.resolve(this.size)}}class wS extends fS{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(t,r)):this.Nr.removeEntry(s)}),$.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(t){this.persistence=t,this.si=new er(n=>ku(n),Vu),this.lastRemoteSnapshotVersion=yt.min(),this.highestTargetId=0,this.oi=0,this._i=new Fu,this.targetCount=0,this.ai=xr.ur()}forEachTarget(t,n){return this.si.forEach((s,r)=>n(r)),$.resolve()}getLastRemoteSnapshotVersion(t){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return $.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(t,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),$.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new xr(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,$.resolve()}updateTargetData(t,n){return this.Pr(n),$.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,$.resolve()}removeTargets(t,n,s){let r=0;const i=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=n&&s.get(l.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(t,l.targetId)),r++)}),$.waitFor(i).next(()=>r)}getTargetCount(t){return $.resolve(this.targetCount)}getTargetData(t,n){const s=this.si.get(n)||null;return $.resolve(s)}addMatchingKeys(t,n,s){return this._i.Wr(n,s),$.resolve()}removeMatchingKeys(t,n,s){this._i.zr(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach(o=>{i.push(r.markPotentiallyOrphaned(t,o))}),$.waitFor(i)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),$.resolve()}getMatchingKeysForTargetId(t,n){const s=this._i.Hr(n);return $.resolve(s)}containsKey(t,n){return $.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(t,n){this.ui={},this.overlays={},this.ci=new Qa(0),this.li=!1,this.li=!0,this.hi=new yS,this.referenceDelegate=t(this),this.Pi=new ES(this),this.indexManager=new iS,this.remoteDocumentCache=function(r){return new vS(r)}(s=>this.referenceDelegate.Ti(s)),this.serializer=new sS(n),this.Ii=new mS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new gS,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let s=this.ui[t.toKey()];return s||(s=new _S(n,this.referenceDelegate),this.ui[t.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,s){et("MemoryPersistence","Starting transaction:",t);const r=new bS(this.ci.next());return this.referenceDelegate.Ei(),s(r).next(i=>this.referenceDelegate.di(r).next(()=>i)).toPromise().then(i=>(r.raiseOnCommittedEvent(),i))}Ai(t,n){return $.or(Object.values(this.ui).map(s=>()=>s.containsKey(t,n)))}}class bS extends JA{constructor(t){super(),this.currentSequenceNumber=t}}class Uu{constructor(t){this.persistence=t,this.Ri=new Fu,this.Vi=null}static mi(t){return new Uu(t)}get fi(){if(this.Vi)return this.Vi;throw mt(60996)}addReference(t,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),$.resolve()}removeReference(t,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),$.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),$.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,n.targetId).next(r=>{r.forEach(i=>this.fi.add(i.toString()))}).next(()=>s.removeTargetData(t,n))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.fi,s=>{const r=ut.fromPath(s);return this.gi(t,r).next(i=>{i||n.removeEntry(r,yt.min())})}).next(()=>(this.Vi=null,n.apply(t)))}updateLimboDocument(t,n){return this.gi(t,n).next(s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(t){return 0}gi(t,n){return $.or([()=>$.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class _a{constructor(t,n){this.persistence=t,this.pi=new er(s=>ZA(s.path),(s,r)=>s.isEqual(r)),this.garbageCollector=hS(this,n)}static mi(t,n){return new _a(t,n)}Ei(){}di(t){return $.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(s=>n.next(r=>s+r))}wr(t){let n=0;return this.pr(t,s=>{n++}).next(()=>n)}pr(t,n){return $.forEach(this.pi,(s,r)=>this.br(t,s,r).next(i=>i?$.resolve():n(r)))}removeTargets(t,n,s){return this.persistence.getTargetCache().removeTargets(t,n,s)}removeOrphanedDocuments(t,n){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(t,o=>this.br(t,o,n).next(l=>{l||(s++,i.removeEntry(o,yt.min()))})).next(()=>i.apply(t)).next(()=>s)}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),$.resolve()}removeTarget(t,n){const s=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,n,s){return this.pi.set(s,t.currentSequenceNumber),$.resolve()}removeReference(t,n,s){return this.pi.set(s,t.currentSequenceNumber),$.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),$.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=zo(t.data.value)),n}br(t,n,s){return $.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const r=this.pi.get(n);return $.resolve(r!==void 0&&r>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(t,n,s,r){this.targetId=t,this.fromCache=n,this.Es=s,this.ds=r}static As(t,n){let s=It(),r=It();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Bu(t,n.fromCache,s,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return gT()?8:XA(dT())>0?6:4}()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,s,r){const i={result:null};return this.ys(t,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(t,n,r,s).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new TS;return this.Ss(t,n,o).next(l=>{if(i.result=l,this.Vs)return this.bs(t,n,o,l.size)})}).next(()=>i.result)}bs(t,n,s,r){return s.documentReadCount<this.fs?(hr()<=Ct.DEBUG&&et("QueryEngine","SDK will not create cache indexes for query:",fr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),$.resolve()):(hr()<=Ct.DEBUG&&et("QueryEngine","Query:",fr(n),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.gs*r?(hr()<=Ct.DEBUG&&et("QueryEngine","The SDK decides to create cache indexes for query:",fr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,En(n))):$.resolve())}ys(t,n){if(Jd(n))return $.resolve(null);let s=En(n);return this.indexManager.getIndexType(t,s).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Lc(n,null,"F"),s=En(n)),this.indexManager.getDocumentsMatchingTarget(t,s).next(i=>{const o=It(...i);return this.ps.getDocuments(t,o).next(l=>this.indexManager.getMinOffset(t,s).next(c=>{const u=this.Ds(n,l);return this.Cs(n,u,o,c.readTime)?this.ys(t,Lc(n,null,"F")):this.vs(t,u,n,c)}))})))}ws(t,n,s,r){return Jd(n)||r.isEqual(yt.min())?$.resolve(null):this.ps.getDocuments(t,s).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,s,r)?$.resolve(null):(hr()<=Ct.DEBUG&&et("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),fr(n)),this.vs(t,o,n,KA(r,Fi)).next(l=>l))})}Ds(t,n){let s=new oe(by(t));return n.forEach((r,i)=>{tl(t,i)&&(s=s.add(i))}),s}Cs(t,n,s,r){if(t.limit===null)return!1;if(s.size!==n.size)return!0;const i=t.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(t,n,s){return hr()<=Ct.DEBUG&&et("QueryEngine","Using full collection scan to execute query:",fr(n)),this.ps.getDocumentsMatchingQuery(t,n,ys.min(),s)}vs(t,n,s,r){return this.ps.getDocumentsMatchingQuery(t,s,r).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $u="LocalStore",IS=3e8;class SS{constructor(t,n,s,r){this.persistence=t,this.Fs=n,this.serializer=r,this.Ms=new Wt(At),this.xs=new er(i=>ku(i),Vu),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(s)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new pS(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Ms))}}function RS(e,t,n,s){return new SS(e,t,n,s)}async function Wy(e,t){const n=wt(e);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next(i=>(r=i,n.Bs(t),n.mutationQueue.getAllMutationBatches(s))).next(i=>{const o=[],l=[];let c=It();for(const u of r){o.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}for(const u of i){l.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(s,c).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:l}))})})}function CS(e,t){const n=wt(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=t.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,u,h){const d=u.batch,m=d.keys();let y=$.resolve();return m.forEach(b=>{y=y.next(()=>h.getEntry(c,b)).next(P=>{const x=u.docVersions.get(b);Nt(x!==null,48541),P.version.compareTo(x)<0&&(d.applyToRemoteDocument(P,u),P.isValidDocument()&&(P.setReadTime(u.commitVersion),h.addEntry(P)))})}),y.next(()=>l.mutationQueue.removeMutationBatch(c,d))}(n,s,t,i).next(()=>i.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(l){let c=It();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(t))).next(()=>n.localDocuments.getDocuments(s,r))})}function Qy(e){const t=wt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Pi.getLastRemoteSnapshotVersion(n))}function PS(e,t){const n=wt(e),s=t.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const l=[];t.targetChanges.forEach((h,d)=>{const m=r.get(d);if(!m)return;l.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,d).next(()=>n.Pi.addMatchingKeys(i,h.addedDocuments,d)));let y=m.withSequenceNumber(i.currentSequenceNumber);t.targetMismatches.get(d)!==null?y=y.withResumeToken(ge.EMPTY_BYTE_STRING,yt.min()).withLastLimboFreeSnapshotVersion(yt.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,s)),r=r.insert(d,y),function(P,x,M){return P.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=IS?!0:M.addedDocuments.size+M.modifiedDocuments.size+M.removedDocuments.size>0}(m,y,h)&&l.push(n.Pi.updateTargetData(i,y))});let c=Gn(),u=It();if(t.documentUpdates.forEach(h=>{t.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),l.push(xS(i,o,t.documentUpdates).next(h=>{c=h.ks,u=h.qs})),!s.isEqual(yt.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next(d=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,s));l.push(h)}return $.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(n.Ms=r,i))}function xS(e,t,n){let s=It(),r=It();return n.forEach(i=>s=s.add(i)),t.getEntries(e,s).next(i=>{let o=Gn();return n.forEach((l,c)=>{const u=i.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(l)),c.isNoDocument()&&c.version.isEqual(yt.min())?(t.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(t.addEntry(c),o=o.insert(l,c)):et($u,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{ks:o,qs:r}})}function kS(e,t){const n=wt(e);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(t===void 0&&(t=Cu),n.mutationQueue.getNextMutationBatchAfterBatchId(s,t)))}function VS(e,t){const n=wt(e);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return n.Pi.getTargetData(s,t).next(i=>i?(r=i,$.resolve(r)):n.Pi.allocateTargetId(s).next(o=>(r=new os(t,o,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=n.Ms.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(t,s.targetId)),s})}async function jc(e,t,n){const s=wt(e),r=s.Ms.get(t),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,o=>s.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!Lr(o))throw o;et($u,`Failed to update sequence numbers for target ${t}: ${o}`)}s.Ms=s.Ms.remove(t),s.xs.delete(r.target)}function cp(e,t,n){const s=wt(e);let r=yt.min(),i=It();return s.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,h){const d=wt(c),m=d.xs.get(h);return m!==void 0?$.resolve(d.Ms.get(m)):d.Pi.getTargetData(u,h)}(s,o,En(t)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>s.Fs.getDocumentsMatchingQuery(o,t,n?r:yt.min(),n?i:It())).next(l=>(DS(s,vI(t),l),{documents:l,Qs:i})))}function DS(e,t,n){let s=e.Os.get(t)||yt.min();n.forEach((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),e.Os.set(t,s)}class up{constructor(){this.activeTargetIds=II()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class NS{constructor(){this.Mo=new up,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,s){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,s){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new up,Promise.resolve()}handleUserChange(t,n,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hp="ConnectivityMonitor";class fp{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){et(hp,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){et(hp,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oo=null;function qc(){return Oo===null?Oo=function(){return 268435456+Math.round(2147483648*Math.random())}():Oo++,"0x"+Oo.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xl="RestConnection",MS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class LS{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${s}/databases/${r}`,this.Wo=this.databaseId.database===da?`project_id=${s}`:`project_id=${s}&database_id=${r}`}Go(t,n,s,r,i){const o=qc(),l=this.zo(t,n.toUriEncodedString());et(Xl,`Sending RPC '${t}' ${o}:`,l,s);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,r,i);const{host:u}=new URL(l),h=bu(u);return this.Jo(t,l,c,s,h).then(d=>(et(Xl,`Received RPC '${t}' ${o}: `,d),d),d=>{throw Sr(Xl,`RPC '${t}' ${o} failed with error: `,d,"url: ",l,"request:",s),d})}Ho(t,n,s,r,i,o){return this.Go(t,n,s,r,i)}jo(t,n,s){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Or}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,i)=>t[i]=r),s&&s.headers.forEach((r,i)=>t[i]=r)}zo(t,n){const s=MS[t];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const we="WebChannelConnection";class US extends LS{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,s,r,i){const o=qc();return new Promise((l,c)=>{const u=new Xg;u.setWithCredentials(!0),u.listenOnce(Yg.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Ho.NO_ERROR:const d=u.getResponseJson();et(we,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(d)),l(d);break;case Ho.TIMEOUT:et(we,`RPC '${t}' ${o} timed out`),c(new it(q.DEADLINE_EXCEEDED,"Request time out"));break;case Ho.HTTP_ERROR:const m=u.getStatus();if(et(we,`RPC '${t}' ${o} failed with status:`,m,"response text:",u.getResponseText()),m>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);const b=y==null?void 0:y.error;if(b&&b.status&&b.message){const P=function(M){const O=M.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(O)>=0?O:q.UNKNOWN}(b.status);c(new it(P,b.message))}else c(new it(q.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new it(q.UNAVAILABLE,"Connection failed."));break;default:mt(9055,{l_:t,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{et(we,`RPC '${t}' ${o} completed.`)}});const h=JSON.stringify(r);et(we,`RPC '${t}' ${o} sending request:`,r),u.send(n,"POST",h,s,15)})}T_(t,n,s){const r=qc(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=ey(),l=ty(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,s),c.encodeInitMessageHeaders=!0;const h=i.join("");et(we,`Creating RPC '${t}' stream ${r}: ${h}`,c);const d=o.createWebChannel(h,c);this.I_(d);let m=!1,y=!1;const b=new FS({Yo:x=>{y?et(we,`Not sending because RPC '${t}' stream ${r} is closed:`,x):(m||(et(we,`Opening RPC '${t}' stream ${r} transport.`),d.open(),m=!0),et(we,`RPC '${t}' stream ${r} sending:`,x),d.send(x))},Zo:()=>d.close()}),P=(x,M,O)=>{x.listen(M,B=>{try{O(B)}catch(H){setTimeout(()=>{throw H},0)}})};return P(d,ri.EventType.OPEN,()=>{y||(et(we,`RPC '${t}' stream ${r} transport opened.`),b.o_())}),P(d,ri.EventType.CLOSE,()=>{y||(y=!0,et(we,`RPC '${t}' stream ${r} transport closed`),b.a_(),this.E_(d))}),P(d,ri.EventType.ERROR,x=>{y||(y=!0,Sr(we,`RPC '${t}' stream ${r} transport errored. Name:`,x.name,"Message:",x.message),b.a_(new it(q.UNAVAILABLE,"The operation could not be completed")))}),P(d,ri.EventType.MESSAGE,x=>{var M;if(!y){const O=x.data[0];Nt(!!O,16349);const B=O,H=(B==null?void 0:B.error)||((M=B[0])==null?void 0:M.error);if(H){et(we,`RPC '${t}' stream ${r} received error:`,H);const nt=H.status;let st=function(_){const T=ne[_];if(T!==void 0)return My(T)}(nt),S=H.message;st===void 0&&(st=q.INTERNAL,S="Unknown error status: "+nt+" with message "+H.message),y=!0,b.a_(new it(st,S)),d.close()}else et(we,`RPC '${t}' stream ${r} received:`,O),b.u_(O)}}),P(l,Zg.STAT_EVENT,x=>{x.stat===kc.PROXY?et(we,`RPC '${t}' stream ${r} detected buffering proxy`):x.stat===kc.NOPROXY&&et(we,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{b.__()},0),b}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(n=>n===t)}}function Yl(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rl(e){return new qI(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy{constructor(t,n,s=1e3,r=1.5,i=6e4){this.Mi=t,this.timerId=n,this.d_=s,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-s);r>0&&et("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dp="PersistentStream";class Xy{constructor(t,n,s,r,i,o,l,c){this.Mi=t,this.S_=s,this.b_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Jy(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===q.RESOURCE_EXHAUSTED?(Kn(n.toString()),Kn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.D_===n&&this.G_(s,r)},s=>{t(()=>{const r=new it(q.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(r)})})}G_(t,n){const s=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo(()=>{s(()=>this.listener.Xo())}),this.stream.t_(()=>{s(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{s(()=>this.z_(r))}),this.stream.onMessage(r=>{s(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return et(dp,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget(()=>this.D_===t?n():(et(dp,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class BS extends Xy{constructor(t,n,s,r,i,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=KI(this.serializer,t),s=function(i){if(!("targetChange"in i))return yt.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?yt.min():o.readTime?Tn(o.readTime):yt.min()}(t);return this.listener.H_(n,s)}Y_(t){const n={};n.database=$c(this.serializer),n.addTarget=function(i,o){let l;const c=o.target;if(l=Mc(c)?{documents:QI(i,c)}:{query:JI(i,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=Uy(i,o.resumeToken);const u=Fc(i,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(yt.min())>0){l.readTime=ya(i,o.snapshotVersion.toTimestamp());const u=Fc(i,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,t);const s=YI(this.serializer,t);s&&(n.labels=s),this.q_(n)}Z_(t){const n={};n.database=$c(this.serializer),n.removeTarget=t,this.q_(n)}}class $S extends Xy{constructor(t,n,s,r,i,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return Nt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Nt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Nt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=WI(t.writeResults,t.commitTime),s=Tn(t.commitTime);return this.listener.na(s,n)}ra(){const t={};t.database=$c(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map(s=>GI(this.serializer,s))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{}class qS extends jS{constructor(t,n,s,r){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=s,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new it(q.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(t,Uc(n,s),r,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new it(q.UNKNOWN,i.toString())})}Ho(t,n,s,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(t,Uc(n,s),r,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new it(q.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class HS{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Kn(n),this.aa=!1):et("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys="RemoteStore";class zS{constructor(t,n,s,r,i){this.localStore=t,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{s.enqueueAndForget(async()=>{nr(this)&&(et(Ys,"Restarting streams for network reachability change."),await async function(c){const u=wt(c);u.Ea.add(4),await oo(u),u.Ra.set("Unknown"),u.Ea.delete(4),await il(u)}(this))})}),this.Ra=new HS(s,r)}}async function il(e){if(nr(e))for(const t of e.da)await t(!0)}async function oo(e){for(const t of e.da)await t(!1)}function Yy(e,t){const n=wt(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),zu(n)?Hu(n):Fr(n).O_()&&qu(n,t))}function ju(e,t){const n=wt(e),s=Fr(n);n.Ia.delete(t),s.O_()&&Zy(n,t),n.Ia.size===0&&(s.O_()?s.L_():nr(n)&&n.Ra.set("Unknown"))}function qu(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(yt.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Fr(e).Y_(t)}function Zy(e,t){e.Va.Ue(t),Fr(e).Z_(t)}function Hu(e){e.Va=new UI({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Fr(e).start(),e.Ra.ua()}function zu(e){return nr(e)&&!Fr(e).x_()&&e.Ia.size>0}function nr(e){return wt(e).Ea.size===0}function t_(e){e.Va=void 0}async function KS(e){e.Ra.set("Online")}async function GS(e){e.Ia.forEach((t,n)=>{qu(e,t)})}async function WS(e,t){t_(e),zu(e)?(e.Ra.ha(t),Hu(e)):e.Ra.set("Unknown")}async function QS(e,t,n){if(e.Ra.set("Online"),t instanceof Fy&&t.state===2&&t.cause)try{await async function(r,i){const o=i.cause;for(const l of i.targetIds)r.Ia.has(l)&&(await r.remoteSyncer.rejectListen(l,o),r.Ia.delete(l),r.Va.removeTarget(l))}(e,t)}catch(s){et(Ys,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await va(e,s)}else if(t instanceof Wo?e.Va.Ze(t):t instanceof Ly?e.Va.st(t):e.Va.tt(t),!n.isEqual(yt.min()))try{const s=await Qy(e.localStore);n.compareTo(s)>=0&&await function(i,o){const l=i.Va.Tt(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.Ia.get(u);h&&i.Ia.set(u,h.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const h=i.Ia.get(c);if(!h)return;i.Ia.set(c,h.withResumeToken(ge.EMPTY_BYTE_STRING,h.snapshotVersion)),Zy(i,c);const d=new os(h.target,c,u,h.sequenceNumber);qu(i,d)}),i.remoteSyncer.applyRemoteEvent(l)}(e,n)}catch(s){et(Ys,"Failed to raise snapshot:",s),await va(e,s)}}async function va(e,t,n){if(!Lr(t))throw t;e.Ea.add(1),await oo(e),e.Ra.set("Offline"),n||(n=()=>Qy(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{et(Ys,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await il(e)})}function e_(e,t){return t().catch(n=>va(e,n,t))}async function ol(e){const t=wt(e),n=Es(t);let s=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Cu;for(;JS(t);)try{const r=await kS(t.localStore,s);if(r===null){t.Ta.length===0&&n.L_();break}s=r.batchId,XS(t,r)}catch(r){await va(t,r)}n_(t)&&s_(t)}function JS(e){return nr(e)&&e.Ta.length<10}function XS(e,t){e.Ta.push(t);const n=Es(e);n.O_()&&n.X_&&n.ea(t.mutations)}function n_(e){return nr(e)&&!Es(e).x_()&&e.Ta.length>0}function s_(e){Es(e).start()}async function YS(e){Es(e).ra()}async function ZS(e){const t=Es(e);for(const n of e.Ta)t.ea(n.mutations)}async function t2(e,t,n){const s=e.Ta.shift(),r=Ou.from(s,t,n);await e_(e,()=>e.remoteSyncer.applySuccessfulWrite(r)),await ol(e)}async function e2(e,t){t&&Es(e).X_&&await async function(s,r){if(function(o){return MI(o)&&o!==q.ABORTED}(r.code)){const i=s.Ta.shift();Es(s).B_(),await e_(s,()=>s.remoteSyncer.rejectFailedWrite(i.batchId,r)),await ol(s)}}(e,t),n_(e)&&s_(e)}async function pp(e,t){const n=wt(e);n.asyncQueue.verifyOperationInProgress(),et(Ys,"RemoteStore received new credentials");const s=nr(n);n.Ea.add(3),await oo(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await il(n)}async function n2(e,t){const n=wt(e);t?(n.Ea.delete(2),await il(n)):t||(n.Ea.add(2),await oo(n),n.Ra.set("Unknown"))}function Fr(e){return e.ma||(e.ma=function(n,s,r){const i=wt(n);return i.sa(),new BS(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(e.datastore,e.asyncQueue,{Xo:KS.bind(null,e),t_:GS.bind(null,e),r_:WS.bind(null,e),H_:QS.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),zu(e)?Hu(e):e.Ra.set("Unknown")):(await e.ma.stop(),t_(e))})),e.ma}function Es(e){return e.fa||(e.fa=function(n,s,r){const i=wt(n);return i.sa(),new $S(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:YS.bind(null,e),r_:e2.bind(null,e),ta:ZS.bind(null,e),na:t2.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await ol(e)):(await e.fa.stop(),e.Ta.length>0&&(et(Ys,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(t,n,s,r,i){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new ds,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,s,r,i){const o=Date.now()+s,l=new Ku(t,n,o,r,i);return l.start(s),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new it(q.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gu(e,t){if(Kn("AsyncQueue",`${t}: ${e}`),Lr(e))return new it(q.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{static emptySet(t){return new br(t.comparator)}constructor(t){this.comparator=t?(n,s)=>t(n,s)||ut.comparator(n.key,s.key):(n,s)=>ut.comparator(n.key,s.key),this.keyedMap=ii(),this.sortedSet=new Wt(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,s)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof br)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const s=new br;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(){this.ga=new Wt(ut.comparator)}track(t){const n=t.doc.key,s=this.ga.get(n);s?t.type!==0&&s.type===3?this.ga=this.ga.insert(n,t):t.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.ga=this.ga.remove(n):t.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):mt(63341,{Rt:t,pa:s}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal((n,s)=>{t.push(s)}),t}}class kr{constructor(t,n,s,r,i,o,l,c,u){this.query=t,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(t,n,s,r,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new kr(t,n,br.emptySet(n),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Za(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,s=t.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class r2{constructor(){this.queries=gp(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const r=wt(n),i=r.queries;r.queries=gp(),i.forEach((o,l)=>{for(const c of l.Sa)c.onError(s)})})(this,new it(q.ABORTED,"Firestore shutting down"))}}function gp(){return new er(e=>Ey(e),Za)}async function i2(e,t){const n=wt(e);let s=3;const r=t.query;let i=n.queries.get(r);i?!i.ba()&&t.Da()&&(s=2):(i=new s2,s=t.Da()?0:1);try{switch(s){case 0:i.wa=await n.onListen(r,!0);break;case 1:i.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const l=Gu(o,`Initialization of query '${fr(t.query)}' failed`);return void t.onError(l)}n.queries.set(r,i),i.Sa.push(t),t.va(n.onlineState),i.wa&&t.Fa(i.wa)&&Wu(n)}async function o2(e,t){const n=wt(e),s=t.query;let r=3;const i=n.queries.get(s);if(i){const o=i.Sa.indexOf(t);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?r=t.Da()?0:1:!i.ba()&&t.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function a2(e,t){const n=wt(e);let s=!1;for(const r of t){const i=r.query,o=n.queries.get(i);if(o){for(const l of o.Sa)l.Fa(r)&&(s=!0);o.wa=r}}s&&Wu(n)}function l2(e,t,n){const s=wt(e),r=s.queries.get(t);if(r)for(const i of r.Sa)i.onError(n);s.queries.delete(t)}function Wu(e){e.Ca.forEach(t=>{t.next()})}var Hc,yp;(yp=Hc||(Hc={})).Ma="default",yp.Cache="cache";class c2{constructor(t,n,s){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(t){if(!this.options.includeMetadataChanges){const s=[];for(const r of t.docChanges)r.type!==3&&s.push(r);t=new kr(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=kr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Hc.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{constructor(t){this.key=t}}class i_{constructor(t){this.key=t}}class u2{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=It(),this.mutatedKeys=It(),this.eu=by(t),this.tu=new br(this.eu)}get nu(){return this.Ya}ru(t,n){const s=n?n.iu:new mp,r=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=r,l=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((h,d)=>{const m=r.get(h),y=tl(this.query,d)?d:null,b=!!m&&this.mutatedKeys.has(m.key),P=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let x=!1;m&&y?m.data.isEqual(y.data)?b!==P&&(s.track({type:3,doc:y}),x=!0):this.su(m,y)||(s.track({type:2,doc:y}),x=!0,(c&&this.eu(y,c)>0||u&&this.eu(y,u)<0)&&(l=!0)):!m&&y?(s.track({type:0,doc:y}),x=!0):m&&!y&&(s.track({type:1,doc:m}),x=!0,(c||u)&&(l=!0)),x&&(y?(o=o.add(y),i=P?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),s.track({type:1,doc:h})}return{tu:o,iu:s,Cs:l,mutatedKeys:i}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,s,r){const i=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const o=t.iu.ya();o.sort((h,d)=>function(y,b){const P=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return mt(20277,{Rt:x})}};return P(y)-P(b)}(h.type,d.type)||this.eu(h.doc,d.doc)),this.ou(s),r=r??!1;const l=n&&!r?this._u():[],c=this.Xa.size===0&&this.current&&!r?1:0,u=c!==this.Za;return this.Za=c,o.length!==0||u?{snapshot:new kr(this.query,t.tu,i,o,t.mutatedKeys,c===0,u,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new mp,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=It(),this.tu.forEach(s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))});const n=[];return t.forEach(s=>{this.Xa.has(s)||n.push(new i_(s))}),this.Xa.forEach(s=>{t.has(s)||n.push(new r_(s))}),n}cu(t){this.Ya=t.Qs,this.Xa=It();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return kr.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Qu="SyncEngine";class h2{constructor(t,n,s){this.query=t,this.targetId=n,this.view=s}}class f2{constructor(t){this.key=t,this.hu=!1}}class d2{constructor(t,n,s,r,i,o){this.localStore=t,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new er(l=>Ey(l),Za),this.Iu=new Map,this.Eu=new Set,this.du=new Wt(ut.comparator),this.Au=new Map,this.Ru=new Fu,this.Vu={},this.mu=new Map,this.fu=xr.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function p2(e,t,n=!0){const s=h_(e);let r;const i=s.Tu.get(t);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.lu()):r=await o_(s,t,n,!0),r}async function m2(e,t){const n=h_(e);await o_(n,t,!0,!1)}async function o_(e,t,n,s){const r=await VS(e.localStore,En(t)),i=r.targetId,o=e.sharedClientState.addLocalQueryTarget(i,n);let l;return s&&(l=await g2(e,t,i,o==="current",r.resumeToken)),e.isPrimaryClient&&n&&Yy(e.remoteStore,r),l}async function g2(e,t,n,s,r){e.pu=(d,m,y)=>async function(P,x,M,O){let B=x.view.ru(M);B.Cs&&(B=await cp(P.localStore,x.query,!1).then(({documents:S})=>x.view.ru(S,B)));const H=O&&O.targetChanges.get(x.targetId),nt=O&&O.targetMismatches.get(x.targetId)!=null,st=x.view.applyChanges(B,P.isPrimaryClient,H,nt);return vp(P,x.targetId,st.au),st.snapshot}(e,d,m,y);const i=await cp(e.localStore,t,!0),o=new u2(t,i.Qs),l=o.ru(i.documents),c=io.createSynthesizedTargetChangeForCurrentChange(n,s&&e.onlineState!=="Offline",r),u=o.applyChanges(l,e.isPrimaryClient,c);vp(e,n,u.au);const h=new h2(t,n,o);return e.Tu.set(t,h),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),u.snapshot}async function y2(e,t,n){const s=wt(e),r=s.Tu.get(t),i=s.Iu.get(r.targetId);if(i.length>1)return s.Iu.set(r.targetId,i.filter(o=>!Za(o,t))),void s.Tu.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await jc(s.localStore,r.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(r.targetId),n&&ju(s.remoteStore,r.targetId),zc(s,r.targetId)}).catch(Mr)):(zc(s,r.targetId),await jc(s.localStore,r.targetId,!0))}async function _2(e,t){const n=wt(e),s=n.Tu.get(t),r=n.Iu.get(s.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),ju(n.remoteStore,s.targetId))}async function v2(e,t,n){const s=S2(e);try{const r=await function(o,l){const c=wt(o),u=jt.now(),h=l.reduce((y,b)=>y.add(b.key),It());let d,m;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let b=Gn(),P=It();return c.Ns.getEntries(y,h).next(x=>{b=x,b.forEach((M,O)=>{O.isValidDocument()||(P=P.add(M))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,b)).next(x=>{d=x;const M=[];for(const O of l){const B=kI(O,d.get(O.key).overlayedDocument);B!=null&&M.push(new Ss(O.key,B,py(B.value.mapValue),bn.exists(!0)))}return c.mutationQueue.addMutationBatch(y,u,M,l)}).next(x=>{m=x;const M=x.applyToLocalDocumentSet(d,P);return c.documentOverlayCache.saveOverlays(y,x.batchId,M)})}).then(()=>({batchId:m.batchId,changes:Ay(d)}))}(s.localStore,t);s.sharedClientState.addPendingMutation(r.batchId),function(o,l,c){let u=o.Vu[o.currentUser.toKey()];u||(u=new Wt(At)),u=u.insert(l,c),o.Vu[o.currentUser.toKey()]=u}(s,r.batchId,n),await ao(s,r.changes),await ol(s.remoteStore)}catch(r){const i=Gu(r,"Failed to persist write");n.reject(i)}}async function a_(e,t){const n=wt(e);try{const s=await PS(n.localStore,t);t.targetChanges.forEach((r,i)=>{const o=n.Au.get(i);o&&(Nt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.hu=!0:r.modifiedDocuments.size>0?Nt(o.hu,14607):r.removedDocuments.size>0&&(Nt(o.hu,42227),o.hu=!1))}),await ao(n,s,t)}catch(s){await Mr(s)}}function _p(e,t,n){const s=wt(e);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.Tu.forEach((i,o)=>{const l=o.view.va(t);l.snapshot&&r.push(l.snapshot)}),function(o,l){const c=wt(o);c.onlineState=l;let u=!1;c.queries.forEach((h,d)=>{for(const m of d.Sa)m.va(l)&&(u=!0)}),u&&Wu(c)}(s.eventManager,t),r.length&&s.Pu.H_(r),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function w2(e,t,n){const s=wt(e);s.sharedClientState.updateQueryState(t,"rejected",n);const r=s.Au.get(t),i=r&&r.key;if(i){let o=new Wt(ut.comparator);o=o.insert(i,Ie.newNoDocument(i,yt.min()));const l=It().add(i),c=new sl(yt.min(),new Map,new Wt(At),o,l);await a_(s,c),s.du=s.du.remove(i),s.Au.delete(t),Ju(s)}else await jc(s.localStore,t,!1).then(()=>zc(s,t,n)).catch(Mr)}async function E2(e,t){const n=wt(e),s=t.batch.batchId;try{const r=await CS(n.localStore,t);c_(n,s,null),l_(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await ao(n,r)}catch(r){await Mr(r)}}async function b2(e,t,n){const s=wt(e);try{const r=await function(o,l){const c=wt(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return c.mutationQueue.lookupMutationBatch(u,l).next(d=>(Nt(d!==null,37113),h=d.keys(),c.mutationQueue.removeMutationBatch(u,d))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>c.localDocuments.getDocuments(u,h))})}(s.localStore,t);c_(s,t,n),l_(s,t),s.sharedClientState.updateMutationState(t,"rejected",n),await ao(s,r)}catch(r){await Mr(r)}}function l_(e,t){(e.mu.get(t)||[]).forEach(n=>{n.resolve()}),e.mu.delete(t)}function c_(e,t,n){const s=wt(e);let r=s.Vu[s.currentUser.toKey()];if(r){const i=r.get(t);i&&(n?i.reject(n):i.resolve(),r=r.remove(t)),s.Vu[s.currentUser.toKey()]=r}}function zc(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const s of e.Iu.get(t))e.Tu.delete(s),n&&e.Pu.yu(s,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(s=>{e.Ru.containsKey(s)||u_(e,s)})}function u_(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(ju(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),Ju(e))}function vp(e,t,n){for(const s of n)s instanceof r_?(e.Ru.addReference(s.key,t),T2(e,s)):s instanceof i_?(et(Qu,"Document no longer in limbo: "+s.key),e.Ru.removeReference(s.key,t),e.Ru.containsKey(s.key)||u_(e,s.key)):mt(19791,{wu:s})}function T2(e,t){const n=t.key,s=n.path.canonicalString();e.du.get(n)||e.Eu.has(s)||(et(Qu,"New document in limbo: "+n),e.Eu.add(s),Ju(e))}function Ju(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new ut(Gt.fromString(t)),s=e.fu.next();e.Au.set(s,new f2(n)),e.du=e.du.insert(n,s),Yy(e.remoteStore,new os(En(Du(n.path)),s,"TargetPurposeLimboResolution",Qa.ce))}}async function ao(e,t,n){const s=wt(e),r=[],i=[],o=[];s.Tu.isEmpty()||(s.Tu.forEach((l,c)=>{o.push(s.pu(c,t,n).then(u=>{var h;if((u||n)&&s.isPrimaryClient){const d=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:h.current;s.sharedClientState.updateQueryState(c.targetId,d?"current":"not-current")}if(u){r.push(u);const d=Bu.As(c.targetId,u);i.push(d)}}))}),await Promise.all(o),s.Pu.H_(r),await async function(c,u){const h=wt(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>$.forEach(u,m=>$.forEach(m.Es,y=>h.persistence.referenceDelegate.addReference(d,m.targetId,y)).next(()=>$.forEach(m.ds,y=>h.persistence.referenceDelegate.removeReference(d,m.targetId,y)))))}catch(d){if(!Lr(d))throw d;et($u,"Failed to update sequence numbers: "+d)}for(const d of u){const m=d.targetId;if(!d.fromCache){const y=h.Ms.get(m),b=y.snapshotVersion,P=y.withLastLimboFreeSnapshotVersion(b);h.Ms=h.Ms.insert(m,P)}}}(s.localStore,i))}async function A2(e,t){const n=wt(e);if(!n.currentUser.isEqual(t)){et(Qu,"User change. New user:",t.toKey());const s=await Wy(n.localStore,t);n.currentUser=t,function(i,o){i.mu.forEach(l=>{l.forEach(c=>{c.reject(new it(q.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await ao(n,s.Ls)}}function I2(e,t){const n=wt(e),s=n.Au.get(t);if(s&&s.hu)return It().add(s.key);{let r=It();const i=n.Iu.get(t);if(!i)return r;for(const o of i){const l=n.Tu.get(o);r=r.unionWith(l.view.nu)}return r}}function h_(e){const t=wt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=a_.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=I2.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=w2.bind(null,t),t.Pu.H_=a2.bind(null,t.eventManager),t.Pu.yu=l2.bind(null,t.eventManager),t}function S2(e){const t=wt(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=E2.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=b2.bind(null,t),t}class wa{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=rl(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return RS(this.persistence,new AS,t.initialUser,this.serializer)}Cu(t){return new Gy(Uu.mi,this.serializer)}Du(t){return new NS}async terminate(){var t,n;(t=this.gcScheduler)==null||t.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wa.provider={build:()=>new wa};class R2 extends wa{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){Nt(this.persistence.referenceDelegate instanceof _a,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new cS(s,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?Fe.withCacheSize(this.cacheSizeBytes):Fe.DEFAULT;return new Gy(s=>_a.mi(s,n),this.serializer)}}class Kc{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>_p(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=A2.bind(null,this.syncEngine),await n2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new r2}()}createDatastore(t){const n=rl(t.databaseInfo.databaseId),s=function(i){return new US(i)}(t.databaseInfo);return function(i,o,l,c){return new qS(i,o,l,c)}(t.authCredentials,t.appCheckCredentials,s,n)}createRemoteStore(t){return function(s,r,i,o,l){return new zS(s,r,i,o,l)}(this.localStore,this.datastore,t.asyncQueue,n=>_p(this.syncEngine,n,0),function(){return fp.v()?new fp:new OS}())}createSyncEngine(t,n){return function(r,i,o,l,c,u,h){const d=new d2(r,i,o,l,c,u);return h&&(d.gu=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(r){const i=wt(r);et(Ys,"RemoteStore shutting down."),i.Ea.add(5),await oo(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(t=this.datastore)==null||t.terminate(),(n=this.eventManager)==null||n.terminate()}}Kc.provider={build:()=>new Kc};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Kn("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs="FirestoreClient";class P2{constructor(t,n,s,r,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=be.UNAUTHENTICATED,this.clientId=Su.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,async o=>{et(bs,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(s,o=>(et(bs,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new ds;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const s=Gu(n,"Failed to shutdown persistence");t.reject(s)}}),t.promise}}async function Zl(e,t){e.asyncQueue.verifyOperationInProgress(),et(bs,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let s=n.initialUser;e.setCredentialChangeListener(async r=>{s.isEqual(r)||(await Wy(t.localStore,r),s=r)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function wp(e,t){e.asyncQueue.verifyOperationInProgress();const n=await x2(e);et(bs,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(s=>pp(t.remoteStore,s)),e.setAppCheckTokenChangeListener((s,r)=>pp(t.remoteStore,r)),e._onlineComponents=t}async function x2(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){et(bs,"Using user provided OfflineComponentProvider");try{await Zl(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(r){return r.name==="FirebaseError"?r.code===q.FAILED_PRECONDITION||r.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Sr("Error using user provided cache. Falling back to memory cache: "+n),await Zl(e,new wa)}}else et(bs,"Using default OfflineComponentProvider"),await Zl(e,new R2(void 0));return e._offlineComponents}async function f_(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(et(bs,"Using user provided OnlineComponentProvider"),await wp(e,e._uninitializedComponentsProvider._online)):(et(bs,"Using default OnlineComponentProvider"),await wp(e,new Kc))),e._onlineComponents}function k2(e){return f_(e).then(t=>t.syncEngine)}async function V2(e){const t=await f_(e),n=t.eventManager;return n.onListen=p2.bind(null,t.syncEngine),n.onUnlisten=y2.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=m2.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=_2.bind(null,t.syncEngine),n}function D2(e,t,n={}){const s=new ds;return e.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,u){const h=new C2({next:m=>{h.Nu(),o.enqueueAndForget(()=>o2(i,d));const y=m.docs.has(l);!y&&m.fromCache?u.reject(new it(q.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&c&&c.source==="server"?u.reject(new it(q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),d=new c2(Du(l.path),h,{includeMetadataChanges:!0,qa:!0});return i2(i,d)}(await V2(e),e.asyncQueue,t,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d_(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ep=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p_="firestore.googleapis.com",bp=!0;class Tp{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new it(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=p_,this.ssl=bp}else this.host=t.host,this.ssl=t.ssl??bp;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=Ky;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<aS)throw new it(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}zA("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=d_(t.experimentalLongPollingOptions??{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new it(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new it(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new it(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(s,r){return s.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Xu{constructor(t,n,s,r){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Tp({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new it(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new it(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Tp(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new NA;switch(s.type){case"firstParty":return new FA(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new it(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=Ep.get(n);s&&(et("ComponentProvider","Removing Datastore"),Ep.delete(n),s.terminate())}(this),Promise.resolve()}}function N2(e,t,n,s={}){var u;e=Xs(e,Xu);const r=bu(t),i=e._getSettings(),o={...i,emulatorOptions:e._getEmulatorOptions()},l=`${t}:${n}`;r&&(lT(`https://${l}`),fT("Firestore",!0)),i.host!==p_&&i.host!==l&&Sr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:r,emulatorOptions:s};if(!Mi(c,o)&&(e._setSettings(c),s.mockUserToken)){let h,d;if(typeof s.mockUserToken=="string")h=s.mockUserToken,d=be.MOCK_USER;else{h=cT(s.mockUserToken,(u=e._app)==null?void 0:u.options.projectId);const m=s.mockUserToken.sub||s.mockUserToken.user_id;if(!m)throw new it(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new be(m)}e._authCredentials=new OA(new sy(h,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(t,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new Yu(this.firestore,t,this._query)}}class ie{constructor(t,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ki(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ie(this.firestore,t,this._key)}toJSON(){return{type:ie._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,s){if(so(n,ie._jsonSchema))return new ie(t,s||null,new ut(Gt.fromString(n.referencePath)))}}ie._jsonSchemaVersion="firestore/documentReference/1.0",ie._jsonSchema={type:se("string",ie._jsonSchemaVersion),referencePath:se("string")};class Ki extends Yu{constructor(t,n,s){super(t,n,Du(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ie(this.firestore,null,new ut(t))}withConverter(t){return new Ki(this.firestore,t,this._path)}}function rn(e,t,...n){if(e=qn(e),arguments.length===1&&(t=Su.newId()),HA("doc","path",t),e instanceof Xu){const s=Gt.fromString(t,...n);return Ld(s),new ie(e,null,new ut(s))}{if(!(e instanceof ie||e instanceof Ki))throw new it(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=e._path.child(Gt.fromString(t,...n));return Ld(s),new ie(e.firestore,e instanceof Ki?e.converter:null,new ut(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ap="AsyncQueue";class Ip{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Jy(this,"async_queue_retry"),this._c=()=>{const s=Yl();s&&et(Ap,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=t;const n=Yl();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=Yl();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const n=new ds;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!Lr(t))throw t;et(Ap,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const n=this.ac.then(()=>(this.rc=!0,t().catch(s=>{throw this.nc=s,this.rc=!1,Kn("INTERNAL UNHANDLED ERROR: ",Sp(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=n,n}enqueueAfterDelay(t,n,s){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const r=Ku.createAndSchedule(this,t,n,s,i=>this.hc(i));return this.tc.push(r),r}uc(){this.nc&&mt(47125,{Pc:Sp(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function Sp(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}class al extends Xu{constructor(t,n,s,r){super(t,n,s,r),this.type="firestore",this._queue=new Ip,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Ip(t),this._firestoreClient=void 0,await t}}}function O2(e,t){const n=typeof e=="object"?e:Gg(),s=typeof e=="string"?e:da,r=no(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=oT("firestore");i&&N2(r,...i)}return r}function m_(e){if(e._terminated)throw new it(q.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||M2(e),e._firestoreClient}function M2(e){var s,r,i;const t=e._freezeSettings(),n=function(l,c,u,h){return new nI(l,c,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,d_(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(e._databaseId,((s=e._app)==null?void 0:s.options.appId)||"",e._persistenceKey,t);e._componentsProvider||(r=t.localCache)!=null&&r._offlineComponentProvider&&((i=t.localCache)!=null&&i._onlineComponentProvider)&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new P2(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ze(ge.fromBase64String(t))}catch(n){throw new it(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Ze(ge.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Ze._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(so(t,Ze._jsonSchema))return Ze.fromBase64String(t.bytes)}}Ze._jsonSchemaVersion="firestore/bytes/1.0",Ze._jsonSchema={type:se("string",Ze._jsonSchemaVersion),bytes:se("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new it(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new me(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new it(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new it(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return At(this._lat,t._lat)||At(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:An._jsonSchemaVersion}}static fromJSON(t){if(so(t,An._jsonSchema))return new An(t.latitude,t.longitude)}}An._jsonSchemaVersion="firestore/geoPoint/1.0",An._jsonSchema={type:se("string",An._jsonSchemaVersion),latitude:se("number"),longitude:se("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(s,r){if(s.length!==r.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==r[i])return!1;return!0}(this._values,t._values)}toJSON(){return{type:In._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(so(t,In._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(n=>typeof n=="number"))return new In(t.vectorValues);throw new it(q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}In._jsonSchemaVersion="firestore/vectorValue/1.0",In._jsonSchema={type:se("string",In._jsonSchemaVersion),vectorValues:se("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2=/^__.*__$/;class F2{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return this.fieldMask!==null?new Ss(t,this.data,this.fieldMask,n,this.fieldTransforms):new ro(t,this.data,n,this.fieldTransforms)}}class g_{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return new Ss(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function y_(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw mt(40011,{Ac:e})}}class Zu{constructor(t,n,s,r,i,o){this.settings=t,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Zu({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var r;const n=(r=this.path)==null?void 0:r.child(t),s=this.Vc({path:n,fc:!1});return s.gc(t),s}yc(t){var r;const n=(r=this.path)==null?void 0:r.child(t),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Ea(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(y_(this.Ac)&&L2.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class U2{constructor(t,n,s){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=s||rl(t)}Cc(t,n,s,r=!1){return new Zu({Ac:t,methodName:n,Dc:s,path:me.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function __(e){const t=e._freezeSettings(),n=rl(e._databaseId);return new U2(e._databaseId,!!t.ignoreUndefinedProperties,n)}function B2(e,t,n,s,r,i={}){const o=e.Cc(i.merge||i.mergeFields?2:0,t,n,r);nh("Data must be an object, but it was:",o,s);const l=v_(s,o);let c,u;if(i.merge)c=new We(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const d of i.mergeFields){const m=Gc(t,d,n);if(!o.contains(m))throw new it(q.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);E_(h,m)||h.push(m)}c=new We(h),u=o.fieldTransforms.filter(d=>c.covers(d.field))}else c=null,u=o.fieldTransforms;return new F2(new Ue(l),c,u)}class cl extends lo{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof cl}}class th extends lo{_toFieldTransform(t){return new Vy(t.path,new ji)}isEqual(t){return t instanceof th}}class eh extends lo{constructor(t,n){super(t),this.Fc=n}_toFieldTransform(t){const n=new zi(t.serializer,Ry(t.serializer,this.Fc));return new Vy(t.path,n)}isEqual(t){return t instanceof eh&&this.Fc===t.Fc}}function $2(e,t,n,s){const r=e.Cc(1,t,n);nh("Data must be an object, but it was:",r,s);const i=[],o=Ue.empty();Is(s,(c,u)=>{const h=sh(t,c,n);u=qn(u);const d=r.yc(h);if(u instanceof cl)i.push(h);else{const m=ul(u,d);m!=null&&(i.push(h),o.set(h,m))}});const l=new We(i);return new g_(o,l,r.fieldTransforms)}function j2(e,t,n,s,r,i){const o=e.Cc(1,t,n),l=[Gc(t,s,n)],c=[r];if(i.length%2!=0)throw new it(q.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)l.push(Gc(t,i[m])),c.push(i[m+1]);const u=[],h=Ue.empty();for(let m=l.length-1;m>=0;--m)if(!E_(u,l[m])){const y=l[m];let b=c[m];b=qn(b);const P=o.yc(y);if(b instanceof cl)u.push(y);else{const x=ul(b,P);x!=null&&(u.push(y),h.set(y,x))}}const d=new We(u);return new g_(h,d,o.fieldTransforms)}function ul(e,t){if(w_(e=qn(e)))return nh("Unsupported field value:",t,e),v_(e,t);if(e instanceof lo)return function(s,r){if(!y_(r.Ac))throw r.Sc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(s,r){const i=[];let o=0;for(const l of s){let c=ul(l,r.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(e,t)}return function(s,r){if((s=qn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return Ry(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=jt.fromDate(s);return{timestampValue:ya(r.serializer,i)}}if(s instanceof jt){const i=new jt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:ya(r.serializer,i)}}if(s instanceof An)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Ze)return{bytesValue:Uy(r.serializer,s._byteString)};if(s instanceof ie){const i=r.databaseId,o=s.firestore._databaseId;if(!o.isEqual(i))throw r.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Lu(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof In)return function(o,l){return{mapValue:{fields:{[fy]:{stringValue:dy},[pa]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Sc("VectorValues must only contain numeric values.");return Nu(l.serializer,u)})}}}}}}(s,r);throw r.Sc(`Unsupported field value: ${Ru(s)}`)}(e,t)}function v_(e,t){const n={};return oy(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Is(e,(s,r)=>{const i=ul(r,t.mc(s));i!=null&&(n[s]=i)}),{mapValue:{fields:n}}}function w_(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof jt||e instanceof An||e instanceof Ze||e instanceof ie||e instanceof lo||e instanceof In)}function nh(e,t,n){if(!w_(n)||!ry(n)){const s=Ru(n);throw s==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+s)}}function Gc(e,t,n){if((t=qn(t))instanceof ll)return t._internalPath;if(typeof t=="string")return sh(e,t);throw Ea("Field path arguments must be of type string or ",e,!1,void 0,n)}const q2=new RegExp("[~\\*/\\[\\]]");function sh(e,t,n){if(t.search(q2)>=0)throw Ea(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new ll(...t.split("."))._internalPath}catch{throw Ea(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Ea(e,t,n,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let l=`Function ${t}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${s}`),o&&(c+=` in document ${r}`),c+=")"),new it(q.INVALID_ARGUMENT,l+e+c)}function E_(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(t,n,s,r,i){this._firestore=t,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ie(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new H2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(T_("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class H2 extends b_{data(){return super.data()}}function T_(e,t){return typeof t=="string"?sh(e,t):t instanceof ll?t._internalPath:t._delegate._internalPath}class z2{convertValue(t,n="none"){switch(ws(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Zt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(vs(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw mt(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const s={};return Is(t,(r,i)=>{s[r]=this.convertValue(i,n)}),s}convertVectorValue(t){var s,r,i;const n=(i=(r=(s=t.fields)==null?void 0:s[pa].arrayValue)==null?void 0:r.values)==null?void 0:i.map(o=>Zt(o.doubleValue));return new In(n)}convertGeoPoint(t){return new An(Zt(t.latitude),Zt(t.longitude))}convertArray(t,n){return(t.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(t,n){switch(n){case"previous":const s=Xa(t);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Ui(t));default:return null}}convertTimestamp(t){const n=_s(t);return new jt(n.seconds,n.nanos)}convertDocumentKey(t,n){const s=Gt.fromString(t);Nt(zy(s),9688,{name:t});const r=new Bi(s.get(1),s.get(3)),i=new ut(s.popFirst(5));return r.isEqual(n)||Kn(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K2(e,t,n){let s;return s=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,s}class ai{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Ws extends b_{constructor(t,n,s,r,i,o){super(t,n,s,r,o),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Qo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const s=this._document.data.field(T_("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new it(q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=Ws._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ws._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ws._jsonSchema={type:se("string",Ws._jsonSchemaVersion),bundleSource:se("string","DocumentSnapshot"),bundleName:se("string"),bundle:se("string")};class Qo extends Ws{data(t={}){return super.data(t)}}class Ai{constructor(t,n,s,r){this._firestore=t,this._userDataWriter=n,this._snapshot=r,this.metadata=new ai(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(s=>{t.call(n,new Qo(this._firestore,this._userDataWriter,s.key,s,new ai(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new it(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(l=>{const c=new Qo(r._firestore,r._userDataWriter,l.doc.key,l.doc,new ai(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new Qo(r._firestore,r._userDataWriter,l.doc.key,l.doc,new ai(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let u=-1,h=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:G2(l.type),doc:c,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new it(q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Ai._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Su.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],r=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),s.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),r.push(i.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function G2(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return mt(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(e){e=Xs(e,ie);const t=Xs(e.firestore,al);return D2(m_(t),e._key).then(n=>Q2(t,e,n))}Ai._jsonSchemaVersion="firestore/querySnapshot/1.0",Ai._jsonSchema={type:se("string",Ai._jsonSchemaVersion),bundleSource:se("string","QuerySnapshot"),bundleName:se("string"),bundle:se("string")};class W2 extends z2{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ze(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new ie(this.firestore,null,n)}}function Ee(e,t,n){e=Xs(e,ie);const s=Xs(e.firestore,al),r=K2(e.converter,t,n);return A_(s,[B2(__(s),"setDoc",e._key,r,e.converter!==null,n).toMutation(e._key,bn.none())])}function Mn(e,t,n,...s){e=Xs(e,ie);const r=Xs(e.firestore,al),i=__(r);let o;return o=typeof(t=qn(t))=="string"||t instanceof ll?j2(i,"updateDoc",e._key,t,n,s):$2(i,"updateDoc",e._key,t),A_(r,[o.toMutation(e._key,bn.exists(!0))])}function A_(e,t){return function(s,r){const i=new ds;return s.asyncQueue.enqueueAndForget(async()=>v2(await k2(s),r,i)),i.promise}(m_(e),t)}function Q2(e,t,n){const s=n.docs.get(t._key),r=new W2(e);return new Ws(e,r,t._key,s,new ai(n.hasPendingWrites,n.fromCache),t.converter)}function Bt(){return new th("serverTimestamp")}function ze(e){return new eh("increment",e)}(function(t,n=!0){(function(r){Or=r})(TA),gs(new Hn("firestore",(s,{instanceIdentifier:r,options:i})=>{const o=s.getProvider("app").getImmediate(),l=new al(new MA(s.getProvider("auth-internal")),new UA(o,s.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new it(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bi(u.options.projectId,h)}(o,r),o);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),wn(Dd,Nd,t),wn(Dd,Nd,"esm2020")})();var J2="firebase",X2="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wn(J2,X2,"app");const I_="@firebase/installations",rh="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_=1e4,R_=`w:${rh}`,C_="FIS_v2",Y2="https://firebaseinstallations.googleapis.com/v1",Z2=60*60*1e3,tR="installations",eR="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Zs=new Wa(tR,eR,nR);function P_(e){return e instanceof As&&e.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x_({projectId:e}){return`${Y2}/projects/${e}/installations`}function k_(e){return{token:e.token,requestStatus:2,expiresIn:rR(e.expiresIn),creationTime:Date.now()}}async function V_(e,t){const s=(await t.json()).error;return Zs.create("request-failed",{requestName:e,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function D_({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function sR(e,{refreshToken:t}){const n=D_(e);return n.append("Authorization",iR(t)),n}async function N_(e){const t=await e();return t.status>=500&&t.status<600?e():t}function rR(e){return Number(e.replace("s","000"))}function iR(e){return`${C_} ${e}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oR({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const s=x_(e),r=D_(e),i=t.getImmediate({optional:!0});if(i){const u=await i.getHeartbeatsHeader();u&&r.append("x-firebase-client",u)}const o={fid:n,authVersion:C_,appId:e.appId,sdkVersion:R_},l={method:"POST",headers:r,body:JSON.stringify(o)},c=await N_(()=>fetch(s,l));if(c.ok){const u=await c.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:k_(u.authToken)}}else throw await V_("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O_(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aR(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR=/^[cdef][\w-]{21}$/,Wc="";function cR(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const n=uR(e);return lR.test(n)?n:Wc}catch{return Wc}}function uR(e){return aR(e).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hl(e){return`${e.appName}!${e.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M_=new Map;function L_(e,t){const n=hl(e);F_(n,t),hR(n,t)}function F_(e,t){const n=M_.get(e);if(n)for(const s of n)s(t)}function hR(e,t){const n=fR();n&&n.postMessage({key:e,fid:t}),dR()}let Hs=null;function fR(){return!Hs&&"BroadcastChannel"in self&&(Hs=new BroadcastChannel("[Firebase] FID Change"),Hs.onmessage=e=>{F_(e.data.key,e.data.fid)}),Hs}function dR(){M_.size===0&&Hs&&(Hs.close(),Hs=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pR="firebase-installations-database",mR=1,tr="firebase-installations-store";let tc=null;function ih(){return tc||(tc=zg(pR,mR,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(tr)}}})),tc}async function ba(e,t){const n=hl(e),r=(await ih()).transaction(tr,"readwrite"),i=r.objectStore(tr),o=await i.get(n);return await i.put(t,n),await r.done,(!o||o.fid!==t.fid)&&L_(e,t.fid),t}async function U_(e){const t=hl(e),s=(await ih()).transaction(tr,"readwrite");await s.objectStore(tr).delete(t),await s.done}async function fl(e,t){const n=hl(e),r=(await ih()).transaction(tr,"readwrite"),i=r.objectStore(tr),o=await i.get(n),l=t(o);return l===void 0?await i.delete(n):await i.put(l,n),await r.done,l&&(!o||o.fid!==l.fid)&&L_(e,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oh(e){let t;const n=await fl(e.appConfig,s=>{const r=gR(s),i=yR(e,r);return t=i.registrationPromise,i.installationEntry});return n.fid===Wc?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}function gR(e){const t=e||{fid:cR(),registrationStatus:0};return B_(t)}function yR(e,t){if(t.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(Zs.create("app-offline"));return{installationEntry:t,registrationPromise:r}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},s=_R(e,n);return{installationEntry:n,registrationPromise:s}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:vR(e)}:{installationEntry:t}}async function _R(e,t){try{const n=await oR(e,t);return ba(e.appConfig,n)}catch(n){throw P_(n)&&n.customData.serverCode===409?await U_(e.appConfig):await ba(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}async function vR(e){let t=await Rp(e.appConfig);for(;t.registrationStatus===1;)await O_(100),t=await Rp(e.appConfig);if(t.registrationStatus===0){const{installationEntry:n,registrationPromise:s}=await oh(e);return s||n}return t}function Rp(e){return fl(e,t=>{if(!t)throw Zs.create("installation-not-found");return B_(t)})}function B_(e){return wR(e)?{fid:e.fid,registrationStatus:0}:e}function wR(e){return e.registrationStatus===1&&e.registrationTime+S_<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ER({appConfig:e,heartbeatServiceProvider:t},n){const s=bR(e,n),r=sR(e,n),i=t.getImmediate({optional:!0});if(i){const u=await i.getHeartbeatsHeader();u&&r.append("x-firebase-client",u)}const o={installation:{sdkVersion:R_,appId:e.appId}},l={method:"POST",headers:r,body:JSON.stringify(o)},c=await N_(()=>fetch(s,l));if(c.ok){const u=await c.json();return k_(u)}else throw await V_("Generate Auth Token",c)}function bR(e,{fid:t}){return`${x_(e)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ah(e,t=!1){let n;const s=await fl(e.appConfig,i=>{if(!$_(i))throw Zs.create("not-registered");const o=i.authToken;if(!t&&IR(o))return i;if(o.requestStatus===1)return n=TR(e,t),i;{if(!navigator.onLine)throw Zs.create("app-offline");const l=RR(i);return n=AR(e,l),l}});return n?await n:s.authToken}async function TR(e,t){let n=await Cp(e.appConfig);for(;n.authToken.requestStatus===1;)await O_(100),n=await Cp(e.appConfig);const s=n.authToken;return s.requestStatus===0?ah(e,t):s}function Cp(e){return fl(e,t=>{if(!$_(t))throw Zs.create("not-registered");const n=t.authToken;return CR(n)?{...t,authToken:{requestStatus:0}}:t})}async function AR(e,t){try{const n=await ER(e,t),s={...t,authToken:n};return await ba(e.appConfig,s),n}catch(n){if(P_(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await U_(e.appConfig);else{const s={...t,authToken:{requestStatus:0}};await ba(e.appConfig,s)}throw n}}function $_(e){return e!==void 0&&e.registrationStatus===2}function IR(e){return e.requestStatus===2&&!SR(e)}function SR(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+Z2}function RR(e){const t={requestStatus:1,requestTime:Date.now()};return{...e,authToken:t}}function CR(e){return e.requestStatus===1&&e.requestTime+S_<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PR(e){const t=e,{installationEntry:n,registrationPromise:s}=await oh(t);return s?s.catch(console.error):ah(t).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xR(e,t=!1){const n=e;return await kR(n),(await ah(n,t)).token}async function kR(e){const{registrationPromise:t}=await oh(e);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(e){if(!e||!e.options)throw ec("App Configuration");if(!e.name)throw ec("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw ec(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function ec(e){return Zs.create("missing-app-config-values",{valueName:e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j_="installations",DR="installations-internal",NR=e=>{const t=e.getProvider("app").getImmediate(),n=VR(t),s=no(t,"heartbeat");return{app:t,appConfig:n,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},OR=e=>{const t=e.getProvider("app").getImmediate(),n=no(t,j_).getImmediate();return{getId:()=>PR(n),getToken:r=>xR(n,r)}};function MR(){gs(new Hn(j_,NR,"PUBLIC")),gs(new Hn(DR,OR,"PRIVATE"))}MR();wn(I_,rh);wn(I_,rh,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ta="analytics",LR="firebase_id",FR="origin",UR=60*1e3,BR="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",lh="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const je=new Tu("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Qe=new Wa("analytics","Analytics",$R);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jR(e){if(!e.startsWith(lh)){const t=Qe.create("invalid-gtag-resource",{gtagURL:e});return je.warn(t.message),""}return e}function q_(e){return Promise.all(e.map(t=>t.catch(n=>n)))}function qR(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}function HR(e,t){const n=qR("firebase-js-sdk-policy",{createScriptURL:jR}),s=document.createElement("script"),r=`${lh}?l=${e}&id=${t}`;s.src=n?n==null?void 0:n.createScriptURL(r):r,s.async=!0,document.head.appendChild(s)}function zR(e){let t=[];return Array.isArray(window[e])?t=window[e]:window[e]=t,t}async function KR(e,t,n,s,r,i){const o=s[r];try{if(o)await t[o];else{const c=(await q_(n)).find(u=>u.measurementId===r);c&&await t[c.appId]}}catch(l){je.error(l)}e("config",r,i)}async function GR(e,t,n,s,r){try{let i=[];if(r&&r.send_to){let o=r.send_to;Array.isArray(o)||(o=[o]);const l=await q_(n);for(const c of o){const u=l.find(d=>d.measurementId===c),h=u&&t[u.appId];if(h)i.push(h);else{i=[];break}}}i.length===0&&(i=Object.values(t)),await Promise.all(i),e("event",s,r||{})}catch(i){je.error(i)}}function WR(e,t,n,s){async function r(i,...o){try{if(i==="event"){const[l,c]=o;await GR(e,t,n,l,c)}else if(i==="config"){const[l,c]=o;await KR(e,t,n,s,l,c)}else if(i==="consent"){const[l,c]=o;e("consent",l,c)}else if(i==="get"){const[l,c,u]=o;e("get",l,c,u)}else if(i==="set"){const[l]=o;e("set",l)}else e(i,...o)}catch(l){je.error(l)}}return r}function QR(e,t,n,s,r){let i=function(...o){window[s].push(arguments)};return window[r]&&typeof window[r]=="function"&&(i=window[r]),window[r]=WR(i,e,t,n),{gtagCore:i,wrappedGtag:window[r]}}function JR(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(lh)&&n.src.includes(e))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR=30,YR=1e3;class ZR{constructor(t={},n=YR){this.throttleMetadata=t,this.intervalMillis=n}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,n){this.throttleMetadata[t]=n}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}}const H_=new ZR;function tC(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function eC(e){var o;const{appId:t,apiKey:n}=e,s={method:"GET",headers:tC(n)},r=BR.replace("{app-id}",t),i=await fetch(r,s);if(i.status!==200&&i.status!==304){let l="";try{const c=await i.json();(o=c.error)!=null&&o.message&&(l=c.error.message)}catch{}throw Qe.create("config-fetch-failed",{httpStatus:i.status,responseMessage:l})}return i.json()}async function nC(e,t=H_,n){const{appId:s,apiKey:r,measurementId:i}=e.options;if(!s)throw Qe.create("no-app-id");if(!r){if(i)return{measurementId:i,appId:s};throw Qe.create("no-api-key")}const o=t.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new iC;return setTimeout(async()=>{l.abort()},UR),z_({appId:s,apiKey:r,measurementId:i},o,l,t)}async function z_(e,{throttleEndTimeMillis:t,backoffCount:n},s,r=H_){var l;const{appId:i,measurementId:o}=e;try{await sC(s,t)}catch(c){if(o)return je.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:i,measurementId:o};throw c}try{const c=await eC(e);return r.deleteThrottleMetadata(i),c}catch(c){const u=c;if(!rC(u)){if(r.deleteThrottleMetadata(i),o)return je.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:i,measurementId:o};throw c}const h=Number((l=u==null?void 0:u.customData)==null?void 0:l.httpStatus)===503?Td(n,r.intervalMillis,XR):Td(n,r.intervalMillis),d={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return r.setThrottleMetadata(i,d),je.debug(`Calling attemptFetch again in ${h} millis`),z_(e,d,s,r)}}function sC(e,t){return new Promise((n,s)=>{const r=Math.max(t-Date.now(),0),i=setTimeout(n,r);e.addEventListener(()=>{clearTimeout(i),s(Qe.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function rC(e){if(!(e instanceof As)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return t===429||t===500||t===503||t===504}class iC{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}async function oC(e,t,n,s,r){if(r&&r.global){e("event",n,s);return}else{const i=await t,o={...s,send_to:i};e("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aC(){if($g())try{await jg()}catch(e){return je.warn(Qe.create("indexeddb-unavailable",{errorInfo:e==null?void 0:e.toString()}).message),!1}else return je.warn(Qe.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function lC(e,t,n,s,r,i,o){const l=nC(e);l.then(m=>{n[m.measurementId]=m.appId,e.options.measurementId&&m.measurementId!==e.options.measurementId&&je.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>je.error(m)),t.push(l);const c=aC().then(m=>{if(m)return s.getId()}),[u,h]=await Promise.all([l,c]);JR(i)||HR(i,u.measurementId),r("js",new Date);const d=(o==null?void 0:o.config)??{};return d[FR]="firebase",d.update=!0,h!=null&&(d[LR]=h),r("config",u.measurementId,d),u.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(t){this.app=t}_delete(){return delete Ii[this.app.options.appId],Promise.resolve()}}let Ii={},Pp=[];const xp={};let nc="dataLayer",uC="gtag",kp,K_,Vp=!1;function hC(){const e=[];if(mT()&&e.push("This is a browser extension environment."),yT()||e.push("Cookies are not available."),e.length>0){const t=e.map((s,r)=>`(${r+1}) ${s}`).join(" "),n=Qe.create("invalid-analytics-context",{errorInfo:t});je.warn(n.message)}}function fC(e,t,n){hC();const s=e.options.appId;if(!s)throw Qe.create("no-app-id");if(!e.options.apiKey)if(e.options.measurementId)je.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Qe.create("no-api-key");if(Ii[s]!=null)throw Qe.create("already-exists",{id:s});if(!Vp){zR(nc);const{wrappedGtag:i,gtagCore:o}=QR(Ii,Pp,xp,nc,uC);K_=i,kp=o,Vp=!0}return Ii[s]=lC(e,Pp,xp,t,kp,nc,n),new cC(e)}function dC(e=Gg()){e=qn(e);const t=no(e,Ta);return t.isInitialized()?t.getImmediate():pC(e)}function pC(e,t={}){const n=no(e,Ta);if(n.isInitialized()){const r=n.getImmediate();if(Mi(t,n.getOptions()))return r;throw Qe.create("already-initialized")}return n.initialize({options:t})}function mC(e,t,n,s){e=qn(e),oC(K_,Ii[e.app.options.appId],t,n,s).catch(r=>je.error(r))}const Dp="@firebase/analytics",Np="0.10.18";function gC(){gs(new Hn(Ta,(t,{options:n})=>{const s=t.getProvider("app").getImmediate(),r=t.getProvider("installations-internal").getImmediate();return fC(s,r,n)},"PUBLIC")),gs(new Hn("analytics-internal",e,"PRIVATE")),wn(Dp,Np),wn(Dp,Np,"esm2020");function e(t){try{const n=t.getProvider(Ta).getImmediate();return{logEvent:(s,r,i)=>mC(n,s,r,i)}}catch(n){throw Qe.create("interop-component-reg-failed",{reason:n})}}}gC();const yC={apiKey:"AIzaSyDXWUfod0b1iucUsp4rBpJ397AyB-EvYs4",authDomain:"maibot-pluginmarket.firebaseapp.com",projectId:"maibot-pluginmarket",storageBucket:"maibot-pluginmarket.firebasestorage.app",messagingSenderId:"992003266389",appId:"1:992003266389:web:cf4f80fa559ca02ef7c1dc",measurementId:"G-VW7EWVKKFQ"},G_=Kg(yC),on=O2(G_);dC(G_);const Bs=class Bs{constructor(){Vn(this,"userId");Vn(this,"fingerprint");this.fingerprint=this.generateFingerprint(),this.userId=this.getOrCreateUserId()}static getInstance(){return Bs.instance||(Bs.instance=new Bs),Bs.instance}generateFingerprint(){const t=document.createElement("canvas"),n=t.getContext("2d");n&&(n.textBaseline="top",n.font="14px Arial",n.fillText("Browser fingerprint",2,2));const s=[navigator.userAgent,navigator.language,screen.width+"x"+screen.height,screen.colorDepth,new Date().getTimezoneOffset(),!!window.sessionStorage,!!window.localStorage,t.toDataURL()].join("|");return this.hashString(s)}hashString(t){let n=0;for(let s=0;s<t.length;s++){const r=t.charCodeAt(s);n=(n<<5)-n+r,n=n&n}return Math.abs(n).toString(36)}getOrCreateUserId(){let t=localStorage.getItem("plugin_market_user_id")||sessionStorage.getItem("plugin_market_user_id");if(!t){const n=Date.now(),s=Math.random().toString(36).substr(2,9),r=this.fingerprint.substr(0,8);t=`user_${n}_${s}_${r}`,localStorage.setItem("plugin_market_user_id",t),sessionStorage.setItem("plugin_market_user_id",t),localStorage.setItem("plugin_market_user_created",new Date().toISOString())}return t}getUserId(){return this.userId}getFingerprint(){return this.fingerprint}getUserSession(){const t=localStorage.getItem("plugin_market_user_created"),n=Date.now();return{userId:this.userId,fingerprint:this.fingerprint,isNewUser:!t||Date.now()-new Date(t).getTime()<24*60*60*1e3,createdAt:t,sessionStart:n}}isSameUser(t){if(this.userId===t)return!0;const n=this.userId.split("_").pop(),s=t.split("_").pop();return n===s}resetUserId(){return localStorage.removeItem("plugin_market_user_id"),sessionStorage.removeItem("plugin_market_user_id"),localStorage.removeItem("plugin_market_user_created"),this.userId=this.getOrCreateUserId(),this.userId}getUserStats(){const t=parseInt(localStorage.getItem("plugin_market_sessions")||"0")+1,n=localStorage.getItem("plugin_market_last_visit");return localStorage.setItem("plugin_market_sessions",t.toString()),localStorage.setItem("plugin_market_last_visit",new Date().toISOString()),{totalSessions:t,lastVisit:n,userAgent:navigator.userAgent,language:navigator.language,timezone:new Date().getTimezoneOffset()}}};Vn(Bs,"instance");let Qc=Bs;const Op=Qc.getInstance(),$s=class $s{constructor(){Vn(this,"userId");this.userId=Op.getUserId()}static getInstance(){return $s.instance||($s.instance=new $s),$s.instance}async recordSiteVisit(){var t;try{const n=new Date().toISOString().split("T")[0],s=rn(on,"site_stats","general"),r=rn(on,"user_stats",this.userId);console.log("Recording site visit for user:",this.userId);const i=await mn(r),o=!i.exists()||((t=i.data())==null?void 0:t.lastVisitDate)!==n,l=Op.getUserSession();await Ee(r,{lastVisitDate:n,lastUpdated:Bt(),fingerprint:l.fingerprint,userAgent:navigator.userAgent,isNewUser:l.isNewUser},{merge:!0}),o&&(console.log("First visit today, updating site stats"),(await mn(s)).exists()?await Ee(s,{totalVisits:ze(1),dailyVisits:ze(1),lastVisitDate:n,lastUpdated:Bt()},{merge:!0}):await Ee(s,{totalVisits:1,dailyVisits:1,lastVisitDate:n,lastUpdated:Bt()})),console.log("Site visit recorded successfully")}catch(n){console.error("Error recording site visit:",n),console.error("Error details:",{userId:this.userId,errorCode:n==null?void 0:n.code,errorMessage:n==null?void 0:n.message})}}async getPluginStats(t){var n;try{const s=rn(on,"plugin_stats",t),r=await mn(s);if(r.exists()){const i=r.data();return{id:t,likes:i.likes||0,dislikes:i.dislikes||0,clickCount:i.clickCount||0,lastUpdated:((n=i.lastUpdated)==null?void 0:n.toDate())||new Date}}else return await Ee(s,{...{likes:0,dislikes:0,clickCount:0},lastUpdated:Bt()}),{id:t,likes:0,dislikes:0,clickCount:0,lastUpdated:new Date}}catch(s){return console.error("Error getting plugin stats:",s),{id:t,likes:0,dislikes:0,clickCount:0,lastUpdated:new Date}}}async likePlugin(t){var n;try{const s=rn(on,"plugin_stats",t),r=rn(on,"user_actions",`${this.userId}_${t}`);(await mn(s)).exists()||await Ee(s,{likes:0,dislikes:0,clickCount:0,lastUpdated:Bt()});const o=await mn(r);if(o.exists()){const l=(n=o.data())==null?void 0:n.action;l==="like"?(await Mn(s,{likes:ze(-1),lastUpdated:Bt()}),await Ee(r,{action:null,lastUpdated:Bt()},{merge:!0})):l==="dislike"?(await Mn(s,{likes:ze(1),dislikes:ze(-1),lastUpdated:Bt()}),await Ee(r,{action:"like",lastUpdated:Bt()},{merge:!0})):(await Mn(s,{likes:ze(1),lastUpdated:Bt()}),await Ee(r,{action:"like",lastUpdated:Bt()},{merge:!0}))}else await Mn(s,{likes:ze(1),lastUpdated:Bt()}),await Ee(r,{action:"like",lastUpdated:Bt()});console.log(`Plugin ${t} liked successfully`)}catch(s){console.error("Error liking plugin:",s),console.error("Error details:",{userId:this.userId,pluginId:t,errorCode:s==null?void 0:s.code,errorMessage:s==null?void 0:s.message})}}async dislikePlugin(t){var n;try{const s=rn(on,"plugin_stats",t),r=rn(on,"user_actions",`${this.userId}_${t}`);(await mn(s)).exists()||await Ee(s,{likes:0,dislikes:0,clickCount:0,lastUpdated:Bt()});const o=await mn(r);if(o.exists()){const l=(n=o.data())==null?void 0:n.action;l==="dislike"?(await Mn(s,{dislikes:ze(-1),lastUpdated:Bt()}),await Ee(r,{action:null,lastUpdated:Bt()},{merge:!0})):l==="like"?(await Mn(s,{likes:ze(-1),dislikes:ze(1),lastUpdated:Bt()}),await Ee(r,{action:"dislike",lastUpdated:Bt()},{merge:!0})):(await Mn(s,{dislikes:ze(1),lastUpdated:Bt()}),await Ee(r,{action:"dislike",lastUpdated:Bt()},{merge:!0}))}else await Mn(s,{dislikes:ze(1),lastUpdated:Bt()}),await Ee(r,{action:"dislike",lastUpdated:Bt()});console.log(`Plugin ${t} disliked successfully`)}catch(s){console.error("Error disliking plugin:",s),console.error("Error details:",{userId:this.userId,pluginId:t,errorCode:s==null?void 0:s.code,errorMessage:s==null?void 0:s.message})}}async recordPluginClick(t,n="homepage"){try{const s=rn(on,"plugin_stats",t),r=rn(on,"plugin_clicks",`${t}_${Date.now()}_${Math.random().toString(36).substr(2,5)}`);(await mn(s)).exists()||await Ee(s,{likes:0,dislikes:0,clickCount:0,lastUpdated:Bt()}),await Mn(s,{clickCount:ze(1),lastUpdated:Bt()}),await Ee(r,{pluginId:t,userId:this.userId,clickType:n,timestamp:Bt(),userAgent:navigator.userAgent,referrer:document.referrer}),console.log(`Plugin ${t} click recorded successfully`)}catch(s){console.error("Error recording plugin click:",s),console.error("Error details:",{userId:this.userId,pluginId:t,clickType:n,errorCode:s==null?void 0:s.code,errorMessage:s==null?void 0:s.message})}}async getUserAction(t){var n;try{const s=`${this.userId}_${t}`,r=rn(on,"user_actions",s),i=await mn(r);if(i.exists()){const o=((n=i.data())==null?void 0:n.action)||null;return console.log("User action found:",o),o}return console.log("No user action found, returning null"),null}catch(s){return console.error("Error getting user action:",s),console.error("Error details:",{userId:this.userId,pluginId:t,actionId:`${this.userId}_${t}`,errorCode:s==null?void 0:s.code,errorMessage:s==null?void 0:s.message}),null}}async getSiteStats(){var t;try{const n=rn(on,"site_stats","general"),s=await mn(n);if(s.exists()){const r=s.data();return{totalVisits:r.totalVisits||0,dailyVisits:r.dailyVisits||0,lastVisitDate:r.lastVisitDate||"",lastUpdated:((t=r.lastUpdated)==null?void 0:t.toDate())||new Date}}else return{totalVisits:0,dailyVisits:0,lastVisitDate:"",lastUpdated:new Date}}catch(n){return console.error("Error getting site stats:",n),{totalVisits:0,dailyVisits:0,lastVisitDate:"",lastUpdated:new Date}}}async getBatchPluginStats(t){const n={};try{const s=t.map(i=>this.getPluginStats(i));(await Promise.all(s)).forEach(i=>{n[i.id]=i})}catch(s){console.error("Error getting batch plugin stats:",s)}return n}getUserId(){return this.userId}};Vn($s,"instance");let Jc=$s;const as=Jc.getInstance(),_C={class:"card-body flex flex-col h-full"},vC={class:"flex items-start justify-between mb-2"},wC={class:"card-title text-lg font-bold text-primary truncate flex-1 mr-2"},EC={class:"badge badge-outline badge-sm"},bC={class:"flex items-center gap-2 mb-3"},TC={class:"avatar placeholder"},AC={class:"bg-primary text-primary-content rounded-full w-6 h-6"},IC={class:"text-xs"},SC={class:"text-sm text-base-content/70"},RC={class:"text-sm text-base-content/80 mb-3 line-clamp-3 flex-grow"},CC={class:"flex flex-wrap gap-1 mb-3 min-h-[2rem]"},PC={class:"badge badge-primary badge-sm"},xC={class:"text-xs text-base-content/60 mb-3 h-4"},kC={key:0},VC={key:1},DC={class:"flex items-center justify-between mb-3 text-xs text-base-content/60"},NC={class:"flex items-center gap-2"},OC=["disabled"],MC=["disabled"],LC={class:"flex items-center gap-1"},FC={class:"card-actions justify-end mt-auto"},UC=qe({__name:"PluginCard",props:{plugin:{}},emits:["show-detail"],setup(e){const t=e,n=Jt(!1),s=Xt(()=>{var h;return((h=t.plugin.stats)==null?void 0:h.userAction)==="like"}),r=Xt(()=>{var h;return((h=t.plugin.stats)==null?void 0:h.userAction)==="dislike"}),i=Xt(()=>(t.plugin.manifest.keywords||[]).slice(0,3)),o=h=>h.split(" ").map(d=>d.charAt(0)).join("").toUpperCase().slice(0,2),l=async()=>{if(!n.value){n.value=!0;try{await as.likePlugin(t.plugin.id),t.plugin.stats||(t.plugin.stats={likes:0,dislikes:0,clickCount:0}),t.plugin.stats.userAction==="like"?(t.plugin.stats.likes--,t.plugin.stats.userAction=null):t.plugin.stats.userAction==="dislike"?(t.plugin.stats.likes++,t.plugin.stats.dislikes--,t.plugin.stats.userAction="like"):(t.plugin.stats.likes++,t.plugin.stats.userAction="like")}catch(h){console.error("Error handling like:",h)}finally{n.value=!1}}},c=async()=>{if(!n.value){n.value=!0;try{await as.dislikePlugin(t.plugin.id),t.plugin.stats||(t.plugin.stats={likes:0,dislikes:0,clickCount:0}),t.plugin.stats.userAction==="dislike"?(t.plugin.stats.dislikes--,t.plugin.stats.userAction=null):t.plugin.stats.userAction==="like"?(t.plugin.stats.likes--,t.plugin.stats.dislikes++,t.plugin.stats.userAction="dislike"):(t.plugin.stats.dislikes++,t.plugin.stats.userAction="dislike")}catch(h){console.error("Error handling dislike:",h)}finally{n.value=!1}}},u=async(h,d="homepage")=>{try{await as.recordPluginClick(t.plugin.id,d),t.plugin.stats||(t.plugin.stats={likes:0,dislikes:0,clickCount:0}),t.plugin.stats.clickCount++,window.open(h,"_blank","noopener,noreferrer")}catch(m){console.error("Error recording click:",m),window.open(h,"_blank","noopener,noreferrer")}};return Pn(async()=>{try{const h=await as.getUserAction(t.plugin.id);t.plugin.stats&&(t.plugin.stats.userAction=h)}catch(h){console.error("Error getting user action:",h)}}),(h,d)=>{var m,y,b;return lt(),dt("div",{class:"card bg-base-100 shadow-lg card-hover cursor-pointer transform transition-all duration-300 hover:shadow-xl hover:scale-105 h-full",onClick:d[2]||(d[2]=P=>h.$emit("show-detail",h.plugin))},[R("div",_C,[R("div",vC,[R("h2",wC,_t(h.plugin.manifest.name),1),R("div",EC," v"+_t(h.plugin.manifest.version),1)]),R("div",bC,[R("div",TC,[R("div",AC,[R("span",IC,_t(o(h.plugin.manifest.author.name)),1)])]),R("span",SC,_t(h.plugin.manifest.author.name),1)]),R("p",RC,_t(h.plugin.manifest.description),1),R("div",CC,[R("div",PC,_t(h.plugin.categoryDisplay),1),(lt(!0),dt(Ae,null,Ji(i.value,P=>(lt(),dt("div",{key:P,class:"badge badge-ghost badge-sm"},_t(P),1))),128))]),R("div",xC,[R("span",null,"兼容版本: "+_t(h.plugin.manifest.host_application.min_version),1),h.plugin.manifest.host_application.max_version?(lt(),dt("span",kC," - "+_t(h.plugin.manifest.host_application.max_version),1)):(lt(),dt("span",VC," - 最新版本"))]),R("div",DC,[R("div",NC,[R("button",{onClick:mr(l,["stop"]),class:tn(["btn btn-ghost btn-xs gap-1 transition-colors",{"text-success":s.value}]),disabled:n.value},[d[3]||(d[3]=R("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3",fill:"currentColor",viewBox:"0 0 24 24"},[R("path",{d:"M7.493 18.75c-.425 0-.82-.236-.975-.632A7.48 7.48 0 016 15.375c0-1.75.599-3.358 1.602-4.634.151-.192.373-.309.6-.397.473-.183.89-.514 1.212-.924a9.042 9.042 0 012.861-2.4c.723-.384 1.35-.956 1.653-1.715a4.498 4.498 0 00.322-1.672V3a.75.75 0 01.75-.75 2.25 2.25 0 012.25 2.25c0 1.152-.26 2.243-.723 3.218-.266.558.107 1.282.725 1.282h3.126c1.026 0 1.945.694 2.054 1.715.045.422.068.85.068 1.285a11.95 11.95 0 01-2.649 7.521c-.388.482-.987.729-1.605.729H14.23c-.483 0-.964-.078-1.423-.23l-3.114-1.04a4.501 4.501 0 00-1.423-.23h-.777zM2.331 10.977a11.969 11.969 0 00-.831 4.398 12 12 0 00.52 3.507c.26.85 1.084 1.368 1.973 1.368H4.9c.445 0 .72-.498.523-.898a8.963 8.963 0 01-.924-3.977c0-1.708.476-3.305 1.302-4.666.245-.403-.028-.959-.5-.959H4.25c-.832 0-1.612.453-1.918 1.227z"})],-1)),Se(" "+_t(((m=h.plugin.stats)==null?void 0:m.likes)||0),1)],10,OC),R("button",{onClick:mr(c,["stop"]),class:tn(["btn btn-ghost btn-xs gap-1 transition-colors",{"text-error":r.value}]),disabled:n.value},[d[4]||(d[4]=R("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3",fill:"currentColor",viewBox:"0 0 24 24"},[R("path",{d:"M15.73 5.25h1.035A7.465 7.465 0 0118 9.375a7.465 7.465 0 01-1.235 4.125h-.148c-.806 0-1.534.446-2.031 1.08a9.04 9.04 0 01-2.861 2.4c-.723.384-1.35.956-1.653 1.715a4.498 4.498 0 00-.322 1.672V21a.75.75 0 01-.75.75 2.25 2.25 0 01-2.25-2.25c0-1.152.26-2.243.723-3.218C7.74 15.724 7.366 15 6.748 15H3.622c-1.026 0-1.945-.694-2.054-1.715A12.134 12.134 0 011.5 12c0-2.848.992-5.464 2.649-7.521C4.537 3.997 5.136 3.75 5.754 3.75h1.317c.483 0 .964.078 1.423.23l3.114 1.04a4.501 4.501 0 001.423.23zM21.669 13.023c.536-1.362.831-2.845.831-4.398 0-1.22-.182-2.398-.52-3.507-.26-.85-1.084-1.368-1.973-1.368H19.1c-.445 0-.72.498-.523.898.591 1.2.924 2.55.924 3.977a8.959 8.959 0 01-1.302 4.666c-.245.403.028.959.5.959h1.053c.832 0 1.612-.453 1.918-1.227z"})],-1)),Se(" "+_t(((y=h.plugin.stats)==null?void 0:y.dislikes)||0),1)],10,MC)]),R("div",LC,[d[5]||(d[5]=R("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[R("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),R("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)),R("span",null,_t(((b=h.plugin.stats)==null?void 0:b.clickCount)||0),1)])]),R("div",FC,[h.plugin.manifest.homepage_url?(lt(),dt("button",{key:0,onClick:d[0]||(d[0]=mr(P=>u(h.plugin.manifest.homepage_url,"homepage"),["stop"])),class:"btn btn-outline btn-sm transition-all duration-200 hover:scale-105"},[...d[6]||(d[6]=[R("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[R("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})],-1),Se(" 主页 ",-1)])])):Ht("",!0),h.plugin.manifest.repository_url?(lt(),dt("button",{key:1,onClick:d[1]||(d[1]=mr(P=>u(h.plugin.manifest.repository_url,"repository"),["stop"])),class:"btn btn-primary btn-sm transition-all duration-200 hover:scale-105"},[...d[7]||(d[7]=[R("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"currentColor",viewBox:"0 0 24 24"},[R("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})],-1),Se(" 源码 ",-1)])])):Ht("",!0)])])])}}}),BC=Qn(UC,[["__scopeId","data-v-8ebd841d"]]),$C={class:"join w-full max-w-md"},jC={class:"relative flex-1"},qC=qe({__name:"SearchBar",props:{modelValue:{}},emits:["update:modelValue","search"],setup(e,{emit:t}){const n=e,s=t,r=Jt(n.modelValue),i=()=>{s("update:modelValue",r.value),s("search",r.value)},o=()=>{r.value="",i()};return cs(()=>n.modelValue,l=>{r.value=l}),(l,c)=>(lt(),dt("div",$C,[R("div",jC,[uu(R("input",{"onUpdate:modelValue":c[0]||(c[0]=u=>r.value=u),type:"text",placeholder:"搜索插件名称、描述、作者或关键词...",class:"input input-bordered join-item w-full pr-10",onInput:i,onKeyup:zw(i,["enter"])},null,544),[[Bw,r.value]]),c[1]||(c[1]=R("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 absolute right-3 top-1/2 transform -translate-y-1/2 text-base-content/40",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[R("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))]),r.value?(lt(),dt("button",{key:0,onClick:o,class:"btn btn-outline join-item",title:"清除搜索"},[...c[2]||(c[2]=[R("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[R("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])):Ht("",!0)]))}}),HC={class:"dropdown dropdown-bottom"},zC={tabindex:"0",role:"button",class:"btn btn-outline"},KC={tabindex:"0",class:"dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-auto min-w-52 max-w-xs overflow-y-auto"},GC=["onClick"],WC={class:"flex-1 text-left"},QC={key:0,class:"badge badge-sm flex-shrink-0 ml-2"},JC=qe({__name:"CategoryFilter",props:{categories:{},plugins:{},modelValue:{}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,s=t,r=Xt(()=>n.modelValue),i=l=>{s("update:modelValue",l)},o=l=>l==="全部"?n.plugins.length:n.plugins.filter(c=>c.categoryDisplay===l).length;return(l,c)=>(lt(),dt("div",HC,[R("div",zC,[c[0]||(c[0]=R("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[R("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.707A1 1 0 013 7V4z"})],-1)),Se(" "+_t(r.value)+" ",1),c[1]||(c[1]=R("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[R("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))]),R("ul",KC,[(lt(!0),dt(Ae,null,Ji(l.categories,u=>(lt(),dt("li",{key:u,class:"w-full"},[R("a",{class:tn([{active:u===r.value},"flex items-center justify-between w-full whitespace-nowrap"]),onClick:h=>i(u)},[R("span",WC,_t(u),1),u!=="全部"?(lt(),dt("span",QC,_t(o(u)),1)):Ht("",!0)],10,GC)]))),128))])]))}}),XC=Qn(JC,[["__scopeId","data-v-75554bb1"]]),YC={class:"flex flex-col sm:flex-row gap-3 items-start sm:items-center"},ZC={class:"flex flex-wrap gap-2 items-center"},t4=["value"],e4={key:0,class:"text-xs text-base-content/60 bg-base-300 px-2 py-1 rounded-full"},n4=qe({__name:"VersionFilter",props:{plugins:{},modelValue:{}},emits:["update:modelValue","version-changed"],setup(e,{emit:t}){const n=e,s=t,r=Jt(n.modelValue),i=(h,d)=>{const m=h.split(".").map(Number),y=d.split(".").map(Number),b=Math.max(m.length,y.length);for(let P=0;P<b;P++){const x=m[P]||0,M=y[P]||0;if(x>M)return 1;if(x<M)return-1}return 0},o=(h,d)=>{const m=h.manifest.host_application.min_version,y=h.manifest.host_application.max_version;return!(i(d,m)<0||y&&i(d,y)>0)},l=Xt(()=>{const h=new Set;return n.plugins.forEach(d=>{const m=d.manifest.host_application.min_version;h.add(m)}),Array.from(h).sort((d,m)=>i(d,m))}),c=Xt(()=>r.value?n.plugins.filter(h=>o(h,r.value)).length:0),u=()=>{s("update:modelValue",r.value),s("version-changed",r.value)};return cs(()=>n.modelValue,h=>{r.value=h}),(h,d)=>(lt(),dt("div",YC,[d[3]||(d[3]=R("label",{class:"text-sm font-medium text-base-content/80 whitespace-nowrap"}," 版本兼容性： ",-1)),R("div",ZC,[uu(R("select",{"onUpdate:modelValue":d[0]||(d[0]=m=>r.value=m),onChange:u,class:"select select-bordered select-sm w-auto min-w-[120px] focus:outline-none focus:ring-2 focus:ring-primary/50"},[d[1]||(d[1]=R("option",{value:""},"全部版本",-1)),(lt(!0),dt(Ae,null,Ji(l.value,m=>(lt(),dt("option",{key:m,value:m},_t(m)+"+ ",9,t4))),128))],544),[[$w,r.value]]),d[2]||(d[2]=R("div",{class:"tooltip tooltip-right","data-tip":"筛选支持指定麦麦版本及以上的插件"},[R("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-base-content/60 cursor-help",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[R("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1))]),r.value&&r.value.trim()?(lt(),dt("div",e4,_t(c.value)+" 个插件支持 ",1)):Ht("",!0)]))}}),s4=Qn(n4,[["__scopeId","data-v-d2016a3c"]]),r4={class:"flex flex-col items-center justify-center py-12"},i4={class:"text-center space-y-2"},o4={class:"text-lg font-medium text-primary animate-pulse"},a4={key:0,class:"w-64 mt-6"},l4=qe({__name:"LoadingSpinner",props:{message:{default:"加载中..."},showProgress:{type:Boolean,default:!1}},setup(e){Sw(r=>({ca4e3296:n.value+"%"}));const t=e,n=Jt(0);let s=null;return Pn(()=>{t.showProgress&&(s=setInterval(()=>{n.value<90&&(n.value+=Math.random()*10)},500))}),Vr(()=>{s&&clearInterval(s)}),(r,i)=>(lt(),dt("div",r4,[i[2]||(i[2]=R("div",{class:"relative mb-6"},[R("div",{class:"w-16 h-16 border-4 border-primary/20 border-t-primary rounded-full animate-spin"}),R("div",{class:"absolute inset-2 w-12 h-12 bg-primary/10 rounded-full animate-pulse"}),R("div",{class:"absolute inset-1/2 w-2 h-2 bg-primary rounded-full transform -translate-x-1/2 -translate-y-1/2 animate-ping"})],-1)),R("div",i4,[R("p",o4,_t(r.message),1),i[0]||(i[0]=R("div",{class:"flex space-x-1 justify-center"},[R("div",{class:"w-2 h-2 bg-primary rounded-full animate-bounce",style:{"animation-delay":"0ms"}}),R("div",{class:"w-2 h-2 bg-primary rounded-full animate-bounce",style:{"animation-delay":"150ms"}}),R("div",{class:"w-2 h-2 bg-primary rounded-full animate-bounce",style:{"animation-delay":"300ms"}})],-1))]),r.showProgress?(lt(),dt("div",a4,[...i[1]||(i[1]=[R("div",{class:"w-full bg-base-300 rounded-full h-2"},[R("div",{class:"bg-primary h-2 rounded-full transition-all duration-300 ease-out loading-progress"})],-1)])])):Ht("",!0)]))}}),c4=Qn(l4,[["__scopeId","data-v-56f61c32"]]),u4={class:"relative w-6 h-6 overflow-hidden"},h4=qe({__name:"ThemeToggle",emits:["theme-changed"],setup(e,{emit:t}){const n=t,s=Jt(!1),r=Jt(!1),i=async()=>{r.value=!0,await new Promise(l=>setTimeout(l,150)),s.value=!s.value;const o=s.value?"dark":"light";document.documentElement.setAttribute("data-theme",o),localStorage.setItem("theme",o),n("theme-changed",s.value),setTimeout(()=>{r.value=!1},350)};return Pn(()=>{const o=localStorage.getItem("theme"),l=window.matchMedia("(prefers-color-scheme: dark)").matches,c=o?o==="dark":l;s.value=c;const u=c?"dark":"light";document.documentElement.setAttribute("data-theme",u),n("theme-changed",s.value)}),(o,l)=>(lt(),dt("button",{onClick:i,class:tn(["btn btn-circle btn-ghost theme-toggle",{"theme-switching":r.value}]),title:"切换主题"},[R("div",u4,[(lt(),dt("svg",{xmlns:"http://www.w3.org/2000/svg",class:tn(["absolute inset-0 w-6 h-6 transition-all duration-500 ease-in-out sun-icon",{"rotate-90 opacity-0":s.value,"rotate-0 opacity-100":!s.value}]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...l[0]||(l[0]=[R("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"},null,-1)])],2)),(lt(),dt("svg",{xmlns:"http://www.w3.org/2000/svg",class:tn(["absolute inset-0 w-6 h-6 transition-all duration-500 ease-in-out moon-icon",{"rotate-0 opacity-100":s.value,"-rotate-90 opacity-0":!s.value}]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...l[1]||(l[1]=[R("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"},null,-1)])],2))])],2))}}),f4=Qn(h4,[["__scopeId","data-v-e034e2d7"]]),d4={class:"modal-container"},p4={class:"modal-header"},m4={class:"header-info"},g4={class:"title-row"},y4={class:"modal-title"},_4={class:"badges"},v4={class:"version-badge"},w4={class:"category-badge"},E4={class:"author-row"},b4={class:"author-avatar"},T4={class:"author-name"},A4={key:0,class:"license-badge"},I4={class:"modal-body"},S4={class:"info-section"},R4={class:"description"},C4={class:"info-section"},P4={class:"version-grid"},x4={class:"version-item"},k4={class:"version-value min-version"},V4={class:"version-item"},D4={class:"version-value max-version"},N4={key:0,class:"info-section"},O4={class:"keywords"},M4={key:1,class:"info-section"},L4={class:"language-info"},F4={class:"language-tag"},U4={key:0,class:"multilingual"},B4={class:"info-section"},$4={class:"plugin-info-grid"},j4={class:"info-item"},q4={class:"info-item"},H4={class:"plugin-id"},z4={class:"modal-footer"},K4=qe({__name:"PluginDetailModal",props:{plugin:{},show:{type:Boolean}},emits:["close"],setup(e,{emit:t}){const n=e,s=t,r=h=>h.split(" ").map(d=>d.charAt(0)).join("").toUpperCase().slice(0,2),i=h=>{window.open(h,"_blank","noopener,noreferrer")},o=h=>{h.preventDefault()},l=()=>{document.body.style.overflow="hidden",document.body.style.paddingRight="0px",document.addEventListener("touchmove",o,{passive:!1}),document.addEventListener("wheel",o,{passive:!1})},c=()=>{document.body.style.overflow="",document.body.style.paddingRight="",document.removeEventListener("touchmove",o),document.removeEventListener("wheel",o)},u=h=>{h.key==="Escape"&&n.show&&s("close")};return cs(()=>n.show,h=>{h?(l(),document.addEventListener("keydown",u)):(c(),document.removeEventListener("keydown",u))},{immediate:!0}),Vr(()=>{c(),document.removeEventListener("keydown",u)}),(h,d)=>(lt(),Fa(u0,{to:"body"},[$t(vw,{name:"modal",appear:""},{default:Da(()=>{var m;return[h.show?(lt(),dt("div",{key:0,class:"modal-overlay",onClick:d[5]||(d[5]=mr(y=>h.$emit("close"),["self"]))},[R("div",d4,[R("div",{class:"modal-content",onClick:d[4]||(d[4]=mr(()=>{},["stop"]))},[R("header",p4,[R("div",m4,[R("div",g4,[R("h2",y4,_t(h.plugin.manifest.name),1),R("div",_4,[R("span",v4,"v"+_t(h.plugin.manifest.version),1),R("span",w4,_t(h.plugin.categoryDisplay),1)])]),R("div",E4,[R("div",b4,_t(r(h.plugin.manifest.author.name)),1),R("span",T4,_t(h.plugin.manifest.author.name),1),h.plugin.manifest.license?(lt(),dt("span",A4,_t(h.plugin.manifest.license),1)):Ht("",!0)])]),R("button",{class:"close-button",onClick:d[0]||(d[0]=y=>h.$emit("close")),"aria-label":"关闭"},[...d[6]||(d[6]=[R("svg",{viewBox:"0 0 24 24",width:"24",height:"24"},[R("path",{fill:"none",d:"M18 6L6 18M6 6l12 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1)])])]),R("main",I4,[R("section",S4,[d[7]||(d[7]=R("h3",{class:"section-title"},"📝 插件描述",-1)),R("p",R4,_t(h.plugin.manifest.description),1)]),R("section",C4,[d[10]||(d[10]=R("h3",{class:"section-title"},"🔧 版本兼容性",-1)),R("div",P4,[R("div",x4,[d[8]||(d[8]=R("label",null,"最低版本",-1)),R("span",k4,_t(h.plugin.manifest.host_application.min_version),1)]),R("div",V4,[d[9]||(d[9]=R("label",null,"最高版本",-1)),R("span",D4,_t(h.plugin.manifest.host_application.max_version||"最新版本"),1)])])]),(m=h.plugin.manifest.keywords)!=null&&m.length?(lt(),dt("section",N4,[d[11]||(d[11]=R("h3",{class:"section-title"},"🏷️ 关键词",-1)),R("div",O4,[(lt(!0),dt(Ae,null,Ji(h.plugin.manifest.keywords,y=>(lt(),dt("span",{key:y,class:"keyword-tag"},_t(y),1))),128))])])):Ht("",!0),h.plugin.manifest.default_locale?(lt(),dt("section",M4,[d[12]||(d[12]=R("h3",{class:"section-title"},"🌐 语言支持",-1)),R("div",L4,[R("span",F4,_t(h.plugin.manifest.default_locale),1),h.plugin.manifest.locales_path?(lt(),dt("span",U4," 支持多语言 ")):Ht("",!0)])])):Ht("",!0),R("section",B4,[d[15]||(d[15]=R("h3",{class:"section-title"},"📊 插件信息",-1)),R("div",$4,[R("div",j4,[d[13]||(d[13]=R("label",null,"清单版本",-1)),R("span",null,_t(h.plugin.manifest.manifest_version),1)]),R("div",q4,[d[14]||(d[14]=R("label",null,"插件ID",-1)),R("span",H4,_t(h.plugin.id),1)])])])]),R("footer",z4,[R("button",{class:"action-button secondary",onClick:d[1]||(d[1]=y=>h.$emit("close"))}," 关闭 "),h.plugin.manifest.homepage_url?(lt(),dt("button",{key:0,class:"action-button tertiary",onClick:d[2]||(d[2]=y=>i(h.plugin.manifest.homepage_url))},[...d[16]||(d[16]=[R("svg",{viewBox:"0 0 24 24",width:"16",height:"16"},[R("path",{fill:"none",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),R("span",null,"访问主页",-1)])])):Ht("",!0),h.plugin.manifest.repository_url?(lt(),dt("button",{key:1,class:"action-button primary",onClick:d[3]||(d[3]=y=>i(h.plugin.manifest.repository_url))},[...d[17]||(d[17]=[R("svg",{viewBox:"0 0 24 24",width:"16",height:"16"},[R("path",{fill:"currentColor",d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})],-1),R("span",null,"查看源码",-1)])])):Ht("",!0)])])])])):Ht("",!0)]}),_:1})]))}}),G4=Qn(K4,[["__scopeId","data-v-f145f416"]]),W4={class:"min-h-screen bg-base-200"},Q4={class:"navbar bg-base-100 shadow-lg"},J4={class:"container mx-auto"},X4={class:"flex-1"},Y4={class:"flex-none"},Z4={class:"container mx-auto px-4 py-8"},tP={class:"hero mb-8 fade-in"},eP={class:"hero-content text-center"},nP={class:"max-w-md slide-up"},sP={class:"stats stats-horizontal shadow scale-in"},rP={class:"stat"},iP={class:"stat-value text-primary"},oP={class:"stat"},aP={class:"stat-value text-secondary"},lP={class:"stat"},cP={class:"stat-value text-accent"},uP={class:"space-y-4 mb-8"},hP={class:"flex flex-col lg:flex-row gap-4 items-start lg:items-center justify-between"},fP={class:"flex flex-col sm:flex-row gap-4 items-start sm:items-center flex-wrap"},dP={class:"flex flex-wrap items-center gap-4 text-sm"},pP={class:"text-base-content/60"},mP={key:0,class:"flex flex-wrap gap-2"},gP={key:0,class:"badge badge-primary badge-lg gap-2 py-3 px-3"},yP={key:1,class:"badge badge-secondary badge-lg gap-2 py-3 px-3"},_P={key:2,class:"badge badge-accent badge-lg gap-2 py-3 px-3"},vP={key:0,class:"flex justify-center"},wP={key:1,class:"alert alert-error"},EP={key:2,class:"text-center py-12"},bP={class:"text-base-content/60 mb-4"},TP={class:"flex flex-wrap gap-2 justify-center"},AP={key:3,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 auto-rows-fr"},IP=qe({__name:"Home",setup(e){const t=Jt([]),n=Jt(!1),s=Jt(""),r=Jt(""),i=Jt("全部"),o=Jt(""),l=Jt(null),c=Jt({totalVisits:0,dailyVisits:0}),u=Ic.getInstance(),h=(Z,Y)=>{const Tt=Z.split(".").map(Number),ot=Y.split(".").map(Number),pt=Math.max(Tt.length,ot.length);for(let ee=0;ee<pt;ee++){const qt=Tt[ee]||0,xe=ot[ee]||0;if(qt>xe)return 1;if(qt<xe)return-1}return 0},d=(Z,Y)=>{const Tt=Z.manifest.host_application.min_version,ot=Z.manifest.host_application.max_version;return!(h(Y,Tt)<0||ot&&h(Y,ot)>0)},m=Xt(()=>u.getAllCategories()),y=Xt(()=>t.value.length),b=Xt(()=>Math.max(0,m.value.length-1)),P=Xt(()=>i.value!=="全部"||o.value!==""||r.value.trim()!==""),x=Xt(()=>{const Z={category:i.value,version:o.value,searchQuery:r.value};if(t.value.length===0)return[];let Y=t.value;if(Z.category&&Z.category!=="全部"&&(Y=Y.filter(Tt=>Tt.categoryDisplay===Z.category)),Z.version&&Z.version.trim()&&(Y=Y.filter(Tt=>d(Tt,Z.version))),Z.searchQuery&&Z.searchQuery.trim()){const Tt=Z.searchQuery.toLowerCase();Y=Y.filter(ot=>ot.manifest.name.toLowerCase().includes(Tt)||ot.manifest.description.toLowerCase().includes(Tt)||ot.manifest.author.name.toLowerCase().includes(Tt)||(ot.manifest.keywords||[]).some(pt=>pt.toLowerCase().includes(Tt)))}return Y}),M=async Z=>{try{const Y=Z.map(pt=>pt.id),[Tt,ot]=await Promise.all([as.getBatchPluginStats(Y),Promise.all(Y.map(pt=>as.getUserAction(pt)))]);Z.forEach((pt,ee)=>{const qt=Tt[pt.id];pt.stats={likes:(qt==null?void 0:qt.likes)||0,dislikes:(qt==null?void 0:qt.dislikes)||0,clickCount:(qt==null?void 0:qt.clickCount)||0,userAction:ot[ee]}})}catch(Y){console.error("Error loading plugin stats:",Y)}},O=async()=>{try{n.value=!0,s.value="";const Z=await u.fetchPlugins();t.value=Z,await M(t.value)}catch(Z){s.value=Z instanceof Error?Z.message:"加载失败"}finally{n.value=!1}},B=async()=>{try{const Z=await as.getSiteStats();c.value={totalVisits:Z.totalVisits,dailyVisits:Z.dailyVisits}}catch(Z){console.error("Error loading site stats:",Z)}},H=Z=>{r.value=Z,Z.trim()&&(i.value="全部",o.value="")},nt=Z=>{o.value=Z,Z&&(r.value="")},st=()=>{r.value=""},S=()=>{i.value="全部"},v=()=>{o.value=""},_=()=>{r.value="",i.value="全部",o.value=""},T=()=>r.value.trim()?"尝试使用不同的关键词搜索":o.value&&i.value!=="全部"?`当前分类"${i.value}"下没有支持${o.value}+版本的插件`:o.value?`没有找到支持${o.value}+版本的插件`:i.value!=="全部"?`当前分类"${i.value}"下暂无插件`:"暂无插件数据",C=Z=>{l.value=Z},A=()=>{l.value=null},w=Z=>{console.log("主题已切换到:",Z?"暗色":"明亮")};return Pn(async()=>{try{await as.recordSiteVisit(),await Promise.all([O(),B()])}catch(Z){console.error("Error during initialization:",Z)}}),(Z,Y)=>{const Tt=Cm("router-link");return lt(),dt("div",W4,[R("header",Q4,[R("div",J4,[R("div",X4,[$t(Tt,{to:"/",class:"btn btn-ghost text-xl"},{default:Da(()=>[...Y[3]||(Y[3]=[R("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[R("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})],-1),Se(" 麦麦插件商店 ",-1)])]),_:1})]),R("div",Y4,[$t(f4,{onThemeChanged:w})])])]),R("main",Z4,[R("div",tP,[R("div",eP,[R("div",nP,[Y[7]||(Y[7]=R("h1",{class:"text-4xl font-bold gradient-bg bg-clip-text text-transparent"}," 麦麦插件商店 ",-1)),Y[8]||(Y[8]=R("p",{class:"py-6 text-base-content/70"}," 发现并获取丰富的麦麦QQ机器人插件，让你的机器人更加强大 ",-1)),R("div",sP,[R("div",rP,[Y[4]||(Y[4]=R("div",{class:"stat-title"},"插件总数",-1)),R("div",iP,_t(y.value),1)]),R("div",oP,[Y[5]||(Y[5]=R("div",{class:"stat-title"},"分类数量",-1)),R("div",aP,_t(b.value),1)]),R("div",lP,[Y[6]||(Y[6]=R("div",{class:"stat-title"},"总访问量",-1)),R("div",cP,_t(c.value.totalVisits),1)])])])])]),R("div",uP,[R("div",hP,[R("div",fP,[$t(XC,{modelValue:i.value,"onUpdate:modelValue":Y[0]||(Y[0]=ot=>i.value=ot),categories:m.value,plugins:t.value},null,8,["modelValue","categories","plugins"]),$t(s4,{modelValue:o.value,"onUpdate:modelValue":Y[1]||(Y[1]=ot=>o.value=ot),plugins:t.value,onVersionChanged:nt},null,8,["modelValue","plugins"])]),$t(qC,{modelValue:r.value,"onUpdate:modelValue":Y[2]||(Y[2]=ot=>r.value=ot),onSearch:H},null,8,["modelValue"])]),R("div",dP,[R("div",pP," 显示 "+_t(x.value.length)+" 个插件 ",1),P.value?(lt(),dt("div",mP,[i.value!=="全部"?(lt(),dt("div",gP,[Se(" 分类: "+_t(i.value)+" ",1),R("button",{onClick:S,class:"btn btn-circle btn-xs btn-primary hover:btn-primary-focus opacity-90 hover:opacity-100"},[...Y[9]||(Y[9]=[R("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[R("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])])])):Ht("",!0),o.value?(lt(),dt("div",yP,[Se(" 版本: "+_t(o.value)+"+ ",1),R("button",{onClick:v,class:"btn btn-circle btn-xs btn-secondary hover:btn-secondary-focus opacity-90 hover:opacity-100"},[...Y[10]||(Y[10]=[R("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[R("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])])])):Ht("",!0),r.value?(lt(),dt("div",_P,[Se(" 搜索: "+_t(r.value)+" ",1),R("button",{onClick:st,class:"btn btn-circle btn-xs btn-accent hover:btn-accent-focus opacity-90 hover:opacity-100"},[...Y[11]||(Y[11]=[R("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[R("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])])])):Ht("",!0),R("button",{onClick:_,class:"btn btn-ghost btn-sm gap-2 hover:btn-ghost"},[...Y[12]||(Y[12]=[R("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[R("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),Se(" 清除全部 ",-1)])])])):Ht("",!0)])]),n.value?(lt(),dt("div",vP,[$t(c4,{message:"正在加载插件列表...",showProgress:!0})])):s.value?(lt(),dt("div",wP,[Y[13]||(Y[13]=R("svg",{xmlns:"http://www.w3.org/2000/svg",class:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24"},[R("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),R("span",null,_t(s.value),1),R("button",{onClick:O,class:"btn btn-sm"},"重试")])):x.value.length===0?(lt(),dt("div",EP,[Y[14]||(Y[14]=R("div",{class:"text-6xl mb-4"},"🔍",-1)),Y[15]||(Y[15]=R("h3",{class:"text-xl font-semibold mb-2"},"没有找到插件",-1)),R("p",bP,_t(T()),1),R("div",TP,[P.value?(lt(),dt("button",{key:0,onClick:_,class:"btn btn-primary"}," 清除所有筛选 ")):Ht("",!0),r.value?(lt(),dt("button",{key:1,onClick:st,class:"btn btn-outline"}," 清除搜索 ")):Ht("",!0)])])):(lt(),dt("div",AP,[(lt(!0),dt(Ae,null,Ji(x.value,(ot,pt)=>(lt(),dt("div",{key:ot.id,class:"grid-item flex",style:Wi({"animation-delay":pt*.1+"s"})},[$t(BC,{plugin:ot,onShowDetail:C,class:"w-full"},null,8,["plugin"])],4))),128))]))]),l.value?(lt(),Fa(G4,{key:0,plugin:l.value,show:!0,onClose:A},null,8,["plugin"])):Ht("",!0),Y[16]||(Y[16]=R("footer",{class:"footer footer-center p-10 bg-base-200 text-base-content"},[R("aside",null,[R("p",{class:"font-bold"}," 麦麦插件商店 "),R("p",null,"为麦麦QQ机器人提供插件展示和分发服务"),R("p",null,"Copyright © 2024 - All right reserved")])],-1))])}}}),SP={class:"min-h-screen bg-base-200 flex items-center justify-center"},RP={class:"text-center p-8"},CP={class:"mt-12 animate-fade-in-up animation-delay-800"},PP={class:"flex flex-wrap justify-center gap-2"},xP=qe({__name:"NotFound",setup(e){const t=Z1(),n=()=>{t.push("/")},s=()=>{window.history.length>1?t.go(-1):t.push("/")};return(r,i)=>{const o=Cm("router-link");return lt(),dt("div",SP,[R("div",RP,[i[8]||(i[8]=Tr('<div class="relative mb-8" data-v-0ea4392e><div class="absolute inset-0 flex items-center justify-center" data-v-0ea4392e><div class="w-64 h-64 bg-primary/10 rounded-full animate-pulse" data-v-0ea4392e></div></div><div class="absolute inset-0 flex items-center justify-center" data-v-0ea4392e><div class="w-48 h-48 bg-secondary/10 rounded-full animate-pulse animation-delay-500" data-v-0ea4392e></div></div><div class="absolute inset-0 flex items-center justify-center" data-v-0ea4392e><div class="w-32 h-32 bg-accent/10 rounded-full animate-pulse animation-delay-1000" data-v-0ea4392e></div></div><div class="relative z-10 select-none" data-v-0ea4392e><h1 class="text-9xl font-black text-primary/80 leading-none tracking-wider" data-v-0ea4392e> 404 </h1></div><div class="absolute top-4 left-8 w-4 h-4 bg-primary rounded-full animate-bounce animation-delay-300" data-v-0ea4392e></div><div class="absolute top-12 right-12 w-3 h-3 bg-secondary rounded-full animate-bounce animation-delay-700" data-v-0ea4392e></div><div class="absolute bottom-8 left-16 w-2 h-2 bg-accent rounded-full animate-bounce animation-delay-1200" data-v-0ea4392e></div><div class="absolute bottom-4 right-8 w-5 h-5 bg-warning rounded-full animate-bounce animation-delay-1500" data-v-0ea4392e></div></div><div class="max-w-md mx-auto mb-8 space-y-4" data-v-0ea4392e><h2 class="text-3xl font-bold text-base-content mb-4 animate-fade-in-up" data-v-0ea4392e> 页面未找到 </h2><p class="text-lg text-base-content/70 animate-fade-in-up animation-delay-200" data-v-0ea4392e> 抱歉，您访问的页面不存在或已被移动 </p><p class="text-sm text-base-content/60 animate-fade-in-up animation-delay-400" data-v-0ea4392e> 可能是URL输入错误，或者页面已经被删除 </p></div>',2)),R("div",{class:"flex flex-col sm:flex-row gap-4 justify-center items-center animate-fade-in-up animation-delay-600"},[R("button",{onClick:n,class:"btn btn-primary btn-lg gap-2 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105"},[...i[0]||(i[0]=[R("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[R("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})],-1),Se(" 返回首页 ",-1)])]),R("button",{onClick:s,class:"btn btn-outline btn-lg gap-2 hover:scale-105 transition-all duration-300"},[...i[1]||(i[1]=[R("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[R("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),Se(" 返回上页 ",-1)])])]),R("div",CP,[i[7]||(i[7]=R("p",{class:"text-sm text-base-content/60 mb-4"},"您可能在寻找：",-1)),R("div",PP,[$t(o,{to:"/",class:"link link-primary text-sm hover:underline"},{default:Da(()=>[...i[2]||(i[2]=[Se(" 插件商店首页 ",-1)])]),_:1}),i[3]||(i[3]=R("span",{class:"text-base-content/40"},"•",-1)),i[4]||(i[4]=R("a",{href:"https://github.com/MaiM-with-u/MaiBot",target:"_blank",rel:"noopener noreferrer",class:"link link-secondary text-sm hover:underline"}," 麦麦QQ机器人 ",-1)),i[5]||(i[5]=R("span",{class:"text-base-content/40"},"•",-1)),i[6]||(i[6]=R("a",{href:"https://github.com/DrSmoothl/plugin-repo",target:"_blank",rel:"noopener noreferrer",class:"link link-accent text-sm hover:underline"}," 插件仓库 ",-1))])]),i[9]||(i[9]=Tr('<div class="mt-16 opacity-50" data-v-0ea4392e><div class="flex justify-center items-center space-x-2 text-base-content/40" data-v-0ea4392e><div class="w-2 h-2 bg-current rounded-full animate-pulse" data-v-0ea4392e></div><div class="w-2 h-2 bg-current rounded-full animate-pulse animation-delay-300" data-v-0ea4392e></div><div class="w-2 h-2 bg-current rounded-full animate-pulse animation-delay-600" data-v-0ea4392e></div></div></div>',1))])])}}}),Mp=Qn(xP,[["__scopeId","data-v-0ea4392e"]]),kP=X1({history:R1("/"),routes:[{path:"/",name:"home",component:IP},{path:"/404",name:"not-found",component:Mp},{path:"/:pathMatch(.*)*",name:"catch-all",component:Mp}]});Ww(_E).use(kP).mount("#app");
